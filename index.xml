<?xml version="1.0" encoding="utf-8" standalone="yes" ?> <rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>htr3n&#39;s</title><link>https://htr3n.github.io/<description>Recent content on htr3n&#39;s</description><generator>Hugo -- gohugo.io</generator><language>en</language><lastbuilddate>Tue, 27 Nov 2018 00:00:00 +0000</lastbuilddate><atom:link href="https://htr3n.github.io/index.xml" rel="self" type="application/rss+xml"><item><title>Spring Boot properties issues with trailing whitespaces</title><link>https://htr3n.github.io/2018/11/spring-boot-trailing-whitespaces/<pubdate>Tue, 27 Nov 2018 00:00:00 +0000</pubdate><guid>023e64d741e3fdd3bceae627167e2095</guid><description>&lt;blockquote&gt; &lt;p&gt;&lt;strong&gt;TL;DR:&lt;/strong&gt;&lt;br&gt;Spring Boot does not trim off the &lt;a href=&#34;#root-causes&#34;&gt;trailing whitespaces in &lt;code&gt;*.properties&lt;/code&gt;&lt;/a&gt; that in turn might lead to some &lt;a href=&#34;#problem&#34;&gt;unexpected errors&lt;/a&gt;. As the Spring development team decides to &lt;a href=&#34;https://github.com/spring-projects/spring-boot/issues/4106#issuecomment-173278825&#34;&gt;not fix this issue&lt;/a&gt;, we can &lt;a href=&#34;#solutions&#34;&gt;configure code editors&lt;/a&gt; to avoid some similar problems.&lt;/p&gt; &lt;/blockquote&gt; &lt;h2 id=&#34;fun&#34;&gt;The fun &amp;hellip;&lt;/h2&gt; &lt;p&gt;Coming back working with Spring after few years, I was thrilled trying out Spring Boot 2 with its superb cool auto-configurations and many more. It&amp;rsquo;s a lot much more fun to work with than Spring 3 used in &lt;a href=&#34;https://github.com/htr3n/loan-approval-portal&#34;&gt;some&lt;/a&gt; of my previous projects.&lt;/p&gt; &lt;h2 id=&#34;problem&#34;&gt;, the problem &amp;hellip;&lt;/h2&gt; &lt;p&gt;When tinkering with Spring Boot, I found a half-funny half-annoying issue that made one of my Spring apps failed to launch. As the project is rather clumpy and full of experimenting code, here I will replicate this issue in a smaller and simpler scale.&lt;/p&gt; &lt;p&gt;Let&amp;rsquo;s create a small Spring Boot project with JPA and H2. We can either use &lt;a href=&#34;https://start.spring.io/&#34;&gt;Spring Initialzr&lt;/a&gt;, &lt;a href=&#34;https://docs.spring.io/spring-boot/docs/current/reference/html/cli-using-the-cli.html&#34;&gt;Spring Boot CLI&lt;/a&gt;, or IDE such as IntelliJ IDEA, Eclipse or NetBeans. To keep it simple, I use Spring Boot CLI that &lt;a href=&#34;https://docs.spring.io/spring-boot/docs/current/reference/html/getting-started-installing-spring-boot.html#getting-started-installing-the-cli&#34;&gt;can be easily installed&lt;/a&gt;.&lt;/p&gt; &lt;pre&gt;&lt;code class=&#34;language-sh&#34;&gt;$ spring version Spring CLI v2.1.0.RELEASE $ spring init --dependencies=data-jpa,h2 spring-boot-trailing-spaces Using service at https://start.spring.io Project extracted to &#39;/dev/spring-framework/spring-boot-trailing-spaces&#39; &lt;/code&gt;&lt;/pre&gt; &lt;p&gt;The newly created Spring application can be launched with Maven.&lt;/p&gt; &lt;pre&gt;&lt;code class=&#34;language-sh&#34;&gt;$ cd spring-boot-trailing-spaces $ mvn spring-boot:run ... &lt;/code&gt;&lt;/pre&gt; &lt;p&gt;There should be no problem as we have not made any changes. Now, open &amp;ldquo;&lt;code&gt;src/main/resources/application.properties&lt;/code&gt;&amp;rdquo; with an editor, then copy and paste the following code. Promise me that you don&amp;rsquo;t change the pasted code ;)&lt;/p&gt; &lt;pre&gt;&lt;code class=&#34;language-properties&#34;&gt;spring.datasource.url=jdbc:h2:mem:testdb spring.datasource.driverClassName=org.h2.Driver spring.datasource.username=sa spring.datasource.password= &lt;/code&gt;&lt;/pre&gt; &lt;p&gt;These lines are typical data source configuration of an embedded H2 database engine that you might have seen around or used many times. Unfortunately, this time they will crash the Spring application.&lt;/p&gt; &lt;pre&gt;&lt;code class=&#34;language-sh&#34;&gt;$ mvn spring-boot:run ... 2018-11-27 21:20:54.289 ERROR 92868 --- [ main] o.s.boot.SpringApplication : Application run failed org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name &#39;org.springframework.boot.autoconfigure.orm.jpa.HibernateJpaConfiguration&#39;: Unsatisfied dependency expressed through constructor parameter 0; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name &#39;dataSource&#39; defined in class path resource [org/springframework/boot/autoconfigure/jdbc/DataSourceConfiguration$Hikari.class]: Bean instantiation via factory method failed; nested exception is org.springframework.beans.BeanInstantiationException: Failed to instantiate [com.zaxxer.hikari.HikariDataSource]: Factory method &#39;dataSource&#39; threw exception; nested exception is java.lang.IllegalStateException: Cannot load driver class: org.h2.Driver &lt;/code&gt;&lt;/pre&gt; &lt;p&gt;Walking across the lengthy exception stack and error messages, the main culprit seems to be &amp;ldquo;&lt;em&gt;Cannot load driver class: org.h2.Driver&lt;/em&gt;&amp;rdquo;.&lt;/p&gt; &lt;p&gt;Why is that?&lt;/p&gt; &lt;h2 id=&#34;root-causes&#34;&gt;, the root causes? &amp;hellip;&lt;/h2&gt; &lt;p&gt;The very first thing came to my mind is to check whether H2 jar is included properly in the classpath.&lt;/p&gt; &lt;pre&gt;&lt;code class=&#34;language-sh&#34;&gt;$ mvn dependency:tree ... [INFO] +- com.h2database:h2:jar:1.4.197:runtime ... &lt;/code&gt;&lt;/pre&gt; &lt;p&gt;Yup, it&amp;rsquo;s there!&lt;/p&gt; &lt;p&gt;You can try further on, like I did, to remove &lt;code&gt;$HOME/.m2&lt;/code&gt; and re-run Maven or even restart the machine (but the app still doesn&amp;rsquo;t work!!!).&lt;/p&gt; &lt;p&gt;I have searched around for this specific issue and found some similar or the same exception, for instance, &lt;a href=&#34;https://stackoverflow.com/a/51193609&#34;&gt;here&lt;/a&gt;, &lt;a href=&#34;https://stackoverflow.com/q/40137347&#34;&gt;here&lt;/a&gt;, &lt;a href=&#34;https://stackoverflow.com/q/4008011&#34;&gt;here&lt;/a&gt; or &lt;a href=&#34;https://stackoverflow.com/q/43616563&#34;&gt;here&lt;/a&gt;. None of the solutions there can fix it.&lt;/p&gt; &lt;p&gt;It took me nearly half an hour to figure out the root cause. That is the single &lt;em&gt;trailing space&lt;/em&gt; at the end of &lt;code&gt;org.h2.Driver&lt;/code&gt;. Here I intentionally added in order to replicate exactly the original problem in my experimenting project. And the fault was mine who just lazily copied and pasted these few lines of Spring Boot configurations. After I removed all trailing spaces, the error disappeared.&lt;/p&gt; &lt;p&gt;Voilà!&lt;/p&gt; &lt;h2 id=&#34;solutions&#34;&gt;&amp;hellip; and the solutions?!&lt;/h2&gt; &lt;p&gt;No copy &amp;amp; paste please, you might say ;)&lt;/p&gt; &lt;p&gt;&lt;img src=&#34;no-copy-paste.jpg&#34; alt=&#34;&#34; /&gt;&lt;/p&gt; &lt;p&gt;I would blame the Pivotal development team (just kidding ;) as they should have handled such a trivial issue better because trailing whitespaces, by default in most editors, are not always visible nor printable. Indeed, trailing whitespaces in Spring properties has driven many developers crazy &lt;a href=&#34;https://github.com/spring-projects/spring-boot/issues/7251&#34;&gt;here&lt;/a&gt;, &lt;a href=&#34;https://github.com/spring-projects/spring-boot/issues/7251&#34;&gt;here&lt;/a&gt;, &lt;a href=&#34;https://github.com/spring-projects/spring-boot/issues/13967&#34;&gt;here&lt;/a&gt;, &lt;a href=&#34;https://github.com/spring-projects/spring-boot/issues/5421&#34;&gt;here&lt;/a&gt; or &lt;a href=&#34;https://github.com/spring-projects/spring-boot/issues/4106&#34;&gt;here&lt;/a&gt;. Note that it&amp;rsquo;s for now &lt;a href=&#34;https://github.com/spring-projects/spring-boot/issues/4106&#34;&gt;official&lt;/a&gt; that the Spring Boot team won&amp;rsquo;t fix this because they &lt;a href=&#34;https://github.com/spring-projects/spring-boot/issues/4106#issuecomment-173278825&#34;&gt;cannot safely trim properties&lt;/a&gt;. So, it&amp;rsquo;s our responsibilities to take care of these whitespaces.&lt;/p&gt; &lt;blockquote&gt; &lt;p&gt;Sitenote: Whitespaces can also become &lt;a href=&#34;https://blog.codinghorror.com/whitespace-the-silent-killer/&#34;&gt;worst enemies to source code controls&lt;/a&gt; (but not all whitespaces are born equal, for instance, two continuous trailing spaces in some flavours of &lt;a href=&#34;https://daringfireball.net/projects/markdown/&#34;&gt;Markdown&lt;/a&gt; should be persisted as they are translated into HTML line-breaks &lt;code&gt;&amp;lt;br&amp;gt;&lt;/code&gt;).&lt;/p&gt; &lt;/blockquote&gt; &lt;p&gt;Fortunately, most of code editors somehow can help to remedy the aforementioned issue either with built-in features or extensions. There are two possible non-exclusive methods (which can be combined of course)&lt;/p&gt; &lt;ul&gt; &lt;li&gt;&lt;p&gt;&lt;strong&gt;M1&lt;/strong&gt;. Showing or highlighting whitespaces&lt;/p&gt;&lt;/li&gt; &lt;li&gt;&lt;p&gt;&lt;strong&gt;M2&lt;/strong&gt;. (Automatically) trimming off whitespaces&lt;/p&gt;&lt;/li&gt; &lt;/ul&gt; &lt;p&gt;For the first method, we configure the editors to force hard-to-see non-printable characters like tabs and spaces become visible. For instance, the problematic example above is shown in Visual Studio Code with the extension &lt;a href=&#34;https://marketplace.visualstudio.com/items?itemName=shardulm94.trailing-spaces&#34;&gt;Trailing Spaces&lt;/a&gt; helps to highlight the trailing whitespaces in red. This way might be a bit UI-intrusive as highlighted whitespaces everywhere can distract many of us. I personally don&amp;rsquo;t really like having the whitespaces and tabs messing up with my code structure.&lt;/p&gt; &lt;p&gt;&lt;img src=&#34;trailing-space.png&#34; alt=&#34;Trailing spaces in code editor&#34; /&gt;&lt;/p&gt; &lt;p&gt;The second method can be automatic or manual in which the editors (maybe with support from extensions) can remove the whitespaces during saving or via some editing commands. However, beware the issues with Markdown trailing whitespaces, we should use this option per language specific settings if possible.&lt;/p&gt; &lt;p&gt;We will examine few popular code editors (please add more of yours in the comment) regarding these two methods.&lt;/p&gt; &lt;ul&gt; &lt;li&gt;&lt;p&gt;&lt;a href=&#34;https://atom.io/&#34;&gt;Atom&lt;/a&gt;&lt;/p&gt; &lt;ul&gt; &lt;li&gt;Either &lt;span class=&#34;menu&#34;&gt;Preferences ▸ Show Invisibles&lt;/span&gt; or &lt;code&gt;config.cson&lt;/code&gt;&lt;/li&gt; &lt;/ul&gt; &lt;pre&gt;&lt;code class=&#34;language-json&#34;&gt;&amp;quot;*&amp;quot;: editor: ... showInvisibles: true &lt;/code&gt;&lt;/pre&gt;&lt;/li&gt; &lt;li&gt;&lt;p&gt;&lt;a href=&#34;https://www.eclipse.org/&#34;&gt;Eclipse&lt;/a&gt;&lt;/p&gt; &lt;ul&gt; &lt;li&gt;(&lt;strong&gt;M1&lt;/strong&gt;) From version 3.7+: &lt;span class=&#34;menu&#34;&gt;Preferences ▸ General ▸ Editors ▸ Text Editors &lt;/span&gt; : Turn on &amp;ldquo;&lt;em&gt;Show whitespace characters&lt;/em&gt;&amp;rdquo; and fine-tune the option via &amp;ldquo;&lt;em&gt;configure visibility&lt;/em&gt;&amp;ldquo;&lt;/li&gt; &lt;li&gt;(&lt;strong&gt;M2&lt;/strong&gt;) It&amp;rsquo;s rather tedious in Eclipse as many people have already complained. It&amp;rsquo;s perhaps due to the nature of Eclipse as a platform for several editors and plugins working together. IMHO, Eclipse should offer a common option to remove trailing whitespaces for all editors in the same level and place as &amp;ldquo;&lt;em&gt;Show whitespace characters&lt;/em&gt;&amp;rdquo; above. Each kind of editor then might offer specific and optimal ways for certain file types. Unfortunately, for now we have to configure for each file type editor or formatter. For instance, Java editor &lt;span class=&#34;menu&#34;&gt;Preferences ▸ Java ▸ Editor ▸ Save Actions&lt;/span&gt; , check &amp;ldquo;&lt;em&gt;Additional actions&lt;/em&gt;&amp;rdquo;, choose &amp;ldquo;&lt;em&gt;Configure&lt;/em&gt;&amp;rdquo;. Next, in the &amp;ldquo;&lt;em&gt;Code Organizing&lt;/em&gt;&amp;rdquo; tab check &amp;ldquo;&lt;em&gt;Remove trailing whitespace&lt;/em&gt;&amp;rdquo;. Unfortunately, properties file in our example does not provide such options in Eclipse.&lt;/li&gt; &lt;li&gt;(&lt;strong&gt;M2&lt;/strong&gt;) You may want to use the plugin &lt;a href=&#34;https://github.com/iloveeclipse/anyedittools&#34;&gt;AnyEdit Tools&lt;/a&gt; to clean up trailing whitespaces for all file types: &lt;span class=&#34;menu&#34;&gt;Preferences ▸ AnyEdit Tools ▸ Auto ▸ Convert ▸ Remove trailing whitespace&lt;/span&gt; &lt;/li&gt; &lt;li&gt;(&lt;strong&gt;M2&lt;/strong&gt;) A universal approach, also a little more difficult, is to use &amp;ldquo;&lt;em&gt;Search &amp;amp; Replace&lt;/em&gt;&amp;rdquo; to search with regular expressions for all of &lt;code&gt;&amp;quot;[\t ]+$&amp;quot;&lt;/code&gt; (i.e. more than one whitespaces and/or tabs, please note the whitespace between &lt;code&gt;\t&lt;/code&gt; and &lt;code&gt;]&lt;/code&gt;) and replace them with&lt;code&gt;&amp;quot;&amp;quot;&lt;/code&gt; (blank/empty).&lt;/li&gt; &lt;/ul&gt;&lt;/li&gt; &lt;li&gt;&lt;p&gt;&lt;a href=&#34;https://www.jetbrains.com/idea/&#34;&gt;IntelliJ IDEA&lt;/a&gt;&lt;/p&gt; &lt;ul&gt; &lt;li&gt;(&lt;strong&gt;M1&lt;/strong&gt;) &lt;span class=&#34;menu&#34;&gt;Preferences ▸ Editor ▸ Appearance ▸ Show whitespaces&lt;/span&gt; or &lt;span class=&#34;menu&#34;&gt;View ▸ Active Editor ▸ Show whitespaces&lt;/span&gt; &lt;/li&gt; &lt;li&gt;(&lt;strong&gt;M2&lt;/strong&gt;) Since 2017.2 and later, there is an option &lt;span class=&#34;menu&#34;&gt;Preferences ▸ Editor ▸ General ▸ Strip trailing whitespaces on Save&lt;/span&gt; with &amp;ldquo;&lt;code&gt;All&lt;/code&gt;&amp;rdquo;, &amp;ldquo;&lt;code&gt;Modified Lines&lt;/code&gt;&amp;rdquo; or &amp;ldquo;&lt;code&gt;None&lt;/code&gt;&amp;rdquo; but the IDE does not quite behave, i.e. I chose &amp;ldquo;&lt;code&gt;All&lt;/code&gt;&amp;rdquo; but the trailing spaces are still there after saving. It&amp;rsquo;s rather lame and embarrassing for such a highly praised and expensive IDEs.&lt;/li&gt; &lt;/ul&gt;&lt;/li&gt; &lt;li&gt;&lt;p&gt;&lt;a href=&#34;https://www.sublimetext.com/&#34;&gt;Sublime Text&lt;/a&gt;&lt;/p&gt; &lt;ul&gt; &lt;li&gt;&lt;p&gt;(&lt;strong&gt;M1&lt;/strong&gt;) &lt;span class=&#34;menu&#34;&gt;Preferences ▸ Preferences.sublime-settings—User&lt;/span&gt; : &lt;code&gt;&amp;quot;draw_white_space&amp;quot;: &amp;quot;all&amp;quot;&lt;/code&gt; (show all whitespaces) or &lt;code&gt;&amp;quot;draw_white_space&amp;quot;: &amp;quot;selection&amp;quot;&lt;/code&gt; (only show within the selection)&lt;/p&gt;&lt;/li&gt; &lt;li&gt;&lt;p&gt;(&lt;strong&gt;M2&lt;/strong&gt;) &lt;span class=&#34;menu&#34;&gt;Preferences ▸ Preferences.sublime-settings—User&lt;/span&gt; : &lt;code&gt;&amp;quot;trim_trailing_white_space_on_save&amp;quot;: false&lt;/code&gt;&lt;/p&gt;&lt;/li&gt; &lt;li&gt;&lt;p&gt;(&lt;strong&gt;M2&lt;/strong&gt;) Use the plug-in &lt;a href=&#34;https://github.com/jonlabelle/Trimmer&#34;&gt;Trimmer&lt;/a&gt; for manually cleaning up whitespaces&lt;/p&gt;&lt;/li&gt; &lt;/ul&gt;&lt;/li&gt; &lt;li&gt;&lt;p&gt;&lt;a href=&#34;https://code.visualstudio.com/&#34;&gt;Visual Studio Code&lt;/a&gt;&lt;/p&gt; &lt;ul&gt; &lt;li&gt;(&lt;strong&gt;M1&lt;/strong&gt;) Either &lt;span class=&#34;menu&#34;&gt;Preferences ▸ Settings ▸ Render Whitespace&lt;/span&gt; or &lt;code&gt;settings.json&lt;/code&gt; ▸ &lt;code&gt;&amp;quot;editor.renderWhitespace&amp;quot;: &amp;quot;boundary&amp;quot;&lt;/code&gt; (to render whitespaces everywhere except single space between words) or &lt;code&gt;&amp;quot;editor.renderWhitespace&amp;quot;: &amp;quot;all&amp;quot;&lt;/code&gt; (to render all whitespaces)&lt;/li&gt; &lt;li&gt;(&lt;strong&gt;M2&lt;/strong&gt;) Either &lt;span class=&#34;menu&#34;&gt;Preferences ▸ Settings ▸ Render Whitespace&lt;/span&gt; or &lt;code&gt;settings.json&lt;/code&gt; ▸ &lt;code&gt;&amp;quot;files.trimTrailingWhitespace&amp;quot;: true&lt;/code&gt;&lt;/li&gt; &lt;li&gt;(&lt;strong&gt;M1+2&lt;/strong&gt;) I use the extension &lt;a href=&#34;https://marketplace.visualstudio.com/items?itemName=shardulm94.trailing-spaces&#34;&gt;Trailing Spaces&lt;/a&gt; that even goes further with red colour highlighting of whitespaces and provides extra commands for (manually) trimming whitespaces.&lt;/li&gt; &lt;/ul&gt;&lt;/li&gt; &lt;li&gt;&lt;p&gt;&lt;a href=&#34;https://www.vim.org/&#34;&gt;Vim&lt;/a&gt;&lt;/p&gt; &lt;ul&gt; &lt;li&gt;You can follow the tips on &lt;a href=&#34;http://vim.wikia.com/wiki/Highlight_unwanted_spaces&#34;&gt;highlighting unwanted spaces&lt;/a&gt; and &lt;a href=&#34;http://vim.wikia.com/wiki/Remove_unwanted_spaces&#34;&gt;removing unwanted spaces&lt;/a&gt;, some other &lt;a href=&#34;https://vi.stackexchange.com/a/2285&#34;&gt;advanced tips on Vi and Vim SE&lt;/a&gt;, or using a plug-in that can highlight trailing whitespaces and provide commands to strip all of them&lt;/li&gt; &lt;li&gt;(&lt;strong&gt;M1+2&lt;/strong&gt;) &lt;a href=&#34;https://github.com/bronson/vim-trailing-whitespace&#34;&gt;vim-trailing-whitespace&lt;/a&gt; highlighting and trimming with &lt;code&gt;:FixWhitespace&lt;/code&gt;&lt;/li&gt; &lt;li&gt;(&lt;strong&gt;M1+2&lt;/strong&gt;) &lt;a href=&#34;ntpeters/vim-better-whitespace&#34;&gt;ntpeters/vim-better-whitespace&lt;/a&gt; highlighting and trimming with &lt;code&gt;:StripWhitespace&lt;/code&gt;&lt;/li&gt; &lt;li&gt;(&lt;strong&gt;M1&lt;/strong&gt;) &lt;a href=&#34;https://www.vim.org/scripts/script.php?script_id=3966&#34;&gt;ShowTrailingWhitespace&lt;/a&gt;: mostly trimming whitespaces&lt;/li&gt; &lt;li&gt;(&lt;strong&gt;M2&lt;/strong&gt;) &lt;a href=&#34;https://www.vim.org/scripts/script.php?script_id=3967&#34;&gt;DeleteTrailingWhitespace&lt;/a&gt;: removing trailing whitespaces with &lt;code&gt;:DeleteTrailingWhitespace&lt;/code&gt; or automatically when the buffer is saved&lt;/li&gt; &lt;/ul&gt;&lt;/li&gt; &lt;/ul&gt; &lt;p&gt;For the sake of completeness, there are some editor-independent solutions too.&lt;/p&gt; &lt;ul&gt; &lt;li&gt;&lt;p&gt;&lt;a href=&#34;https://www.gnu.org/software/sed/manual/sed.html&#34;&gt;sed&amp;mdash;a stream editor&lt;/a&gt; (credits to Tim Pote&amp;rsquo;s excellent &lt;a href=&#34;https://stackoverflow.com/a/10711226/339302&#34;&gt;SO answer&lt;/a&gt;)&lt;/p&gt; &lt;ul&gt; &lt;li&gt;For POSIX&lt;/li&gt; &lt;/ul&gt;&lt;/li&gt; &lt;/ul&gt; &lt;pre&gt;&lt;code class=&#34;language-sh&#34;&gt; find . -type f -name &#39;*.properties&#39; -exec sed --in-place &#39;s/[[:space:]]\+$//&#39; {} \+ &lt;/code&gt;&lt;/pre&gt; &lt;ul&gt; &lt;li&gt;For macOS/BSD&lt;/li&gt; &lt;/ul&gt; &lt;pre&gt;&lt;code class=&#34;language-sh&#34;&gt; find . -iname &#39;*.properties&#39; -type f -exec sed -i &#39;&#39; &#39;s/[[:space:]]\{1,\}$//&#39; {} \+ &lt;/code&gt;&lt;/pre&gt; &lt;p&gt;Wow, quite a long post for such a trivial issue, eh?! Thanks for reading to the end and I hope that my wasted time and effort here would save some of yours in future.&lt;/p&gt; &lt;p&gt;Cheers!&lt;/p&gt;</description></item><item><title>Back to basics: Test-driven Spring JDBC</title><link>https://htr3n.github.io/2018/11/test-driven-spring-jdbc/<pubdate>Tue, 20 Nov 2018 00:00:00 +0000</pubdate><guid>a359f1190fd351cad5f94a10fb459d24</guid><description>&lt;p&gt;&lt;a href=&#34;https://spring.io&#34;&gt;Spring&lt;/a&gt; is a popular heavy-weight framework for developing Java/Groovy based applications. Its rich libraries and software stack can cover from front-end to back-end development. In 2009 I used Spring Framework 3 to develop &lt;a href=&#34;https://github.com/htr3n/loan-approval-portal&#34;&gt;web services and MVC+Hibernate portal&lt;/a&gt; for a fictious &lt;a href=&#34;https://github.com/htr3n/loan-approval&#34;&gt;loan approval process&lt;/a&gt;. Despite a tad steep learning-curve, I could manage to get the services and portal up and running and integrated with third-party libraries quite smoothly.&lt;/p&gt; &lt;p&gt;In my prevous projects, I mostly used Spring with Hibernate and/or JPA for higher abstraction level of data access. Coming back working with Spring after few years, I want to delve into lower layer of data access to better understand what behind the scene of Hibernate/JPA abstraction layers. This post is sort of my note-to-self on Spring and JDBC (Java Database Connectivity), especially on &lt;a href=&#34;https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/jdbc/core/JdbcTemplate.html&#34;&gt;JdbcTemplate&lt;/a&gt;. Besides, it also reports a tricky case with retrieving data with &lt;code&gt;JdbcTemplate.queryForXXX()&lt;/code&gt; employed by several on-line tutorials which was efficiently exposed by appropriate tests.&lt;/p&gt; &lt;h2 id=&#34;background&#34;&gt;Background&lt;/h2&gt; &lt;p&gt;JDBC defines standard application programming interface (API) based on that a client can access a database. Each database vendor often provides low-level vendor-specific database drivers based on JDBC predefined interfaces. JDBC is considered the lowest recommended abstraction level to work with databases in Java.&lt;/p&gt; &lt;p&gt;In short, a typical approach to database access using JDBC comprises these basic steps:&lt;/p&gt; &lt;ol&gt; &lt;li&gt;Obtain a &lt;a href=&#34;https://docs.oracle.com/javase/8/docs/api/java/sql/Connection.html&#34;&gt;Connection&lt;/a&gt;, e.g. via &lt;a href=&#34;https://docs.oracle.com/javase/8/docs/api/java/sql/DriverManager.html&#34;&gt;DriverManager&lt;/a&gt; or &lt;a href=&#34;https://docs.oracle.com/javase/8/docs/api/javax/sql/DataSource.html&#34;&gt;DataSource&lt;/a&gt;&lt;/li&gt; &lt;li&gt;Create an instance of type &lt;a href=&#34;https://docs.oracle.com/javase/8/docs/api/java/sql/Statement.html&#34;&gt;Statement&lt;/a&gt; or its sub-types such as &lt;a href=&#34;https://docs.oracle.com/javase/8/docs/api/java/sql/CallableStatement.html&#34;&gt;CallableStatement&lt;/a&gt;, &lt;a href=&#34;https://docs.oracle.com/javase/8/docs/api/java/sql/PreparedStatement.html&#34;&gt;PreparedStatement&lt;/a&gt;&lt;/li&gt; &lt;li&gt;Use the aforementioned statement to execute database queries&lt;/li&gt; &lt;li&gt;Retrieve and process the &lt;a href=&#34;https://docs.oracle.com/javase/8/docs/api/java/sql/ResultSet.html&#34;&gt;ResultSet&lt;/a&gt; (if any)&lt;/li&gt; &lt;li&gt;Close the statement and release all resources (connection is &lt;a href=&#34;https://docs.oracle.com/javase/8/docs/api/java/lang/AutoCloseable.html&#34;&gt;AutoCloseable&lt;/a&gt;)&lt;/li&gt; &lt;/ol&gt; &lt;p&gt;Along these steps, we should also handle any &lt;a href=&#34;https://docs.oracle.com/javase/tutorial/jdbc/basics/sqlexception.html&#34;&gt;database exceptions&lt;/a&gt; as well. You can find more details on JDBC programming &lt;a href=&#34;https://docs.oracle.com/javase/tutorial/jdbc/basics/index.html&#34;&gt;here&lt;/a&gt;. Here is a simple example of accessing databases using JDBC and &lt;a href=&#34;https://docs.oracle.com/javase/tutorial/essential/exceptions/tryResourceClose.html&#34;&gt;&lt;em&gt;try-with-resources&lt;/em&gt;&lt;/a&gt;.&lt;/p&gt; &lt;script type=&#34;application/javascript&#34; src=&#34;//gist.github.com/htr3n/3c096c5de35a6c1b2564d8d0459b74fa.js?file=JDBC.java&#34;&gt;&lt;/script&gt; &lt;p&gt;Fortunately, Spring, via &lt;a href=&#34;https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/jdbc/core/JdbcTemplate.html&#34;&gt;JdbcTemplate&lt;/a&gt;, ofters a higher level of abstraction on top of Java JDBC that would save us a lot of boiler plate code and enable smooth integration with the rest of Spring framework&amp;rsquo;s ecosystem. As such, we can leverage other parts of Spring farmework, for instance, the awesome &lt;a href=&#34;https://spring.io/projects/spring-boot&#34;&gt;Spring Boot&lt;/a&gt;, to automate lots of configuration effort.&lt;/p&gt; &lt;h2 id=&#34;a-simple-crud-project-with-spring-jdbc&#34;&gt;A simple CRUD project with Spring JDBC&lt;/h2&gt; &lt;p&gt;Nothing is better than a hand-on development project that demonstrate how Spring JDBC works. We can start with &lt;a href=&#34;https://start.spring.io/&#34;&gt;Spring Initialzr&lt;/a&gt; and &lt;a href=&#34;https://spring.io/projects/spring-boot&#34;&gt;Spring Boot&lt;/a&gt; to jump start and better concentrate on the main code instead of numerous dependencies and configurations.&lt;/p&gt; &lt;p&gt;There are a few ways to bootstrap a project with Spring Initialzr. Most of the popular Java IDE such as Eclipse or Intellij IDEA with Spring extensions can create a new project via Spring Initialzr. You can also achieve the same result from the web site &lt;a href=&#34;https://start.spring.io&#34;&gt;https://start.spring.io&lt;/a&gt; or even using &lt;a href=&#34;https://docs.spring.io/spring-boot/docs/current/reference/html/getting-started-installing-spring-boot.html#getting-started-installing-the-cli&#34;&gt;Spring Boot CLI&lt;/a&gt;.&lt;/p&gt; &lt;p&gt;Here I will use Intellij IDEA for just showing the necessary steps and dependencies. You can use any of the aforementioned methods to obtain the same result.&lt;/p&gt; &lt;p&gt;&lt;strong&gt;Step 1&lt;/strong&gt;:&lt;/p&gt; &lt;p&gt;Create a new project and choose Spring Initialzr.&lt;/p&gt; &lt;p&gt;&lt;img src=&#34;ide-step-1.png&#34; alt=&#34;&#34; /&gt;&lt;/p&gt; &lt;p&gt;&lt;strong&gt;Step 2&lt;/strong&gt;:&lt;/p&gt; &lt;p&gt;Fill in necessary project information, keep default values for project&amp;rsquo;s type (Maven), language (Java), packaging (Jar), Java version (8).&lt;/p&gt; &lt;p&gt;&lt;img src=&#34;ide-step-2.png&#34; alt=&#34;&#34; /&gt;&lt;/p&gt; &lt;p&gt;&lt;strong&gt;Step 3&lt;/strong&gt;:&lt;/p&gt; &lt;p&gt;Choose the section SQL and make sure the checkboxes of H2 and JDBC are ticked.&lt;/p&gt; &lt;p&gt;&lt;img src=&#34;ide-step-3.png&#34; alt=&#34;&#34; /&gt;&lt;/p&gt; &lt;p&gt;&lt;strong&gt;Step 4&lt;/strong&gt;:&lt;/p&gt; &lt;p&gt;Finish the project creation wizard.&lt;/p&gt; &lt;p&gt;&lt;img src=&#34;ide-step-4.png&#34; alt=&#34;&#34; /&gt;&lt;/p&gt; &lt;p&gt;After Step 4, Intellij IDEA will create a new Maven Spring Boot project with some initial source and configuration files.&lt;/p&gt; &lt;p&gt;By default, the main configuration file for Spring Boot is &lt;code&gt;application.properties&lt;/code&gt;.&lt;/p&gt; &lt;p&gt;&lt;img src=&#34;ide-main.png&#34; alt=&#34;&#34; /&gt;&lt;/p&gt; &lt;h3 id=&#34;defining-domain-entities&#34;&gt;Defining Domain Entities&lt;/h3&gt; &lt;p&gt;We might not need a complex domain model but rather a simple entity mapped to a database table. For example, a &lt;code&gt;Customer&lt;/code&gt; entity as shown in Java code and a corresponding &lt;code&gt;customer&lt;/code&gt; table.&lt;/p&gt; &lt;script type=&#34;application/javascript&#34; src=&#34;//gist.github.com/htr3n/3c096c5de35a6c1b2564d8d0459b74fa.js?file=Customer.java&#34;&gt;&lt;/script&gt; &lt;h3 id=&#34;configuring-database-connection&#34;&gt;Configuring Database Connection&lt;/h3&gt; &lt;p&gt;Normally, we have to provide sufficient information to establish database connections, for instance, JDBC url, authentication, and maybe some extra parameters. &lt;a href=&#34;https://docs.spring.io/spring-boot/docs/current/reference/html/howto-data-access.html#howto-configure-a-datasource&#34;&gt;Per convention&lt;/a&gt;, Spring Boot can scan for data sources configurations as &lt;code&gt;@Bean&lt;/code&gt; or in &lt;code&gt;application.properties&lt;/code&gt;.&lt;/p&gt; &lt;p&gt;For better concentraton on test-driven JDBC CRUD, we can leverage &lt;code&gt;@JdbcTest&lt;/code&gt; explained in the subsequent section to set up an in-memory embedded database and skip the details on data source configuration for now.&lt;/p&gt; &lt;p&gt;However, we must still initialise the database (otherwise Spring will complain that the table &lt;code&gt;customer&lt;/code&gt; &lt;em&gt;does not exist&lt;/em&gt; when our application or tests starts). By convention documented &lt;a href=&#34;https://docs.spring.io/spring-boot/docs/current/reference/html/howto-database-initialization.html#howto-initialize-a-database-using-spring-jdbc&#34;&gt;here&lt;/a&gt;, we simply add a file &lt;code&gt;schema.sql&lt;/code&gt; in the folder &lt;code&gt;src/main/resources&lt;/code&gt; which contains a simple SQL DDL script for creating a table &lt;code&gt;customer&lt;/code&gt;.&lt;/p&gt; &lt;script type=&#34;application/javascript&#34; src=&#34;//gist.github.com/htr3n/3c096c5de35a6c1b2564d8d0459b74fa.js?file=schema.sql&#34;&gt;&lt;/script&gt; &lt;h3 id=&#34;test-driven-crud&#34;&gt;Test-Driven CRUD&lt;/h3&gt; &lt;p&gt;At the heart of our JDBC project is a &lt;code&gt;CustomerDao.java&lt;/code&gt; with basic &lt;a href=&#34;https://en.wikipedia.org/wiki/Create,_read,_update_and_delete&#34;&gt;CRUD methods&lt;/a&gt;. The class &lt;code&gt;CustomerDao&lt;/code&gt; is annotated with &lt;a href=&#34;https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/stereotype/Repository.html&#34;&gt;@Repository&lt;/a&gt; to indicate this is a data access component that is autodetected through normal Spring&amp;rsquo;s classpath scanning.&lt;/p&gt; &lt;p&gt;As &lt;code&gt;JdbcTemplate&lt;/code&gt; will be used to work with H2 database, we just declared an &lt;a href=&#34;https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/beans/factory/annotation/Autowired.html&#34;&gt;@Autowired&lt;/a&gt; field, the rest will be taken care by Spring.&lt;/p&gt; &lt;script type=&#34;application/javascript&#34; src=&#34;//gist.github.com/htr3n/3c096c5de35a6c1b2564d8d0459b74fa.js?file=CustomerDao.java&#34;&gt;&lt;/script&gt; &lt;h4 id=&#34;crud-tests&#34;&gt;CRUD Tests&lt;/h4&gt; &lt;p&gt;Before starting implementing the CRUD methods, we create some unit tests in &lt;code&gt;CustomerDaoTest&lt;/code&gt;. Again, Spring Boot will help us a lot here with setting up and shutting down the testing environment via annotations such as &lt;code&gt;@RunWith&lt;/code&gt; and &lt;code&gt;@SpringBootTest&lt;/code&gt;. We just need to declare an &lt;em&gt;auto-wired&lt;/em&gt; object &lt;code&gt;CustomerDao&lt;/code&gt;.&lt;/p&gt; &lt;p&gt;Spring provides powerful means for database testing, for instance, &lt;code&gt;@Transational&lt;/code&gt; and &lt;code&gt;@Rollback&lt;/code&gt;. With these annotations, Spring will take care of database transactions as well as rollling back the testing databases to its initial state.&lt;/p&gt; &lt;p&gt;Unfortunately, it would be too tedious to annotate each test method. Spring Boot comes to handy with &lt;a href=&#34;https://docs.spring.io/spring-boot/docs/current/api/org/springframework/boot/test/autoconfigure/jdbc/JdbcTest.html&#34;&gt;&lt;code&gt;@JdbcTest&lt;/code&gt;&lt;/a&gt; that enables several useful features for JDBC tests including an in-memory embedded database as well as transactional and roll back at the end of each test.&lt;/p&gt; &lt;blockquote&gt; &lt;p&gt;&lt;strong&gt;IMPORTANT&lt;/strong&gt;&lt;br&gt;By default, &lt;code&gt;@JdbcTest&lt;/code&gt; &lt;a href=&#34;https://docs.spring.io/spring-boot/docs/current/reference/html/boot-features-testing.html#boot-features-testing-spring-boot-applications-testing-autoconfigured-jdbc-test&#34;&gt;won&amp;rsquo;t load regular &lt;code&gt;Component&lt;/code&gt;&lt;/a&gt;, and as a result, &lt;code&gt;CustomerDao&lt;/code&gt; won&amp;rsquo;t be loaded because it is a &lt;code&gt;@Repository&lt;/code&gt;, i.e. a sub-kind of &lt;code&gt;@Component&lt;/code&gt;. Spring will inform us that it fails to find the required autowire &lt;code&gt;CustomerDao&lt;/code&gt; for &lt;code&gt;CustomerDaoTest&lt;/code&gt;. To fix it, simply annotation &lt;code&gt;CustomerDaoTest&lt;/code&gt; with &lt;code&gt;@ComponentScan&lt;/code&gt;.&lt;/p&gt; &lt;/blockquote&gt; &lt;p&gt;This is the whole test case of our tentative CRUD methods.&lt;/p&gt; &lt;script type=&#34;application/javascript&#34; src=&#34;//gist.github.com/htr3n/3c096c5de35a6c1b2564d8d0459b74fa.js?file=CustomerDaoTest.java&#34;&gt;&lt;/script&gt; &lt;h4 id=&#34;crud-implementation&#34;&gt;CRUD Implementation&lt;/h4&gt; &lt;p&gt;With the tests defined, we can start implementing the CRUD using Spring &lt;code&gt;JdbcTemplate&lt;/code&gt;.&lt;/p&gt; &lt;p&gt;&lt;strong&gt;C&lt;/strong&gt;reate&lt;/p&gt; &lt;p&gt;To satisfy the test described in &lt;code&gt;create_shouldReturnValidCustomer_whenAddingNewCustomer()&lt;/code&gt;, our &lt;code&gt;Customer.create()&lt;/code&gt; must successfully save the input &lt;code&gt;Customer&lt;/code&gt; and return with an auto-generated primary key (e.g. customer ID). In order to obtain the key, we can use Spring&amp;rsquo;s helper class &lt;a href=&#34;https://docs.spring.io/spring/docs/current/javadoc-api/org/springframework/jdbc/support/KeyHolder.html&#34;&gt;&lt;code&gt;KeyHolder&lt;/code&gt;&lt;/a&gt; along with the standard &lt;a href=&#34;https://docs.oracle.com/javase/8/docs/api/java/sql/PreparedStatement.html&#34;&gt;&lt;code&gt;PreparedStatement&lt;/code&gt;&lt;/a&gt;. Note that the code was simplified with &lt;a href=&#34;https://docs.oracle.com/javase/tutorial/java/javaOO/lambdaexpressions.html&#34;&gt;Java 8 Lambda notation&lt;/a&gt;.&lt;/p&gt; &lt;script type=&#34;application/javascript&#34; src=&#34;//gist.github.com/htr3n/3c096c5de35a6c1b2564d8d0459b74fa.js?file=create.java&#34;&gt;&lt;/script&gt; &lt;p&gt;Note that, Spring also provides another helper, namely, &lt;a href=&#34;https://docs.spring.io/spring/docs/current/javadoc-api/org/springframework/jdbc/core/simple/SimpleJdbcInsert.html&#34;&gt;&lt;code&gt;SimpleJdbcInsert&lt;/code&gt;&lt;/a&gt; with methods &lt;code&gt;executeAndReturnKey()&lt;/code&gt;. Per the class&amp;rsquo;s documentation, &lt;code&gt;SimpleJdbcInsert&lt;/code&gt; is indeed a higher level wrapper of &lt;code&gt;JdbcTemplate&lt;/code&gt;.&lt;/p&gt; &lt;p&gt;&lt;strong&gt;R&lt;/strong&gt;etrieve&lt;/p&gt; &lt;p&gt;In this project, we develop two retrieval methods: &lt;code&gt;findAll()&lt;/code&gt; will return a list of all customers whilst &lt;code&gt;findById()&lt;/code&gt; will look for a certain customer using the input ID.&lt;/p&gt; &lt;p&gt;The method &lt;code&gt;findAll()&lt;/code&gt; is rather a piece of cake but &lt;code&gt;findById()&lt;/code&gt; is quite tricky. Most of the tutorials or guides on Spring &lt;code&gt;JdbcTemplate&lt;/code&gt; I have found on the Internet use the method &lt;a href=&#34;https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/jdbc/core/JdbcTemplate.html#queryForObject-java.lang.String-java.lang.Class-&#34;&gt;JdbcTemplate.queryForObject()&lt;/a&gt; to look up for a database row. Trust me, I made the same mistake, too, along the line of this.&lt;/p&gt; &lt;script type=&#34;application/javascript&#34; src=&#34;//gist.github.com/htr3n/3c096c5de35a6c1b2564d8d0459b74fa.js?file=problematic-findCustomerById.java&#34;&gt;&lt;/script&gt; &lt;p&gt;Neater and cleaner, eh!? Unfortunately, the aforementioned &lt;code&gt;findById()&lt;/code&gt; based on the problematic methods &lt;code&gt;JdbcTemplate.queryForXXX()&lt;/code&gt; which is recommended to use in case the query shall return a single row.&lt;/p&gt; &lt;p&gt;This issue has been exposed by the test &lt;code&gt;findById_shouldReturnInvalidCustomer_forEmptyDatabase()&lt;/code&gt; and I was able to come up with a slightly better version that uses &lt;code&gt;JdbcTemplate.query()&lt;/code&gt; and checks for the returning &lt;code&gt;ResultSet&lt;/code&gt;, in case of non-exiting customer yielding correctly &lt;code&gt;null&lt;/code&gt;.&lt;/p&gt; &lt;script type=&#34;application/javascript&#34; src=&#34;//gist.github.com/htr3n/3c096c5de35a6c1b2564d8d0459b74fa.js?file=retrieval.java&#34;&gt;&lt;/script&gt; &lt;p&gt;Also note that, when working with pure JDBC, we must map the database query result onto the domain entity on our own. This can be quickly done by implementing the interface &lt;a href=&#34;https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/jdbc/core/RowMapper.html&#34;&gt;&lt;code&gt;RowMapper&amp;lt;T&amp;gt;&lt;/code&gt;&lt;/a&gt;.&lt;/p&gt; &lt;script type=&#34;application/javascript&#34; src=&#34;//gist.github.com/htr3n/3c096c5de35a6c1b2564d8d0459b74fa.js?file=CustomerMapper.java&#34;&gt;&lt;/script&gt; &lt;p&gt;&lt;strong&gt;U&lt;/strong&gt;pdate / &lt;strong&gt;D&lt;/strong&gt;elete&lt;/p&gt; &lt;p&gt;The implementation of updating and deletion is rather straightforward.&lt;/p&gt; &lt;script type=&#34;application/javascript&#34; src=&#34;//gist.github.com/htr3n/3c096c5de35a6c1b2564d8d0459b74fa.js?file=update.java&#34;&gt;&lt;/script&gt; &lt;script type=&#34;application/javascript&#34; src=&#34;//gist.github.com/htr3n/3c096c5de35a6c1b2564d8d0459b74fa.js?file=delete.java&#34;&gt;&lt;/script&gt; &lt;p&gt;Finally, we finish implementing all necessary CRUD methods and hopefully pass all the aforementioned tests.&lt;/p&gt; &lt;p&gt;&lt;img src=&#34;passed-tests.png&#34; alt=&#34;Passed tests&#34; /&gt;&lt;/p&gt; &lt;p&gt;You can check out the &lt;a href=&#34;https://github.com/htr3n/spring-jdbc-simple&#34;&gt;project source code&lt;/a&gt; available on Github.&lt;/p&gt;</description></item><item><title>Handy macOS QuickLook configurations</title><link>https://htr3n.github.io/2018/07/handy-quicklook/<pubdate>Mon, 30 Jul 2018 00:00:00 +0000</pubdate><guid>c9f9fc4f979cd51a6f05d18bc949cfef</guid><description>&lt;p&gt;&lt;a href=&#34;https://en.wikipedia.org/wiki/Quick_Look&#34;&gt;QuickLook&lt;/a&gt; is a simple but powerful feature of macOS that helps to preview the content of a file or folder in Finder without using any particular apps. This feature is very handy when we only want to have brief glance on a certain file or quickly examine its parts instead of opening a full-fledged app for that particular file.&lt;/p&gt; &lt;p&gt;Even nicer, Apple provides &lt;a href=&#34;https://developer.apple.com/documentation/quicklook&#34;&gt;API&lt;/a&gt; for QuickLook programming and enables the use of &lt;a href=&#34;http://www.quicklookplugins.com/&#34;&gt;plugins&lt;/a&gt; that convert a certain document from its native format into QuickLook previewing format. Before, it was also possible to also &lt;a href=&#34;http://www.mactricksandtips.com/2013/01/22-finder-hacks-tricks-and-changes.html&#34;&gt;select and copy text from QuickLook previewing&lt;/a&gt; but then Apple removed that feature since macOS 10.11 El Capitan.&lt;/p&gt; &lt;p&gt;QuickLook is well supported in Spotlight search. In Finder, it can be conveniently activated by selecting a file or folder and then, for normal previewing, press &lt;kbd&gt;Space&lt;/kbd&gt; or &lt;kbd&gt;⌘&lt;/kbd&gt;+&lt;kbd&gt;Y&lt;/kbd&gt;. For full-screen previewing, you can press &lt;kbd&gt;⌥&lt;/kbd&gt;+&lt;kbd&gt;Space&lt;/kbd&gt; (or using &lt;kbd&gt;⌘&lt;/kbd&gt;+&lt;kbd&gt;⌥&lt;/kbd&gt;+&lt;kbd&gt;Y&lt;/kbd&gt; in case you have &lt;kbd&gt;⌥&lt;/kbd&gt;+&lt;kbd&gt;Space&lt;/kbd&gt; bound to some apps, for instance, &lt;a href=&#34;https://www.alfredapp.com&#34;&gt;Alfred&lt;/a&gt; in my case).&lt;/p&gt; &lt;p&gt;We might also use the command &lt;code&gt;qlmanage&lt;/code&gt; but it works properly with built-in support and has issues with some external plugins.&lt;/p&gt; &lt;pre&gt;&lt;code class=&#34;language-sh&#34;&gt;# show the preview of file $ qlmanage -p &amp;lt;path_to_file&amp;gt; # or only show the thumpnail $ qlmanage -t &amp;lt;path_to_file&amp;gt; &lt;/code&gt;&lt;/pre&gt; &lt;h2 id=&#34;quicklook-settings&#34;&gt;QuickLook Settings&lt;/h2&gt; &lt;p&gt;QuickLook looks for and uses the plugins from both system-wide folders &amp;lsquo;&lt;em&gt;/System/Library/QuickLook&lt;/em&gt;&amp;rsquo; and &amp;lsquo;&lt;em&gt;/Library/QuickLook&lt;/em&gt;&amp;rsquo; and also the home folder of each user in &amp;lsquo;&lt;em&gt;~/Library/QuickLook&lt;/em&gt;&amp;rsquo;.&lt;/p&gt; &lt;p&gt;A QuickLook plugin is organised in a folder with an extension &lt;code&gt;.qlgenerator&lt;/code&gt;. The main task of a plugin, as mentioned above, is to generate previewing contents for the corresponding file types. We can see an example of the built-in plugin &lt;code&gt;Image.qlgenerator&lt;/code&gt;.&lt;/p&gt; &lt;pre&gt;&lt;code class=&#34;language-sh&#34;&gt;$ tree /System/Library/QuickLook/Image.qlgenerator /System/Library/QuickLook/Image.qlgenerator └── Contents ├── Info.plist ├── MacOS │   └── Image ├── _CodeSignature │   └── CodeResources └── version.plist &lt;/code&gt;&lt;/pre&gt; &lt;p&gt;The command &lt;code&gt;qlmanage&lt;/code&gt; is provided in macOS since the announcement of QuickLook in 2007. It&amp;rsquo;s very helpful for manipulating QuickLook, for instance, reloading the generators, resetting cache, and many more. We will walk through some handy usage of &lt;code&gt;qlmanage&lt;/code&gt;.&lt;/p&gt; &lt;h5 id=&#34;forcing-reloading-the-list-of-generators&#34;&gt;Forcing reloading the list of generators&lt;/h5&gt; &lt;pre&gt;&lt;code class=&#34;language-sh&#34;&gt;$ qlmanage -r qlmanage: resetting quicklookd &lt;/code&gt;&lt;/pre&gt; &lt;h5 id=&#34;showing-the-list-of-generators&#34;&gt;Showing the list of generators&lt;/h5&gt; &lt;p&gt;This command can be used to see the current QuickLook generators list and also check which generator handles what file types. You might then see a long list of generators in your macOS.&lt;/p&gt; &lt;pre&gt;&lt;code class=&#34;language-sh&#34;&gt;$ qlmanage -m plugins &lt;/code&gt;&lt;/pre&gt; &lt;h5 id=&#34;resetting-quicklook-caches&#34;&gt;Resetting QuickLook caches&lt;/h5&gt; &lt;pre&gt;&lt;code class=&#34;language-sh&#34;&gt;$ qlmanage -r cache &lt;/code&gt;&lt;/pre&gt; &lt;p&gt;For more usage of &lt;code&gt;qlmanage&lt;/code&gt;, we can look into its manual.&lt;/p&gt; &lt;pre&gt;&lt;code class=&#34;language-sh&#34;&gt;$ man qlmanage &lt;/code&gt;&lt;/pre&gt; &lt;h2 id=&#34;quicklook-plugins&#34;&gt;QuickLook Plugins&lt;/h2&gt; &lt;p&gt;&lt;a href=&#34;https://www.google.com/search?q=quicklook+plugins&#34;&gt;Looking around&lt;/a&gt;, we can easily find a lot of plugins to enhance the built-in support of macOS. Moreover, when we install some applications, there might be included QuickLook plugins too.&lt;/p&gt; &lt;p&gt;Here is a list of plugins that I find very handy and use quite often in my macOS development box.&lt;/p&gt; &lt;h4 id=&#34;qlstephen&#34;&gt;QLStephen&lt;/h4&gt; &lt;p&gt;&lt;a href=&#34;https://whomwah.github.io/qlstephen&#34;&gt;QLStephen&lt;/a&gt; is sort of an awesome Swiss-army-knife that I ever used. It enables the preview of numerous plain text files not handled by the default support of macOS QuickLook, especially files having no extensions such as README, CHANGELOG, Makefile, Rakefile, etc.&lt;/p&gt; &lt;p&gt;If you have already installed &lt;a href=&#34;https://brew.sh&#34;&gt;Homebrew&lt;/a&gt;, it takes only a simple command to install QLStephen (in case you haven&amp;rsquo;t, please feel free to head to &lt;a href=&#34;https://htr3n.github.io/2018/06/bootstrapping-macos-workspace/#homebrew&#34;&gt;another post&lt;/a&gt;).&lt;/p&gt; &lt;pre&gt;&lt;code class=&#34;language-sh&#34;&gt;$ brew cask install qlstephen &lt;/code&gt;&lt;/pre&gt; &lt;figure &gt; &lt;img src=&#34;https://htr3n.github.io/2018/07/handy-quicklook/qlstephen.png&#34; alt=&#34;QLStephen preview&#34; width=&#34;80%&#34; style=&#34;max-width: 100%;&#34; /&gt; &lt;figcaption&gt; &lt;span class=&#34;img--caption&#34;&gt; Figure 1. Using QLStephen to preview a Makefile (which has no extension and is not supported by macOS) &lt;/span&gt; &lt;/figcaption&gt; &lt;/figure&gt; &lt;h4 id=&#34;qlcolorcode&#34;&gt;QLColorCode&lt;/h4&gt; &lt;p&gt;I often quickly review my code using &lt;a href=&#34;https://github.com/anthonygelibert/QLColorCode&#34;&gt;this amazing plugin&lt;/a&gt; forked/derived from the &lt;a href=&#34;https://github.com/n8gray/QLColorCode&#34;&gt;original one&lt;/a&gt; developed by Nathan Gray (&lt;a href=&#34;https://github.com/n8gray&#34;&gt;n8gray&lt;/a&gt;). The preview code will be nicely formatted and highlighted.&lt;/p&gt; &lt;pre&gt;&lt;code class=&#34;language-sh&#34;&gt;$ brew cask install qlcolorcode &lt;/code&gt;&lt;/pre&gt; &lt;p&gt;The default setting of QLColorCode is totall fine. Nonetheless, you might want to customise some of its settings to your tastes too. Here are some of my favourites.&lt;/p&gt; &lt;pre&gt;&lt;code class=&#34;language-sh&#34;&gt;defaults write org.n8gray.QLColorCode textEncoding UTF-16 defaults write org.n8gray.QLColorCode webkitTextEncoding UTF-16 defaults write org.n8gray.QLColorCode font &amp;quot;Source Code Pro&amp;quot; defaults write org.n8gray.QLColorCode fontSizePoints 10 defaults write org.n8gray.QLColorCode hlTheme zenburn defaults write org.n8gray.QLColorCode extraHLFlags &amp;quot;-W -J 160&amp;quot; defaults write org.n8gray.QLColorCode pathHL /usr/local/bin/highlight &lt;/code&gt;&lt;/pre&gt; &lt;p&gt;Here is the result of previewing Java code.&lt;/p&gt; &lt;figure &gt; &lt;img src=&#34;https://htr3n.github.io/2018/07/handy-quicklook/qlcolorcode.png&#34; alt=&#34;QLStephen preview&#34; width=&#34;80%&#34; style=&#34;max-width: 100%;&#34; /&gt; &lt;figcaption&gt; &lt;span class=&#34;img--caption&#34;&gt; Figure 2. Code preview with syntax highlighting &lt;/span&gt; &lt;/figcaption&gt; &lt;/figure&gt; &lt;h4 id=&#34;qlcommonmark&#34;&gt;QLCommonMark&lt;/h4&gt; &lt;p&gt;I have been working with Markdown a lot, especially writing this blog all using Markdown and Hugo generator. It was quite a while I have searched around for a stable QuickLook plugin for Markdown. Before, I used &lt;a href=&#34;https://github.com/ttscoff/MMD-QuickLook&#34;&gt;MDD-QuickLook&lt;/a&gt;, an excellent fork of the well-known &lt;a href=&#34;https://github.com/fletcher&#34;&gt;Fletcher&lt;/a&gt;&amp;rsquo;s original &lt;a href=&#34;https://github.com/fletcher/MMD-QuickLook&#34;&gt;plugin&lt;/a&gt;. MDD-QuickLook allows me to customise the look of the Markdown preview using a Github based CSS file &lt;code&gt;~/.mdqlstyle.css&lt;/code&gt;.&lt;/p&gt; &lt;p&gt;When I found &lt;a href=&#34;https://github.com/digitalmoksha/QLCommonMark&#34;&gt;QLCommonMark&lt;/a&gt;, it replaces MDD-QuickLook with a broader coverage including &lt;a href=&#34;http://commonmark.org/&#34;&gt;CommonMark&lt;/a&gt; and Markdown and can be configured in the same way, just different filename &lt;code&gt;~/.cmqlstyle.css&lt;/code&gt;. You can find my Markdown preview style &lt;a href=&#34;https://gist.github.com/htr3n/ffdcb6238f868dd1605af2bbd1e53546&#34;&gt;here&lt;/a&gt;.&lt;/p&gt; &lt;pre&gt;&lt;code class=&#34;language-sh&#34;&gt;$ brew cask install qlcommonmark &lt;/code&gt;&lt;/pre&gt; &lt;figure &gt; &lt;img src=&#34;https://htr3n.github.io/2018/07/handy-quicklook/qlcommonmark.png&#34; alt=&#34;QLCommonMark preview&#34; width=&#34;80%&#34; style=&#34;max-width: 100%;&#34; /&gt; &lt;figcaption&gt; &lt;span class=&#34;img--caption&#34;&gt; Figure 3. Markdown preview with a Github based style &lt;/span&gt; &lt;/figcaption&gt; &lt;/figure&gt; &lt;h4 id=&#34;quicklook-json&#34;&gt;QuickLook JSON&lt;/h4&gt; &lt;p&gt;Both front-end and back-end developers are somehow familiar with &lt;a href=&#34;https://www.json.org/&#34;&gt;JavaScript Object Notation&lt;/a&gt; (JSON) format. As JavaScript and its ecosystem are rapidly growing, JSON and its variations become extremely popular. Hence, a QuickLook plugin for JSON should be ready in your macOS dev box.&lt;/p&gt; &lt;pre&gt;&lt;code class=&#34;language-sh&#34;&gt;$ brew cask install quicklook-json &lt;/code&gt;&lt;/pre&gt; &lt;h4 id=&#34;quicklook-csv&#34;&gt;QuickLook CSV&lt;/h4&gt; &lt;p&gt;&lt;a href=&#34;https://en.wikipedia.org/wiki/Comma-separated_values&#34;&gt;CSV&lt;/a&gt; is a very popular format due to its simplicity and commonly used in statistics and data analytics. It contains values separated by comma, tabs, semi-colons, or pipes. MacOS provides built-in support for CSV previewing but I prefer a nicer-looking preview with &lt;a href=&#34;https://github.com/p2/quicklook-csv&#34;&gt;QuickLook CSV&lt;/a&gt; developed by Pascal Pfiffner (&lt;a href=&#34;https://github.com/p2&#34;&gt;p2&lt;/a&gt;) with alternate row shading.&lt;/p&gt; &lt;pre&gt;&lt;code class=&#34;language-sh&#34;&gt;$ brew cask install quicklook-csv &lt;/code&gt;&lt;/pre&gt; &lt;figure &gt; &lt;img src=&#34;https://htr3n.github.io/2018/07/handy-quicklook/csv.png&#34; alt=&#34;CSV preview&#34; width=&#34;80%&#34; style=&#34;max-width: 100%;&#34; /&gt; &lt;figcaption&gt; &lt;span class=&#34;img--caption&#34;&gt; Figure 4. A CSV file preview &lt;/span&gt; &lt;/figcaption&gt; &lt;/figure&gt; &lt;h4 id=&#34;hetimazip&#34;&gt;HetimaZip&lt;/h4&gt; &lt;p&gt;There are many formats and standards around for compressing and archiving files such as &lt;a href=&#34;https://www.7-zip.org/&#34;&gt;7z&lt;/a&gt;, &lt;a href=&#34;http://bzip.org&#34;&gt;bzip2&lt;/a&gt;, &lt;a href=&#34;http://www.gzip.org&#34;&gt;gzip&lt;/a&gt;, &lt;a href=&#34;https://www.rarlab.com/rar_file.htm&#34;&gt;rar&lt;/a&gt;, &lt;a href=&#34;https://en.wikipedia.org/wiki/Zip_%28file_format%29&#34;&gt;zip&lt;/a&gt;, to name but a few. &lt;a href=&#34;http://hetima.com/hetimazipql&#34;&gt;HetimaZip&lt;/a&gt; can help to &lt;em&gt;look through&lt;/em&gt; a Zip archive without unzipping or opening it. Note that, this plugin also support well some file types based on Zip format such as &lt;a href=&#34;https://en.wikipedia.org/wiki/JAR_%28file_format%29&#34;&gt;Java ARchive&lt;/a&gt; (&lt;code&gt;.jar&lt;/code&gt;), iOS app (&lt;a href=&#34;https://en.wikipedia.org/wiki/.ipa&#34;&gt;&lt;code&gt;.ipa&lt;/code&gt;&lt;/a&gt;), and many more.&lt;/p&gt; &lt;pre&gt;&lt;code class=&#34;language-sh&#34;&gt;$ brew cask install hetimazipql &lt;/code&gt;&lt;/pre&gt; &lt;p&gt;Unfortunately, HetimaZip cannot handle &lt;a href=&#34;https://en.wikipedia.org/wiki/Android_application_package&#34;&gt;Android application package&lt;/a&gt; (&lt;code&gt;.apk&lt;/code&gt;). Thus we can combine with another nice plugin, &lt;a href=&#34;https://github.com/hezi/QuickLookAPK&#34;&gt;QuickLook APK&lt;/a&gt;.&lt;/p&gt; &lt;pre&gt;&lt;code class=&#34;language-sh&#34;&gt;$ brew cask install quicklookapk &lt;/code&gt;&lt;/pre&gt; &lt;p&gt;There is an alternative to HetimaZip, namely, &lt;a href=&#34;https://macitbetter.com&#34;&gt;BetterZip&lt;/a&gt;. I have tried both but could not make BetterZip&amp;rsquo;s work in macOS High Sierra like HetimaZip&amp;rsquo;s to show the content of a normal Zip file.&lt;/p&gt; &lt;figure &gt; &lt;img src=&#34;https://htr3n.github.io/2018/07/handy-quicklook/zip.png&#34; alt=&#34;Zip file preview&#34; width=&#34;80%&#34; style=&#34;max-width: 100%;&#34; /&gt; &lt;figcaption&gt; &lt;span class=&#34;img--caption&#34;&gt; Figure 5. Looking through a Zip file content &lt;/span&gt; &lt;/figcaption&gt; &lt;/figure&gt; &lt;h4 id=&#34;suspicious-package&#34;&gt;Suspicious Package&lt;/h4&gt; &lt;p&gt;MacOs applications are sometimes distributed as &lt;a href=&#34;https://en.wikipedia.org/wiki/Installer_%28macOS%29&#34;&gt;installer packages&lt;/a&gt; (&lt;code&gt;.pkg&lt;/code&gt;). An installer package may run some scripts and install many files in your systems. A curious and careful user would need to find out what exactly the installation scripts doing and what files are going to be installed.&lt;/p&gt; &lt;p&gt;Advanced macOS users can use &lt;span class=&#34;menu&#34;&gt;Show Package Contents&lt;/span&gt; to get inside the package, but it won&amp;rsquo;t show much details. We can use the app &lt;a href=&#34;https://www.mothersruin.com/software/SuspiciousPackage&#34;&gt;&lt;em&gt;Suspicious Package&lt;/em&gt;&lt;/a&gt; or its included QuickLook plugin to inspect any installer packages before approving for installation.&lt;/p&gt; &lt;pre&gt;&lt;code class=&#34;language-sh&#34;&gt;$ brew cask install suspicious-package &lt;/code&gt;&lt;/pre&gt; &lt;p&gt;Note that it is a tad inconvenient that you &lt;a href=&#34;https://www.mothersruin.com/software/SuspiciousPackage/faq.html#plugin-only&#34;&gt;have to install the app&lt;/a&gt; &lt;em&gt;Suspicious Package&lt;/em&gt; only for its plugin. Copying the plugin alone won&amp;rsquo;t work because it depends on the core libraries for previewing. I&amp;rsquo;m not quite sure whether this is the developers&amp;rsquo; intention or there are actual technical difficulties behind the scene to solely deliver the QuickLook plugin.&lt;/p&gt; &lt;figure &gt; &lt;img src=&#34;https://htr3n.github.io/2018/07/handy-quicklook/package.png&#34; alt=&#34;Installer package preview&#34; width=&#34;80%&#34; style=&#34;max-width: 100%;&#34; /&gt; &lt;figcaption&gt; &lt;span class=&#34;img--caption&#34;&gt; Figure 6. Looking through an installer package &lt;/span&gt; &lt;/figcaption&gt; &lt;/figure&gt; &lt;h4 id=&#34;qlimagesize&#34;&gt;qlImageSize&lt;/h4&gt; &lt;p&gt;Normally macOS provides sufficient plugins for quick-looking images. &lt;a href=&#34;https://github.com/Nyx0uf/qlImageSize&#34;&gt;qlImageSize&lt;/a&gt; can enhance further by displaying the dimensions and size of the previewed image. These information is only available either when opening the image with an application or selecting the image file and pressing &lt;kbd&gt;⌘&lt;/kbd&gt;+&lt;kbd&gt;I&lt;/kbd&gt; in Finder. I like &lt;em&gt;qlImageSize&lt;/em&gt; a lot as many times I just want to quickly see an image&amp;rsquo;s dimensions and size this way.&lt;/p&gt; &lt;pre&gt;&lt;code class=&#34;language-sh&#34;&gt;$ brew cask install qlimagesize &lt;/code&gt;&lt;/pre&gt;</description></item><item><title>Faster and enjoyable ZSH (maybe)</title><link>https://htr3n.github.io/2018/07/faster-zsh/<pubdate>Mon, 23 Jul 2018 00:00:00 +0000</pubdate><guid>a2bb2872f4e3d91e93c85cae1c37de86</guid><description>&lt;p&gt;Z shell (Zsh) has been my shell of choice in both Linux and macOS. I used to install &lt;a href=&#34;https://github.com/robbyrussell/oh-my-zsh&#34;&gt;oh-my-zsh&lt;/a&gt; or the claimed-to-be-faster &lt;a href=&#34;https://github.com/sorin-ionescu/prezto&#34;&gt;Prezto&lt;/a&gt; or &lt;a href=&#34;https://github.com/zimfw/zimfw&#34;&gt;Zim&lt;/a&gt; to leverage some of their cool libraries.&lt;/p&gt; &lt;p&gt;Unfortunately, I realised that my favourite terminal app, &lt;a href=&#34;https://www.iterm2.com&#34;&gt;iTerm 2&lt;/a&gt;, became more and more sluggish when loading a new tab or window with more than one and a half second (without some virtual environment loaders like &lt;a href=&#34;https://github.com/creationix/nvm&#34;&gt;nvm&lt;/a&gt;, &lt;a href=&#34;https://rvm.io/&#34;&gt;rvm&lt;/a&gt;, &lt;a href=&#34;https://github.com/rbenv/rbenv&#34;&gt;rbenv&lt;/a&gt;, &lt;a href=&#34;http://www.jenv.be&#34;&gt;jenv&lt;/a&gt;).&lt;/p&gt; &lt;p&gt;A quick &lt;a href=&#34;https://www.google.com/search?q=faster+zsh&#34;&gt;&lt;em&gt;G-fu&lt;/em&gt;&lt;/a&gt; could yield numerous posts on how to debug, optimise, speed up Zsh. I spent some time to refactore my own lightweight scripts instead of using big frameworks and was able to reach nearly one third of a second. In this post, I will share and discuss some aspects that might affect Zsh loading time and how to mitigate them. Most of the relevant code and configurations can be found &lt;a href=&#34;https://github.com/htr3n/zsh-config&#34;&gt;here&lt;/a&gt;.&lt;/p&gt; &lt;blockquote&gt; &lt;p&gt;&lt;strong&gt;TL;DR:&lt;/strong&gt;&lt;br&gt;There are many aspects in Zsh that can potentially slow down its startup time and can be mitigated.&lt;/p&gt; &lt;ul&gt; &lt;li&gt;&lt;a href=&#34;#organising-shell-startup-order&#34;&gt;Organising shell startup order&lt;/a&gt;&lt;/li&gt; &lt;li&gt;&lt;a href=&#34;#avoiding-creating-subprocesses&#34;&gt;Avoiding creating subprocesses&lt;/a&gt;&lt;/li&gt; &lt;li&gt;&lt;a href=&#34;#lazy-loading&#34;&gt;Lazy-loading instead of eager-loading&lt;/a&gt;&lt;/li&gt; &lt;li&gt;&lt;a href=&#34;#optimising-completion-system&#34;&gt;Optimising completion system&lt;/a&gt;&lt;/li&gt; &lt;li&gt;&lt;a href=&#34;#optimising-shell-prompts&#34;&gt;Optimising shell prompts&lt;/a&gt;&lt;/li&gt; &lt;li&gt;&lt;a href=&#34;#macos-optimisations&#34;&gt;MacOS-specific optimisations&lt;/a&gt;&lt;/li&gt; &lt;/ul&gt; &lt;/blockquote&gt; &lt;h2 id=&#34;performance-analysis&#34;&gt;Performance Analysis&lt;/h2&gt; &lt;h3 id=&#34;overall-execution-time&#34;&gt;Overall execution time&lt;/h3&gt; &lt;p&gt;Crunching some numbers on Zsh loading time would be definitely useful for further in depth analysis of its performance. A simple timing of Zsh startup time can be measured approximately using the &lt;code&gt;time&lt;/code&gt; command that is available in most Unix/Linux/Mac systems.&lt;/p&gt; &lt;pre&gt;&lt;code class=&#34;language-sh&#34;&gt;$ /usr/bin/time /bin/zsh -i -c exit 0.67 real 0.41 user 0.26 sys &lt;/code&gt;&lt;/pre&gt; &lt;p&gt;The output of the command shows the execution time of Zsh breaking down to user-land and system. In order to get a better approximation, we can make a loop that invokes &lt;code&gt;time&lt;/code&gt; for 10 or greater, if possible.&lt;/p&gt; &lt;pre&gt;&lt;code class=&#34;language-sh&#34;&gt;$ for i in $(seq 1 10); do /usr/bin/time /bin/zsh -i -c exit; done; &lt;/code&gt;&lt;/pre&gt; &lt;p&gt;This timing method is very fast and handy in case you want to quickly see how your Zsh performs, especially to test some changes you have just made.&lt;/p&gt; &lt;h3 id=&#34;profiling&#34;&gt;Profiling&lt;/h3&gt; &lt;p&gt;Zsh provides a built-in module &lt;a href=&#34;http://zsh.sourceforge.net/Doc/Release/Zsh-Modules.html#The-zsh_002fzprof-Module&#34;&gt;&lt;code&gt;zsh/zprof&lt;/code&gt;&lt;/a&gt; that can be used to profile Zsh functions. At the beginning of &lt;code&gt;~/.zshrc&lt;/code&gt;, we add &lt;code&gt;zmodload zsh/zprof&lt;/code&gt;. After restart the shell, we can use the command &lt;code&gt;zprof&lt;/code&gt; to show a very rich output on Zsh startup loading. An illustrative output of &lt;code&gt;zprof&lt;/code&gt; is shown below.&lt;/p&gt; &lt;pre&gt;&lt;code class=&#34;language-sh&#34;&gt;$ zprof num calls time self name ------------------------------------------------------------------------------ 1) 1 51.31 51.31 22.68% 49.68 49.68 21.96% zle-line-init 2) 2 45.72 22.86 20.21% 45.72 22.86 20.21% compaudit 3) 195 34.71 0.18 15.34% 25.52 0.13 11.28% _zsh_autosuggest_bind_widget ... &lt;/code&gt;&lt;/pre&gt; &lt;blockquote&gt; &lt;p&gt;&lt;strong&gt;Note&lt;/strong&gt;&lt;/p&gt; &lt;p&gt;Two aforementioned approaches can give us a rough analysis on what aspects are invoked during Zsh startup so that we might figure out the bottleneck. In case you need to dig deeper, Arnout wrote &lt;a href=&#34;http://blog.xebia.com/profiling-zsh-shell-scripts&#34;&gt;a nice article&lt;/a&gt; in which he suggested a in-depth analysis and visualisation of Zsh loading using &lt;code&gt;xtrace&lt;/code&gt; and &lt;code&gt;kcachegrind&lt;/code&gt;. Benjamin developed &lt;a href=&#34;https://esham.io/2018/02/zsh-profiling&#34;&gt;a similar approach&lt;/a&gt; to more thorough tracing and analysis Zsh execution.&lt;/p&gt; &lt;/blockquote&gt; &lt;h2 id=&#34;problematic-aspects-and-mitigation&#34;&gt;Problematic Aspects and Mitigation&lt;/h2&gt; &lt;p&gt;Using two simple methods mentioned above, I was able to roughly understand some issues of my Zsh settings and tried to mitigate them to reduce startup time. I could not report the exact steps what have been done as it was a lot of trial-and-errors. Here I will discuss some major aspects combining my actual experiment and G-fu research.&lt;/p&gt; &lt;h3 id=&#34;organising-shell-startup-order&#34;&gt;Organising shell startup order&lt;/h3&gt; &lt;p&gt;The order that Zsh loads its configuration files are documented &lt;a href=&#34;http://zsh.sourceforge.net/Intro/intro_3.html&#34;&gt;here&lt;/a&gt; and &lt;a href=&#34;http://zsh.sourceforge.net/Doc/Release/Files.html&#34;&gt;here&lt;/a&gt;. Peter Ward &lt;a href=&#34;https://blog.flowblok.id.au/2013-02/shell-startup-scripts.html&#34;&gt;drew a nice diagram&lt;/a&gt; showing the loading process of Zsh alongside with Bash and Sh (note that he omitted the system-wide configurations in Zsh part).&lt;/p&gt; &lt;figure &gt; &lt;img src=&#34;https://htr3n.github.io/2018/07/faster-zsh/shell-startup-actual.png&#34; alt=&#34;Shell startup order&#34; style=&#34;max-width: 100%;&#34; /&gt; &lt;figcaption&gt; &lt;span class=&#34;img--caption&#34;&gt; Figure 1. Bash, sh, and zsh shells startup order [&lt;a href=&#34;https://blog.flowblok.id.au/2013-02/shell-startup-scripts.html&#34;&gt;source&lt;/a&gt;] &lt;/span&gt; &lt;/figcaption&gt; &lt;/figure&gt; &lt;p&gt;It&amp;rsquo;s also useful to understand relevant shell concepts, such as &lt;em&gt;login&lt;/em&gt; vs. &lt;em&gt;non-login&lt;/em&gt;, &lt;em&gt;interactive&lt;/em&gt; vs. &lt;em&gt;non-interactive&lt;/em&gt; shown in the diagram. Please refer to, for example, &lt;a href=&#34;https://askubuntu.com/a/438170/115425&#34;&gt;here&lt;/a&gt; or &lt;a href=&#34;https://askubuntu.com/a/879400/115425&#34;&gt;here&lt;/a&gt; for further explanations.&lt;/p&gt; &lt;blockquote&gt; &lt;p&gt;&lt;strong&gt;Some shell examples:&lt;/strong&gt;&lt;/p&gt; &lt;ul&gt; &lt;li&gt;when opening a terminal emulator app (e.g. Terminal or iTerm 2), we are creating an &lt;em&gt;interactive, non-login shell&lt;/em&gt; (please see &lt;code&gt;login -pf&lt;/code&gt; later).&lt;/li&gt; &lt;li&gt;when logging in into a machine using command line &lt;a href=&#34;https://en.wikipedia.org/wiki/Secure_Shell&#34;&gt; &lt;code&gt;ssh&lt;/code&gt;&lt;/a&gt; or &lt;a href=&#34;https://en.wikipedia.org/wiki/Su_%28Unix%29&#34;&gt;&lt;code&gt;su - username&lt;/code&gt;&lt;/a&gt;, we are working with an &lt;em&gt;interactive login&lt;/em&gt; shell.&lt;/li&gt; &lt;li&gt;when executing a shell script, it is on a &lt;em&gt;non-interactive&lt;/em&gt;, &lt;em&gt;non-login&lt;/em&gt; shell.&lt;/li&gt; &lt;/ul&gt; &lt;/blockquote&gt; &lt;p&gt;Grokking Zsh startup order will help us putting relevant configurations in right files as well as optimising the loading process. My local Zsh setting is orgranised as follow:&lt;/p&gt; &lt;ul&gt; &lt;li&gt;&lt;code&gt;.zshenv&lt;/code&gt;: invoked by all invocations of Zsh, so we should keep it small and merely initialise necessary variables.&lt;/li&gt; &lt;li&gt;&lt;code&gt;.zlogin&lt;/code&gt;: will be loaded in login shells after &lt;em&gt;.zshrc&lt;/em&gt;. My &lt;a href=&#34;https://github.com/htr3n/zsh-config/blob/master/zlogin&#34;&gt;&lt;em&gt;.zlogin&lt;/em&gt;&lt;/a&gt; will compile &lt;code&gt;zcompdump&lt;/code&gt; in background as this is time-consuming and done only once per log-in session.&lt;/li&gt; &lt;li&gt;&lt;code&gt;.zprofile&lt;/code&gt; : similar to &lt;em&gt;.zlogin&lt;/em&gt; but will be sourced before &lt;em&gt;.zshrc&lt;/em&gt;. Note that, both &lt;em&gt;.zprofile&lt;/em&gt; and &lt;em&gt;.zshrc&lt;/em&gt; are skipped in non-login non-interactive shells, as shown in Figure 1. So I learned a trick from &lt;a href=&#34;https://github.com/sorin-ionescu/prezto/tree/master/runcoms&#34;&gt;Prezto&lt;/a&gt; that declares environment variables in &lt;em&gt;.zprofile&lt;/em&gt; and uses &lt;em&gt;.zshenv&lt;/em&gt; to source &lt;em&gt;.zprofile&lt;/em&gt; (e.g. &lt;a href=&#34;https://github.com/htr3n/zsh-config/blob/master/zprofile&#34;&gt;&lt;em&gt;.zprofile&lt;/em&gt;&lt;/a&gt; and &lt;a href=&#34;https://github.com/htr3n/zsh-config/blob/master/zshenv&#34;&gt;&lt;em&gt;.zshenv&lt;/em&gt;&lt;/a&gt;). This way, non-login non-interactive shells will receive proper variable initialisations.&lt;/li&gt; &lt;li&gt;&lt;code&gt;.zshrc&lt;/code&gt;: will be sourced in interactive shells. This contains the main part of Zsh configuration (e.g. my &lt;a href=&#34;https://github.com/htr3n/zsh-config/blob/master/zshrc&#34;&gt;&lt;em&gt;.zshrc&lt;/em&gt;&lt;/a&gt;).&lt;/li&gt; &lt;/ul&gt; &lt;h3 id=&#34;avoiding-creating-subprocesses&#34;&gt;Avoiding creating subprocesses&lt;/h3&gt; &lt;p&gt;Some commands look totally innocent and standard in your shell scripts but might cost you dearly. Among them are commands that launch new &lt;a href=&#34;http://tldp.org/LDP/abs/html/othertypesv.html#CHILDREF2&#34;&gt;child processes&lt;/a&gt; such as &lt;a href=&#34;http://zsh.sourceforge.net/Doc/Release/Expansion.html#Command-Substitution&#34;&gt;&lt;em&gt;command substitutions&lt;/em&gt;&lt;/a&gt; and &lt;a href=&#34;https://www.unix.com/man-page/posix/1posix/eval&#34;&gt;&lt;em&gt;eval&lt;/em&gt; commands&lt;/a&gt;.&lt;/p&gt; &lt;p&gt;&lt;strong&gt;Command Substitutions&lt;/strong&gt;&lt;/p&gt; &lt;p&gt;In Zsh, a command enclosed in &lt;code&gt;$(command)&lt;/code&gt; or quoted with backticks &lt;code&gt;`command`&lt;/code&gt; will be replaced with its standard output. Thus, it is very popular in Unix/Linux world when one wants to execute a command and get the output to process further on. The bad thing is that &lt;em&gt;command substitution&lt;/em&gt; will launch a new process (i.e. a &lt;a href=&#34;http://tldp.org/LDP/abs/html/subshells.html#SUBSHELLSREF&#34;&gt;subshell&lt;/a&gt;).&lt;/p&gt; &lt;p&gt;&lt;strong&gt;&lt;code&gt;eval&lt;/code&gt; command&lt;/strong&gt;&lt;/p&gt; &lt;pre&gt;&lt;code class=&#34;language-sh&#34;&gt;eval [arg...] &lt;/code&gt;&lt;/pre&gt; &lt;p&gt;The command &lt;code&gt;eval&lt;/code&gt; (sounds with &lt;em&gt;evil&lt;/em&gt;, ^_O) is part of POSIX standard and is available in most shells. It&amp;rsquo;s often used together with &lt;em&gt;command substitution&lt;/em&gt;. Essentially, &lt;code&gt;eval&lt;/code&gt; concats its arguments separated with spaces along with evaluating any variables or expressions to form a command with or without arguments. Then it executes the resulting command in the current shell. As such, &lt;code&gt;eval&lt;/code&gt; will cause side-effects as it must evaluate the inputs and perform expansions, if any.&lt;/p&gt; &lt;pre&gt;&lt;code class=&#34;language-sh&#34;&gt;$ command=&amp;quot;print &#39;Hello World&#39;&amp;quot; $ command # nothing happen $ eval $command Hello World &lt;/code&gt;&lt;/pre&gt; &lt;p&gt;This feature makes &lt;code&gt;eval&lt;/code&gt; powerful as it can dynamically evaluate and execute code. But dynamic evaluation also makes &lt;code&gt;eval&lt;/code&gt; risky and time-consuming.&lt;/p&gt; &lt;p&gt;In some cases, for instance, simple string manipulation, we can consider to replace command substitutions and &lt;code&gt;eval&lt;/code&gt; commands that invoke &lt;code&gt;sed&lt;/code&gt;, &lt;code&gt;awk&lt;/code&gt;, etc., with Zsh built-in constructs or hard-coded constants. Zsh provides numerous powerful built-in mechanisms for substring matchings, string explosion/splitting, and &lt;a href=&#34;http://zsh.sourceforge.net/Doc/Release/Expansion.html&#34;&gt;expansions&lt;/a&gt;.&lt;/p&gt; &lt;p&gt;For instance, when using &lt;a href=&#34;https://brew.sh&#34;&gt;Homebrew&lt;/a&gt;, it is very convenient to get the path to an installed package using &lt;code&gt;$(brew --prefix &amp;lt;package&amp;gt;)&lt;/code&gt;.&lt;/p&gt; &lt;pre&gt;&lt;code class=&#34;language-sh&#34;&gt;export PATH=$PATH:&amp;quot;$(brew --prefix httpd)/bin&amp;quot; &lt;/code&gt;&lt;/pre&gt; &lt;p&gt;It turns out many calls to &lt;code&gt;$(brew --prefix ...)&lt;/code&gt; would launch many subprocesses and thus &lt;a href=&#34;https://kev.inburke.com/kevin/profiling-zsh-startup-time&#34;&gt;slow down Zsh notably&lt;/a&gt;. When replacing that &lt;code&gt;$()&lt;/code&gt; command with its actual output, I could gain certain improvement. The caveat is that some upgraded versions might break these hard-coded values.&lt;/p&gt; &lt;h3 id=&#34;lazy-loading&#34;&gt;&lt;em&gt;Lazy-loading&lt;/em&gt; instead of &lt;em&gt;eager-loading&lt;/em&gt;&lt;/h3&gt; &lt;h4 id=&#34;function-autoloading&#34;&gt;Function autoloading&lt;/h4&gt; &lt;p&gt;We can define and source new functions in Zsh. In this way, a function is &lt;em&gt;eagerly loaded&lt;/em&gt; and always available for use. Note that most of these functions might be not really needed until being invoked.&lt;/p&gt; &lt;p&gt;Zsh can help postponing their loading time and allow to &lt;em&gt;load-on-demand&lt;/em&gt; via &lt;a href=&#34;http://zsh.sourceforge.net/Doc/Release/Functions.html#Autoloading-Functions&#34;&gt;function autoloading&lt;/a&gt;. This technique is often called &lt;em&gt;lazy loading&lt;/em&gt;. Performance-wise, &lt;em&gt;lazy loading&lt;/em&gt; will put less pressure to the underlying system and reduce memory footprint. The same techniques are also preferred in many other fields such as databases, dynamic runtime libraries, etc.&lt;/p&gt; &lt;p&gt;In my codebase, I create a folder, namely, &lt;code&gt;autoloaded&lt;/code&gt;, to store functions that will be, er&amp;hellip;, autoloaded by Zsh. For each function, for instance, &lt;code&gt;function hello(){...}&lt;/code&gt;, I will create a corresponding file named &lt;code&gt;hello&lt;/code&gt; inside &lt;code&gt;autoloaded&lt;/code&gt;. The content of that file is the function body (i.e. without &lt;code&gt;function&lt;/code&gt; and &lt;code&gt;(){}&lt;/code&gt;).&lt;/p&gt; &lt;pre&gt;&lt;code class=&#34;language-sh&#34;&gt;$ mkdir autoloaded $ echo &amp;quot;print &#39;Hello World&#39;&amp;quot; &amp;gt;&amp;gt; autoloaded/hello $ tree . └── autoloaded └── hello &lt;/code&gt;&lt;/pre&gt; &lt;p&gt;The folder &lt;code&gt;autoloaded&lt;/code&gt; must be added to ZSH variable &lt;code&gt;fpath&lt;/code&gt; where ZSH will look for function definitions.&lt;/p&gt; &lt;pre&gt;&lt;code class=&#34;language-zsh&#34;&gt;# add &#39;autoload&#39; to fpath $ fpath=($fpath autoloaded) # try to invoke &#39;hello&#39; $ hello zsh: command not found: hello # now mark `hello` for autoloading. $ autoload hello # quickly check how `hello` will be loaded. $ which hello hello () { # undefined builtin autoload -X } # now it works fine $ hello Hello World &lt;/code&gt;&lt;/pre&gt; &lt;p&gt;The body of &lt;code&gt;hello&lt;/code&gt; was marked with &lt;code&gt;#undefined&lt;/code&gt; along with &lt;code&gt;builtin autoload -X&lt;/code&gt; meaning it will be loaded on-demand. The first time &lt;code&gt;hello&lt;/code&gt; is called, Zsh will automatically load and execute it.&lt;/p&gt; &lt;p&gt;In the same way, I configured Zsh to load all of my functions on-demand to reduce memory and loading time.&lt;/p&gt; &lt;blockquote&gt; &lt;p&gt;&lt;strong&gt;Note&lt;/strong&gt;:&lt;br&gt;In &lt;a href=&#34;https://github.com/htr3n/zsh-config&#34;&gt;my scripts&lt;/a&gt;, &lt;code&gt;autoload -Uz function_name&lt;/code&gt; was used. The option &lt;code&gt;-U&lt;/code&gt; prevents alias from being expanded. That is, whenever you define an alias and a function having the same name, the alias will be considered first instead, so &lt;code&gt;-U&lt;/code&gt; just skips alias expansion. And the option &lt;code&gt;-z&lt;/code&gt; indicates that the function will be auto-loaded using &lt;code&gt;zsh&lt;/code&gt; or &lt;code&gt;ksh&lt;/code&gt; style.&lt;/p&gt; &lt;/blockquote&gt; &lt;h4 id=&#34;loading-virtual-environments&#34;&gt;Selective- or lazy-loading virtual environments&lt;/h4&gt; &lt;p&gt;Many virtual environment loaders like &lt;a href=&#34;https://rvm.io/&#34;&gt;rvm&lt;/a&gt;, &lt;a href=&#34;https://github.com/rbenv/rbenv&#34;&gt;rbenv&lt;/a&gt;, &lt;a href=&#34;http://www.jenv.be&#34;&gt;jenv&lt;/a&gt;, &lt;a href=&#34;https://github.com/creationix/nvm&#34;&gt;nvm&lt;/a&gt; have been developed to manage different run-time versions and libraries. While being very handy for software development, most of these tools need to be &lt;em&gt;eagerly loaded&lt;/em&gt; (e.g. directly &lt;code&gt;source&lt;/code&gt; in &lt;code&gt;.zshrc&lt;/code&gt;) to work properly.&lt;/p&gt; &lt;p&gt;Instead, we can consider to transform these loaders as much as possible into &lt;em&gt;on-demand&lt;/em&gt; wrapper functions. You can find a good example &lt;a href=&#34;https://peterlyons.com/problog/2018/01/zsh-lazy-loading&#34;&gt;here&lt;/a&gt;. In summary, Peter&amp;rsquo;s trick is to override &lt;code&gt;nvm&lt;/code&gt; with his own autoloaded &lt;code&gt;nvm()&lt;/code&gt; (that eventually invokes the original &lt;code&gt;nvm&lt;/code&gt; loader). Carlos also went to same way for &lt;code&gt;rbenv&lt;/code&gt;, his own &lt;code&gt;antibody&lt;/code&gt;, &lt;code&gt;pyenv&lt;/code&gt; and achieved &lt;a href=&#34;https://carlosbecker.com/posts/speeding-up-zsh&#34;&gt;some good results&lt;/a&gt;. Benny C. Wong &lt;a href=&#34;http://bennycwong.github.io/post/speeding-up-oh-my-zsh/&#34;&gt;did similarly&lt;/a&gt; for both &lt;code&gt;nvm&lt;/code&gt; and &lt;code&gt;rvm&lt;/code&gt;.&lt;/p&gt; &lt;p&gt;You can also find &lt;a href=&#34;https://frederic-hemberger.de/articles/speed-up-initial-zsh-startup-with-lazy-loading&#34;&gt;another interesting post&lt;/a&gt; by Frederic about optimising Zsh loading time by converting Kubernetes&amp;rsquo;s initialisation code into a lazy-loading function. When not using lazy-loading, you might find Adam&amp;rsquo;s &lt;a href=&#34;https://coderwall.com/p/j6cjnq/make-your-zsh-startup-faster-oh-my-zsh-and-rbenv-fixes&#34;&gt;trick&lt;/a&gt; useful for reducing &lt;code&gt;rbenv&lt;/code&gt; time.&lt;/p&gt; &lt;h3 id=&#34;optimising-completion-system&#34;&gt;Optimising completion system&lt;/h3&gt; &lt;p&gt;One of the beloved Zsh&amp;rsquo;s features is its new &lt;a href=&#34;http://zsh.sourceforge.net/Doc/Release/Completion-System.html&#34;&gt;&lt;em&gt;completion system&lt;/em&gt;&lt;/a&gt;, so-called &lt;a href=&#34;https://linux.die.net/man/1/zshcompsys&#34;&gt;&lt;em&gt;zshcompsys&lt;/em&gt;&lt;/a&gt;. That is, when you type half of a certain command and press &lt;kbd&gt;Tab&lt;/kbd&gt;, Zsh is able to show some suggestions for completing that command.&lt;/p&gt; &lt;p&gt;Zsh does ship with some built-in support for popular commands but not for all kinds of commands. Instead, Zsh offers powerful means for defining custom completion via &lt;a href=&#34;http://zsh.sourceforge.net/Doc/Release/Completion-System.html#Autoloaded-files&#34;&gt;underscored-autoloaded files&lt;/a&gt;.&lt;/p&gt; &lt;p&gt;Zsh completion system must be activated by calling function &lt;a href=&#34;http://zsh.sourceforge.net/Doc/Release/Completion-System.html#Use-of-compinit&#34;&gt;&lt;code&gt;compinit&lt;/code&gt;&lt;/a&gt;. Most of the framework like oh-my-zsh or Prezto will take care of initialising completion system. In my case, after getting rid of big frameworks, I have to manually activate it with &lt;code&gt;autoload -Uz compinit &amp;amp;&amp;amp; compinit&lt;/code&gt;.&lt;/p&gt; &lt;p&gt;Every time &lt;code&gt;compinit&lt;/code&gt; is invoked, it often checks its configurations and re-generates in case of changes. Some have investigated this matter and suggested improvements such as &lt;a href=&#34;https://gist.github.com/ctechols/ca1035271ad134841284&#34;&gt;checking &lt;em&gt;compinit&lt;/em&gt;&amp;rsquo;s cache only once a day&lt;/a&gt;. A similar approach has also been implemented in &lt;a href=&#34;https://github.com/sorin-ionescu/prezto/blob/e149367445d2bcb9faa6ada365dfd56efec39de8/modules/completion/init.zsh#L34&#34;&gt;Prezto&lt;/a&gt;.&lt;/p&gt; &lt;p&gt;Here is a simple excerpt based on &lt;a href=&#34;https://carlosbecker.com/posts/speeding-up-zsh&#34;&gt;Carlos&amp;rsquo;s solution&lt;/a&gt;.&lt;/p&gt; &lt;script type=&#34;application/javascript&#34; src=&#34;//gist.github.com/htr3n/684032f487bb96db527647b74d9c0270.js&#34;&gt;&lt;/script&gt; &lt;h4 id=&#34;lessening-compinit-invocations&#34;&gt;Lessening &lt;code&gt;compinit&lt;/code&gt; invocations&lt;/h4&gt; &lt;p&gt;When running &lt;code&gt;zprof&lt;/code&gt; to profile Zsh execution, as many others also found out, I noticed a lot of invocations to &lt;code&gt;compinit&lt;/code&gt;. It was because I used some smart plugins like &lt;a href=&#34;https://github.com/zsh-users/zsh-completions&#34;&gt;zsh-users/zsh-completions&lt;/a&gt; and &lt;a href=&#34;https://github.com/zsh-users/zsh-autosuggestions&#34;&gt;zsh-users/zsh-autosuggestions&lt;/a&gt; and scattered &lt;code&gt;compinit&lt;/code&gt; in many places. Using &lt;a href=&#34;https://beyondgrep.com&#34;&gt;&lt;em&gt;ack&lt;/em&gt;&lt;/a&gt;, I could quickly spot and remove all &lt;code&gt;compinit&lt;/code&gt;, then only call once at the end of my &lt;a href=&#34;https://github.com/htr3n/zsh-config/blob/master/zshrc&#34;&gt;.zshrc&lt;/a&gt;.&lt;/p&gt; &lt;h4 id=&#34;compiling-completion-dumped-files&#34;&gt;Compiling completion dumped files&lt;/h4&gt; &lt;p&gt;Note that by default &lt;code&gt;compinit&lt;/code&gt; will produce a dumped configuration for accelerating future access. The default dumped file is &lt;code&gt;.zcompdump&lt;/code&gt; (which can be changed with &lt;code&gt;compinit -d new_dump_file&lt;/code&gt; or totally disabled with &lt;code&gt;compinit -D&lt;/code&gt;).&lt;/p&gt; &lt;p&gt;We can go further by compiling the dumped file with the built-in command &lt;a href=&#34;http://zsh.sourceforge.net/Doc/Release/Shell-Builtin-Commands.html#index-compilation&#34;&gt;&lt;code&gt;zcompile&lt;/code&gt; &lt;/a&gt; for faster autoloading of completion functions. As completion is only needed for interactive shell sessions, I put the &lt;code&gt;zcompile&lt;/code&gt; code inside &lt;a href=&#34;https://github.com/htr3n/zsh-config/blob/master/zlogin&#34;&gt;.zlogin&lt;/a&gt; and force it to run in background mode.&lt;/p&gt; &lt;script type=&#34;application/javascript&#34; src=&#34;//gist.github.com/htr3n/5a9b17eab35be60312db6d5afd67f93c.js&#34;&gt;&lt;/script&gt; &lt;h3 id=&#34;optimising-shell-prompts&#34;&gt;Optimising shell prompts&lt;/h3&gt; &lt;p&gt;You can find a lot of frameworks or plugins offer super duper cool command line prompts like &lt;a href=&#34;http://stevelosh.com/blog/2010/02/my-extravagant-zsh-prompt&#34;&gt;this&lt;/a&gt;, &lt;a href=&#34;https://denysdovhan.com/spaceship-prompt/&#34;&gt;this&lt;/a&gt;, or &lt;a href=&#34;https://github.com/bhilburn/powerlevel9k/wiki/Show-Off-Your-Config&#34;&gt;these&lt;/a&gt; that show rich information regarding your current working folder such as versioning status, virtual environments, and many more.&lt;/p&gt; &lt;p&gt;Obviously getting these information will induce extra execution time, especially for checking large versioned repositories or virtual runtime libraries. That leads to many &lt;a href=&#34;https://github.com/robbyrussell/oh-my-zsh/pull/1570&#34;&gt;workarounds&lt;/a&gt;, &lt;a href=&#34;http://marc-abramowitz.com/archives/2012/04/10/fix-for-oh-my-zsh-git-svn-prompt-slowness&#34;&gt;tweaks&lt;/a&gt;, &lt;a href=&#34;https://github.com/robbyrussell/oh-my-zsh/pull/1570&#34;&gt;hacks&lt;/a&gt;, &lt;a href=&#34;https://github.com/creationix/nvm/issues/539&#34;&gt;other hacks&lt;/a&gt;, and more &lt;a href=&#34;https://github.com/denysdovhan/spaceship-prompt/issues/161&#34;&gt;hacks&lt;/a&gt;.&lt;/p&gt; &lt;p&gt;You might want to consider some recent approaches on speeding up shell prompts such as Anish&amp;rsquo;s &lt;a href=&#34;https://www.anishathalye.com/2015/02/07/an-asynchronous-shell-prompt&#34;&gt;non-blocking prompt&lt;/a&gt; or Sindre Sorhus&amp;rsquo;s &lt;a href=&#34;https://github.com/sindresorhus/pure&#34;&gt;&lt;em&gt;pure&lt;/em&gt;&lt;/a&gt; based on Mathias Fredriksson&amp;rsquo;s &lt;a href=&#34;https://github.com/mafredri/zsh-async&#34;&gt;zsh-async&lt;/a&gt;. I have tried &lt;em&gt;pure&lt;/em&gt; and found out its timing is very close to &lt;a href=&#34;https://github.com/htr3n/zsh-config/blob/master/lib/prompts-htr3n.sh&#34;&gt;my own prompts&lt;/a&gt; based on vanilla Zsh scripts and built-in function &lt;a href=&#34;http://zsh.sourceforge.net/Doc/Release/User-Contributions.html#Version-Control-Information&#34;&gt;&lt;code&gt;vcs_info&lt;/code&gt;&lt;/a&gt;. Therefore, I mostly switch back and forth between these prompts in my dev box and totally satisfy with their performance thus far.&lt;/p&gt; &lt;h3 id=&#34;macos-optimisations&#34;&gt;MacOS-specific optimisations&lt;/h3&gt; &lt;h4 id=&#34;path-helper&#34;&gt;Optimising &lt;code&gt;path_helper&lt;/code&gt;&lt;/h4&gt; &lt;p&gt;In the chain of Zsh startup order, &lt;code&gt;/etc/zprofile&lt;/code&gt; will be sourced before &lt;code&gt;~/.zprofile&lt;/code&gt;. So, macOS uses &lt;code&gt;/etc/profile&lt;/code&gt; to establish paths to executable files via &lt;a href=&#34;https://opensource.apple.com/source/shell_cmds/shell_cmds-162/path_helper/path_helper.c.auto.html&#34;&gt;&lt;em&gt;path_helper&lt;/em&gt;&lt;/a&gt;.&lt;/p&gt; &lt;pre&gt;&lt;code class=&#34;language-sh&#34;&gt;$ cat /etc/zprofile # system-wide environment settings for zsh(1) if [ -x /usr/libexec/path_helper ]; then eval `/usr/libexec/path_helper -s` fi &lt;/code&gt;&lt;/pre&gt; &lt;p&gt;To do that, &lt;em&gt;path_helper&lt;/em&gt; will read &lt;code&gt;/etc/paths&lt;/code&gt; and &lt;code&gt;/etc/manpaths&lt;/code&gt;, then read all files inside &lt;code&gt;/etc/paths.d&lt;/code&gt; and &lt;code&gt;/etc/manpaths.d&lt;/code&gt; and append their contents to &lt;code&gt;$PATH&lt;/code&gt; and &lt;code&gt;$MANPATH&lt;/code&gt;, respectively. New paths can be conveniently added by adding a plaintext file in &lt;code&gt;/etc/paths.d&lt;/code&gt; instead of messing common shared configuration files.&lt;/p&gt; &lt;p&gt;Previously in some cases, &lt;em&gt;path_helper&lt;/em&gt; might be very slow as mentioned by Michael Tsai &lt;a href=&#34;https://mjtsai.com/blog/2009/04/01/slow-opening-terminal-windows&#34;&gt;here&lt;/a&gt; and even deserved a &lt;a href=&#34;https://gist.github.com/mkhl/123525&#34;&gt;patch&lt;/a&gt; and a &lt;a href=&#34;https://github.com/mgprot/path_helper&#34;&gt;Perl based alternative&lt;/a&gt;. I reckoned that &lt;em&gt;path_helper&lt;/em&gt; is getting notably slow when the number of paths are growing but its recent version is no longer a script but 64-bit binary executable and seems to work faster.&lt;/p&gt; &lt;p&gt;If you notice that &lt;em&gt;path_helper&lt;/em&gt; makes Zsh slow, you can just put the contents of &lt;code&gt;/etc/paths&lt;/code&gt; and of all files in &lt;code&gt;/etc/paths.d&lt;/code&gt; directly in &lt;code&gt;.zprofile&lt;/code&gt; . After that, just comment out the corresponding code in &lt;code&gt;/etc/profile&lt;/code&gt;.&lt;/p&gt; &lt;blockquote class=&#34;warning&#34;&gt; &lt;strong&gt;Warning&lt;/strong&gt;&lt;br&gt; Tinkering with system configurations like &lt;code&gt;/etc/zprofile&lt;/code&gt; might be risky. And, most of the time, future system updates often reset these changes back to the default values. &lt;/blockquote&gt; &lt;h4 id=&#34;optimising-login-process&#34;&gt;Optimising the login process&lt;/h4&gt; &lt;p&gt;The default &lt;a href=&#34;https://opensource.apple.com/source/system_cmds/system_cmds-541/login.tproj&#34;&gt;&lt;em&gt;login process&lt;/em&gt;&lt;/a&gt; of macOS could be the culprit too. Opening a terminal window or tab will trigger &lt;code&gt;login -pf username&lt;/code&gt; which, in turn, reads from and writes into the logs file in &lt;code&gt;/var/log/asl&lt;/code&gt; (note &lt;code&gt;syslog()&lt;/code&gt; invocations in &lt;a href=&#34;https://opensource.apple.com/source/system_cmds/system_cmds-541/login.tproj/login.c.auto.html&#34;&gt;&lt;code&gt;login.c&lt;/code&gt;&lt;/a&gt;).&lt;/p&gt; &lt;p&gt;We can check this out in any terminal app. The command &lt;code&gt;ps -ef | grep login&lt;/code&gt; will show details about the &lt;code&gt;login&lt;/code&gt; process.&lt;/p&gt; &lt;pre&gt;&lt;code class=&#34;language-sh&#34;&gt;$ ps -ef | grep login ... 0 25142 25141 0 6:40AM ttys000 0:00.13 login -fp htr3n &lt;/code&gt;&lt;/pre&gt; &lt;p&gt;In case you want to dig deeper, execute the following command in a terminal tab/window,&lt;/p&gt; &lt;pre&gt;&lt;code class=&#34;language-sh&#34;&gt;$ sudo opensnoop | grep &amp;quot;/var/log/asl&amp;quot; &lt;/code&gt;&lt;/pre&gt; &lt;p&gt;then open another tab or window to see a lot of accessing to ASLs (standing for &lt;strong&gt;A&lt;/strong&gt;pple &lt;strong&gt;S&lt;/strong&gt;ystem &lt;strong&gt;L&lt;/strong&gt;og, deprecated since macOS 10.12 but still in use somewhere).&lt;/p&gt; &lt;p&gt;Thus, some have reported a &lt;em&gt;magic&lt;/em&gt; that somehow speeds up shell startup by &lt;a href=&#34;http://osxdaily.com/2010/05/06/speed-up-a-slow-terminal-by-clearing-log-files&#34;&gt;deleting macOS ASLs&lt;/a&gt;.&lt;/p&gt; &lt;pre&gt;&lt;code class=&#34;language-sh&#34;&gt;# remove all Apple system logs -- more destructive way $ sudo rm -rf /private/var/log/asl/*.asl &lt;/code&gt;&lt;/pre&gt; &lt;p&gt;Nevertheless, these logs will continuously grow day after day. We might configure &lt;code&gt;/etc/asl.conf&lt;/code&gt; to permanently reduce the amount of ASLs. Using &lt;a href=&#34;https://en.wikipedia.org/wiki/sudo&#34;&gt;&lt;code&gt;sudo&lt;/code&gt;&lt;/a&gt; to open that file in Text Editor (or your editor of choice),&lt;/p&gt; &lt;pre&gt;&lt;code class=&#34;language-sh&#34;&gt;$ sudo open -e /etc/asl.conf &lt;/code&gt;&lt;/pre&gt; &lt;p&gt;then looking for the following lines and changing them accordingly and leaving the rest intact.&lt;/p&gt; &lt;pre&gt;&lt;code&gt;... # save everything from emergency to notice # ? [&amp;lt;= Level notice] store ? [&amp;lt;= Level critical] store ... &lt;/code&gt;&lt;/pre&gt; &lt;p&gt;The idea is to change the log level from &lt;code&gt;notice&lt;/code&gt; to a higher level such as &lt;code&gt;warning&lt;/code&gt;, &lt;code&gt;error&lt;/code&gt;, or &lt;code&gt;critical&lt;/code&gt; (see more on &lt;em&gt;Syslog Message Severities&lt;/em&gt; in &lt;a href=&#34;https://tools.ietf.org/html/rfc5424#page-11&#34;&gt;RFC 5424&lt;/a&gt;. You might also look further in the folder &lt;code&gt;/etc/asl/&lt;/code&gt; to tinker log configurations of certain applications but that is beyond the scope of this article.&lt;/p&gt; &lt;p&gt;Another way is to skip the process of accessing ASLs altogether. For instance, with iTerm 2, press &lt;kbd&gt;⌘&lt;/kbd&gt; + &lt;kbd&gt;,&lt;/kbd&gt; to open menu &lt;span class=&#34;menu&#34;&gt;Preferences&lt;/span&gt; , then go to &lt;span class=&#34;menu&#34;&gt;Profiles ▸ General&lt;/span&gt; .&lt;/p&gt; &lt;figure &gt; &lt;img src=&#34;https://htr3n.github.io/2018/07/faster-zsh/iterm2-login.png&#34; alt=&#34;iTerm 2 login setting&#34; style=&#34;max-width: 100%;&#34; /&gt; &lt;figcaption&gt; &lt;span class=&#34;img--caption&#34;&gt; Figure 2. iTerm 2 login setting &lt;/span&gt; &lt;/figcaption&gt; &lt;/figure&gt; &lt;p&gt;The same way can be applied for Apple&amp;rsquo;s built-in Terminal app.&lt;/p&gt; &lt;figure &gt; &lt;img src=&#34;https://htr3n.github.io/2018/07/faster-zsh/terminal-login.png&#34; alt=&#34;Built-in Terminal login setting&#34; style=&#34;max-width: 100%;&#34; /&gt; &lt;figcaption&gt; &lt;span class=&#34;img--caption&#34;&gt; Figure 3. Built-in Terminal login setting &lt;/span&gt; &lt;/figcaption&gt; &lt;/figure&gt; &lt;h2 id=&#34;conclusion&#34;&gt;Conclusion&lt;/h2&gt; &lt;p&gt;We have walked through some major aspects that might affect Zsh in particular, and other shells, loading time. I hope these discussions can help you to pinpoint and address your shell startup issues and have better experience working with shells and command line. This is what I got after all these effort.&lt;/p&gt; &lt;pre&gt;&lt;code class=&#34;language-sh&#34;&gt;❯ for i in $(seq 1 5); do /usr/bin/time /bin/zsh -i -c exit; done 0.31 real 0.16 user 0.13 sys 0.28 real 0.15 user 0.12 sys 0.28 real 0.15 user 0.12 sys 0.28 real 0.15 user 0.12 sys 0.28 real 0.15 user 0.12 sys &lt;/code&gt;&lt;/pre&gt; &lt;p&gt;If you have any suggestions for improvement or successful tweaks, please drop a comment below.&lt;/p&gt; &lt;h2 id=&#34;reading-list&#34;&gt;Reading List&lt;/h2&gt; &lt;ol&gt; &lt;li&gt;&lt;a href=&#34;https://kev.inburke.com/kevin/profiling-zsh-startup-time&#34;&gt;https://kev.inburke.com/kevin/profiling-zsh-startup-time&lt;/a&gt;&lt;/li&gt; &lt;li&gt;&lt;a href=&#34;https://esham.io/2018/02/zsh-profiling&#34;&gt;https://esham.io/2018/02/zsh-profiling&lt;/a&gt;&lt;/li&gt; &lt;li&gt;&lt;a href=&#34;https://carlosbecker.com/posts/speeding-up-zsh&#34;&gt;https://carlosbecker.com/posts/speeding-up-zsh&lt;/a&gt;&lt;/li&gt; &lt;li&gt;&lt;a href=&#34;https://github.com/robbyrussell/oh-my-zsh/issues/5327&#34;&gt;https://github.com/robbyrussell/oh-my-zsh/issues/5327&lt;/a&gt;&lt;/li&gt; &lt;li&gt;&lt;a href=&#34;https://coderwall.com/p/sladaq/faster-zsh-in-large-git-repository&#34;&gt;https://coderwall.com/p/sladaq/faster-zsh-in-large-git-repository&lt;/a&gt;&lt;/li&gt; &lt;li&gt;&lt;a href=&#34;https://ahmadnazir.github.io/posts/2016-11-03-load-shell-faster/post.html&#34;&gt;https://ahmadnazir.github.io/posts/2016-11-03-load-shell-faster/post.html&lt;/a&gt;&lt;/li&gt; &lt;li&gt;&lt;a href=&#34;https://superuser.com/a/47856/82870&#34;&gt;https://superuser.com/a/47856/82870&lt;/a&gt;&lt;/li&gt; &lt;li&gt;&lt;a href=&#34;https://github.com/robbyrussell/oh-my-zsh&#34;&gt;https://github.com/robbyrussell/oh-my-zsh&lt;/a&gt;&lt;/li&gt; &lt;li&gt;&lt;a href=&#34;https://github.com/sorin-ionescu/prezto&#34;&gt;https://github.com/sorin-ionescu/prezto&lt;/a&gt;&lt;/li&gt; &lt;/ol&gt;</description></item><item><title>A mininal Hugo blogging workflow</title><link>https://htr3n.github.io/2018/07/minimal-hugo-workflow/<pubdate>Sat, 14 Jul 2018 00:00:00 +0000</pubdate><guid>c4f731c008858c6a79162e10947484f2</guid><description>&lt;p&gt;&lt;a href=&#34;https://gohugo.io&#34;&gt;Hugo&lt;/a&gt; is a blazingly fast static site generator based on &lt;a href=&#34;https://golang.org&#34;&gt;Go&lt;/a&gt;. My &lt;a href=&#34;https://htr3n.github.io/2018/01/first-experience-with-hugo/&#34;&gt;first experience with Hugo&lt;/a&gt; was truly pleasant. I appreciate the separation of contents, presentations, and site generation logics in Hugo that leads to less effort for maintenance or switching themes.&lt;/p&gt; &lt;p&gt;On the run-time side, it&amp;rsquo;s also nice that Hugo is often delivered as a reasonably fat executable binary (about 30~50 MB). We almost do not have to install anything else to make it work (although this is not entirely true since Hugo 0.43+).&lt;/p&gt; &lt;p&gt;Using Hugo to &lt;a href=&#34;https://github.com/htr3n/htr3n-blog&#34;&gt;build&lt;/a&gt; this blog, I have learned a lot of things and tried to set up a simple blogging workflow to automate as much as possible the process from writing articles and altering themes to generating sites and watching for changes. My Hugo based blogging workflow comprises three aspects:&lt;/p&gt; &lt;ul&gt; &lt;li&gt;&lt;em&gt;Content&lt;/em&gt; (mainly Markdown)&lt;/li&gt; &lt;li&gt;&lt;em&gt;Presentation&lt;/em&gt; (theming)&lt;/li&gt; &lt;li&gt;&lt;em&gt;Site generation&lt;/em&gt; (Hugo)&lt;/li&gt; &lt;/ul&gt; &lt;p&gt;I will take &lt;a href=&#34;https://github.com/htr3n/htr3n-blog&#34;&gt;my own Hugo blogging project&lt;/a&gt; as an illustrative example. An overview of the project structure is shown in the picture below.&lt;/p&gt; &lt;figure &gt; &lt;img src=&#34;https://htr3n.github.io/2018/07/minimal-hugo-workflow/project-structure.png&#34; alt=&#34;A simple Hugo project structure&#34; style=&#34;max-width: 100%;&#34; /&gt; &lt;figcaption&gt; &lt;span class=&#34;img--caption&#34;&gt; Figure 1. A simple Hugo project structure &lt;/span&gt; &lt;/figcaption&gt; &lt;/figure&gt; &lt;p&gt;&lt;strong&gt;Some relevant project resources:&lt;/strong&gt;&lt;/p&gt; &lt;ul&gt; &lt;li&gt;&lt;code&gt;assets&lt;/code&gt;: my pre-processing resources (e.g. SASS, LESS, images, JavaScript).&lt;/li&gt; &lt;li&gt;&lt;code&gt;content&lt;/code&gt;: Markdown contents&lt;/li&gt; &lt;li&gt;&lt;code&gt;public&lt;/code&gt;: the Web sites generated by Hugo&lt;/li&gt; &lt;li&gt;&lt;code&gt;static&lt;/code&gt;: resources (e.g. CSS, images, JavaScript) to be copied directly to &lt;code&gt;public&lt;/code&gt; by Hugo.&lt;/li&gt; &lt;li&gt;&lt;code&gt;themes&lt;/code&gt;: Hugo themes (here I use my own theme &lt;a href=&#34;https://github.com/htr3n/hyde-hyde&#34;&gt;&lt;em&gt;hyde-hyde&lt;/em&gt;&lt;/a&gt;)&lt;/li&gt; &lt;li&gt;&lt;code&gt;package.json&lt;/code&gt;: Node.js / NPM main configuration&lt;/li&gt; &lt;li&gt;&lt;code&gt;gulpfile.js&lt;/code&gt;: Gulp configuration&lt;/li&gt; &lt;/ul&gt; &lt;h2 id=&#34;content&#34;&gt;Content&lt;/h2&gt; &lt;p&gt;Among many nice features, Hugo supports Markdown contents out-of-the-box. Thus I can keep writing blog posts with my favourite Markdown editors. I have tried a number of editors in macOS, ranging from simple plain text with preview add-ons like &lt;a href=&#34;https://www.sublimetext.com&#34;&gt;Sublime Text&lt;/a&gt;, &lt;a href=&#34;https://macromates.com&#34;&gt;TextMate&lt;/a&gt;, &lt;a href=&#34;https://atom.io&#34;&gt;Atom&lt;/a&gt;, &lt;a href=&#34;https://code.visualstudio.com&#34;&gt;Visual Studio Code&lt;/a&gt;, &lt;a href=&#34;https://www.vim.org&#34;&gt;Vim&lt;/a&gt; to some built-in ones like &lt;a href=&#34;http://www.bear-writer.com&#34;&gt;Bear&lt;/a&gt;, &lt;a href=&#34;https://bywordapp.com&#34;&gt;Byword&lt;/a&gt;, &lt;a href=&#34;http://macdown.uranusjr.com&#34;&gt;MacDown&lt;/a&gt;, &lt;a href=&#34;http://mouapp.com&#34;&gt;Mou&lt;/a&gt;, &lt;a href=&#34;http://www.texts.io&#34;&gt;Texts&lt;/a&gt;, &lt;a href=&#34;https://ia.net/writer&#34;&gt;IA Writer&lt;/a&gt;, &lt;a href=&#34;http://marked2app.com&#34;&gt;Marked&lt;/a&gt; (only preview), &lt;a href=&#34;https://typora.io&#34;&gt;Typora&lt;/a&gt;, to name but by no means completed. You can see &lt;a href=&#34;https://github.com/mundimark/awesome-markdown-editors&#34;&gt;here&lt;/a&gt; a list including most of Markdown editors available and &lt;a href=&#34;https://www.sitepoint.com/the-best-markdown-editors-for-mac&#34;&gt;here&lt;/a&gt; are some for macOS.&lt;/p&gt; &lt;p&gt;My first editor was Mou, due to its simplicity and highly customisable themes and rendering styles. Later on Mou&amp;rsquo;s developer decided to sell its ownership, then resumed working on its beta making the software status a bit unclear and frustrated. &lt;a href=&#34;https://uranusjr.com&#34;&gt;Tzu-ping Chung&lt;/a&gt; (@&lt;a href=&#34;https://github.com/uranusjr&#34;&gt;uranusjr&lt;/a&gt;) has created a similar editor, namely, &lt;a href=&#34;http://macdown.uranusjr.com&#34;&gt;MacDown&lt;/a&gt;, and &lt;a href=&#34;https://github.com/MacDownApp/macdown&#34;&gt;open-sourced it&lt;/a&gt;. Then I started using MacDown with the existing Mou&amp;rsquo;s themes and styles.&lt;/p&gt; &lt;p&gt;I could not remember exactly when and how I found &lt;a href=&#34;https://typora.io&#34;&gt;Typora&lt;/a&gt; but it never ceases to amaze me. With Typora, I can enjoy seamless editing and rendering in the same window, i.e., I can write Markdown normally and directly see the content rendered. Typora is still free in its beta phase and will become paid software when released. It has become my Markdown editor of choice and will be in future should its price tag is reasonable. For quick fixes, I use any editors at hand, for instance Visual Studio Code when working on a Hugo project.&lt;/p&gt; &lt;h2 id=&#34;presentation&#34;&gt;Presentation&lt;/h2&gt; &lt;p&gt;The nice thing is that a Hugo theme is a standalone component for decorating Hugo generated sites. Nevertheless, I can override a theme&amp;rsquo;s settings (e.g. layouts, styles) with my own versions with respect to &lt;a href=&#34;https://gohugo.io/templates/lookup-order&#34;&gt;Hugo lookup order&lt;/a&gt;. A theme contains resources for templating, layouting, and styling. Hugo&amp;rsquo;s templating and layouting have been discussed a lot around. Styling resources in a typical Hugo project can be found inside its theme&amp;rsquo;s &lt;code&gt;static&lt;/code&gt; or the project root&amp;rsquo;s &lt;code&gt;static&lt;/code&gt; and &lt;code&gt;assets&lt;/code&gt;.&lt;/p&gt; &lt;p&gt;I used to work with CSS styles. After learning more about CSS preprocessors and attracted by the abstraction levels and tooling they provide, I decide to give a try and refactored my existing codebase to SCSS. Hence, my workflow should include support for SCSS (you might opt for LESS or Stylus but still can leverage a similar workflow with just right processing components).&lt;/p&gt; &lt;h2 id=&#34;site-generation&#34;&gt;Site Generation&lt;/h2&gt; &lt;p&gt;Hugo will be main element that generates the final Web site taking input resources from content and presentation components. Until version 0.43, Hugo has not provided support for SASS. Hence, many have to develop their own &lt;a href=&#34;https://blog.carlmjohnson.net/post/2017/hugo-asset-pipeline&#34;&gt;&amp;lsquo;&lt;em&gt;asset pipeline&lt;/em&gt;&amp;lsquo;&lt;/a&gt;, i.e., incorporating preprocessors and post-processors with Hugo generation process.&lt;/p&gt; &lt;h3 id=&#34;endogenous-pipeline&#34;&gt;Endogenous Pipeline&lt;/h3&gt; &lt;p&gt;This approach, also called &lt;em&gt;in-line pipeline&lt;/em&gt;, only works since Hugo &lt;a href=&#34;https://gohugo.io/news/0.43-relnotes&#34;&gt;v0.43/extended&lt;/a&gt; and later that supports processing SASS/CSS with consideration for &lt;a href=&#34;https://en.wikipedia.org/wiki/Minification_%28programming%29&#34;&gt;minification&lt;/a&gt;, post-processing, and &lt;a href=&#34;https://www.keycdn.com/support/what-is-cache-busting&#34;&gt;cache busting&lt;/a&gt;.&lt;/p&gt; &lt;p&gt;In Hugo templates, I can refer to SCSS files via &lt;a href=&#34;https://gohugo.io/content-management/page-resources&#34;&gt;&lt;em&gt;page resources&lt;/em&gt;&lt;/a&gt;.&lt;/p&gt; &lt;pre&gt;&lt;code class=&#34;language-html&#34;&gt;{{ $styles := resources.Get &amp;quot;scss/hyde-hyde.scss&amp;quot; | toCSS | postCSS (dict &amp;quot;use&amp;quot; &amp;quot;autoprefixer&amp;quot;) | minify | fingerprint }} &amp;lt;link rel=&amp;quot;stylesheet&amp;quot; href=&amp;quot;{{ $styles.Permalink }}&amp;quot; integrity=&amp;quot;{{ $styles.Data.Integrity }}&amp;quot;&amp;gt; &lt;/code&gt;&lt;/pre&gt; &lt;p&gt;Note that Hugo will look for &lt;code&gt;scss/hyde-hyde.scss&lt;/code&gt; in the project&amp;rsquo;s root and then the theme&amp;rsquo;s root, in that order.&lt;/p&gt; &lt;p&gt;Hugo retrieves the resource &lt;code&gt;hyde-hyde.scss&lt;/code&gt; using &lt;code&gt;Resources.Get&lt;/code&gt;, then &lt;a href=&#34;https://gohugo.io/hugo-pipes/scss-sass&#34;&gt;transforms it&lt;/a&gt; into &lt;code&gt;hyde-hyde.css&lt;/code&gt; and passes it to &lt;a href=&#34;https://gohugo.io/hugo-pipes/postcss&#34;&gt;PostCSS&lt;/a&gt; for &lt;a href=&#34;https://github.com/postcss/autoprefixer&#34;&gt;autoprefixing&lt;/a&gt;. After that, it &lt;a href=&#34;https://gohugo.io/hugo-pipes/minification/&#34;&gt;minifies&lt;/a&gt; the CSS and generates a &lt;em&gt;fingerprinted version&lt;/em&gt;. The second line simply links the resulting &lt;code&gt;hyde-hyde.css&lt;/code&gt; with HTML via the variable &lt;code&gt;$style&lt;/code&gt;. The result in the generated HTML will be like this (note that the code can be different to yours).&lt;/p&gt; &lt;pre&gt;&lt;code class=&#34;language-html&#34;&gt;&amp;lt;link rel=&amp;quot;stylesheet&amp;quot; href=&amp;quot;http://localhost:1313/scss/hyde-hyde.4ff234ab46aa5302c7e0d2f35b9c76a8bba9fe42a9e8a6c7c47df7f85b8de122.css&amp;quot; integrity=&amp;quot;sha256-T/I0q0aqUwLH4NLzW5x2qLup/kKp6KbHxH33&amp;amp;#43;FuN4SI=&amp;quot;&amp;gt; &lt;/code&gt;&lt;/pre&gt; &lt;p&gt;The fingerprint code is for &lt;em&gt;cache busting&lt;/em&gt; and only changed when the source file is altered.&lt;/p&gt; &lt;p&gt;The biggest advantage of &lt;em&gt;in-line pipeline&lt;/em&gt; is that Hugo already provides a certain level of built-in support. Hugo&amp;rsquo;s &lt;em&gt;live reload&lt;/em&gt;, i.e. serving the resulting sites live and automatically refreshing whenever there are changes of contents or themes, also works superbly for this case.&lt;/p&gt; &lt;p&gt;For many scenarios, we can use this approach instead of configuring complex tools like Gulp, Grunt, or Webpack. To be precise, I do need to install extra tools, which are &lt;code&gt;postcss-cli&lt;/code&gt; and &lt;code&gt;autoprefixer&lt;/code&gt;, for the aforementioned example to work and Hugo 0.43 extended version &lt;a href=&#34;https://github.com/Homebrew/homebrew-core/issues/29898&#34;&gt;partially depends on Cgo/libc++&lt;/a&gt;.&lt;/p&gt; &lt;pre&gt;&lt;code class=&#34;language-sh&#34;&gt;$ npm i -g postcss-cli autoprefixer &lt;/code&gt;&lt;/pre&gt; &lt;p&gt;Another downside to consider is that, in this way, external tools like &lt;code&gt;postcss&lt;/code&gt; will slow down Hugo.&lt;/p&gt; &lt;blockquote&gt; &lt;p&gt;&lt;strong&gt;Note&lt;/strong&gt;&lt;/p&gt; &lt;p&gt;As I checked out &lt;a href=&#34;https://discourse.gohugo.io/t/how-to-use-source-maps-with-hugo-0-43/12826&#34;&gt;this thread&lt;/a&gt; and &lt;a href=&#34;https://discourse.gohugo.io/t/how-to-use-source-maps-with-hugo-0-43/12826/9&#34;&gt;tried on my project&lt;/a&gt;, Hugo&amp;rsquo;s extensions like &lt;code&gt;postCSS&lt;/code&gt;, &lt;code&gt;minify&lt;/code&gt;, and &lt;code&gt;fingerprint&lt;/code&gt; could mess up CSS sourcemaps. If you need sourcemaps for developing and debugging, please ignore them and consider the &lt;em&gt;exogenous pipeline&lt;/em&gt;.&lt;/p&gt; &lt;/blockquote&gt; &lt;h3 id=&#34;exogenous-pipeline&#34;&gt;Exogenous Pipeline&lt;/h3&gt; &lt;p&gt;When working on more complex asset pipelining, we have to involve external tools to build an &lt;em&gt;exogenous asset pipeline&lt;/em&gt;. This is also my blogging workflow before Hugo v0.43. Now, I can mostly get rid of this &lt;em&gt;exogenous pipeline&lt;/em&gt;. Here we will walk through this approach merely for the sake of completeness.&lt;/p&gt; &lt;p&gt;There are several ways to handle Web resources. For instance, Netlify provides a boilerplate project, namely, &lt;a href=&#34;https://github.com/netlify/victor-hugo&#34;&gt;&lt;em&gt;victor-hugo&lt;/em&gt;&lt;/a&gt; for starting a new Hugo project and preparing to deploy to its hosting. This boilerplate employs &lt;a href=&#34;https://gulpjs.com&#34;&gt;Gulp&lt;/a&gt;, &lt;a href=&#34;https://webpack.js.org&#34;&gt;Webpack&lt;/a&gt;, &lt;a href=&#34;https://github.com/postcss/postcss&#34;&gt;PostCSS&lt;/a&gt;, and &lt;a href=&#34;https://browsersync.io&#34;&gt;Browsersync&lt;/a&gt; around Hugo. There are many developers rooting for Gulp &lt;a href=&#34;(#references)&#34;&gt;[1, 2, 3, 4, 5]&lt;/a&gt; whilst some others go for Grunt &lt;a href=&#34;(#references)&#34;&gt;[6]&lt;/a&gt; or Webpack &lt;a href=&#34;#references&#34;&gt;[7, 8]&lt;/a&gt;. And even few brave ones use &lt;a href=&#34;http://thecodestead.com/post/how-to-use-npm-as-a-build-tool-with-hugo&#34;&gt;pure NPM&lt;/a&gt; &lt;a href=&#34;#references&#34;&gt;[9, 10]&lt;/a&gt;.&lt;/p&gt; &lt;p&gt;For starter projects with Hugo, you might want to consider some useful projects such as &lt;a href=&#34;https://github.com/jbrodriguez/hugulp&#34;&gt;hugulp&lt;/a&gt;, &lt;a href=&#34;http://ktmud.github.io/huggle/en/intro&#34;&gt;Huggle&lt;/a&gt;, &lt;a href=&#34;https://github.com/vseventer/hugo-webpack-boilerplate&#34;&gt;hugo-webpack-boilerplate&lt;/a&gt;. In my project, I combine Gulp with NPM and leverage some Gulp&amp;rsquo;s components for the asset pipeline.&lt;/p&gt; &lt;ul&gt; &lt;li&gt;&lt;em&gt;SASS/SCSS to CSS&lt;/em&gt;: a sensible choice is &lt;a href=&#34;https://www.npmjs.com/package/gulp-sass&#34;&gt;&lt;em&gt;gulp-sass&lt;/em&gt;&lt;/a&gt;.&lt;/li&gt; &lt;li&gt;&lt;em&gt;Sourcemaps&lt;/em&gt; (optional): this is not mandatory but very handy for developing and debugging phase. I pick &lt;a href=&#34;https://www.npmjs.com/package/gulp-sourcemaps&#34;&gt;&lt;em&gt;gulp-sourcemaps&lt;/em&gt;&lt;/a&gt;.&lt;/li&gt; &lt;li&gt;&lt;em&gt;Autoprefixing&lt;/em&gt;: it helps adding vendor-specific prefixes to CSS rules. We can use &lt;a href=&#34;https://www.npmjs.com/package/gulp-autoprefixer&#34;&gt;&lt;em&gt;gulp-autoprefixer&lt;/em&gt;&lt;/a&gt; but be careful to combine with &lt;em&gt;gulp-sourcemaps&lt;/em&gt; as it is &lt;a href=&#34;https://github.com/gulp-sourcemaps/gulp-sourcemaps/wiki/Plugins-with-gulp-sourcemaps-support#css&#34;&gt;currently broken&lt;/a&gt;. I decide to use &lt;a href=&#34;https://www.npmjs.org/package/gulp-postcss&#34;&gt;&lt;em&gt;gulp-postcss&lt;/em&gt;&lt;/a&gt; along with &lt;a href=&#34;https://www.npmjs.com/package/autoprefixer&#34;&gt;&lt;em&gt;postcss-autoprefixer&lt;/em&gt;&lt;/a&gt; instead.&lt;/li&gt; &lt;li&gt;&lt;em&gt;Minification&lt;/em&gt;: &lt;a href=&#34;https://github.com/postcss/postcss&#34;&gt;PostCSS&lt;/a&gt; provides many plugins for CSS post-processing alongside &lt;em&gt;autoprefixer&lt;/em&gt;. I choose &lt;a href=&#34;http://cssnano.co&#34;&gt;&lt;em&gt;cssnano&lt;/em&gt;&lt;/a&gt; to minify the CSSs.&lt;/li&gt; &lt;/ul&gt; &lt;pre&gt;&lt;code class=&#34;language-sh&#34;&gt;$ npm i -D gulp@next gulp-sass gulp-postcss autoprefixer gulp-sourcemaps cssnano &lt;/code&gt;&lt;/pre&gt; &lt;p&gt;In the same way, you can add more components to the list. Here I rather keep it short and simple for illustrative purpose. Now I start configuring Gulp to use them in my project.&lt;/p&gt; &lt;script type=&#34;application/javascript&#34; src=&#34;//gist.github.com/htr3n/eb8dde0659b066367d438879d6650e54.js&#34;&gt;&lt;/script&gt; &lt;p&gt;Note that the syntax is Gulp v4.0.&lt;/p&gt; &lt;p&gt;Now I just simply invoke Gulp to trigger its chaining pipeline.&lt;/p&gt; &lt;pre&gt;&lt;code class=&#34;language-sh&#34;&gt;$ gulp [10:23:40] Using gulpfile ~/working/dev/htr3n-blog/gulpfile.js [10:23:40] Starting &#39;default&#39;... [10:23:40] Starting &#39;watch&#39;... [10:23:40] Starting &#39;scss&#39;... [10:23:40] Finished &#39;scss&#39; after 58 ms [10:23:40] Starting &#39;&amp;lt;anonymous&amp;gt;&#39;... &lt;/code&gt;&lt;/pre&gt; &lt;p&gt;Gulp will transform &lt;code&gt;hyde-hyde.scss&lt;/code&gt; into &lt;code&gt;hyde-hyde.css&lt;/code&gt; which is autoprefixed and saved in &lt;code&gt;static/css&lt;/code&gt; along with its sourcemaps. In the Hugo templates, I refer to &lt;code&gt;hyde-hyde.css&lt;/code&gt; normally.&lt;/p&gt; &lt;pre&gt;&lt;code class=&#34;language-html&#34;&gt;&amp;lt;link rel=&amp;quot;stylesheet&amp;quot; href=&amp;quot;{{ .Site.BaseURL }}/css/hyde-hyde.css&amp;quot;&amp;gt; &lt;/code&gt;&lt;/pre&gt; &lt;p&gt;I can combine &lt;a href=&#34;https://github.com/gulpjs/gulp/blob/master/docs/API.md#gulpwatchglobs-opts-fn&#34;&gt;Gulp.watch()&lt;/a&gt; with Hugo&amp;rsquo;s &lt;em&gt;live reload&lt;/em&gt; feature so that both will continuously monitors for changes and serve them instantly. This way, whenever I made any changes in a post in Typora, a SCSS/CSS file, or Go+HTML layout, I will instantly see the generated HTMLs.&lt;/p&gt; &lt;pre&gt;&lt;code class=&#34;language-sh&#34;&gt;$ hugo server -w --cleanDestinationDir | EN +------------------+-----+ Pages | 320 Paginator pages | 0 Non-page files | 14 Static files | 14 Processed images | 0 Aliases | 0 Sitemaps | 1 Cleaned | 0 Total in 193 ms Watching for changes in /Users/htr3n/working/dev/htr3n-blog/{assets,content,data,layouts,static,themes} Watching for config changes in /Users/htr3n/working/dev/htr3n-blog/config.toml Serving pages from memory Running in Fast Render Mode. For full rebuilds on change: hugo server --disableFastRender Web Server is available at http://localhost:1313/ (bind address 127.0.0.1) Press Ctrl+C to stop &lt;/code&gt;&lt;/pre&gt; &lt;p&gt;Please note that, by default, Hugo will only keep watching the following folders &lt;code&gt;{assets, content, data, layouts, static, themes}&lt;/code&gt;. Hence, our SCSS files might not be in one of these folders but we must ensure the resources generated from Gulp are. As I illustrated &lt;em&gt;endogenous pipeline&lt;/em&gt; above, my SCSSs are kept in &lt;code&gt;assets&lt;/code&gt; such that Hugo &lt;code&gt;Resources.Get&lt;/code&gt; can find them. If you opt for &lt;em&gt;exogenous pipeline&lt;/em&gt;, you should put the preprocessing resources elsewhere.&lt;/p&gt; &lt;p&gt;After all, we can open the browser to &lt;a href=&#34;http://localhost:1313&#34;&gt;http://localhost:1313&lt;/a&gt; and enjoy the experience of live editing side-by-side.&lt;/p&gt; &lt;figure &gt; &lt;img src=&#34;https://htr3n.github.io/2018/07/minimal-hugo-workflow/side-by-side.png&#34; alt=&#34;Typora (left) and the generated HTML pages (right)&#34; width=&#34;99%&#34; style=&#34;max-width: 100%;&#34; /&gt; &lt;figcaption&gt; &lt;span class=&#34;img--caption&#34;&gt; Figure 2. Typora (left) and the generated HTML pages (right) &lt;/span&gt; &lt;/figcaption&gt; &lt;/figure&gt; &lt;p&gt;At this point, we seem to miss &lt;em&gt;cache busting&lt;/em&gt; which is provided in the &lt;em&gt;endogenous pipeline&lt;/em&gt; with Hugo. That is also the biggest advantage of using external tools as we need to establish the connections between Hugo generated resources and Gulp&amp;rsquo;s manipulated resources on our own.&lt;/p&gt; &lt;p&gt;It is a tad complicated as you can find &lt;a href=&#34;https://byteplumbing.net/2017/08/static-asset-cache-busting-for-hugo&#34;&gt;here&lt;/a&gt;, &lt;a href=&#34;https://blog.carlmjohnson.net/post/2017/hugo-asset-pipeline/&#34;&gt;here&lt;/a&gt; and &lt;a href=&#34;http://danbahrami.io/articles/building-a-production-website-with-hugo-and-gulp-js&#34;&gt;here&lt;/a&gt;. In summary, the idea is to generate &lt;a href=&#34;https://en.wikipedia.org/wiki/Hash_function&#34;&gt;&lt;em&gt;hash signatures&lt;/em&gt;&lt;/a&gt; for your CSSs, for instance, using &lt;a href=&#34;https://en.wikipedia.org/wiki/MD5&#34;&gt;MD5&lt;/a&gt; or &lt;a href=&#34;https://en.wikipedia.org/wiki/Secure_Hash_Algorithms&#34;&gt;SHA&lt;/a&gt;, store the relevant data as dictionary &lt;a href=&#34;https://en.wikipedia.org/wiki/Key-value_database&#34;&gt;key-value&lt;/a&gt; pairs, e.g. &lt;code&gt;&#39;hyde-hyde.css&#39; =&amp;gt; &#39;hyde-hyde.the-latest-hash-number.css&#39;&lt;/code&gt;, then use Hugo’s &lt;a href=&#34;https://gohugo.io/templates/data-templates/&#34;&gt;data templates&lt;/a&gt; feature to refer to those pairs. This approach has actually been implemented in the aforementioned Hugo&amp;rsquo;s extensions.&lt;/p&gt; &lt;p&gt;In case you really need &lt;em&gt;cache busting&lt;/em&gt;, we can utilise Hugo v0.43 extensions to complement Gulp on this matter (🐵). We just modify the Gulp configuration a bit so that the output folder is no longer &lt;code&gt;static&lt;/code&gt; but &lt;code&gt;assets/css&lt;/code&gt; as Hugo&amp;rsquo;s &lt;code&gt;Resources.Get&lt;/code&gt; rather strictly looks for resources in &lt;code&gt;assets&lt;/code&gt;.&lt;/p&gt; &lt;pre&gt;&lt;code class=&#34;language-javascript&#34;&gt;var outputFolder = &#39;assets/css&#39;; &lt;/code&gt;&lt;/pre&gt; &lt;p&gt;And in the HTML, we use similar templates without &lt;code&gt;toCSS&lt;/code&gt; and &lt;code&gt;postCSS&lt;/code&gt; that are done with Gulp.&lt;/p&gt; &lt;pre&gt;&lt;code class=&#34;language-html&#34;&gt;{{ $styles := resources.Get &amp;quot;css/hyde-hyde.css&amp;quot; | minify | fingerprint }} &amp;lt;link rel=&amp;quot;stylesheet&amp;quot; href=&amp;quot;{{ $styles.Permalink }}&amp;quot; integrity=&amp;quot;{{ $styles.Data.Integrity }}&amp;quot;&amp;gt; &lt;/code&gt;&lt;/pre&gt; &lt;p&gt;It seems Gulp becomes redundant here as Hugo can perform &lt;code&gt;toCSS&lt;/code&gt;, &lt;code&gt;postCSS&lt;/code&gt;, and &lt;code&gt;minify&lt;/code&gt; just fine. Nonetheless, in case you need other functionalities that are not yet provided by Hugo, Gulp will be what you should ask for. Besides, as per &lt;strong&gt;Note&lt;/strong&gt; above, there are still some issues with Hugo&amp;rsquo;s extension regarding sourcemaps whilst Gulp&amp;rsquo;s asset pipeline above works flawlessly.&lt;/p&gt; &lt;h4 id=&#34;more-automation-please&#34;&gt;More automation, please!!!&lt;/h4&gt; &lt;p&gt;There are still two manual tasks for the &lt;em&gt;exogenous pipeline&lt;/em&gt;, one for invoking Gulp and another one to start Hugo. Aiming to automate the workflow as much as possible, we can merge two tasks using one execution script, via NPM.&lt;/p&gt; &lt;p&gt;There are a number of options for running tasks concurrently in NPM including &lt;a href=&#34;https://www.npmjs.com/package/npm-run-all&#34;&gt;npm-run-all&lt;/a&gt;, &lt;a href=&#34;https://www.npmjs.com/package/npm-run-parallel&#34;&gt;npm-run-parallel&lt;/a&gt;, &lt;a href=&#34;https://www.npmjs.com/package/concurrently&#34;&gt;concurrently&lt;/a&gt;, or using &lt;a href=&#34;https://en.wikipedia.org/wiki/Background_process&#34;&gt;background process&lt;/a&gt; if you are using Linux/macOS alike. Even Gulp also has some helper plugins like &lt;a href=&#34;https://www.npmjs.com/package/gulp-exec&#34;&gt;gulp-exec&lt;/a&gt; to execute child processes, &lt;a href=&#34;https://www.npmjs.com/package/gulp-nodemon&#34;&gt;gulp-nodemon&lt;/a&gt; to run in &lt;a href=&#34;https://en.wikipedia.org/wiki/Daemon_%28computing%29&#34;&gt;daemon mode&lt;/a&gt;, and Gulp 4.0+ has &lt;a href=&#34;https://github.com/gulpjs/gulp/blob/4.0/docs/API.md#gulpparalleltasks&#34;&gt;Gulp.parallel()&lt;/a&gt;.&lt;/p&gt; &lt;p&gt;Let&amp;rsquo;s consider a simple example with &lt;a href=&#34;https://www.npmjs.com/package/npm-run-all&#34;&gt;npm-run-all&lt;/a&gt;. Other tools can be used similarly.&lt;/p&gt; &lt;pre&gt;&lt;code class=&#34;language-sh&#34;&gt;$ npm i -D npm-run-all &lt;/code&gt;&lt;/pre&gt; &lt;p&gt;Then define some simple scripts in &lt;code&gt;package.json&lt;/code&gt; for executing Gulp and Hugo.&lt;/p&gt; &lt;script type=&#34;application/javascript&#34; src=&#34;//gist.github.com/htr3n/cbfb959546392ef5e948c86c0c05af9d.js&#34;&gt;&lt;/script&gt; &lt;p&gt;Given no issues, we should execute &lt;code&gt;npm run dev&lt;/code&gt; and see both Hugo and Gulp running in parallel.&lt;/p&gt; &lt;h2 id=&#34;further-optimisations&#34;&gt;Further Optimisations&lt;/h2&gt; &lt;p&gt;As you might have noticed, the Web resources (e.g. HTML, CSS) generated by Hugo may contain a lot of whitespace and/or line-breaks. You can easily see this when viewing the source code of the generated Web pages.&lt;/p&gt; &lt;p&gt;During the developing phase in my local machines, I always keep the generated resources untouched so that I can read the code for debugging or analysing. When deploying to hosting servers, we don&amp;rsquo;t often preserve the readability of the source code as the end-users mainly see and interact with the beautiful pages rendered by Web browsers.&lt;/p&gt; &lt;p&gt;Therefore, I configure a simple Gulp task to optimise the generated Web resources before pushing them to the servers. What I need is &lt;a href=&#34;https://www.npmjs.com/package/gulp-htmlmin&#34;&gt;&lt;code&gt;gulp-htmlmin&lt;/code&gt;&lt;/a&gt;&amp;mdash;a Gulp front-end of &lt;a href=&#34;https://github.com/kangax/html-minifier&#34;&gt;&lt;em&gt;html-minifier&lt;/em&gt;&lt;/a&gt;. Please refer to &lt;em&gt;html-minifier&lt;/em&gt;&amp;rsquo;s &lt;a href=&#34;https://github.com/kangax/html-minifier&#34;&gt;documentations&lt;/a&gt; should you need to learn further about its options.&lt;/p&gt; &lt;pre&gt;&lt;code class=&#34;language-sh&#34;&gt;$ npm i -D gulp-htmlmin &lt;/code&gt;&lt;/pre&gt; &lt;p&gt;And I create a simple Gulp task for minifying Web resources that can be invoked at command line as &lt;code&gt;gulp minify-html&lt;/code&gt;. This task should be performed after calling Hugo to generate the Web pages.&lt;/p&gt; &lt;script type=&#34;application/javascript&#34; src=&#34;//gist.github.com/htr3n/d91b6937e88050c4e7e820d82be2c2e1.js&#34;&gt;&lt;/script&gt; &lt;p&gt;The main idea is to use &lt;code&gt;gulp-htmlmin&lt;/code&gt; to minify HTMLs, JavaScripts, and CSSs whilst leaving others intact. Note that the place of the optimised resources is the folder &lt;code&gt;dist&lt;/code&gt; inside Hugo project.&lt;/p&gt; &lt;h2 id=&#34;references&#34;&gt;References&lt;/h2&gt; &lt;ol&gt; &lt;li&gt;&lt;a href=&#34;https://markus.oberlehner.net/blog/using-gulp-and-uncss-in-combination-with-sass-based-hugo-themes&#34;&gt;https://markus.oberlehner.net/blog/using-gulp-and-uncss-in-combination-with-sass-based-hugo-themes&lt;/a&gt;&lt;/li&gt; &lt;li&gt;&lt;a href=&#34;http://danbahrami.io/articles/building-a-production-website-with-hugo-and-gulp-js&#34;&gt;http://danbahrami.io/articles/building-a-production-website-with-hugo-and-gulp-js&lt;/a&gt;&lt;/li&gt; &lt;li&gt;&lt;a href=&#34;https://devotter.com/blog/using-gulp-with-hugo&#34;&gt;https://devotter.com/blog/using-gulp-with-hugo&lt;/a&gt;&lt;/li&gt; &lt;li&gt;&lt;a href=&#34;https://adamwills.io/blog/discovering-hugo-2-workflow&#34;&gt;https://adamwills.io/blog/discovering-hugo-2-workflow&lt;/a&gt;&lt;/li&gt; &lt;li&gt;&lt;a href=&#34;http://www.sagarganatra.com/2016/12/building-your-static-site-with-hugo.html&#34;&gt;http://www.sagarganatra.com/2016/12/building-your-static-site-with-hugo.html&lt;/a&gt;&lt;/li&gt; &lt;li&gt;&lt;a href=&#34;http://tjm.io/grunt-hugo&#34;&gt;http://tjm.io/grunt-hugo&lt;/a&gt;&lt;/li&gt; &lt;li&gt;&lt;a href=&#34;https://byteplumbing.net/2017/08/static-asset-cache-busting-for-hugo&#34;&gt;https://byteplumbing.net/2017/08/static-asset-cache-busting-for-hugo&lt;/a&gt;&lt;/li&gt; &lt;li&gt;&lt;a href=&#34;https://tomodwyer.com/post/2017-10-22-hugo---webpack--%EF%B8%8F/&#34;&gt;https://tomodwyer.com/post/2017-10-22-hugo---webpack--%EF%B8%8F/&lt;/a&gt;&lt;/li&gt; &lt;li&gt;&lt;a href=&#34;http://thecodestead.com/post/how-to-use-npm-as-a-build-tool-with-hugo&#34;&gt;http://thecodestead.com/post/how-to-use-npm-as-a-build-tool-with-hugo&lt;/a&gt;&lt;/li&gt; &lt;li&gt;&lt;a href=&#34;https://www.henriksommerfeld.se/build-steps-using-npm-scripts-for-my-hugo-blog&#34;&gt;https://www.henriksommerfeld.se/build-steps-using-npm-scripts-for-my-hugo-blog&lt;/a&gt;&lt;/li&gt; &lt;/ol&gt;</description></item><item><title>Bootstrapping macOS workspace</title><link>https://htr3n.github.io/2018/06/bootstrapping-macos-workspace/<pubdate>Wed, 27 Jun 2018 00:00:00 +0000</pubdate><guid>e0c710eec7384716b4f93ccfd253c715</guid><description>&lt;p&gt;I have experienced a number of different Mac systems, ranging from the old white MacBook 2006 to iMac and MacMini 2010 and lately MacBook Pro 13&amp;rdquo; and 15&amp;rdquo;. From time to time, Time Machine has become extremely handy for transferring my data from the old to the new machine.&lt;/p&gt; &lt;p&gt;Nevertheless, a lot of changes, mostly for software development, have often been ignored or reset to the default values. As a result, I often find myself searching around over and over for some desirable settings. Thus, this post is kind of a note-to-self on few useful tweaks for my development box so that I can easily reach out later.&lt;/p&gt; &lt;p&gt;&lt;strong&gt;Update&lt;/strong&gt;: As it turned out that the tweaks and configurations were getting longer and became tedious to follow, I split them into two parts:&lt;/p&gt; &lt;ul&gt; &lt;li&gt;&lt;a href=&#34;#system-tweak-and-configs&#34;&gt;Part 1: System tweaks and configurations&lt;/a&gt;&lt;/li&gt; &lt;li&gt;&lt;a href=&#34;#dev-tools-and-configs&#34;&gt;Part 2: Development tools and configurations&lt;/a&gt;&lt;/li&gt; &lt;/ul&gt; &lt;hr /&gt; &lt;h2 id=&#34;system-tweak-and-configs&#34;&gt;Part 1: System tweaks and configurations&lt;/h2&gt; &lt;h3 id=&#34;disable-sip&#34;&gt;Disable System Integrity Protection (SIP)&lt;/h3&gt; &lt;p&gt;&lt;a href=&#34;https://support.apple.com/en-us/ht204899&#34;&gt;System Integration Protection&lt;/a&gt; (SIP) is a security technology since OS X El Capitan 10.11 aiming at protecting certain system files and folders against malicious software. SIP even limits the access and actions of the root user account on protected parts of OS X. Unfortunately, the folder &lt;code&gt;/usr/local&lt;/code&gt; needed for installing many development tools and utilities is under protection as well. That makes a lot of tools like &lt;a href=&#34;https://brew.sh&#34;&gt;Homebrew&lt;/a&gt; fail to install. We can easily check SIP&amp;rsquo;s current status.&lt;/p&gt; &lt;pre&gt;&lt;code class=&#34;language-sh&#34;&gt;$ csrutil status System Integrity Protection status: enabled. &lt;/code&gt;&lt;/pre&gt; &lt;p&gt;The tweak I always do right after installing or recovering a Mac is to disable SIP. Just (re)start macOS in &lt;em&gt;Recovery Mode&lt;/em&gt; (restarting or turning on your Mac and immediately pressing &lt;kbd&gt;⌘&lt;/kbd&gt; + &lt;kbd&gt;R&lt;/kbd&gt;&amp;mdash;shortcut to remember &lt;kbd&gt;R&lt;/kbd&gt; for &amp;lsquo;&lt;strong&gt;R&lt;/strong&gt;ecovery&amp;rsquo;&amp;mdash;and wait until macOS boots into its recovery mode. Then open menu &lt;span class=&#34;menu&#34;&gt;Utility ▸ Terminal&lt;/span&gt; and execute the following commands.&lt;/p&gt; &lt;pre&gt;&lt;code class=&#34;language-sh&#34;&gt;$ csrutil disable $ reboot &lt;/code&gt;&lt;/pre&gt; &lt;p&gt;Your Mac will reboot and get back to the normal working mode. You can verify SIP status again.&lt;/p&gt; &lt;pre&gt;&lt;code class=&#34;language-sh&#34;&gt;$ csrutil status System Integrity Protection status: disabled. &lt;/code&gt;&lt;/pre&gt; &lt;h3 id=&#34;disable-gatekeeper&#34;&gt;Disable Gatekeeper&lt;/h3&gt; &lt;p&gt;&lt;em&gt;Gatekeeper&lt;/em&gt; was first introduced in OS X Mountain Lion. It is a security feature that prevents the users from launching potentially harmful apps.&lt;/p&gt; &lt;p&gt;From macOS Sierra and later, however, Apple made Gatekeeper even more restricted. Normal users would see only two choices in &lt;em&gt;System Preferences&lt;/em&gt; &amp;ndash;&amp;gt; &lt;em&gt;Security &amp;amp; Privacy&lt;/em&gt; that &amp;ldquo;&lt;em&gt;Allow apps downloaded from&lt;/em&gt;&amp;rdquo; either &amp;ldquo;&lt;em&gt;App Store&lt;/em&gt;&amp;rdquo; or &amp;ldquo;&lt;em&gt;App Store and identified developers&lt;/em&gt;&amp;rdquo;.&lt;/p&gt; &lt;p&gt;That means only signed apps are allowed to launch, i.e. breaking a lot of useful unsigned apps whose developers cannot afford to pay US$99 yearly membership for &lt;em&gt;Apple Developer Program&lt;/em&gt;.&lt;/p&gt; &lt;figure &gt; &lt;img src=&#34;https://htr3n.github.io/2018/06/bootstrapping-macos-workspace/enabled-gatekeeper.png&#34; alt=&#34;Enabled Gatekeeper&#34; align=&#34;center&#34; width=&#34;80%&#34; style=&#34;max-width: 100%;&#34; /&gt; &lt;figcaption&gt; &lt;span class=&#34;img--caption&#34;&gt; Figure 1. Enabled Gatekeeper &lt;/span&gt; &lt;/figcaption&gt; &lt;/figure&gt; &lt;p&gt;We can circumvent that by disabling Gatekeeper. You do not have to restart macOS but only executing the following command &lt;code&gt;sudo spctl --master-disable&lt;/code&gt;.&lt;/p&gt; &lt;p&gt;After that, you will be able to see Gatekeeper being disabled.&lt;/p&gt; &lt;figure &gt; &lt;img src=&#34;https://htr3n.github.io/2018/06/bootstrapping-macos-workspace/disabled-gatekeeper.png&#34; alt=&#34;Disabled Gatekeeper&#34; align=&#34;center&#34; width=&#34;80%&#34; style=&#34;max-width: 100%;&#34; /&gt; &lt;figcaption&gt; &lt;span class=&#34;img--caption&#34;&gt; Figure 2. Disabled Gatekeeper &lt;/span&gt; &lt;/figcaption&gt; &lt;/figure&gt; &lt;p&gt;Naturally Gatekeeper can be re-enabled at any time with &lt;code&gt;sudo spctl --master-enable&lt;/code&gt;.&lt;/p&gt; &lt;h3 id=&#34;reveal-library&#34;&gt;Revealing &amp;lsquo;~/Library&amp;rsquo;&lt;/h3&gt; &lt;p&gt;In macOS, the folder &amp;lsquo;&lt;em&gt;~/Library&lt;/em&gt;&amp;rsquo; within users home folder is hidden (since 10.7!?) seemingly to prevent any unintentional changes. It&amp;rsquo;s not so difficult to navigate to this folder (and any other folders) using command line. In case you want to use Finder to navigate and explore &amp;lsquo;&lt;em&gt;~/Library&lt;/em&gt;&amp;rsquo;, we can simply use the following command.&lt;/p&gt; &lt;pre&gt;&lt;code class=&#34;language-sh&#34;&gt;$ chflags nohidden ~/Library &lt;/code&gt;&lt;/pre&gt; &lt;h3 id=&#34;enabling-key-repeating&#34;&gt;Enabling Key Repeating&lt;/h3&gt; &lt;p&gt;The behaviour for keyboard long pressing in macOS is also of polarised personal taste. A typical behaviour that we often see is that the letter keeps popping out since one holds down a key until the key is released. Some years back this has been changed into &amp;lsquo;&lt;em&gt;Character Picker&lt;/em&gt;&amp;rsquo;. It means when a key is pressed and held, the non-standard characters corresponding characters will pop up as the picture below.&lt;/p&gt; &lt;figure &gt; &lt;img src=&#34;https://htr3n.github.io/2018/06/bootstrapping-macos-workspace/enabled-character-picker.png&#34; alt=&#34;Character Picker in action&#34; align=&#34;center&#34; width=&#34;80%&#34; style=&#34;max-width: 100%;&#34; /&gt; &lt;figcaption&gt; &lt;span class=&#34;img--caption&#34;&gt; Figure 3. Character Picker in action &lt;/span&gt; &lt;/figcaption&gt; &lt;/figure&gt; &lt;p&gt;Not a big fan of Character Picker, I rather like characters keep repeating when a key is held. In many cases, this behavior becomes very handy, for instance, when selecting large texts with &lt;kbd&gt;⇧&lt;/kbd&gt; + &lt;kbd&gt;↓ ↑ ← →&lt;/kbd&gt;.&lt;/p&gt; &lt;p&gt;For that reason, I always disable that feature in any macOS that I am working on. Unfortunately, this cannot be done with &lt;span class=&#34;menu&#34;&gt;System Preferences&lt;/span&gt; but command line. After each command, you must re-start the editors to see the effect.&lt;/p&gt; &lt;pre&gt;&lt;code class=&#34;language-sh&#34;&gt;# disable &#39;Character Picker&#39; $ defaults write -g ApplePressAndHoldEnabled -bool false # it can be enabled $ defaults write -g ApplePressAndHoldEnabled -bool true &lt;/code&gt;&lt;/pre&gt; &lt;p&gt;Another option relating to key repeating is tuning its speed/rate and delay. Luckily, we can do this via &lt;span class=&#34;menu&#34;&gt;System Preferences ▸ Keyboard&lt;/span&gt; . My favourite is &amp;lsquo;&lt;em&gt;fastest&lt;/em&gt;&amp;rsquo; repeating and &amp;lsquo;&lt;em&gt;shortest&lt;/em&gt;&amp;rsquo; delay as possible.&lt;/p&gt; &lt;figure &gt; &lt;img src=&#34;https://htr3n.github.io/2018/06/bootstrapping-macos-workspace/speed-delay.png&#34; alt=&#34;Setting for key repeating and delay&#34; align=&#34;center&#34; width=&#34;80%&#34; style=&#34;max-width: 100%;&#34; /&gt; &lt;figcaption&gt; &lt;span class=&#34;img--caption&#34;&gt; Figure 4. Setting for key repeating and delay &lt;/span&gt; &lt;/figcaption&gt; &lt;/figure&gt; &lt;p&gt;Like many other options, we can change it via command line or fine tuning tool such as &lt;a href=&#34;https://pqrs.org/osx/karabiner&#34;&gt;Karabiner&lt;/a&gt;.&lt;/p&gt; &lt;pre&gt;&lt;code class=&#34;language-sh&#34;&gt;# InitialKeyRepeat: 120, 94, 68, 35, 25, 15 (lower is faster, default is 25) $ defaults write -g InitialKeyRepeat -int 15 # KeyRepeat: 120, 90, 60, 30, 12, 6, 2 (lower is faster, default is 6) $ defaults write -g KeyRepeat -int 2 &lt;/code&gt;&lt;/pre&gt; &lt;h3 id=&#34;changing-hostnames&#34;&gt;Changing Hostnames&lt;/h3&gt; &lt;p&gt;Most of the time, the default host name is not satisfied and you might want to have a cool name for your dev box. Then you are surely not alone. Here and there, you might find some cool combo like &lt;code&gt;harry@hogwart&lt;/code&gt; , &lt;code&gt;alice@wonderland&lt;/code&gt;, &lt;code&gt;yoda@dagobah&lt;/code&gt;, &lt;code&gt;joker@gotham&lt;/code&gt;, &lt;code&gt;neo@matrix&lt;/code&gt;, &lt;code&gt;frodo@mordor&lt;/code&gt; you name it. You can quickly do this via command line.&lt;/p&gt; &lt;pre&gt;&lt;code class=&#34;language-sh&#34;&gt;# change the primary host name $ sudo scutil --set HostName gotham # ... do the same for local (Bonjour) host name $ sudo scutil --set LocalHostName gotham # and finally, keep the user-friendly computer&#39;s name in Finder in sync $ sudo scutil --set ComputerName gotham &lt;/code&gt;&lt;/pre&gt; &lt;hr /&gt; &lt;h2 id=&#34;dev-tools-and-configs&#34;&gt;Part 2: Development tools and configurations&lt;/h2&gt; &lt;p&gt;In this part, I will focus more on some handy tools and configurations often used for my software development tasks.&lt;/p&gt; &lt;h3 id=&#34;homebrew&#34;&gt;&lt;a href=&#34;https://brew.sh&#34;&gt;Homebrew&lt;/a&gt;&lt;/h3&gt; &lt;p&gt;Homebrew provides a rich collection of tools I need, mostly open sources, that Apple does not. Installing Homebrew is super easy with a one-liner command. Before that, we only have to install the Xcode command line tools that Homebrew needs to build its tools.&lt;/p&gt; &lt;pre&gt;&lt;code class=&#34;language-sh&#34;&gt;# install Xcode command line developer tools $ xcode-select --install # now install Homebrew $ /usr/bin/ruby -e &amp;quot;$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/master/install)&amp;quot; &lt;/code&gt;&lt;/pre&gt; &lt;p&gt;Then we need to add &lt;code&gt;/usr/local/bin&lt;/code&gt; and &lt;code&gt;/usr/local/sbin&lt;/code&gt; (where Homebrew links the executable files) to the environment variable &lt;code&gt;PATH&lt;/code&gt;. This can be done by altering the shell startup scripts. For instance, for Bash shell it is &lt;code&gt;~/.bash_profile&lt;/code&gt;, for Zshell it is &lt;code&gt;~/.zsh_profile&lt;/code&gt;.&lt;/p&gt; &lt;pre&gt;&lt;code class=&#34;language-shell&#34;&gt;export PATH=$PATH:/usr/local/bin:/usr/local/sbin &lt;/code&gt;&lt;/pre&gt; &lt;p&gt;If you want the Homebrew tools have higher priority than the others, just switch &lt;code&gt;$PATH&lt;/code&gt; to the end instead. Moreover, there are many Finder-launched apps, agents and daemons in macOS might also need &lt;code&gt;PATH&lt;/code&gt; to find necessary executables (e.g. Intellij IDEA and Eclipse if I&amp;rsquo;m not mistaken). Fortunately, the launching of these tools would go through macOS &lt;a href=&#34;https://en.wikipedia.org/wiki/Launchd&#34;&gt;&lt;em&gt;launchd&lt;/em&gt;&lt;/a&gt; and therefore, can be configure with &lt;code&gt;launchctl&lt;/code&gt;. So I have to add this line to the end of my &lt;code&gt;.zshrc&lt;/code&gt; too.&lt;/p&gt; &lt;pre&gt;&lt;code class=&#34;language-sh&#34;&gt;# this line should be added at the end of .zshrc /bin/launchctl setenv PATH $PATH &lt;/code&gt;&lt;/pre&gt; &lt;p&gt;Now I can install necessary tools using &lt;code&gt;brew&lt;/code&gt;.&lt;/p&gt; &lt;pre&gt;&lt;code class=&#34;language-sh&#34;&gt;$ brew install ack curl dnsmasq docker gcc git go gradle maven mysql node openssl openssh python3 php72 composer ruby rbenv sassc yarn zsh &lt;/code&gt;&lt;/pre&gt; &lt;p&gt;Homebrew can also help handling macOS start-up services which are useful for managing servers like Apache httpd, nginx, php-fpm, MySQL, PostgreSQL, etc.&lt;/p&gt; &lt;pre&gt;&lt;code class=&#34;language-sh&#34;&gt;$ brew services start httpd $ brew services stop httpd &lt;/code&gt;&lt;/pre&gt; &lt;p&gt;For quick re-installing or recovering Homebrew, I use &lt;a href=&#34;https://github.com/Homebrew/homebrew-bundle&#34;&gt;homebrew-bundle&lt;/a&gt; for backing up the current Homebrew&amp;rsquo;s installation and restoring later.&lt;/p&gt; &lt;pre&gt;&lt;code class=&#34;language-sh&#34;&gt;# tap the bundle $ brew tap Homebrew/bundle # dump all existing Homebrew packages to Brewfile $ brew bundle dump --force # check the list of entries $ brew bundle list # restore/install all packages from the Brewfile $ brew bundle &lt;/code&gt;&lt;/pre&gt; &lt;p&gt;Homebrew also incorporates &lt;a href=&#34;https://github.com/Homebrew/homebrew-cask&#34;&gt;Homebrew-Cask&lt;/a&gt; (formerly an independent plugin for Homebrew) that can help to install many macOS apps as you might see in the later sections.&lt;/p&gt; &lt;h3 id=&#34;terminals-and-shells&#34;&gt;Terminals and Shells&lt;/h3&gt; &lt;p&gt;Since working with Linux a lot and then macOS, I&amp;rsquo;m rather familiar with the command line. There are many cases using terminals would be more convenient than graphical editors. Thus, I need a good terminal app. The built-in Terminal app in macOS is not bad but I usually opt for &lt;a href=&#34;https://www.iterm2.com&#34;&gt;iTerm2&lt;/a&gt;.&lt;/p&gt; &lt;pre&gt;&lt;code class=&#34;language-sh&#34;&gt;$ brew cask install iterm2 &lt;/code&gt;&lt;/pre&gt; &lt;p&gt;Some of my favorite settings for iTerms are including dark themes such as &lt;a href=&#34;https://draculatheme.com/iterm&#34;&gt;Dracula&lt;/a&gt;, &lt;a href=&#34;https://gist.github.com/meqif/1238378&#34;&gt;IR_Black&lt;/a&gt;, &lt;a href=&#34;https://github.com/junegunn/seoul256-iTerm2&#34;&gt;seoul_256&lt;/a&gt;, &lt;a href=&#34;https://github.com/nathanbuchar/atom-one-dark-terminal&#34;&gt;Atom One Dark&lt;/a&gt; along with a fixed-width font like &lt;a href=&#34;https://github.com/adobe-fonts/source-code-pro&#34;&gt;Source Code Pro&lt;/a&gt;, &lt;a href=&#34;https://fonts.google.com/specimen/Cousine&#34;&gt;Cousine&lt;/a&gt;, &lt;a href=&#34;https://fonts.google.com/specimen/Roboto+Mono&#34;&gt;Roboto Mono&lt;/a&gt;, &lt;a href=&#34;https://github.com/tonsky/FiraCode&#34;&gt;Fira Code&lt;/a&gt; or &lt;a href=&#34;https://www.typography.com/fonts/operator/overview/&#34;&gt;Operator Mono&lt;/a&gt; (very nice ligatures and italic mode), &lt;a href=&#34;https://fonts.google.com/specimen/Inconsolata&#34;&gt;Inconsolata&lt;/a&gt; or its variants (Inconsolata-dz, Inconsolata-g), or &lt;a href=&#34;https://github.com/source-foundry/Hack&#34;&gt;Hack&lt;/a&gt;. Some of these fonts can be installed via Homebrew Cask.&lt;/p&gt; &lt;p&gt;Along with iTerms 2, I also love &lt;a href=&#34;http://www.zsh.org&#34;&gt;Z shell&lt;/a&gt; (zsh) which is an extended version of Bash shell a lot with many nice features like directory alias, command completion, path expansion, etc. You might also find some Zsh configuration frameworks like &lt;a href=&#34;https://ohmyz.sh&#34;&gt;oh-my-zsh&lt;/a&gt; or &lt;a href=&#34;https://github.com/sorin-ionescu/prezto&#34;&gt;Prezto&lt;/a&gt; amazing to start with. I&amp;rsquo;ve tried both of them and found oh-my-zsh a bit sluggish and Prezto a bit difficult to add more extensions or customize. I have actually used a small piece from either of them and found myself quickly forgetting the customised parts taken from the others. Hence, I decided to develop a set of my own &lt;a href=&#34;https://github.com/htr3n/zsh-config&#34;&gt;Zsh configurations&lt;/a&gt;. Moreover, I often keep a habit of writting Shell scripts in standard sh/bash as much as possible and keep Zsh-specific separately for better portability and compatibility.&lt;/p&gt; &lt;h3 id=&#34;text-code-editors&#34;&gt;Text/Code Editors&lt;/h3&gt; &lt;p&gt;There are quite a number of editors in macOS for developers ranging from, er, the built-in Text Editor, &lt;a href=&#34;https://www.sublimetext.com/&#34;&gt;Sublime Text&lt;/a&gt;, &lt;a href=&#34;https://macromates.com&#34;&gt;TextMate&lt;/a&gt;, &lt;a href=&#34;https://www.barebones.com/products/textwrangler&#34;&gt;TextWrangler&lt;/a&gt;, the nerdy &lt;a href=&#34;https://www.vim.org&#34;&gt;Vim&lt;/a&gt;, &lt;a href=&#34;https://www.gnu.org/software/emacs&#34;&gt;Emacs&lt;/a&gt;, and recently &lt;a href=&#34;https://atom.io&#34;&gt;Atom&lt;/a&gt;, &lt;a href=&#34;https://code.visualstudio.com&#34;&gt;Visual Studio Code&lt;/a&gt;, &lt;a href=&#34;http://brackets.io&#34;&gt;Brackets&lt;/a&gt;, to name but a few. You might install these editos using Cask.&lt;/p&gt; &lt;p&gt;In macOS, Sublime Text is often a powerful editor for many of us but it is quite costly. I used to love and work with Atom developed by Github as an effort to build a modern editor for developers. Atom has a plethora of extensions to become a very promising choice. Nevertheless, I was growing skeptical with its sluggishness in early days and therefore leaned to &lt;a href=&#34;https://code.visualstudio.com&#34;&gt;Visual Studio Code&lt;/a&gt;, my current Swiss-army-knife editor-of-choice instead.&lt;/p&gt; &lt;pre&gt;&lt;code class=&#34;language-sh&#34;&gt;$ brew cask install visual-studio-code &lt;/code&gt;&lt;/pre&gt; &lt;p&gt;Frequently using terminal/console, I just grasp vim for quick editing tasks and &lt;a href=&#34;https://github.com/htr3n/vim-config&#34;&gt;customised it&lt;/a&gt; a little bit.&lt;/p&gt; &lt;pre&gt;&lt;code class=&#34;language-sh&#34;&gt;$ brew install vim &lt;/code&gt;&lt;/pre&gt; &lt;p&gt;As working with larger and complex projects, I would need some full-fledged, heavy-weight IDEs such as Eclipse or Jetbrains Intellij IDEA and its brothers like PhpStorm, PyCharm. Other IDE including Netbeans, Visual Studio, Komodo can also be installed with &lt;em&gt;Cask&lt;/em&gt;.&lt;/p&gt; &lt;pre&gt;&lt;code class=&#34;language-sh&#34;&gt;$ brew cask install eclipse-java intellij-idea &lt;/code&gt;&lt;/pre&gt; &lt;p&gt;For Markdown editors, e.g. Github infamous &lt;em&gt;README.md&lt;/em&gt; or my blog posts, I used &lt;a href=&#34;http://macdown.uranusjr.com&#34;&gt;MacDown&lt;/a&gt;. After discovering &lt;a href=&#34;https://typora.io&#34;&gt;Typora&lt;/a&gt;, MacDown becomes second in the pecking order for now (at least until Typora&amp;rsquo;s developers announce their paid plans).&lt;/p&gt; &lt;p&gt;With Typora, I can directly write Markdown articles just like Microsoft Word. I can do &lt;kbd&gt;⌘&lt;/kbd&gt; + &lt;kbd&gt;/&lt;/kbd&gt; to instantly switch back and forth between &lt;em&gt;Visual Editing&lt;/em&gt; and &lt;em&gt;Source&lt;/em&gt; modes. Even better, I can adapt the Markdown render in Typora to be nearly indentical to my blog and therefore, experience a kind of semi-&lt;em&gt;WYSIWYG&lt;/em&gt; Markdown editing.&lt;/p&gt; &lt;pre&gt;&lt;code class=&#34;language-sh&#34;&gt;$ brew cask install typora &lt;/code&gt;&lt;/pre&gt; &lt;h3 id=&#34;other-tools&#34;&gt;Other nice-to-have tools&lt;/h3&gt; &lt;h4 id=&#34;gnu-tools&#34;&gt;GNU Tools&lt;/h4&gt; &lt;pre&gt;&lt;code class=&#34;language-sh&#34;&gt;$ brew install coreutils autoconf automake findutils gawk gcc gnu-sed grep &lt;/code&gt;&lt;/pre&gt; &lt;h4 id=&#34;ack-https-beyondgrep-com&#34;&gt;&lt;a href=&#34;https://beyondgrep.com&#34;&gt;Ack&lt;/a&gt;&lt;/h4&gt; &lt;ul&gt; &lt;li&gt;Ack is faster and easier to use than grep&lt;/li&gt; &lt;/ul&gt; &lt;pre&gt;&lt;code class=&#34;language-sh&#34;&gt;$ brew install ack &lt;/code&gt;&lt;/pre&gt; &lt;h4 id=&#34;dropbox-https-www-dropbox-com&#34;&gt;&lt;a href=&#34;https://www.dropbox.com&#34;&gt;Dropbox&lt;/a&gt;&lt;/h4&gt; &lt;ul&gt; &lt;li&gt;Many of our customers and friends are sharing files using Dropbox, so are we ;). Note that Dropbox app must be installed in &lt;code&gt;/Applications&lt;/code&gt; to work properly.&lt;/li&gt; &lt;/ul&gt; &lt;pre&gt;&lt;code class=&#34;language-sh&#34;&gt;$ brew cask install --appdir=&amp;quot;/Applications&amp;quot; dropbox &lt;/code&gt;&lt;/pre&gt; &lt;h4 id=&#34;docker-ce-https-www-docker-com-community-edition-and-command-line&#34;&gt;&lt;a href=&#34;https://www.docker.com/community-edition&#34;&gt;Docker CE&lt;/a&gt; and command line&lt;/h4&gt; &lt;ul&gt; &lt;li&gt;Every serious developer is talking about and working with it ;)&lt;/li&gt; &lt;/ul&gt; &lt;pre&gt;&lt;code class=&#34;language-sh&#34;&gt;$ brew cask install docker $ brew install docker &lt;/code&gt;&lt;/pre&gt; &lt;h4 id=&#34;spectacle-https-www-spectacleapp-com&#34;&gt;&lt;a href=&#34;https://www.spectacleapp.com&#34;&gt;Spectacle&lt;/a&gt;&lt;/h4&gt; &lt;ul&gt; &lt;li&gt;This is an amazing free app for resizing windows using shortcuts. I use it a lot to quickly arrange the working windows.&lt;/li&gt; &lt;/ul&gt; &lt;pre&gt;&lt;code class=&#34;language-sh&#34;&gt;$ brew cask install spectacle &lt;/code&gt;&lt;/pre&gt; &lt;h4 id=&#34;alfred-https-www-alfredapp-com-powerpack&#34;&gt;&lt;a href=&#34;https://www.alfredapp.com&#34;&gt;Alfred&lt;/a&gt; + Powerpack ($)&lt;/h4&gt; &lt;ul&gt; &lt;li&gt;Alfred is a must-have for me and, maybe, many other macOS users. The free version is useful enough but the paid (for Powerpack) can blow anyone away. Alfred helps me much more when I prefer to use the keyboard as much as possible instead of reaching for the mice.&lt;/li&gt; &lt;/ul&gt; &lt;pre&gt;&lt;code class=&#34;language-sh&#34;&gt;$ brew cask install alfred &lt;/code&gt;&lt;/pre&gt; &lt;h4 id=&#34;f-lux-https-justgetflux-com&#34;&gt;&lt;a href=&#34;https://justgetflux.com&#34;&gt;F.lux&lt;/a&gt;&lt;/h4&gt; &lt;ul&gt; &lt;li&gt;Saving my eyes staring daily at computer&amp;rsquo;s monitors (macOS also has Night Shift mode but my eyes still find F.lux more pleasant at night)&lt;/li&gt; &lt;/ul&gt; &lt;pre&gt;&lt;code class=&#34;language-sh&#34;&gt;$ brew cask install flux &lt;/code&gt;&lt;/pre&gt; &lt;h4 id=&#34;web-browsers&#34;&gt;Web Browsers&lt;/h4&gt; &lt;ul&gt; &lt;li&gt;Installing Firefox and Google Chrome mainly for Web development, testing and debugging as I find Safari is, not perfect though, sufficient for daily use and conveniently sharing bookmarks and history links between macOS and my iPad and iPhone.&lt;/li&gt; &lt;/ul&gt; &lt;pre&gt;&lt;code class=&#34;language-sh&#34;&gt;$ brew cask install google-chrome firefox &lt;/code&gt;&lt;/pre&gt; &lt;h4 id=&#34;remote-access&#34;&gt;Remote Access&lt;/h4&gt; &lt;p&gt;Nothing is more convenient than &lt;a href=&#34;https://en.wikipedia.org/wiki/Secure_Shell&#34;&gt;SSH&lt;/a&gt; and &lt;a href=&#34;https://en.wikipedia.org/wiki/SSH_File_Transfer_Protocol&#34;&gt;SFTP&lt;/a&gt;.&lt;/p&gt; &lt;pre&gt;&lt;code class=&#34;language-sh&#34;&gt;# I prefer OpenSSH to the stock BSD SSH $ brew install openssh # ... love to quickly copy my public key to the servers $ brew install ssh-copy-id # generate key pair $ ssh-keygen -t rsa -b 4096 -C &amp;quot;MacBookPro email@example.com&amp;quot; # copy the public key to the host for passwordless authentication $ ssh-copy-id user@host &lt;/code&gt;&lt;/pre&gt; &lt;h4 id=&#34;networking-tools&#34;&gt;Networking Tools&lt;/h4&gt; &lt;pre&gt;&lt;code class=&#34;language-sh&#34;&gt;$ brew install netcat curl wget nmap &lt;/code&gt;&lt;/pre&gt; &lt;h4 id=&#34;communication&#34;&gt;Communication&lt;/h4&gt; &lt;p&gt;&lt;a href=&#34;https://www.skype.com&#34;&gt;Skype&lt;/a&gt;, &lt;a href=&#34;https://www.slack.com&#34;&gt;Slack&lt;/a&gt;, &lt;a href=&#34;https://keybase.io&#34;&gt;Keybase&lt;/a&gt; (open source end-to-end encryption)&lt;/p&gt; &lt;pre&gt;&lt;code class=&#34;language-sh&#34;&gt;$ brew cask install skype slack keybase &lt;/code&gt;&lt;/pre&gt; &lt;h4 id=&#34;1password-https-1password-com&#34;&gt;&lt;a href=&#34;https://1password.com&#34;&gt;1Password&lt;/a&gt; ($)&lt;/h4&gt; &lt;ul&gt; &lt;li&gt;Help storing all of my private information and authentication in iCloud or Dropbox and using them in macOS or iOS.&lt;/li&gt; &lt;/ul&gt; &lt;pre&gt;&lt;code class=&#34;language-sh&#34;&gt;$ brew cask install 1password &lt;/code&gt;&lt;/pre&gt;</description></item><item><title>A journey from Apache CXF 2.2 to 3.2</title><link>https://htr3n.github.io/2018/06/apache-cxf-2-to-3/<pubdate>Fri, 15 Jun 2018 00:00:00 +0000</pubdate><guid>b44b2473bc3b383e22a3652266a8df0b</guid><description>&lt;p&gt;I have used &lt;a href=&#34;https://cxf.apache.org&#34;&gt;Apache CXF&lt;/a&gt; 2.2 to develop Web services for some R&amp;amp;D projects that I took part in. At that time, it was a choice between &lt;a href=&#34;http://axis.apache.org/axis2/java/core&#34;&gt;Apache Axis/Axis2&lt;/a&gt; and CXF (formerly Codehaus XFire project).&lt;/p&gt; &lt;p&gt;I eventually decided to get along with CXF due to its simplicity, quite clear documentation, good support for document-style Web services (+) and many standards, especially JAX-WS and JAX-RS.&lt;/p&gt; &lt;p&gt;Moreover, Apache CXF also embraces smooth integration with Spring Framework (big plus for me as I was using Spring Web MVC 3 to develop the Web front-end). Everything went well for me on modelling and developing Web services based on JAX-WS for both directions: WSDL-first and Java-first.&lt;/p&gt; &lt;p&gt;In my projects, I designed the WSDLs and used &lt;a href=&#34;http://cxf.apache.org/docs/wsdl-to-java.html&#34;&gt;WSDL2Java&lt;/a&gt; Maven plugin or command line to generate skeleton Java code of the Web services. The Java service implementations were kept separately in a package/folder to avoid any code overwriting. CXF services are so easy to configure with Spring Framework 3.0. The implementations of the services were loaded as Spring managed beans. The expose of a service is done via a CXF directive &lt;code&gt;&amp;lt;jaxws:endpoint&amp;gt;&lt;/code&gt; of which the &lt;code&gt;implementor&lt;/code&gt; attribute refers to the corresponding bean.&lt;/p&gt; &lt;script type=&#34;application/javascript&#34; src=&#34;//gist.github.com/htr3n/a5d1c1d66c00c3be32a2de63dcb9af0f.js&#34;&gt;&lt;/script&gt; &lt;p&gt;In the Web app configuration &lt;code&gt;web.xml&lt;/code&gt;, CXF Servlet must be loaded by the container.&lt;/p&gt; &lt;script type=&#34;application/javascript&#34; src=&#34;//gist.github.com/htr3n/d97b770538e8279f2fb1742c4c49b3ce.js&#34;&gt;&lt;/script&gt; &lt;h2 id=&#34;upgrading-apache-cxf&#34;&gt;Upgrading Apache CXF&lt;/h2&gt; &lt;p&gt;For a while I haven&amp;rsquo;t taken part in further WS development, i.e. not using Apache CXF a lot. One day I thought I could use the WS project to showcase and review my relevant knowledge. The codebase still works well after some mysterious library missing that I have not seen before. It is possible due to the built-in libraries for XML parsing that were implicitly used but now changed in the newer JRE. Apart from that, most of the libraries are also outdated. So I dedice to spend some time to exercise upgrading the project and refactor a bit its source code. Here I jot down some major points on upgrading Apache CXF.&lt;/p&gt; &lt;p&gt;The upgrading was not as easy and smooth as just changing the dependencies&amp;rsquo; versions. A lot of conflicts or major refactoring happened. I had to read thoroughly the &lt;a href=&#34;http://cxf.apache.org/docs/migration-guides.html&#34;&gt;documentation on CXF site for migration&lt;/a&gt; and decided to go gradually over each major version of Apache CXF.&lt;/p&gt; &lt;h2 id=&#34;from-version-2-2-to-2-7&#34;&gt;&amp;hellip; from version 2.2 to 2.7 &amp;hellip;&lt;/h2&gt; &lt;p&gt;From Apache CXF 2.2 to 2.6, not so many changes are relevant for the project as I mainly used &lt;code&gt;cxf-rt-frontend-jaxws&lt;/code&gt;. Another &lt;a href=&#34;http://cxf.apache.org/docs/embedding-cxf-inside-spring.html&#34;&gt;significant change since 2.4&lt;/a&gt; causes errors for Spring / Jetty server regarding importing CXF&amp;rsquo;s XML resources. Recall the aforementioned Spring bean configuration where CXF service implementations were loaded and published? There are a number of &lt;code&gt;&amp;lt;import&amp;gt;&lt;/code&gt; directives. These directives advise Spring to load the corresponding CXF resources. Now we only need &amp;ldquo;&lt;em&gt;one to rule them all&lt;/em&gt;&amp;rdquo;.&lt;/p&gt; &lt;pre&gt;&lt;code class=&#34;language-xml&#34;&gt;&amp;lt;import resource=&amp;quot;classpath:META-INF/cxf/cxf.xml&amp;quot; /&amp;gt; &lt;/code&gt;&lt;/pre&gt; &lt;p&gt;To upgrade to version 2.6, I have to revise the project with respect to the merging of &lt;code&gt;cxf-common-utilites&lt;/code&gt; into &lt;code&gt;cxf-api&lt;/code&gt;, the removal of &lt;code&gt;cxf-rt-binding-http&lt;/code&gt;, and the refactoring that impact &lt;code&gt;cxf-rt-core&lt;/code&gt;. Most of the other changes from 2.2 to 2.7 are for JAX-RS, which were used very little or none in my project.&lt;/p&gt; &lt;h2 id=&#34;and-to-version-3-0&#34;&gt;&amp;hellip; and to version 3.0+&lt;/h2&gt; &lt;p&gt;Apache CXF 3.0 requires a rather disruptive change, from Spring Framework 3.0 to 3.2+. Again, I used standard Spring bean configurations which are still valid for Spring 3.2. Hence, the project works well with Spring 3.2.18-RELEASE. I only need to remove all version numbers in the Spring XML schemas. The major change I must deal with is to remove the dependency of &lt;code&gt;cxf-api&lt;/code&gt; as it was merged with &lt;code&gt;cxf-core&lt;/code&gt;.&lt;/p&gt; &lt;p&gt;Then there comes the most dramatic issue with CXF 3.0.16 (sic!). &lt;code&gt;cxf-codegen-plugin&lt;/code&gt; used to generate Java code from WSDLs refused to work (which was no problem in earlier verions) and spit out errors like this.&lt;/p&gt; &lt;pre&gt;&lt;code&gt;[ERROR] Failed to execute goal org.apache.cxf:cxf-codegen-plugin:3.0.16:wsdl2java (generate-sources) on project loan-approval-portal: Execution generate-sources of goal org.apache.cxf:cxf-codegen-plugin:3.0.16:wsdl2java failed: org.apache.cxf.wsdl11.WSDLRuntimeException: Fail to create wsdl definition file:%3c?xml%20version=%221.0%22%20encoding=%22UTF-8%22?%3e: WSDLException: faultCode=PARSER_ERROR: Problem parsing &#39;file:%3c?xml%20version=%221.0%22%20encoding=%22UTF-8%22?%3e&#39;.: java.io.FileNotFoundException: &amp;lt; (No such file or directory) -&amp;gt; [Help 1] org.apache.maven.lifecycle.LifecycleExecutionException: Failed to execute goal org.apache.cxf:cxf-codegen-plugin:3.0.16:wsdl2java (generate-sources) on project loan-approval-portal: Execution generate-sources of goal org.apache.cxf:cxf-codegen-plugin:3.0.16:wsdl2java failed: org.apache.cxf.wsdl11.WSDLRuntimeException: Fail to create wsdl definition file:%3c?xml%20version=%221.0%22%20encoding=%22UTF-8%22?%3e: WSDLException: faultCode=PARSER_ERROR: Problem parsing &#39;file:%3c?xml%20version=%221.0%22%20encoding=%22UTF-8%22?%3e&#39;.: java.io.FileNotFoundException: &amp;lt; (No such file or directory) &lt;/code&gt;&lt;/pre&gt; &lt;p&gt;What puzzles me is that I have tried the command tool &lt;code&gt;wsdl2java&lt;/code&gt; of Apache CXF 3.0.16 with each WSDL and, strangely, found no errors at all. After some extra trial-and-error effort, I eventually figured out that an extra option for &lt;code&gt;cxf-codegen-plugin&lt;/code&gt; causes the error. The old/original plugin configuration in &lt;code&gt;pom.xml&lt;/code&gt; is as following.&lt;/p&gt; &lt;script type=&#34;application/javascript&#34; src=&#34;//gist.github.com/htr3n/b0634545a64e3b94dacee3982456ec4f.js&#34;&gt;&lt;/script&gt; &lt;p&gt;The option &lt;code&gt;&amp;lt;wsdlList&amp;gt;&lt;/code&gt; is the culprit. It was declared &lt;code&gt;boolean&lt;/code&gt; since CXF 2.2 to 2.7.0 as I found &lt;a href=&#34;https://cxf.apache.org/javadoc/latest-2.7.x/org/apache/cxf/maven_plugin/wsdl2java/Option.html&#34;&gt;here&lt;/a&gt;. However, in &lt;a href=&#34;http://cxf.apache.org/docs/wsdl-to-java.html&#34;&gt;the most recent documentation&lt;/a&gt; of CXF 3, &lt;code&gt;wsdlList&lt;/code&gt; is still listed as an option for &lt;code&gt;wsdl2java&lt;/code&gt; but no longer of type &lt;code&gt;boolean&lt;/code&gt; (&lt;code&gt;-wsdlList &amp;lt;wsdlurl&amp;gt;&lt;/code&gt;). To make it worse, the option is totally hidden/undocumented. So all I have to do is to disable the line &lt;code&gt;&amp;lt;wsdlList&amp;gt;true&amp;lt;/wsdlList&amp;gt;&lt;/code&gt; and &lt;code&gt;cxf-codegen-plugin&lt;/code&gt; works again in CXF 3.0+.&lt;/p&gt; &lt;p&gt;The problems with &lt;code&gt;cxf-codegen-plugin&lt;/code&gt; keep raising when upgrading CXF to 3.2.4. This time, it threw another exception though.&lt;/p&gt; &lt;pre&gt;&lt;code&gt;[ERROR] Failed to execute goal org.apache.cxf:cxf-codegen-plugin:3.2.4:wsdl2java (generate-sources) on project loan-approval-portal: Execution generate-sources of goal org.apache.cxf:cxf-codegen-plugin:3.2.4:wsdl2java failed: org.xml.sax.SAXNotRecognizedException: Property &#39;http://javax.xml.XMLConstants/property/accessExternalSchema&#39; is not recognized. -&amp;gt; [Help 1] org.apache.maven.lifecycle.LifecycleExecutionException: Failed to execute goal org.apache.cxf:cxf-codegen-plugin:3.2.4:wsdl2java (generate-sources) on project loan-approval-portal: Execution generate-sources of goal org.apache.cxf:cxf-codegen-plugin:3.2.4:wsdl2java failed: org.xml.sax.SAXNotRecognizedException: Property &#39;http://javax.xml.XMLConstants/property/accessExternalSchema&#39; is not recognized. &lt;/code&gt;&lt;/pre&gt; &lt;p&gt;We can see that the error is due to schema validation. Before, I wanted to make sure that the WSDLs were valid before generating Java code. Thus, I chose to enable validation by &lt;code&gt;&amp;lt;validateWsdl&amp;gt;true&amp;lt;/validateWsdl&amp;gt;&lt;/code&gt;. This option is actually the root cause of the aforementioned exception during validation. The problem seems to stem from &lt;a href=&#34;http://docs.oracle.com/javase/tutorial/jaxp/properties/properties.html&#34;&gt;new XML security properties in JAXB 1.5&lt;/a&gt; introduced in Java 8. When I disable that option, the plugin works fine again (voila!). But that means I must live in a maybe-not-error-free world (D&amp;rsquo;oh!). But we are all, aren&amp;rsquo;t we?&lt;/p&gt; &lt;p&gt;After all of the above, I can get my project to work with Apache CXF 3.2.4 while keeping the business logic of services intact.&lt;/p&gt; &lt;h2 id=&#34;update-2018-06-25-xml-less-spring-configuration&#34;&gt;Update 2018-06-25: XML-less Spring Configuration&lt;/h2&gt; &lt;p&gt;As deciding to switch to XML-less Spring configuration to learn more about Spring Java annotations, I also tried to migrate CXF settings, too. Here are some last updates.&lt;/p&gt; &lt;h3 id=&#34;loading-cxfservlet&#34;&gt;Loading CXFServlet&lt;/h3&gt; &lt;script type=&#34;application/javascript&#34; src=&#34;//gist.github.com/htr3n/b2f57f33ea4940b3756ae74c8f0693aa.js&#34;&gt;&lt;/script&gt; &lt;h3 id=&#34;publishing-services&#34;&gt;Publishing Services&lt;/h3&gt; &lt;p&gt;I configured the CXF bus used for publishing web services and defining JAX-WS service endpoints. Instead of importing existing CXF&amp;rsquo;s XML resources as many developers have chosen, I opted for a pure Java approach. What we have to do is to create a bean named &amp;lsquo;&lt;em&gt;cxf&lt;/em&gt;&amp;rsquo; (defined as &lt;code&gt;org.apache.cxf.Bus.DEFAULT_BUS_ID&lt;/code&gt;) and use that bean for defining service endpoints.&lt;/p&gt; &lt;script type=&#34;application/javascript&#34; src=&#34;//gist.github.com/htr3n/41add915f3238a517c5185d6a965ba65.js&#34;&gt;&lt;/script&gt; &lt;blockquote&gt; &lt;p&gt;IMPORTANT: &lt;code&gt;Endpoint.publish()&lt;/code&gt; must be called to expose the service instead of &lt;code&gt;Endpoint.setAddress()&lt;/code&gt; as above.&lt;/p&gt; &lt;/blockquote&gt;</description></item><item><title>Integration Laravel 5 and Gentelella admin theme</title><link>https://htr3n.github.io/2018/05/integration-laravel-gentelella/<pubdate>Wed, 09 May 2018 00:00:00 +0000</pubdate><guid>0acd6b6922aac765a7c7bcc60fc2c522</guid><description>&lt;p&gt;&lt;a href=&#34;https://github.com/puikinsh/gentelella&#34;&gt;Gentelella&lt;/a&gt; is a very nice and gently-looking &lt;a href=&#34;https://getbootstrap.com&#34;&gt;Bootstrap&lt;/a&gt; based admin theme developed by Aigars Silkalns (aka &lt;a href=&#34;https://github.com/puikinsh&#34;&gt;puikinsh&lt;/a&gt;). It can be integrated into several Web application frameworks. This post is one of my development exercises in which Gentelella is used to decorate a &lt;a href=&#34;https://github.com/laravel/laravel&#34;&gt;Laravel&lt;/a&gt; 5 based Web application. This task is part of building my PHP based framework &lt;a href=&#34;https://github.com/htr3n/laramod&#34;&gt;LaraMod&lt;/a&gt;.&lt;/p&gt; &lt;p&gt;Laravel can act as backend for any Web application. At the moment of this writing, Laravel includes several &lt;a href=&#34;https://laravel.com/docs/frontend&#34;&gt;good supports&lt;/a&gt; for popular front-ends such as Bootstrap, &lt;a href=&#34;https://vuejs.org&#34;&gt;Vue.js&lt;/a&gt;, and &lt;a href=&#34;https://reactjs.org&#34;&gt;React&lt;/a&gt;. The included tool &lt;a href=&#34;https://github.com/JeffreyWay/laravel-mix&#34;&gt;Laravel Mix&lt;/a&gt;, which runs on top of &lt;a href=&#34;https://webpack.js.org/&#34;&gt;Webpack&lt;/a&gt;, can significantly lessen development effort on compiling and mixing Web resources. Thus, I have just leveraged Laravel Mix for this integration task. Further details on Laravel Mix can be found &lt;a href=&#34;https://laravel.com/docs/mix&#34;&gt;here&lt;/a&gt;.&lt;/p&gt; &lt;h2 id=&#34;installation&#34;&gt;Installation&lt;/h2&gt; &lt;p&gt;Laravel provides built-in support for some front-end frameworks but they might cause some conflicts and incompability with Gentelella&amp;rsquo;s own libraries. Therefore, I have decided to start from scratch, i.e. using basic Laravel without any front-end scaffolding&lt;/p&gt; &lt;pre&gt;&lt;code class=&#34;language-sh&#34;&gt;# remove all scaffolding php artisan preset none &lt;/code&gt;&lt;/pre&gt; &lt;p&gt;This command will remove all relevant scaffolding components including Bootstrap, Vue or React. Note that Laravel configuration for Bootstrap and Vue might still exist. For instance, check &lt;code&gt;resource/assets/js/app.js&lt;/code&gt; for the following line and make sure it is commented out.&lt;/p&gt; &lt;pre&gt;&lt;code class=&#34;language-js&#34;&gt;// require(&#39;./bootstrap&#39;); &lt;/code&gt;&lt;/pre&gt; &lt;p&gt;Now we just add Gentelella&amp;rsquo;s dependencies.&lt;/p&gt; &lt;pre&gt;&lt;code class=&#34;language-sh&#34;&gt;# adding Gentelella yarn add --save gentelella # or npm install gentelella --save # update dependencies yarn install # or npm install &lt;/code&gt;&lt;/pre&gt; &lt;p&gt;After this step, Gentelella should be available in the local &lt;code&gt;node_modules&lt;/code&gt; folder.&lt;/p&gt; &lt;h2 id=&#34;compiling-and-mixing-resources&#34;&gt;Compiling and Mixing Resources&lt;/h2&gt; &lt;p&gt;The main configuration file of Laravel Mix is &lt;code&gt;webpack.mix.js&lt;/code&gt;. The fundamental tasks are defined as following.&lt;/p&gt; &lt;pre&gt;&lt;code class=&#34;language-js&#34;&gt;let mix = require(&#39;laravel-mix&#39;); ... mix.js(&#39;resources/assets/js/app.js&#39;, &#39;public/js&#39;) .sass(&#39;resources/assets/sass/app.scss&#39;, &#39;public/css&#39;); &lt;/code&gt;&lt;/pre&gt; &lt;p&gt;That is, Mix will compile JavaScript and SASS resources in &lt;code&gt;resources/assets/js/app.js&lt;/code&gt; and &lt;code&gt;resources/assets/sass/app.scss&lt;/code&gt; to &lt;code&gt;public/js&lt;/code&gt; and &lt;code&gt;public/css&lt;/code&gt;, respectively.&lt;/p&gt; &lt;p&gt;We shall use the same way to compile necessary Gentelella resources. The full configuration can be found in the LaraMod project &lt;a href=&#34;https://github.com/htr3n/laramod/blob/master/webpack.mix.js&#34;&gt;&lt;code&gt;webpack.mix.js&lt;/code&gt;&lt;/a&gt;.&lt;/p&gt; &lt;p&gt;Some common variables are defined to reduce duplicates.&lt;/p&gt; &lt;pre&gt;&lt;code class=&#34;language-js&#34;&gt;// general resources let public_js = &#39;public/js/&#39;; let public_css = &#39;public/css/&#39;; let resource_sass = &#39;resources/assets/sass/&#39;; // Gentelella resources let gentelella_home = &#39;node_modules/gentelella/&#39;; let gentelella_vendor = gentelella_home + &#39;/vendors/&#39;; &lt;/code&gt;&lt;/pre&gt; &lt;p&gt;As using separate styles for different pages, e.g. Login, Dashboard, etc., I configure Mix to compile them accordingly.&lt;/p&gt; &lt;pre&gt;&lt;code class=&#34;language-js&#34;&gt;mix.js(&#39;resources/assets/js/app.js&#39;, public_js). sass(resource_sass + &#39;app.scss&#39;, public_css). sass(resource_sass + &#39;home.scss&#39;, public_css). options({processCssUrls: false}). sass(resource_sass + &#39;login.scss&#39;, public_css). options({processCssUrls: false}). sass(resource_sass + &#39;dashboard.scss&#39;, public_css). options({processCssUrls: false}); &lt;/code&gt;&lt;/pre&gt; &lt;p&gt;For each component of Gentelella that we need for our project or certain pages, we can copy them into Laravel public folders.&lt;/p&gt; &lt;pre&gt;&lt;code class=&#34;language-js&#34;&gt;/* * Copy dependent JavaScripts and CSSs */ mix. // gentelella copy(gentelella_home + &#39;build/css/custom.css&#39;, public_css + &#39;gentelella-custom.css&#39;). copy(gentelella_home + &#39;build/js/custom.js&#39;, public_js + &#39;gentelella-custom.js&#39;). ... &lt;/code&gt;&lt;/pre&gt; &lt;p&gt;We can definitely use Mix/Webpack tools for optimising/minimising/transforming Gentelella resources. I will leave it as extra deployment exercises. For now, I will mainly concentrate on development aspects. When I need to use a Gentelella&amp;rsquo;s component for a certain page, I will include the following directives in the corresponding Laravel Blade templates for that page.&lt;/p&gt; &lt;pre&gt;&lt;code class=&#34;language-php+HTML&#34;&gt;&amp;lt;!-- Styles --&amp;gt; &amp;lt;link href=&amp;quot;{{ asset(&#39;css/font-awesome.css&#39;) }}&amp;quot; rel=&amp;quot;stylesheet&amp;quot;&amp;gt; &amp;lt;link href=&amp;quot;{{ asset(&#39;css/bootstrap.css&#39;) }}&amp;quot; rel=&amp;quot;stylesheet&amp;quot;&amp;gt; &amp;lt;link href=&amp;quot;{{ asset(&#39;css/gentelella-custom.css&#39;) }}&amp;quot; rel=&amp;quot;stylesheet&amp;quot;&amp;gt; ... &amp;lt;!-- Scripts --&amp;gt; &amp;lt;script src=&amp;quot;{{ asset(&#39;js/jquery.min.js&#39;) }}&amp;quot;&amp;gt;&amp;lt;/script&amp;gt; &amp;lt;script src=&amp;quot;{{ asset(&#39;js/bootstrap.js&#39;) }}&amp;quot;&amp;gt;&amp;lt;/script&amp;gt; &amp;lt;script src=&amp;quot;{{ asset(&#39;js/gentelella-custom.js&#39;) }}&amp;quot;&amp;gt;&amp;lt;/script&amp;gt; &amp;lt;script src=&amp;quot;{{ asset(&#39;js/app.js&#39;) }}&amp;quot;&amp;gt;&amp;lt;/script&amp;gt; &lt;/code&gt;&lt;/pre&gt; &lt;p&gt;Note that the specific Laravel Blade directive &lt;code&gt;{{ }}&lt;/code&gt; and &lt;code&gt;asset(...)&lt;/code&gt; are used to refer to the resources inside Laravel &lt;code&gt;public/&lt;/code&gt; folder accordingly. A working example of Laravel and Gentelella integration is illustrated via the &lt;a href=&#34;https://github.com/htr3n/laramod&#34;&gt;LaraMod&lt;/a&gt; project that you can check out and have a deeper look.&lt;/p&gt; &lt;p&gt;&lt;img src=&#34;login.png&#34; alt=&#34;Login&#34; /&gt;&lt;/p&gt; &lt;p&gt;&lt;img src=&#34;dashboard.png&#34; alt=&#34;Dashboard&#34; /&gt;&lt;/p&gt; &lt;h2 id=&#34;conclusion&#34;&gt;Conclusion&lt;/h2&gt; &lt;p&gt;Integration Laravel 5 and Gentelella is a simple but interesting exercise showing many nice features of Laravel for supporting common front-ends. Laravel Mix provides a good wrapper on top of Webpack that really reduces the complexity of Webpack and lessens considerable amount of development effort.&lt;/p&gt;</description></item><item><title>Node.js package managers: NPM and Yarn</title><link>https://htr3n.github.io/2018/04/node.js-package-managers-npm-and-yarn/<pubdate>Mon, 23 Apr 2018 00:00:00 +0000</pubdate><guid>b3d7607ba2c296738f3239328d601b95</guid><description>&lt;p&gt;Node.js is an increasingly popular and widely used JavaScript runtime nowadays. One of the important aspects of Node.js is to manage the dependencies among software artefacts. Better dependency management would advocate modularisation and decoupling of software components. Since the dawn of Node.js, &lt;a href=&#34;https://stackoverflow.com/questions/35062852/npm-vs-bower-vs-browserify-vs-gulp-vs-grunt-vs-webpack&#34;&gt;several package managers&lt;/a&gt; have been developed, notably, &lt;a href=&#34;https://www.npmjs.org/&#34;&gt;npm&lt;/a&gt;, &lt;a href=&#34;https://anymod.com&#34;&gt;anymod&lt;/a&gt; (formerly &lt;code&gt;component&lt;/code&gt;), &lt;a href=&#34;http://volojs.org&#34;&gt;volo&lt;/a&gt;, &lt;a href=&#34;http://packages.ringojs.org&#34;&gt;ringojs&lt;/a&gt;, &lt;a href=&#34;https://bower.io&#34;&gt;bower&lt;/a&gt;, &lt;a href=&#34;https://yarnpkg.com&#34;&gt;yarn&lt;/a&gt;, &lt;a href=&#34;https://pnpm.js.org&#34;&gt;&lt;code&gt;pnpm&lt;/code&gt;&lt;/a&gt;, to name but a few.&lt;/p&gt; &lt;p&gt;In this post, we shall walk through the two tools that have been seemingly living up to the high expectation of a majority of JavaScript developers and communities, &lt;code&gt;npm&lt;/code&gt; and &lt;code&gt;yarn&lt;/code&gt;. &lt;code&gt;pnpm&lt;/code&gt; is an improvement that &lt;a href=&#34;https://github.com/pnpm/node-package-manager-benchmark&#34;&gt;performs sometimes better&lt;/a&gt; than &lt;code&gt;npm&lt;/code&gt; and &lt;code&gt;yarn&lt;/code&gt;. The great advantage of using &lt;code&gt;pnpm&lt;/code&gt; is that we just replace the command &lt;code&gt;npm&lt;/code&gt; by &lt;code&gt;pnpm&lt;/code&gt; and keep the rest intact. Bower is a powerful tool that supports not only JS but also various types of Web resources including HTML, CSS, fonts, images. Nevertheless, the core Bower developers and maintainers &lt;a href=&#34;https://bower.io/blog/2017/how-to-migrate-away-from-bower&#34;&gt;had recently recommended the users to switch to &lt;code&gt;yarn&lt;/code&gt;&lt;/a&gt;.&lt;/p&gt; &lt;ul&gt; &lt;li&gt;&lt;code&gt;npm&lt;/code&gt; seems to be the &lt;em&gt;de facto&lt;/em&gt; package management included with Node.js. When Node.js is installed, &lt;code&gt;npm&lt;/code&gt; will also be available and ready to use as well. This is one among many reasons why &lt;code&gt;npm&lt;/code&gt; is well-known and widely used by JS developers.&lt;/li&gt; &lt;li&gt;&lt;code&gt;yarn&lt;/code&gt; was &lt;a href=&#34;https://code.facebook.com/posts/1840075619545360&#34;&gt;originally developed by Facebook&lt;/a&gt; to overcome existing problems of existing package management tools. Some notable &lt;code&gt;yarn&lt;/code&gt;&amp;rsquo;s features are &lt;em&gt;deterministic model&lt;/em&gt; (producing the same result when repeating), &lt;em&gt;flat mode&lt;/em&gt; (resolving mismatching versions of dependencies to a single version to avoid duplicate), &lt;em&gt;security first&lt;/em&gt;, &lt;em&gt;offline mode&lt;/em&gt;, &lt;em&gt;network performance&lt;/em&gt;, and so forth. Nevertheless, recent versions of &lt;code&gt;npm&lt;/code&gt; also improve significantly by learning and incorporate several good features from &lt;code&gt;yarn&lt;/code&gt;.&lt;/li&gt; &lt;/ul&gt; &lt;h2 id=&#34;walking-through&#34;&gt;Walking Through&lt;/h2&gt; &lt;p&gt;In this part, we will go through a typical development workflow that each tool provides with basic steps and some commonly used options.&lt;/p&gt; &lt;h3 id=&#34;0-installing-and-upgrading&#34;&gt;0. Installing and Upgrading&lt;/h3&gt; &lt;h5 id=&#34;npm&#34;&gt;NPM&lt;/h5&gt; &lt;p&gt;As mentioned above, &lt;code&gt;npm&lt;/code&gt; is available wherever Node.js is installed. So, the only thing to do is to upgrade &lt;code&gt;npm&lt;/code&gt;&lt;/p&gt; &lt;pre&gt;&lt;code class=&#34;language-sh&#34;&gt;npm install npm@latest -g # you can also use the alias &#39;i&#39; npm i npm@latest -g &lt;/code&gt;&lt;/pre&gt; &lt;h5 id=&#34;yarn&#34;&gt;Yarn&lt;/h5&gt; &lt;p&gt;Yarn can be installed via &lt;code&gt;npm&lt;/code&gt; but this method is &lt;a href=&#34;https://yarnpkg.com/en/docs/install#install-via-npm&#34;&gt;not recommended due to security reason&lt;/a&gt;.&lt;/p&gt; &lt;pre&gt;&lt;code class=&#34;language-sh&#34;&gt;npm install --g yarn &lt;/code&gt;&lt;/pre&gt; &lt;p&gt;macOS users can install Yarn using &lt;a href=&#34;https://brew.sh&#34;&gt;Homebrew&lt;/a&gt;.&lt;/p&gt; &lt;pre&gt;&lt;code class=&#34;language-sh&#34;&gt;# installing brew update &amp;amp;&amp;amp; brew install yarn # upgrading brew upgrade yarn &lt;/code&gt;&lt;/pre&gt; &lt;p&gt;There are also &lt;a href=&#34;https://yarnpkg.com/en/docs/install&#34;&gt;concrete instructions&lt;/a&gt; for Linux and Windows users, too.&lt;/p&gt; &lt;h3 id=&#34;1-starting-new-projects&#34;&gt;1. Starting New Projects&lt;/h3&gt; &lt;h5 id=&#34;npm-1&#34;&gt;NPM&lt;/h5&gt; &lt;pre&gt;&lt;code class=&#34;language-sh&#34;&gt;npm init [-f|--force] [-y|--yes] &lt;/code&gt;&lt;/pre&gt; &lt;p&gt;&lt;code&gt;npm init&lt;/code&gt; will ask you a number of questions and create an initial configuration file &lt;code&gt;package.json&lt;/code&gt;. In case you do not want to answer the questions one by one, you can use any option &lt;code&gt;-f&lt;/code&gt;, &lt;code&gt;--force&lt;/code&gt;, &lt;code&gt;-y&lt;/code&gt; or &lt;code&gt;--yes&lt;/code&gt; to skip all questions and get a default &lt;code&gt;package.json&lt;/code&gt; in the current directory.&lt;/p&gt; &lt;h5 id=&#34;yarn-1&#34;&gt;Yarn&lt;/h5&gt; &lt;pre&gt;&lt;code class=&#34;language-sh&#34;&gt;yarn init [-y | --yes] [-p | --private] &lt;/code&gt;&lt;/pre&gt; &lt;p&gt;This command is totally similar to &lt;code&gt;npm init&lt;/code&gt; and the outcome will be &lt;code&gt;package.json&lt;/code&gt;. The only difference is &lt;code&gt;-p&lt;/code&gt; or &lt;code&gt;--private&lt;/code&gt; to set &lt;code&gt;&amp;quot;private&amp;quot;: true&lt;/code&gt;.&lt;/p&gt; &lt;h3 id=&#34;2-getting-information&#34;&gt;2. Getting Information&lt;/h3&gt; &lt;h5 id=&#34;npm-2&#34;&gt;NPM&lt;/h5&gt; &lt;pre&gt;&lt;code class=&#34;language-sh&#34;&gt;# display a particular package&#39;s information npm view eslint npm info eslint # search for a package/name npm search eslint # list installed packages npm ls &lt;/code&gt;&lt;/pre&gt; &lt;h5 id=&#34;yarn-2&#34;&gt;Yarn&lt;/h5&gt; &lt;p&gt;Yarn developers deliberately do not add support for searching packages like &lt;code&gt;npm&lt;/code&gt; as &lt;a href=&#34;https://github.com/yarnpkg/yarn/issues/778#issuecomment-253146299&#34;&gt;explained here&lt;/a&gt;.&lt;/p&gt; &lt;pre&gt;&lt;code class=&#34;language-sh&#34;&gt;# display a particular package&#39;s information yarn info eslint # list installed packages yarn list &lt;/code&gt;&lt;/pre&gt; &lt;p&gt;Yarn provodes a nice command for showing why a certain package was installed.&lt;/p&gt; &lt;pre&gt;&lt;code class=&#34;language-sh&#34;&gt;yarn why eslint &lt;/code&gt;&lt;/pre&gt; &lt;h3 id=&#34;3-installing-dependencies&#34;&gt;3. Installing Dependencies&lt;/h3&gt; &lt;p&gt;Both &lt;code&gt;npm&lt;/code&gt; and &lt;code&gt;yarn&lt;/code&gt; provide several options to add dependencies ranging from registered packages, tarballs, to git repositories. Please note that, &lt;code&gt;npm&lt;/code&gt; and &lt;code&gt;yarn&lt;/code&gt; also support manipulating global package repositories, i.e. installed packages that are available to the whole working system instead of local projects. In most of the case, we can use the option &lt;code&gt;-g&lt;/code&gt; for &lt;code&gt;npm&lt;/code&gt; and the command &lt;code&gt;global&lt;/code&gt; for &lt;code&gt;yarn&lt;/code&gt;. Thus, in the following steps, we mainly concentrate on local repositories.&lt;/p&gt; &lt;h5 id=&#34;npm-3&#34;&gt;NPM&lt;/h5&gt; &lt;pre&gt;&lt;code class=&#34;language-sh&#34;&gt;# install all dependencies defined in package.json npm install # add a registered package and record it in &#39;dependencies&#39; npm install eslint # add an exact version npm install eslint@3.0.0 # add and record in &#39;devDependencies&#39; npm install --save-dev eslint # add a git repos npm install git@github.com:eslint/eslint.git &lt;/code&gt;&lt;/pre&gt; &lt;h5 id=&#34;yarn-3&#34;&gt;Yarn&lt;/h5&gt; &lt;pre&gt;&lt;code class=&#34;language-sh&#34;&gt;# install all dependencies defined in package.json yarn install # add a registered package yarn add eslint # add an exact version yarn add eslint@3.0.0 # add to dev dependencies yarn add --dev eslint # add a git repos yarn add git@github.com:eslint/eslint.git &lt;/code&gt;&lt;/pre&gt; &lt;h3 id=&#34;4-upgrading-packages&#34;&gt;4. Upgrading Packages&lt;/h3&gt; &lt;h5 id=&#34;npm-4&#34;&gt;NPM&lt;/h5&gt; &lt;pre&gt;&lt;code class=&#34;language-sh&#34;&gt;# check outdated packages npm outdated # upgrade all to the latest versions w.r.t version ranges in &#39;package.json&#39; (since 2.6.1 default to top level packages) npm update # upgrade a specific package npm update eslint &lt;/code&gt;&lt;/pre&gt; &lt;h5 id=&#34;yarn-4&#34;&gt;Yarn&lt;/h5&gt; &lt;pre&gt;&lt;code class=&#34;language-sh&#34;&gt;# check outdated packages yarn outdated # upgrade all yarn upgrade # upgrade all and ignore version ranges in &#39;package.json&#39; yarn upgrade --latest # upgrade a specific package yarn upgrade eslint # upgrade packages match a pattern yarn upgrade --pattern eslint &lt;/code&gt;&lt;/pre&gt; &lt;h3 id=&#34;5-removing-packages&#34;&gt;5. Removing Packages&lt;/h3&gt; &lt;h5 id=&#34;npm-5&#34;&gt;NPM&lt;/h5&gt; &lt;pre&gt;&lt;code class=&#34;language-sh&#34;&gt;npm uninstall eslint &lt;/code&gt;&lt;/pre&gt; &lt;h5 id=&#34;yarn-5&#34;&gt;Yarn&lt;/h5&gt; &lt;pre&gt;&lt;code class=&#34;language-sh&#34;&gt;yarn remove eslint &lt;/code&gt;&lt;/pre&gt; &lt;h3 id=&#34;6-running-commands&#34;&gt;6. Running Commands&lt;/h3&gt; &lt;h5 id=&#34;npm-6&#34;&gt;NPM&lt;/h5&gt; &lt;p&gt;&lt;code&gt;npm&lt;/code&gt; allows users to define executable scripts in &lt;code&gt;package.json&lt;/code&gt; under the section&lt;/p&gt; &lt;pre&gt;&lt;code class=&#34;language-json&#34;&gt;&amp;quot;scripts&amp;quot; : { &amp;quot;test&amp;quot; : &amp;quot;...&amp;quot; } &lt;/code&gt;&lt;/pre&gt; &lt;p&gt;then use &lt;code&gt;npm run script-name&lt;/code&gt; to execute the predefined scripts.&lt;/p&gt; &lt;pre&gt;&lt;code class=&#34;language-sh&#34;&gt;npm run test &lt;/code&gt;&lt;/pre&gt; &lt;p&gt;Nevertheless, &lt;code&gt;npm&lt;/code&gt; provides a short form for executing testing scripts as well.&lt;/p&gt; &lt;pre&gt;&lt;code&gt;npm test &lt;/code&gt;&lt;/pre&gt; &lt;h5 id=&#34;yarn-6&#34;&gt;Yarn&lt;/h5&gt; &lt;p&gt;Similar to &lt;code&gt;npm&lt;/code&gt;, &lt;code&gt;yarn&lt;/code&gt; users can execute scripts with &lt;code&gt;yarn run script-name&lt;/code&gt; and &lt;code&gt;yarn test&lt;/code&gt; for testing.&lt;/p&gt; &lt;pre&gt;&lt;code class=&#34;language-sh&#34;&gt;yarn run start yarn test &lt;/code&gt;&lt;/pre&gt; &lt;p&gt;So far, we have walked through some basic steps of a typical development workflow, ranging from initialisation to inquiring and manipulating packages. Apart from that, both &lt;code&gt;npm&lt;/code&gt; and &lt;code&gt;yarn&lt;/code&gt; also go extra length with many more different functionality. Backing by very strong and active communities, your development projects will surely in safe hands when choosing either of them.&lt;/p&gt;</description></item><item><title>Confusing Hugo issues: datetime and &#39;isset&#39;</title><link>https://htr3n.github.io/2018/03/confusing-hugo-issues-datetime-and-isset/<pubdate>Sat, 31 Mar 2018 00:00:00 +0000</pubdate><guid>fdd9e8e1cb451d75b702fcce8006aded</guid><description>&lt;p&gt;Yesterday I got notified from Github for &lt;a href=&#34;https://github.com/htr3n/hyde-hyde/issues?q=is%3Aissue&#34;&gt;two opening issues&lt;/a&gt; of the Hugo&amp;rsquo;s theme &lt;a href=&#34;https://github.com/htr3n/hyde-hyde&#34;&gt;hyde-hyde&lt;/a&gt; I have ported and developed further.&lt;/p&gt; &lt;p&gt;The &lt;a href=&#34;https://github.com/htr3n/hyde-hyde/issues/2&#34;&gt;newest one&lt;/a&gt; is reported by &lt;a href=&#34;https://github.com/jdayton3&#34;&gt;jdayton3&lt;/a&gt; (Jonathan Dayton) on wrong dates shown up. The issue seems very strange and difficult to spot. It took me a while to research around and found some relevant reports by &lt;a href=&#34;https://www.madboa.com/blog/2016/08/24/hugo-dateformat&#34;&gt;Paul Heinlein&lt;/a&gt; and &lt;a href=&#34;https://github.com/gohugoio/hugo/issues/163&#34;&gt;Dana Woodman&lt;/a&gt;, that Hugo date/time formatting is internally based on Golang, and therefore, uses &lt;a href=&#34;https://golang.org/pkg/time/#example_Time_Format&#34;&gt;a smart but confusing convention&lt;/a&gt;. It&amp;rsquo;s funny that I made almost the same mistake as Dana (i.e. he used the format string &amp;ldquo;March 1, 2010&amp;rdquo; whilst mine is &amp;ldquo;Jan 1, 2006&amp;rdquo;). As such, the generated dates were totally incorrect.&lt;/p&gt; &lt;p&gt;Paul&amp;rsquo;s post summarise excellently the Go&amp;rsquo;s date/time format convention:&lt;/p&gt; &lt;blockquote&gt; &lt;p&gt;Format strings absolutely must adhere to the 1-2-3-4-5-6-7 order:&lt;/p&gt; &lt;ul&gt; &lt;li&gt;Month must be Jan, January, 01, or 1&lt;/li&gt; &lt;li&gt;Date must be 02 or 2&lt;/li&gt; &lt;li&gt;Hour must be 03, 3, or 15&lt;/li&gt; &lt;li&gt;Minute must 04&lt;/li&gt; &lt;li&gt;Second must be 05&lt;/li&gt; &lt;li&gt;Year must be 2006&lt;/li&gt; &lt;li&gt;Timezone must be MST or -7&lt;/li&gt; &lt;/ul&gt; &lt;/blockquote&gt; &lt;p&gt;After changing the format string, the aforementioned issue surely disappears. Even better, &lt;code&gt;hyde-hyde&lt;/code&gt; date/time formatting can also now adopt a default option to prevent such potential issues.&lt;/p&gt; &lt;pre&gt;&lt;code&gt;{{ .Date.Format (.Site.Params.dateformat | default &amp;quot;Jan 02, 2006&amp;quot;) }} &lt;/code&gt;&lt;/pre&gt; &lt;p&gt;&lt;a href=&#34;https://github.com/htr3n/hyde-hyde/issues/1&#34;&gt;The other issue&lt;/a&gt; reported by &lt;a href=&#34;https://github.com/paskal&#34;&gt;paskal&lt;/a&gt; (Dmitry Verkhoturov) is an error Dmitry spotted when compiling and testing his blog against several Hugo themes including mine, &lt;code&gt;hyde-hyde&lt;/code&gt;.&lt;/p&gt; &lt;pre&gt;&lt;code&gt;Building sites … ERROR 2018/03/20 20:35:56 Error while rendering &amp;quot;page&amp;quot; in &amp;quot;&amp;quot;: template: /srv/hugo/themes/hyde-hyde/layouts/_default/single.html:6:7: executing &amp;quot;content&amp;quot; at &amp;lt;partial &amp;quot;post_conten...&amp;gt;: error calling partial: template: theme/partials/post_content.html:22:21: executing &amp;quot;theme/partials/post_content.html&amp;quot; at &amp;lt;len .Params.tags&amp;gt;: error calling len: len of untyped nil ERROR 2018/03/20 20:35:56 Error while rendering &amp;quot;page&amp;quot; in &amp;quot;post/&amp;quot;: template: /srv/hugo/themes/hyde-hyde/layouts/_default/single.html:6:7: executing &amp;quot;content&amp;quot; at &amp;lt;partial &amp;quot;post_conten...&amp;gt;: error calling partial: template: theme/partials/post_content.html:22:21: executing &amp;quot;theme/partials/post_content.html&amp;quot; at &amp;lt;len .Params.tags&amp;gt;: error calling len: len of untyped nil &lt;/code&gt;&lt;/pre&gt; &lt;p&gt;The problem related to accessing &lt;a href=&#34;https://gohugo.io/variables/page/#page-level-params&#34;&gt;the tags&lt;/a&gt; of each post via &lt;code&gt;.Params.tags&lt;/code&gt;. The function &lt;code&gt;len .Params.tags&lt;/code&gt; receives an untyped &lt;code&gt;nil&lt;/code&gt; value. Strangely, there is a conditional check using the function &lt;a href=&#34;https://github.com/gohugoio/hugo/blob/1823c053c8900cb6ee53b8e5c02939c7398e34dd/tpl/collections/collections.go#L315&#34;&gt;isset&lt;/a&gt; right before that.&lt;/p&gt; &lt;pre&gt;&lt;code&gt;{{ if isset .Params &amp;quot;tags&amp;quot; }} {{ $total := len .Params.tags }} ... {{ end }} &lt;/code&gt;&lt;/pre&gt; &lt;p&gt;The &lt;a href=&#34;https://gohugo.io/functions/isset&#34;&gt;semantics&lt;/a&gt; of &lt;code&gt;isset&lt;/code&gt; is a bit vague:&lt;/p&gt; &lt;blockquote&gt; &lt;p&gt;Returns true if the parameter is set.&lt;/p&gt; &lt;/blockquote&gt; &lt;pre&gt;&lt;code&gt;isset COLLECTION INDEX isset COLLECTION KEY &lt;/code&gt;&lt;/pre&gt; &lt;p&gt;It does not say anything when either &lt;code&gt;COLLECTION&lt;/code&gt; or &lt;code&gt;INDEX/KEY&lt;/code&gt; is &lt;code&gt;nil&lt;/code&gt; or empty. As such, perhaps Dmitry&amp;rsquo;s blog contains some posts with empty tags. Hence, the variable &lt;code&gt;.Params.tags&lt;/code&gt; yields &lt;code&gt;&amp;quot;&amp;quot;&lt;/code&gt; whilst &lt;code&gt;isset.Params &amp;quot;tags&amp;quot;&lt;/code&gt; evaluates to &lt;code&gt;true&lt;/code&gt;.&lt;/p&gt; &lt;p&gt;One of the temporary mitigation is to use &lt;a href=&#34;https://gohugo.io/functions/with&#34;&gt;with&lt;/a&gt; instead. The semantics of &lt;code&gt;with&lt;/code&gt; is a bit clearer.&lt;/p&gt; &lt;blockquote&gt; &lt;p&gt;Rebinds the context (&lt;code&gt;.&lt;/code&gt;) within its scope and skips the block if the variable is absent.&lt;/p&gt; &lt;/blockquote&gt; &lt;p&gt;Nevertheless, the error is dismissed when replacing the above code with the following. Hoooraaay!!!&lt;/p&gt; &lt;pre&gt;&lt;code&gt;{{ with .Params.tags }} {{ $total := len . }} {{ end }} &lt;/code&gt;&lt;/pre&gt; &lt;p&gt;Hugo is quite tricky, eh?&lt;/p&gt;</description></item><item><title>Getting started with Webpack</title><link>https://htr3n.github.io/2018/02/getting-started-webpack/<pubdate>Fri, 16 Feb 2018 00:00:00 +0000</pubdate><guid>9cad8498a3549c62d61178b1e5d4d7a7</guid><description>&lt;p&gt;Webpack is a &lt;a href=&#34;https://webpack.js.org/concepts&#34;&gt;&lt;em&gt;static module bundler&lt;/em&gt;&lt;/a&gt; for Web applications. It analyses and processes the &lt;em&gt;input application&lt;/em&gt; and generates output &lt;em&gt;bundles&lt;/em&gt;.&lt;/p&gt; &lt;p&gt;The design of Webpack architecture is highly modularised and extendable. In this post, I share here some notes on major aspects of Webpack since I&amp;rsquo;ve started learning it.&lt;/p&gt; &lt;figure &gt; &lt;img src=&#34;https://htr3n.github.io/2018/02/getting-started-webpack/what-is-webpack.png&#34; alt=&#34;Webpack overview&#34; style=&#34;max-width: 100%;&#34; /&gt; &lt;figcaption&gt; &lt;span class=&#34;img--caption&#34;&gt; Figure 1. Webpack overview [&lt;a href=&#34;https://webpack.github.io&#34;&gt;source&lt;/a&gt;] &lt;/span&gt; &lt;/figcaption&gt; &lt;/figure&gt; &lt;h3 id=&#34;main-concepts&#34;&gt;Main Concepts&lt;/h3&gt; &lt;h5 id=&#34;configuration-https-webpack-js-org-concepts-configuration&#34;&gt;&lt;a href=&#34;https://webpack.js.org/concepts/configuration&#34;&gt;Configuration&lt;/a&gt;&lt;/h5&gt; &lt;p&gt;Webpack&amp;rsquo;s configuration is conventionally defined using a file &lt;code&gt;webpack.config.js&lt;/code&gt;. It is a JavaScript/Node.js source file. A comprehensive example of &lt;code&gt;webpack.config.js&lt;/code&gt; can be found &lt;a href=&#34;https://webpack.js.org/configuration/#options&#34;&gt;here&lt;/a&gt;. The four major parts of Webpack&amp;rsquo;s configuration are &lt;em&gt;entry&lt;/em&gt;, &lt;em&gt;output&lt;/em&gt;, &lt;em&gt;loaders&lt;/em&gt; and &lt;em&gt;plugins&lt;/em&gt;.&lt;/p&gt; &lt;ul&gt; &lt;li&gt;&lt;a href=&#34;https://webpack.js.org/concepts/entry-points&#34;&gt;Entry&lt;/a&gt;: An entry denotes the starting point where Webpack commences buidling the internal &lt;em&gt;dependency graph&lt;/em&gt; by analysing all direct and indirect dependencies. There might be more than one entry.&lt;/li&gt; &lt;li&gt;&lt;a href=&#34;https://webpack.js.org/concepts/output&#34;&gt;Output&lt;/a&gt;: The output part defines the places where Webpack stores and how to name the outputs.&lt;/li&gt; &lt;li&gt;&lt;a href=&#34;https://webpack.js.org/concepts/loaders&#34;&gt;Loaders&lt;/a&gt;: Webpack uses loaders to handle files other than JavaScript by transform them into modules that can be processed by Webpack. Loaders are configured using &lt;code&gt;module.rules&lt;/code&gt; that specify the properties &lt;code&gt;test&lt;/code&gt; (what/which files to be transformed) and &lt;code&gt;use&lt;/code&gt; (which loaders to be used).&lt;/li&gt; &lt;li&gt;&lt;a href=&#34;https://webpack.js.org/concepts/plugins&#34;&gt;Plugins&lt;/a&gt;: Plugins are important part of Webpack that will carry out different kinds of tasks such as checking, combining files, optimised outputs, and so on. Webpack provides a &lt;a href=&#34;https://webpack.js.org/api/plugins&#34;&gt;clear interface&lt;/a&gt; for creating and/or extending plugins.&lt;/li&gt; &lt;/ul&gt; &lt;h5 id=&#34;modules-https-webpack-js-org-concepts-modules&#34;&gt;&lt;a href=&#34;https://webpack.js.org/concepts/modules&#34;&gt;Modules&lt;/a&gt;&lt;/h5&gt; &lt;p&gt;Webpack considers almost each file of any kinds a &lt;em&gt;module&lt;/em&gt;. The dependencies between modules can be described via various ways, for instance using ES2015&amp;rsquo;s &lt;a href=&#34;https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/import&#34;&gt;&lt;code&gt;import&lt;/code&gt;&lt;/a&gt;, CommonJS&amp;rsquo;s &lt;a href=&#34;http://www.commonjs.org/specs/modules/1.0&#34;&gt;&lt;code&gt;require()&lt;/code&gt;&lt;/a&gt;, &lt;a href=&#34;https://github.com/amdjs/amdjs-api/blob/master/AMD.md&#34;&gt;AMD&lt;/a&gt;&amp;rsquo;s &lt;code&gt;define&lt;/code&gt; and &lt;code&gt;require&lt;/code&gt;, and CSS&amp;rsquo;s &lt;a href=&#34;https://developer.mozilla.org/en-US/docs/Web/CSS/@import&#34;&gt;&lt;code&gt;@import&lt;/code&gt;&lt;/a&gt;. Some built-in module types supported by Webpack are including CoffeeScript, TypeScript, Babel, Sass, Less, and Stylus.&lt;/p&gt; &lt;h5 id=&#34;dependency-graph-https-webpack-js-org-concepts-dependency-graph&#34;&gt;&lt;a href=&#34;https://webpack.js.org/concepts/dependency-graph&#34;&gt;Dependency Graph&lt;/a&gt;&lt;/h5&gt; &lt;p&gt;When a file or module needs another, it is considered a &lt;em&gt;dependency&lt;/em&gt;. Webpack analyses all possible dependencies and builds a &lt;a href=&#34;https://en.wikipedia.org/wiki/Dependency_graph&#34;&gt;graph&lt;/a&gt; that includes all &lt;em&gt;needed modules&lt;/em&gt; starting from the &lt;em&gt;entry points&lt;/em&gt;. The &lt;em&gt;dependency graph&lt;/em&gt; is then used to package these modules into the &lt;em&gt;output bundles&lt;/em&gt;.&lt;/p&gt; &lt;h3 id=&#34;some-typical-usage-scenarios&#34;&gt;Some Typical Usage Scenarios&lt;/h3&gt; &lt;h5 id=&#34;1-a-simple-greeting&#34;&gt;1. A Simple Greeting&lt;/h5&gt; &lt;p&gt;To demonstrate the simplest and, somewhat naive, usage of Webpack, we will create a small project as following.&lt;/p&gt; &lt;pre&gt;&lt;code&gt;simple-greeting ├── package.json ├── public │   └── index.html ├── src │   └── main.js └── webpack.config.js &lt;/code&gt;&lt;/pre&gt; &lt;p&gt;The &lt;code&gt;package.json&lt;/code&gt; can be quickly instantiated using &lt;a href=&#34;https://www.npmjs.com&#34;&gt;npm&lt;/a&gt; or &lt;a href=&#34;https://yarnpkg.com&#34;&gt;yarn&lt;/a&gt;, as I prefer)&lt;/p&gt; &lt;pre&gt;&lt;code class=&#34;language-sh&#34;&gt;$ cd simple-greeting # create a package.json with default options $ yarn init -y # now we use npm install webpack as a dependency of our project $ yarn add --dev webpack &lt;/code&gt;&lt;/pre&gt; &lt;p&gt;Let&amp;rsquo;s create a JavaScript &lt;code&gt;src/main.js&lt;/code&gt; that contains our main business logic, i.e. writing out a heading 1 &lt;code&gt;Hello Webpack!&lt;/code&gt;.&lt;/p&gt; &lt;pre&gt;&lt;code class=&#34;language-javascript&#34;&gt;document.write(&#39;&amp;lt;h1&amp;gt;Hello Webpack!&amp;lt;/h1&amp;gt;&#39;); &lt;/code&gt;&lt;/pre&gt; &lt;p&gt;And we edit &lt;code&gt;public/index.html&lt;/code&gt;.&lt;/p&gt; &lt;pre&gt;&lt;code class=&#34;language-html&#34;&gt;&amp;lt;!DOCTYPE html&amp;gt; &amp;lt;html lang=&amp;quot;en&amp;quot;&amp;gt; &amp;lt;head&amp;gt; &amp;lt;meta charset=&amp;quot;UTF-8&amp;quot;&amp;gt; &amp;lt;title&amp;gt;Getting Started with Webpack - A Simple Greeting&amp;lt;/title&amp;gt; &amp;lt;/head&amp;gt; &amp;lt;body&amp;gt; &amp;lt;script src=&amp;quot;bundle.js&amp;quot;&amp;gt;&amp;lt;/script&amp;gt; &amp;lt;/body&amp;gt; &amp;lt;/html&amp;gt; &lt;/code&gt;&lt;/pre&gt; &lt;p&gt;You might have noticed that &lt;code&gt;index.html&lt;/code&gt; uses &lt;code&gt;bundle.js&lt;/code&gt; instead of &lt;code&gt;main.js&lt;/code&gt; that we created above. You are right, &lt;code&gt;bundle.js&lt;/code&gt; is generated by Webpack given the input &lt;code&gt;main.js&lt;/code&gt;. Let&amp;rsquo;s create a config file &lt;code&gt;webpack.config.js&lt;/code&gt; to do that.&lt;/p&gt; &lt;pre&gt;&lt;code class=&#34;language-javascript&#34;&gt;const webpack = require(&#39;webpack&#39;); const path = require(&#39;path&#39;); module.exports = { entry: &#39;./src/main.js&#39;, output: { path: path.resolve(__dirname, &#39;public&#39;), filename: &#39;bundle.js&#39;, } }; &lt;/code&gt;&lt;/pre&gt; &lt;p&gt;After that, a simple invocation of &lt;code&gt;webpack&lt;/code&gt; at the command line will work. Please note that &lt;code&gt;npm&lt;/code&gt; installs the executable &lt;code&gt;webpack&lt;/code&gt; inside &lt;code&gt;node_modules/.bin&lt;/code&gt;.&lt;/p&gt; &lt;pre&gt;&lt;code class=&#34;language-sh&#34;&gt;$ node_modules/.bin/webpack Hash: 9300b893968675cae1ef Version: webpack 3.11.0 Time: 81ms Asset Size Chunks Chunk Names bundle.js 2.52 kB 0 [emitted] main [0] ./src/main.js 43 bytes {0} [built] &lt;/code&gt;&lt;/pre&gt; &lt;p&gt;The execution of &lt;code&gt;webpack&lt;/code&gt; command should be successful. Now should you open &lt;code&gt;public/index.html&lt;/code&gt; using a Web browser, you will see &amp;ldquo;&lt;strong&gt;Hello Webpack&lt;/strong&gt;&amp;rdquo;.&lt;/p&gt; &lt;h4 id=&#34;2-using-loaders&#34;&gt;2. Using Loaders&lt;/h4&gt; &lt;p&gt;Several loaders have been developed for Webpack in order to handle various application resource types. An incompleted list of Webpack loaders can be found &lt;a href=&#34;https://github.com/webpack-contrib/awesome-webpack#loaders&#34;&gt;here&lt;/a&gt;. We will exemplify &lt;a href=&#34;https://github.com/webpack-contrib/eslint-loader&#34;&gt;&lt;code&gt;eslint-loader&lt;/code&gt;&lt;/a&gt; for analysing JavaScript sources and reporting errors, if any.&lt;/p&gt; &lt;p&gt;Let&amp;rsquo;s reuse the previous example &lt;code&gt;webpack.config.js&lt;/code&gt; and add the &lt;code&gt;eslint-loader&lt;/code&gt;.&lt;/p&gt; &lt;pre&gt;&lt;code class=&#34;language-javascript&#34;&gt;module.exports = { entry: &#39;./src/main.js&#39;, output: { path: path.resolve(__dirname, &#39;public&#39;), filename: &#39;bundle.js&#39; }, module: { rules: [ { test:/\.js$/, exclude:/node_modules/, loader: &#39;eslint-loader&#39; } ], }, }; &lt;/code&gt;&lt;/pre&gt; &lt;p&gt;We also needs, at least, the following packages: &lt;code&gt;eslint&lt;/code&gt; and &lt;code&gt;eslint-loader&lt;/code&gt; which can be easily installed. In case you need further styles or rules, you can install more packages, for instance, &lt;code&gt;eslint-config-airbnb&lt;/code&gt;, &lt;code&gt;eslint-config-google&lt;/code&gt;, to name but a few.&lt;/p&gt; &lt;pre&gt;&lt;code class=&#34;language-sh&#34;&gt;$ yarn add --dev eslint eslint-loader &lt;/code&gt;&lt;/pre&gt; &lt;p&gt;For starting, we can initialise a simple configuration for &lt;em&gt;eslint&lt;/em&gt; using the option &lt;code&gt;--init&lt;/code&gt; and answer the corresponding questions. &lt;code&gt;eslint&lt;/code&gt; will create a file &lt;code&gt;.eslintrc.xxx&lt;/code&gt; where &amp;ldquo;xxx&amp;rdquo; is either &amp;ldquo;js&amp;rdquo;, &amp;ldquo;json&amp;rdquo;, or &amp;ldquo;yaml&amp;rdquo; depending on which file format you had chosen.&lt;/p&gt; &lt;pre&gt;&lt;code class=&#34;language-sh&#34;&gt;$ eslint --init ... &lt;/code&gt;&lt;/pre&gt; &lt;p&gt;Then we can invoke &lt;code&gt;webpack&lt;/code&gt; to trigger the loader. For example, we can add the following line in the &lt;code&gt;src/main.js&lt;/code&gt;&lt;/p&gt; &lt;pre&gt;&lt;code class=&#34;language-javascript&#34;&gt;document.write(&#39;&amp;lt;h1&amp;gt;Hello Webpack!&amp;lt;/h1&amp;gt;&#39;); document.write(x); // eslint will report an error here &lt;/code&gt;&lt;/pre&gt; &lt;pre&gt;&lt;code class=&#34;language-sh&#34;&gt;$ webpack Hash: 9b7cb596310bf077e30b Version: webpack 3.11.0 Time: 622ms Asset Size Chunks Chunk Names bundle.js 2.53 kB 0 [emitted] main [0] ./src/main.js 61 bytes {0} [built] [1 error] ERROR in ./src/main.js /Users/huytran/working/dev/dev-web/webpack-demo/using-linter/src/main.js 2:16 error &#39;x&#39; is not defined no-undef ✖ 1 problem (1 error, 0 warnings) &lt;/code&gt;&lt;/pre&gt; &lt;p&gt;So you can see that &lt;code&gt;eslint-loader&lt;/code&gt; indeed caught the intended error. All errors should be fixed such that Webpack can move forward.&lt;/p&gt; &lt;h4 id=&#34;3-using-plugins&#34;&gt;3. Using Plugins&lt;/h4&gt; &lt;p&gt;As mentioned above, Webpack architecture enables the use of plugins for performing various kinds of tasks, for example, merging, minimising or uglifying source code. Many of Webpack plugins and guides can be found &lt;a href=&#34;https://webpack.js.org/plugins&#34;&gt;here&lt;/a&gt; or &lt;a href=&#34;https://github.com/webpack-contrib/awesome-webpack#webpack-plugins&#34;&gt;here&lt;/a&gt;. We take an example of &lt;a href=&#34;https://webpack.js.org/plugins/uglifyjs-webpack-plugin&#34;&gt;&lt;code&gt;UglifyjsWebpackPlugin&lt;/code&gt;&lt;/a&gt; to illustrate how plugins actually work.&lt;/p&gt; &lt;p&gt;Let&amp;rsquo;s modify the file &lt;code&gt;webpack.config.js&lt;/code&gt; taken from the previous scenarios and add the &lt;code&gt;plugins&lt;/code&gt; part.&lt;/p&gt; &lt;pre&gt;&lt;code class=&#34;language-javascript&#34;&gt;module.exports = { entry: &#39;./src/main.js&#39;, output: { path: path.resolve(__dirname, &#39;public&#39;), filename: &#39;bundle.js&#39; }, ... plugins: [ new webpack.optimize.UglifyJsPlugin() ] }; &lt;/code&gt;&lt;/pre&gt; &lt;p&gt;After executing &lt;code&gt;node_modules/.bin/webpack&lt;/code&gt; again, you can see that JavaScript source in &lt;code&gt;public/bundle.js&lt;/code&gt; has been uglified/minimised whilst the ouput of &lt;code&gt;public/index.html&lt;/code&gt; remains in tact.&lt;/p&gt; &lt;p&gt;So far, we have walked through some simple scenarios. They are not quite complex and might have not yet shown all aspects and power of Webpack. Nevertheless, I hope they are sufficient for just showing the basis of Webpack architecture and how it works.&lt;/p&gt; &lt;p&gt;The aforementioned demo projects are hosted at Github, respectively.&lt;/p&gt; &lt;ul&gt; &lt;li&gt;&lt;a href=&#34;https://github.com/htr3n/webpack-simple-greeting&#34;&gt;https://github.com/htr3n/webpack-simple-greeting&lt;/a&gt;&lt;/li&gt; &lt;li&gt;&lt;a href=&#34;https://github.com/htr3n/webpack-with-loaders&#34;&gt;https://github.com/htr3n/webpack-with-loaders&lt;/a&gt;&lt;/li&gt; &lt;li&gt;&lt;a href=&#34;https://github.com/htr3n/webpack-with-plugins&#34;&gt;https://github.com/htr3n/webpack-with-plugins&lt;/a&gt;&lt;/li&gt; &lt;/ul&gt;</description></item><item><title>First experience with Hugo</title><link>https://htr3n.github.io/2018/01/first-experience-with-hugo/<pubdate>Tue, 23 Jan 2018 00:00:00 +0000</pubdate><guid>2b6be7a16c2673903693860372a1f7e4</guid><description>&lt;p&gt;To commence my journey in software development, I have looked for a Web framework to build my personal blog. I have started writing blog posts mainly using (Multi)Markdown and plan to migrate other posts to Markdown too. Thus, it&amp;rsquo;s rather natural to go with built-in or first-class support for Markdown to minimise the migration effort.&lt;/p&gt; &lt;p&gt;I have not foreseen any great use of extensive backend storage and computation thus far. Therefore, I narrowed down my search to static site generators with two prominent candidates &lt;a href=&#34;https://jekyllrb.com&#34;&gt;Jekyll&lt;/a&gt; and &lt;a href=&#34;https://gohugo.io&#34;&gt;Hugo&lt;/a&gt; popping up, for instance, &lt;a href=&#34;https://www.staticgen.com&#34;&gt;here&lt;/a&gt;, &lt;a href=&#34;https://www.smashingmagazine.com/2015/11/static-website-generators-jekyll-middleman-roots-hugo-review&#34;&gt;here&lt;/a&gt;, and &lt;a href=&#34;https://www.netlify.com/blog/2017/05/25/top-ten-static-site-generators-of-2017&#34;&gt;here&lt;/a&gt;. Both offer all essential features to bootstrap a new site or migrate existing sites. Nothing can go wrong when you pick either one.&lt;/p&gt; &lt;p&gt;After a week trying both Jekyll and Hugo, I ended up deciding to go with Hugo. It&amp;rsquo;s not to say I hate Jekyll but quite the opposite. Jekyll is a rather well-engineered piece of software (by the guys behind &lt;a href=&#34;https://github.com&#34;&gt;Github&lt;/a&gt;). I love its design, strong community, rich ecosystem, a lot of beautiful themes and good integration with Github.&lt;/p&gt; &lt;p&gt;There is just one thing I do not feel comfortable working with Jekyll is the way to apply a theme. As far as I know, most of Jekyll&amp;rsquo;s themes ask for copying and pasting theme resources (e.g. CSS, templates) into an existing Jekyll site (please correct me if I am wrong).&lt;/p&gt; &lt;p&gt;This is quite strange regarding the conventional approach of Ruby &amp;ndash; the backend of Jekyll. As predicted, I had way too many problems changing themes that cross various Jekyll versions. It should be the other way around. That is, a theme would remain in tact inside predefined folders and be plugged into the Jekyll site via the configuration file. I think this approach, in terms of software design, would be less intrusive and much lower &lt;a href=&#34;https://en.wikipedia.org/wiki/Coupling_(computer_programming)&#34;&gt;coupling&lt;/a&gt;.&lt;/p&gt; &lt;p&gt;Hugo gets this design decision quite right. That&amp;rsquo;s why I prefer Hugo, apart from its amazing performance. You can easily find numerous compliments for Hugo around the Internet. I just fall in love with the way Hugo allows me to apply and adapt any themes (of course with some extra effort as each theme might often introduce some additional customizable features or variables). Besides, as I desire to learn more about &lt;a href=&#34;https://golang.org&#34;&gt;Golang&lt;/a&gt;, Hugo would be definitely a nice start.&lt;/p&gt; &lt;p&gt;The longer I play around with Hugo, the more I become passionate about Hugo in particular and Golang in general. The first week working with Hugo has yielded a Hugo&amp;rsquo;s theme for my personal use that you might find useful, namely, &lt;a href=&#34;https://github.com/htr3n/hyde-hyde&#34;&gt;hyde-hyde&lt;/a&gt; (based on spf13&amp;rsquo;s &lt;a href=&#34;https://github.com/spf13/hyde&#34;&gt;Hyde&lt;/a&gt;). My journey with Hugo and Golang has just started but it looks quite bright and promising thus far.&lt;/p&gt; &lt;p&gt;I ❤️ Hugo.&lt;/p&gt;</description></item><item><title>LaraMod - Modularised Laravel 5</title><link>https://htr3n.github.io/2018/01/laramod/<pubdate>Fri, 19 Jan 2018 00:00:00 +0000</pubdate><guid>0bca01c9ee00f241fa227bb5a7448a46</guid><description>&lt;p&gt;&lt;a href=&#34;https://laravel.com&#34;&gt;Laravel&lt;/a&gt; is an amazing emerging, well-designed and well-developed PHP framework. It is currently under active development and has been among top Web development frameworks. For a simple development project, the structure is totally fine. Nevertheless, you might not want to mix up your source code and resources with Laravel&amp;rsquo;s except some really necessary configurations.&lt;/p&gt; &lt;p&gt;Moreover, you might also want to organise your project into submodules that are assigned to more than one team/person such that they can be developed silmutaneously. Thus, the need for complex submodule organisation is quite inevitable.&lt;/p&gt; &lt;p&gt;From my struggle to organise a Laravel-based project such that I can divide and work on individual submodules such as &lt;code&gt;UserManagement&lt;/code&gt;, &lt;code&gt;Authentication&lt;/code&gt;, &lt;code&gt;Dashboard&lt;/code&gt;, etc. whilst keeping the Laravel code base intact as much as possible (this could be convenient for upgrading Laravel) and keeping my code base separate from Laravel&amp;rsquo;s.&lt;/p&gt; &lt;p&gt;There are a number decent attempts on modalurasing Laravel projects for example &lt;a href=&#34;https://nicolaswidart.com/blog/writing-modular-applications-with-laravel-modules&#34;&gt;here&lt;/a&gt;, &lt;a href=&#34;https://github.com/caffeinated/modules&#34;&gt;here&lt;/a&gt; or &lt;a href=&#34;http://kamranahmed.info/blog/2015/12/03/creating-a-modular-application-in-laravel&#34;&gt;here&lt;/a&gt;. Being inspired and learning from these articles, I decided to start a simple project on my own, namely, &lt;a href=&#34;https://github.com/htr3n/laramod&#34;&gt;&lt;code&gt;LaraMod&lt;/code&gt;&lt;/a&gt;, for many reasons, but the biggest one is to dig deeper into Laravel 5 and PHP.&lt;/p&gt; &lt;p&gt;Here I only emphasize some major aspects of LaraMod. The rest, including code and extra improvements can be found at LaraMod&amp;rsquo;s &lt;a href=&#34;https://github.com/htr3n/laramod&#34;&gt;repository&lt;/a&gt;.&lt;/p&gt; &lt;p&gt;&lt;strong&gt;Update 1 @ 2018-04-25&lt;/strong&gt;: &lt;code&gt;LaraMod&lt;/code&gt; has been revised and updated to work with the most recent version of Laravel framework, &lt;code&gt;5.6.17&lt;/code&gt;. Instead of a standalone git repos, LaraMod is from now on a fork of &lt;a href=&#34;https://github.com/laravel/laravel&#34;&gt;Laravel repos&lt;/a&gt; enhanced with better modularisation.&lt;/p&gt; &lt;p&gt;&lt;strong&gt;Update 2 @ 2018-11-30&lt;/strong&gt;: &lt;code&gt;LaraMod&lt;/code&gt; has been upgraded and merged with Laravel &lt;code&gt;master&lt;/code&gt; in which the stable release version is &lt;code&gt;5.7.15&lt;/code&gt;.&lt;/p&gt; &lt;h2 id=&#34;modularising-laravel-5&#34;&gt;Modularising Laravel 5&lt;/h2&gt; &lt;h3 id=&#34;a-simple-submodule-structure&#34;&gt;A Simple Submodule Structure&lt;/h3&gt; &lt;p&gt;Assuming that I want to divide my project into submodules of which each comprises own controllers, views, models (MVC) and others such as database migration, i18n, and routes. A simple structure of the submodule &lt;code&gt;Authentication&lt;/code&gt; is shown as following.&lt;/p&gt; &lt;pre&gt;&lt;code&gt;Authentication ├──Controllers ├──Lang ├──Migrations ├──Models ├──View └──routes.php &lt;/code&gt;&lt;/pre&gt; &lt;p&gt;Such a structure can be very useful for different teams/people working independently. In LaraMod, there is an &lt;code&gt;artisan&lt;/code&gt; command &lt;code&gt;gen:module&lt;/code&gt; provided in &lt;a href=&#34;https://github.com/htr3n/laramod/blob/master/app/Console/Commands/GenModuleCommand.php&#34;&gt;&lt;code&gt;App\Console\Commands\GenModuleCommand&lt;/code&gt;&lt;/a&gt; that can quickly create a submodule following that structure.&lt;/p&gt; &lt;pre&gt;&lt;code class=&#34;language-sh&#34;&gt;$ php artisan gen:module Authentication &lt;/code&gt;&lt;/pre&gt; &lt;h3 id=&#34;how-to-proceed&#34;&gt;How to Proceed&lt;/h3&gt; &lt;p&gt;An easy approach is to rely on Laravel&amp;rsquo;s &lt;a href=&#34;https://laravel.com/docs/providers&#34;&gt;&lt;code&gt;ServiceProvider&lt;/code&gt;&lt;/a&gt; to load the submodules and register the necessary components of the submodules.&lt;/p&gt; &lt;script type=&#34;application/javascript&#34; src=&#34;//gist.github.com/htr3n/ecfb6f83c71df096e0cb9f67c7ca53b6.js?file=XYZServiceProvider.php&#34;&gt;&lt;/script&gt; &lt;p&gt;A &lt;code&gt;ServiceProvider&lt;/code&gt; contains two important methods &lt;code&gt;register()&lt;/code&gt; and &lt;code&gt;boot()&lt;/code&gt;. In this case, LaraMod mainly uses the method &lt;code&gt;boot()&lt;/code&gt; to load the corresponding submodule. LaraMod also adopts a simple, conventional method for defining a submodule. That is, all submodules will be subfolders of the folder &lt;code&gt;/modules&lt;/code&gt; and each module follows the conventional structure as mentioned above.&lt;/p&gt; &lt;h4 id=&#34;automatically-loading-submodules&#34;&gt;Automatically Loading Submodules&lt;/h4&gt; &lt;h5 id=&#34;loading-a-submodule&#34;&gt;Loading a Submodule&lt;/h5&gt; &lt;p&gt;First, we create a method &lt;code&gt;loadModule()&lt;/code&gt; to load the resources such as views, i18n, database migration, and routes of a submodule using the provided methods &lt;code&gt;loadViewsFrom()&lt;/code&gt;, &lt;code&gt;loadTranslationsFrom()&lt;/code&gt;, &lt;code&gt;loadMigrationsFrom()&lt;/code&gt;, &lt;code&gt;loadRoutesFrom()&lt;/code&gt;, respectively. As models and controllers are essential PHP classes, they can be loaded using PSR-4 autoloaders as shown in the next parts.&lt;/p&gt; &lt;script type=&#34;application/javascript&#34; src=&#34;//gist.github.com/htr3n/ecfb6f83c71df096e0cb9f67c7ca53b6.js?file=loadModule.php&#34;&gt;&lt;/script&gt; &lt;h5 id=&#34;detecting-and-loading-submodules&#34;&gt;Detecting and Loading Submodules&lt;/h5&gt; &lt;p&gt;Then we can walk through the folder &lt;code&gt;module&lt;/code&gt; and load all submodules using the method &lt;code&gt;loadModule()&lt;/code&gt; created above.&lt;/p&gt; &lt;script type=&#34;application/javascript&#34; src=&#34;//gist.github.com/htr3n/ecfb6f83c71df096e0cb9f67c7ca53b6.js?file=findAndLoadModules.php&#34;&gt;&lt;/script&gt; &lt;p&gt;Note that in this conventional approach, &lt;code&gt;findAndLoadModules()&lt;/code&gt; will look for submodule configurations either (1) explicitly in the file &lt;code&gt;/config/module.php&lt;/code&gt; with the following syntax or (2) implicitly as subfolders of &lt;code&gt;/modules&lt;/code&gt; (in case &lt;code&gt;/config/module.php&lt;/code&gt; does not exist).&lt;/p&gt; &lt;script type=&#34;application/javascript&#34; src=&#34;//gist.github.com/htr3n/ecfb6f83c71df096e0cb9f67c7ca53b6.js?file=module.php&#34;&gt;&lt;/script&gt; &lt;p&gt;Finally we invoke &lt;code&gt;findAndLoadModules()&lt;/code&gt; within &lt;code&gt;boot()&lt;/code&gt;.&lt;/p&gt; &lt;script type=&#34;application/javascript&#34; src=&#34;//gist.github.com/htr3n/ecfb6f83c71df096e0cb9f67c7ca53b6.js?file=ModulesServiceProvider.php&#34;&gt;&lt;/script&gt; &lt;h4 id=&#34;registering-the-service-provider&#34;&gt;Registering the Service Provider&lt;/h4&gt; &lt;p&gt;The &lt;code&gt;ModulesServiceProvider&lt;/code&gt; must be registered in &lt;code&gt;/config/app.php&lt;/code&gt; in order to be loaded by Laravel.&lt;/p&gt; &lt;script type=&#34;application/javascript&#34; src=&#34;//gist.github.com/htr3n/39e631c6726ed69ab26e2cd3bbe1964f.js&#34;&gt;&lt;/script&gt; &lt;h4 id=&#34;autoloading-submodules-classes&#34;&gt;Autoloading Submodules&amp;rsquo; Classes&lt;/h4&gt; &lt;p&gt;Apart from resources like views, i18n, database migration loaded in the previous steps, a submodule can also contain other PHP classes such as database ORM models and controllers.&lt;/p&gt; &lt;p&gt;One natural approach would be to leverage the &lt;a href=&#34;http://www.php-fig.org/psr/psr-4&#34;&gt;PSR-4 autoloader&lt;/a&gt; autoloading supported by Laravel 5.5. This approach also nicely fits when we want to define separate namespaces for each submodule and especially submodule&amp;rsquo;s components.&lt;/p&gt; &lt;p&gt;For this, we can define the submodule&amp;rsquo;s namespace and manually specify the submodule&amp;rsquo;s classpaths to be loaded in &lt;code&gt;composer.json&lt;/code&gt; as following.&lt;/p&gt; &lt;script type=&#34;application/javascript&#34; src=&#34;//gist.github.com/htr3n/ecfb6f83c71df096e0cb9f67c7ca53b6.js?file=composer.json&#34;&gt;&lt;/script&gt; &lt;p&gt;Another technique for autoloading classes in Laravel 5 is to dynamically add PSR4 classpaths in &lt;code&gt;ModulesServiceProvider.php&lt;/code&gt;.&lt;/p&gt; &lt;script type=&#34;application/javascript&#34; src=&#34;//gist.github.com/htr3n/b785ff9bc2b07b6540441f6dc550d9d4.js&#34;&gt;&lt;/script&gt; &lt;p&gt;One problem, though, is that LaraMod must be able to detect or guess the namespace classpaths. To do this, we can either use the configuration file &lt;code&gt;config/module.php&lt;/code&gt; or, even nicer and smarter, scan the submodule&amp;rsquo;s folders to extract the necessary information. However, loading time then will be really significant when the project grows because Laravel loaders willl do the scanning and loading whenever any classes are referenced.&lt;/p&gt; &lt;h3 id=&#34;accessing-submodule-resources&#34;&gt;Accessing Submodule Resources&lt;/h3&gt; &lt;p&gt;Given a submodule, for instance &lt;code&gt;SubmoduleA&lt;/code&gt;, most of its classes such as controllers and database mapping models, if configuring properly using PSR-4, will be automatically loaded and used straightforwardly. Nonetheless, acessing to resources such as views and i18n (languages) requires a slightly different syntax, for instance, &lt;code&gt;SubmoduleA::blade_view_name&lt;/code&gt; or &lt;code&gt;SubmoduleA::messages.error&lt;/code&gt;. If the &lt;code&gt;SubmoduleA::&lt;/code&gt; is missing, Laravel will look for views and language files in the default places.&lt;/p&gt; &lt;h2 id=&#34;finale&#34;&gt;Finale&lt;/h2&gt; &lt;p&gt;The outcome of my very first PHP project, LaraMod, would be a reasonable skeleton for modularising software projects based on Laravel 5. That is, you can just easily create a new submodule with the predefined conventional structure and add the PSR-4 namespaces and classpaths, then good you go. Each submodule should then be developed independently. Sure there are some areas that need improvement. For example, all testing stuffs are still under &lt;code&gt;/tests&lt;/code&gt; and database seeders are still in &lt;code&gt;database/seeds&lt;/code&gt;. The first one requires intervention with PHPUnit/&lt;code&gt;phpunit.xml&lt;/code&gt; whilst the later asks for further changes in built-in Laravel &lt;code&gt;artisan&lt;/code&gt; commands.&lt;/p&gt; &lt;p&gt;For me&amp;mdash;a new bie, it was not quite an all-pleasant journey to experience several Laravel aspects. Nevertheless, developing and customising LaraMod are extremely valuable as I could learn a lot about not only Laravel in particular but also PHP in general. Achieving reasonable modularisation for a complex software development project requires a lot of thoughtful design and hard work and even sometimes trade-offs and compromises. In sharing this, I hope LaraMod might become handy and helpful start so that your journeys with Laravel can be more pleasant and joyful. I look forward to hearing and learning from your experience, too.&lt;/p&gt;</description></item><item><title>Ngụy biện / Fallacies (st)</title><link>https://htr3n.github.io/2018/01/nguy-bien-fallacies/<pubdate>Mon, 01 Jan 2018 00:00:00 +0000</pubdate><guid>b6e4a8e01a40d97f703267ec2458f802</guid><description>&lt;p&gt;Bài viết sưu tầm trên Internet về các hình thức ngụy biện khác nhau.&lt;/p&gt; &lt;h2 id=&#34;thay-đổi-chủ-đề&#34;&gt;Thay đổi chủ đề&lt;/h2&gt; &lt;ol&gt; &lt;li&gt;Công kích cá nhân (ad hominem). Đây là một loại ngụy biện phổ biến nhất, nguy hiểm nhất, và có “công hiệu” nhất, vì nó tấn công vào cá nhân của người tranh luận, và tìm cách trốn tránh luận điểm của cá nhân đó. Hình thức ngụy biện này thường xuất hiện dưới dạng: Ông A phát biểu về một vấn đề; ông B tấn công vào cá nhân ông A, và làm cho người ta nghi ngờ luận điểm của ông A. Tuy nhiên, có thể không có mối liên hệ nào giữa cá nhân và luận điểm của ông A.&lt;/li&gt; &lt;/ol&gt; &lt;p&gt;Có hai hình thức thuộc loại ngụy biện này. Thứ nhất là dưới hình thức sỉ nhục, hay chửi rủa. Khi bất đồng ý kiến, người ngụy biện chỉ việc công kích vào cá nhân của người phát biểu.&lt;/p&gt; &lt;p&gt;Hình thức ngụy biện thứ hai trong loại này là người ngụy biện cố gắng thuyết phục người đối thoại chấp nhận luận điểm của họ bằng cách đề cập đến hoàn cảnh của cá nhân đó. Ví dụ: “Anh nói là không nên uống rượu, vậy mà anh đã từng ngất ngưởng cả năm qua.”&lt;/p&gt; &lt;ol&gt; &lt;li&gt;&lt;p&gt;Lợi dụng quyền lực (ad verecundiam). Đây là loại ngụy biện dùng những nhân vật nổi tiếng hay được nhiều người ái mộ để tìm sự ủng hộ cho luận điểm của mình.&lt;/p&gt;&lt;/li&gt; &lt;li&gt;&lt;p&gt;Lợi dụng quyền lực nặc danh. Trong trường hợp này, người ngụy biện không nêu danh tính người có thẩm quyền, và vì không ai biết tên người có thẩm quyền nên không ai có thể kiểm chứng sự chính xác của lời phát biểu. Một loại ngụy biện khác có quan hệ với loại này là dùng lời đồn đại để làm cơ sở lập luận.&lt;/p&gt;&lt;/li&gt; &lt;li&gt;&lt;p&gt;Lợi dụng tác phong. Loại ngụy biện này dùng tác phong hay cách làm việc hay một đặc tính nào đó của đối tượng để cố thuyết phục về sự hợp lí của phát biểu.&lt;/p&gt;&lt;/li&gt; &lt;li&gt;&lt;p&gt;Luận điệu cá trích. Loại ngụy biện này thường hay được ứng dụng khi một người nào đó đưa vào những phát biểu không dính dáng gì đến vấn đề đang tranh luận, nhằm mục đích đánh lạc hướng vấn đề.&lt;/p&gt;&lt;/li&gt; &lt;li&gt;&lt;p&gt;Luận điệu ngược ngạo (Burden of Proof). Bằng chứng luôn luôn là gánh nặng của người phát biểu. Do đó, tìm cách di chuyển gánh nặng đó cho một người khác là một thủ thuật giới ngụy biện hay dùng. Ví dụ: &amp;ldquo;Anh không tin là có UFO, vậy anh có thể chứng minh không?&amp;rdquo;, đáng lẽ người phát biểu phải chứng minh là có UFO, nhưng công việc đó đã được chuyển cho người đối thoại.&lt;/p&gt;&lt;/li&gt; &lt;/ol&gt; &lt;h2 id=&#34;lợi-dụng-cảm-tính-và-đám-đông&#34;&gt;Lợi dụng cảm tính và đám đông&lt;/h2&gt; &lt;ol&gt; &lt;li&gt;&lt;p&gt;Dựa vào bạo lực (ad baculum). Ngụy biện dựa vào bạo lực thực chất là một sự đe dọa, nhằm mục đích gây áp lực cho người đối thoại phải chấp nhận một kết luận nào đó. Ví dụ: &amp;ldquo;Không đồng ý với tôi thì vào game sẽ bị kill red&amp;rdquo;&lt;/p&gt;&lt;/li&gt; &lt;li&gt;&lt;p&gt;Lợi dụng lòng thương hại (ad misericordiam). Đây là một loại ngụy biện dựa vào lòng trắc ẩn của người đối thoại để người đối thoại chấp nhận lí lẽ của mình. “Tôi hi vọng anh sẽ chấp nhận đề nghị này, chúng ta đã tiêu ra ba tháng nay rồi đấy.”&lt;/p&gt;&lt;/li&gt; &lt;li&gt;&lt;p&gt;Lợi dụng hậu quả (ad consequentiam). Ngụy biện loại này thường được biểu hiện qua cách phát biểu “A hàm ý B, B là sự thật, do đó A là sự thật”.&lt;/p&gt;&lt;/li&gt; &lt;li&gt;&lt;p&gt;Lạm dụng chữ nghĩa. Đây là một loại ngụy biện dựa vào dùng những chữ mang cảm tính cao để gắn một giá trị đạo đức vào một đề nghị hay một câu phát biểu.&lt;/p&gt;&lt;/li&gt; &lt;li&gt;&lt;p&gt;Dựa vào quần chúng (ad numerum). Loại ngụy biện này tin rằng nếu có nhiều người ủng hộ một đề nghị nào đó, thì đề nghị đó phải đúng. Ví dụ như “Đại đa số thành viên cũ của [Clan Spammer TM] ủng hộ Phantom, hẳn anh ấy phải luôn luôn đúng.” Liên hệ với loại ngụy biện này là hình thức tranh thủ sự ủng hộ của đám đông để cố gắng cho thấy luận điểm của mình là đúng.&lt;/p&gt;&lt;/li&gt; &lt;/ol&gt; &lt;h2 id=&#34;làm-lạc-hướng-vấn-đề&#34;&gt;Làm lạc hướng vấn đề&lt;/h2&gt; &lt;ol&gt; &lt;li&gt;&lt;p&gt;Lí lẽ chẻ đôi. Loại ngụy biện này thường phân định một vấn đề thành hai giá trị: trắng và đen, bạn và thù, có và không, v.v.. dù trong thực tế, có hơn hai lựa chọn. Ví dụ nói: &amp;ldquo;Bạn chọn đi, hoặc bán cây Peril cho tui giá 10m adena, hoặc đưa tui 5m adena ngay lập tức!&amp;rdquo;&lt;/p&gt;&lt;/li&gt; &lt;li&gt;&lt;p&gt;Lí lẽ ngờ nghệch (ad ignorantiam). Loại ngụy biện này, như tên gọi ám chỉ, xuất phát từ sự ngờ nghệch. Một trong những cách nói thông thường nhất trong loại ngụy biện này mà giới ngụy biện dùng là nếu một điều gì đó chưa được chứng minh là sai (hay giả) thì điều đó là đúng (hay thật).&lt;/p&gt;&lt;/li&gt; &lt;li&gt;&lt;p&gt;Lí luận lươn trạch. Loại ngụy biện này cho rằng nếu một sự kiện xảy ra, các sự kiện có hại khác sẽ xảy ra.&lt;/p&gt;&lt;/li&gt; &lt;li&gt;&lt;p&gt;Mệnh đề rời rạc. Đây là loại ngụy biện dùng hai (hay nhiều hơn hai) mệnh đề chẳng dính dáng gì với nhau để làm thành một phát biểu hay kết luận. Ví dụ &amp;ldquo;Mày ngưng lừa đảo giá bán SS chưa&amp;rdquo;. Câu hỏi thực ra hỏi đến 2 vấn đề &amp;ldquo;Mày lừa đảo giá bán SS&amp;rdquo; và &amp;ldquo;Mày đã ngưng việc lừa đảo đó chưa&amp;rdquo; trong khi sự thật là người được hỏi chưa hề lừa đảo.&lt;/p&gt;&lt;/li&gt; &lt;li&gt;&lt;p&gt;Đơn giản hóa. Đây là một loại ngụy biện mà người phát biểu cố tình biến một quan niệm trừu tượng thành một điều cụ thể để bắt lấy thế thượng phong trong đối thoại (nhưng là ngụy biện). Ví dụ: “Tôi để ý thấy anh mô tả Phantom là một người láo xược. Vậy tôi hỏi anh cái “láo xược” đó nó nằm ở đâu trong bộ não? Anh không chỉ ra được cho tôi; do đó, tôi có thể nói cái láo xược không có thực.”&lt;/p&gt;&lt;/li&gt; &lt;/ol&gt; &lt;h2 id=&#34;qui-nạp-sai&#34;&gt;Qui nạp sai&lt;/h2&gt; &lt;ol&gt; &lt;li&gt;&lt;p&gt;Khái quát hóa vội vã. Loại ngụy biện này cũng khá phổ biến. Nó dùng một ví dụ hay trường hợp nhỏ và từ đó khái quát hóa cho một cộng đồng. Chẳng hạn như “PhuongDoan nhìn rất íu đúi, bởi vậy tụi [Clan Spammer TM] cũng íu đúi rốt”&lt;/p&gt;&lt;/li&gt; &lt;li&gt;&lt;p&gt;Khái quát hóa không đúng chỗ. Đây là loại ngụy biện mà người sử dụng chúng thường áp dụng một qui luật chung cho một tình huống hay một cá nhân. Chẳng hạn như &amp;ldquo;Clan FMW không ngại kill red người khác. Bé LeQuyen1987 cũng thuộc FMW, vậy bé ấy hẳn là thường xuyên kill red người khác.”&lt;/p&gt;&lt;/li&gt; &lt;li&gt;&lt;p&gt;Kéo dài tính tương đồng. Trong loại ngụy biện này, người dùng nó đề nghị một điều lệ chung chung, rồi ứng dụng nó cho mọi trường hợp và cá nhân. Ví dụ: “Tôi tin rằng chống luật cấm spam bằng cách cố ý spam là một điều sai trái”&lt;/p&gt;&lt;/li&gt; &lt;li&gt;&lt;p&gt;Lí lẽ quanh co. Loại ngụy biện này thường lẩn quẩn trong vài giả định và kết luận. Chẳng hạn như “Prophet nhất định không thể làm clan leader được. Do đó không thể để Prophet làm clan leader. Ví thể, các Prophet sẽ không cần phải đi đăng ký đánh thành. Do vậy, Prophet không thể nào làm leader được.&amp;rdquo; Tức là trong một lí giải như thế, cả hai giả thuyết và kết luận đều giống nhau.&lt;/p&gt;&lt;/li&gt; &lt;li&gt;&lt;p&gt;Đảo ngược điều kiện. Loại ngụy biện này thường được biểu hiện qua hình thức “Nếu A xảy ra thì B sẽ xảy ra, do đó, nếu B xảy ra thì A sẽ xảy ra.”&lt;/p&gt;&lt;/li&gt; &lt;li&gt;&lt;p&gt;Lợi dụng rủi ro. Ngụy biện này thường dùng một qui luật chung và áp dụng nó cho một trường hợp cá biệt. Ví dụ: “Luật giao thông không cho anh chạy quá 50 km/h. Cho dù cha anh sắp chết anh cũng không được chạy quá tốc độ đó.”&lt;/p&gt;&lt;/li&gt; &lt;li&gt;&lt;p&gt;Lợi dụng trường hợp cá biệt. Ngụy biện này thường dùng một trường hợp cá biệt để đem ra ứng dụng cho một đám đông. Ví dụ: “A bận ôn thi nên không để đi kiếm tiền để nộp quỹ clan, vì thế A được miễn nộp quỹ clan tuần này. Mà thế là không công bằng, nên leader phải miễn quỹ clan tuần này cho tất cả thành viên.”&lt;/p&gt;&lt;/li&gt; &lt;li&gt;&lt;p&gt;Kết luận lạc đề. Loại ngụy biện này thường xuất hiện khi một kết luận chẳng dính dáng gì đến lí lẽ mà người biện luận trình bày. Một ví dụ tiêu biểu cho trường hợp ngụy biện này là: “Độ nhiễm sắt trong nước ở Việt Nam chưa cao và còn trong mức độ cho phép. Dữ kiện của Bangladesh cho thấy tình trạng nhiễm sắt ở Việt Nam rất trầm trọng.”&lt;/p&gt;&lt;/li&gt; &lt;li&gt;&lt;p&gt;Ngụy biện rơm. Loại ngụy biện này cố tình xuyên tạc, bóp méo quan điểm hay phát biểu của người khác, để làm luận điểm tấn công. Đây là một ngụy biện, vì nó không đương đầu với cái lí lẽ đang bàn. Chẳng hạn như: “Khi không có party thì mọi người nên đi solo vào lair. Nhiều người từ chối solo vào lair, nhưng họ nên thấy rằng vào lair train hiệu quả hơn là lê lết buôn dưa ở Giran.&amp;rdquo; Trong đây, ý tranh luận của người trước là không nên solo vào lair nhưng người phản biện lại nói đến tính hiệu quả khi train ở lair - điều mà ai cũng biết.&lt;/p&gt;&lt;/li&gt; &lt;/ol&gt; &lt;h2 id=&#34;nguyên-nhân-giả&#34;&gt;Nguyên nhân giả&lt;/h2&gt; &lt;ol&gt; &lt;li&gt;&lt;p&gt;“Postology”. Loại ngụy biện này phát biểu rằng hai sự kiện xảy ra, một trước và một sau, có quan hệ với nhau như nguyên nhân và hậu quả. Ví dụ: &amp;ldquo;Vài nick bị ban khi spam, vậy chúng ta không nên spam.&amp;rdquo; Thực tế là bạn có thể spam mà vẫn không bị ban nếu spam đúng chỗ.&lt;/p&gt;&lt;/li&gt; &lt;li&gt;&lt;p&gt;Ảnh hưởng liên đới. Một sự kiện được cho là có ảnh hưởng đến một sự kiện khác, nhưng thực chất thì cả hai sự kiện đều có cùng một nguyên nhân. Đây cũng chính là một trường hợp ngụy biện dưới dạng “postology”. Ví dụ: “Chúng ta đang chứng kiến tình trạng Summoner không kiếm được clan rất cao, vì không clan nào muốn chứa Summoner” (Nhưng có thể cả hai sự kiện có nguyên nhân là một summoner cụ thể nào đó hay chơi bẩn nên không clan nào nhận.)&lt;/p&gt;&lt;/li&gt; &lt;li&gt;&lt;p&gt;Ảnh hưởng không đáng kể. Đây là một loại ngụy biện mang tính phóng đại từ một ảnh hưởng rất nhỏ. Chẳng hạn như “Hút thuốc gây ra ô nhiễm môi trường” là một phát biểu đúng, nhưng ảnh hưởng của thuốc lá đến môi trường rất khiêm tốn khi so với ảnh hưởng của khói xe, chất thải công nghiệp từ các nhà máy&lt;/p&gt;&lt;/li&gt; &lt;li&gt;&lt;p&gt;Ảnh hưởng ngược chiều. Mối quan hệ giữa nguyên nhân và hậu quả bị đảo ngược chiều để tìm đến một kết luận mang tính ngụy biện. Ví dụ: “Ung thư gây ra thói quen hút thuốc lá”.&lt;/p&gt;&lt;/li&gt; &lt;li&gt;&lt;p&gt;Nguyên nhân phức tạp. Một sự kiện xảy ra có thể do nhiều nguyên nhân khác nhau, nhưng người ngụy biện có thể đơn giản hóa thành một liên hệ đơn giản. Chẳng hạn như “Tai nạn xe cộ là do đường xá xấu” có thể đúng, nhưng tai nạn cũng có thể do người lái xe ẩu trong một điều kiện xấu.&lt;/p&gt;&lt;/li&gt; &lt;li&gt;&lt;p&gt;Nguyên nhân sai (Non causa pro causa). Loại ngụy biện này xảy ra khi một điều nào đó được cho là nguyên nhân của một sự kiện, nhưng nó chưa thực sự được chứng minh là nguyên nhân. Ví dụ: “Tôi uống một viên aspirin và nhớ đến Lineage, và tôi không còn bị nhức đầu. Như vậy Lineage đã chữa trị tôi khỏi nhức đầu.”&lt;/p&gt;&lt;/li&gt; &lt;/ol&gt; &lt;h2 id=&#34;nhập-nhằng&#34;&gt;Nhập nhằng&lt;/h2&gt; &lt;ol&gt; &lt;li&gt;&lt;p&gt;Lí lẽ mơ hồ. Dùng những chữ và lí lẽ mơ hồ, tối nghĩa là một hình thức ngụy biện, nhất là khi một chữ hay câu phát biểu được dùng với hai (hay nhiều hơn hai) ý nghĩa khác nhau. Ví dụ: &amp;ldquo;Giết người là xấu, vì thế những người đi giết những người đang red cũng là xấu&amp;rdquo;&lt;/p&gt;&lt;/li&gt; &lt;li&gt;&lt;p&gt;Chơi chữ (Amphiboly). Ngụy biện bằng chơi chữ dựa vào những giả thuyết mơ hồ, nhập nhằng, do bất cẩn thận hay cách phát biểu sai văn phạm.&lt;/p&gt;&lt;/li&gt; &lt;li&gt;&lt;p&gt;Trọng âm (accent). Đây là một hình thức ngụy biện bằng cách dùng thay đổi ý nghĩa của một câu văn qua nhấn mạnh.&lt;/p&gt;&lt;/li&gt; &lt;/ol&gt; &lt;h2 id=&#34;phạm-trù-sai&#34;&gt;Phạm trù sai&lt;/h2&gt; &lt;ol&gt; &lt;li&gt;&lt;p&gt;Hỗn hợp. Loại ngụy biện này thường dùng những đặc tính bề ngoài để suy luận cho một điều gì cá biệt. Ví dụ: “Xe đạp được làm bằng những dụng cụ nhẹ kí, do đó, xe đạp rất nhẹ”, hay “Xe hơi dùng ít xăng dầu và không gây ra ô nhiễm môi trường bằng xe bus. Do đó, xe hơi không gây hại cho môi trường bằng tác hại của xe bus.”&lt;/p&gt;&lt;/li&gt; &lt;li&gt;&lt;p&gt;Phi thể thức (ad hoc). Giải thích và lí lẽ là hai điều khác nhau. Nếu muốn xác minh A, và dùng B làm bằng cớ, thì câu phát biểu “A xảy ra bởi vì B xảy ra&amp;rdquo; là một lí lẽ. Tuy nhiên, nếu muốn xác minh một sự thật về B, thì câu phát biểu &amp;ldquo;A xảy ra bởi vì B xảy ra&amp;rdquo; không phải là một lí lẽ mà là một lời giải thích. Ngụy biện theo kiểu phi thể thức là hình thức dùng giải thích sau khi đã có sự thật mà sự thật không ứng dụng vào một bối cảnh khác. Thông thường ngụy biện phi thể thức được khoác vào chiếc áo lí lẽ. Chẳng hạn như nếu chúng ta giả định rằng clan leader đối xử công bằng với mọi member trong clan, thì những phát biểu sau đây là những lời giải thích phi thể thức: “Tôi mới được leader cho mượn tiền”, “Nói clan leader đi, ảnh nhiều tiền lắm”, “Nhưng ảnh có cho những người khác mượn tiền không”, “À, leader rất khó hiểu.”&lt;/p&gt;&lt;/li&gt; &lt;/ol&gt; &lt;h2 id=&#34;phi-logic-non-sequitur-và-nhầm-lẫn-trong-tam-đoạn-luận&#34;&gt;Phi logic (non sequitur) và nhầm lẫn trong tam đoạn luận&lt;/h2&gt; &lt;ol&gt; &lt;li&gt;&lt;p&gt;Phi logic. Ngụy biện phi logic thường xảy ra trong trường hợp một lí lẽ mà kết luận được rút ra từ những tiêu đề không dính dáng gì với nhau. Chẳng hạn như “Người Ai Cập đã từng làm nhiều khai quật để xây dựng những kim tự tháp, họ chắc chắn phải rất thạo về cổ sinh vật học.”&lt;/p&gt;&lt;/li&gt; &lt;li&gt;&lt;p&gt;Loại bỏ tiền đề. Ngụy biện loại này thường xảy ra dưới hình thức “nếu A thì B, không phải A thì không phải B.” Ví dụ: “Nếu tôi ở TPHCM thì tôi đang ở Vietnam. Tôi hiện không ở TPHCM, do đó, tôi không ở Vietnam”.&lt;/p&gt;&lt;/li&gt; &lt;li&gt;&lt;p&gt;Giả định hư. Đây là một loại ngụy biện bằng cách dùng kỹ thuật phỏng vấn. Một trường hợp cổ điển là “Ông đã ngưng đánh vợ chưa?” Tức là một câu hỏi với một giả định rằng người được hỏi từng hành hung vợ.&lt;/p&gt;&lt;/li&gt; &lt;li&gt;&lt;p&gt;Ngụy biện bốn ngữ. ( Một tiêu chuẩn của tam đoạn luận gồm có 3 chữ). Ví dụ như trong câu phát biểu “Tất cả chó là thú vật, và tất cả mèo là loài động vật có vú, do đó tất cả chó là loài động vật có vú,” có bốn chữ: chó, mèo, động vật, và động vật có vú.&lt;/p&gt;&lt;/li&gt; &lt;li&gt;&lt;p&gt;Đứt đoạn. Hai sự vật riêng biệt được xem là có liên hệ nhau nếu chúng có chung đặc tính. Người ngụy biện lợi dụng chữ giữa của một phát biểu để đưa đến một kết luận sai.&lt;/p&gt;&lt;/li&gt; &lt;/ol&gt; &lt;h2 id=&#34;các-nhầm-lẫn-khác&#34;&gt;Các nhầm lẫn khác&lt;/h2&gt; &lt;ol&gt; &lt;li&gt;&lt;p&gt;Dẫn chứng bằng giai thoại. Một trong những ngụy biện phổ biến nhất và đơn giản nhất là dựa vào những câu chuyện có tính vụn vặt, hay giai thoại.&lt;/p&gt;&lt;/li&gt; &lt;li&gt;&lt;p&gt;Lợi dụng cổ tích. Đây là một loại ngụy biện cho rằng những gì đúng hay tốt chỉ đơn giản vì chúng là cổ xưa, và những người theo cách ngụy biện này thường nói “hồi nào đến giờ ai cũng vậy.”&lt;/p&gt;&lt;/li&gt; &lt;li&gt;&lt;p&gt;Dựa vào cái mới (ad novitatem). Ngược lại với loại ngụy biện dựa vào cái cũ, ngụy biện dựa vào cái mới cho rằng một điều gì đó tốt hơn và đúng hơn đơn giản chỉ vì nó mới hơn cái khác. “Windows XP phải tốt hơn Windows 2000.”&lt;/p&gt;&lt;/li&gt; &lt;li&gt;&lt;p&gt;Lí lẽ của đồng tiền. Loại ngụy biện này thường dựa vào một niềm tin duy nhất rằng đồng tiền là một tiêu chuẩn của sự đúng đắn. Những người có nhiều tiến có khả năng đúng hơn những người ít tiền.&lt;/p&gt;&lt;/li&gt; &lt;li&gt;&lt;p&gt;Dựa vào cái nghèo. Ngược lại với ngụy biện dựa vào sự giàu có, có một loại ngụy biện khác dựa vào sự nghèo khổ.&lt;/p&gt;&lt;/li&gt; &lt;li&gt;&lt;p&gt;Điệp khúc (ad nauseam). Loại ngụy biện này cho rằng một lí lẽ càng được lặp đi lặp lại nhiều chừng nào thì nó sẽ được người ta chấp nhận là đúng. Do đó, người ngụy biện thường chỉ lặp đi lặp lại những phát biểu, bất kể là quái dở thế nào, cho đến khi người đối thoại mệt mỏi không còn muốn nghe nữa.&lt;/p&gt;&lt;/li&gt; &lt;li&gt;&lt;p&gt;Lạm dụng thiên nhiên. Tìm cái tương đồng giữa một kết luận nào đó và một khía cạnh của thế giới tự nhiên, rồi từ đó phát biểu rằng kết luận đó là không thể tránh khỏi.&lt;/p&gt;&lt;/li&gt; &lt;li&gt;&lt;p&gt;Ngụy biện “Tu quoque”. Đây là một trong những ngụy biện rất phổ biến. Nó dựa vào lí lẽ rằng một hành động có thể chấp nhận được bởi vì người đối nghịch đã làm. Chẳng hạn như “Anh là một người lừa dối.” “Rồi sao? Anh cũng là một tay lừa dối vậy.”&lt;/p&gt;&lt;/li&gt; &lt;li&gt;&lt;p&gt;Lạm dụng thống kê. Thống kê thường được giới ngụy biện sử dụng tối đa, vì theo họ thống kê có thể dùng để “chứng minh” bất cứ điều gì. Người ta có thể vặn vẹo hai con số 1 và 3 điểm để sản xuất những phát biểu như “khác nhau 2 điểm”, “cao gấp 3 lần”, hay “tăng 200%”; người ta có thể dựa vào ý kiến đồng tình của 4 người trong 5 người để cho là “80% người được thăm dò”, hay thậm chí “đa số cộng đồng” đồng ý với một luận điểm nào đó. Tức là những khái quát hoá một cách vội vã, hay dựa vào một mẫu số cực kỳ thấp, thấp đến độ nó không có nghĩa lí gì. Thực ra, thống kê không chứng minh điều gì cả. Thống kê chỉ là một phương tiện hay thuật toán dùng để loại bỏ những trường hợp khả dĩ hay không khả dĩ. Vì có quá nhiều ngụy biện thống kê, nên vấn đề này sẽ được bàn tiếp trong một dịp khác. Tuy nhiên, những ai thích tìm hiểu vấn đề ngụy biện thống kê có thể tìm đọc cuốn sách rất nổi tiếng của Darrell. Huff, có tựa đề là “How to lie with statistics” (tạm dịch: “Làm thế nào để lừa dối bằng thống kê”).&lt;/p&gt;&lt;/li&gt; &lt;/ol&gt; &lt;h2 id=&#34;mặc-định-ðề-các-hình-thức-ngụy-biện-khi-tranh-luận&#34;&gt;Mặc định Ðề: Các hình thức ngụy biện khi tranh luận&lt;/h2&gt; &lt;p&gt;Có thể nói những loại ngụy biện trên đây có những đặc điểm chung là (a) phát biểu không dựa vào lí lẽ logic; (b) các định đề không vững để đi đến một kết luận; và &amp;copy; đưa ra giả định không đúng. Ngụy biện, do đó, nói cho cùng, là một sản phẩm của sự lười suy nghĩ. Và hầu như trong chúng ta, ai cũng có ít nhất là một lần lười suy nghĩ. Do đó, nếu điểm qua những loại ngụy biện trên đây, chúng ta tự cảm nhận rằng trong quá khứ mình chắc cũng có lần phạm vào lỗi lầm của ngụy biện. Điều này có thể đúng, và không nên lấy làm ngạc nhiên.&lt;/p&gt; &lt;p&gt;Nhưng tại sao những ngụy biện vẫn còn có mặt? Theo tôi, bởi vì chúng vẫn có khách hàng. Vẫn có người, dù ít hay nhiều, tin tưởng vào ngụy biện, vì nó thuận nhĩ, trơn tru, và nhất là không thách thức. Sờ một hòn đá trơn tru đem lại cho chúng ta một cảm giác khoan khoái dễ chịu hơn là sờ một hòn đá lởm chởm, hay ngồi trên một cái ghế ghồ ghề. Người ta thích sự trơn tru, bởi vì trơn tru là dấu hiệu của sự khoan khoái, dễ chịu, là cái khoảng thời gian giải lao, không cần sự thách thức.&lt;/p&gt; &lt;p&gt;Có lẽ, ở một khía cạnh nào đó, điều này cũng không đến nỗi tệ, bởi vì những ngụy biện phản ánh sự thành công [hay có người nói sự phong phú] của ngôn ngữ trong việc tách rời giữa những gì thô thiển, gồ ghề với những gì hoàn thiện, mỹ miều. Nhưng sự trơn tru của các vật thể và ngôn ngữ ngày nay đem lại cho chúng ta một cảm giác giả tạo về thế giới thực của các vật thể. Những kỳ kẹt xe trên đường xá mới để lộ trái tim phức tạp của một thành phố. Tương tự, một sự cố của internet sẽ nhắc nhở chúng ta về tình trạng hỗn mang và phức tạp của hệ thống thông tin điện tử. Sự hỗn mang và phức tạp là thực. Trơn tru, tròn trĩnh có thể là giả tạo. Những câu văn ngụy biện có thể chỉ là những lời phát biểu lém lỉnh thay vì lịch thiệp, hàm chứa mánh khóe thay vì thân thiện. Có thể nói, ngụy biện là những lối sáo ngữ liến thoắng nhằm vào mục đích lôi cuốn người nghe/đọc, thay vì cung cấp cho họ một sự thực.&lt;/p&gt; &lt;p&gt;Bởi vì ngụy biện là những lí lẽ mà bề ngoài có vẻ logic, nên chúng có khả năng thuyết phục những người không chịu khó suy nghĩ, nhất là những người còn mang nặng cảm tính. Điều này giải thích tại sao nhiều người trong chúng ta tiếp nhận một cách thụ động quá nhiều những điều càn rỡ về thế giới chung quanh, kể cả những niềm tin tôn giáo, những mê tín dị đoan, những triết lí quái đảng, những thông tin sai lạc, v.v.. Cái tác hại của việc tiếp nhận thụ động này là nó làm cho chúng ta trở nên nô lệ với cảm tính, và dễ dàng trở thành những người cuồng tín.&lt;/p&gt; &lt;p&gt;Để không trở thành những nô lệ, chúng ta cần phải suy nghĩ nghiêm túc. Suy nghĩ nghiêm túc là một quá trình hoạt động tri thức nhằm ý niệm hóa, ứng dụng, phân tích, tổng hợp, và (hay) đánh giá những thông tin được thu thập từ quan sát, kinh nghiệm, phản ánh, lí luận, hay liên lạc, như là một niềm tin cho hành động. Chúng ta cần phải dựa vào những giá trị tri thức với những đặc điểm như trong sáng, chính xác, nhất quán, có liên hệ, bằng chứng tốt, lí lẽ hợp lí, có chiều sâu, và công bình. Tức là, trước một câu phát biểu hay một đề nghị, chúng ta phải thẩm định lại kết cấu và nguyên tố của phát biểu hay đề nghị đó. Những kết cấu và nguyên tố này là: mục đích, vấn đề, giả định, quan niệm, bối cảnh, kết luận, ngụ ý, hậu quả, phạm vi tham khảo, và quan điểm khác.&lt;/p&gt; &lt;p&gt;Theo dõi những tranh luận trên các forum, chúng ta thấy những hình thức tấn công cá nhân (thay vì tấn công vào luận điểm), xuyên tạc ý tưởng, chụp mũ, suy luận theo cảm tính, mỉa mai, đơn giản hóa vấn đề, v.v… xuất hiện hầu như hàng ngày, có khi hàng giờ. Vì những tần số của những loại ngụy biện xuất hiện quá nhiều như thế, nó thành một sự rập khuôn. Theo thời gian, rập khuôn trở thành “truyền thống”. Hậu quả của cái truyền thống này là những ai ra ngoài cái khuôn sáo của ngụy biện đều có thể bị xem là phi chính thống, dẫn đến một lối suy nghĩ và phán xét kỳ quặc&lt;/p&gt; &lt;p&gt;Trong cái sự thực phức tạp, mờ mờ ảo ảo của vấn đề, có cái đẹp riêng. Không phải cái đẹp trơn tru, tròn trĩnh, nhưng là cái đẹp khắt khe của sự thật. Tương tự, một lời phát biểu nghịch lý có cái đẹp của nó, vì nó có thể đánh thức chúng ta về một thế giới phức tạp, một thế giới không nằm gọn trong đúng/sai, tốt/xấu, bạn/thù. Có lẽ đã đến lúc chúng ta nên vượt qua chính mình.&lt;/p&gt;</description></item><item><title>Apache httpd 2.4 and PHP 7 in macOS</title><link>https://htr3n.github.io/2017/09/apache-httpd-php-macos/<pubdate>Mon, 25 Sep 2017 00:00:00 +0000</pubdate><guid>9768d80543b9aa03ee844dd13e08a3be</guid><description>&lt;p&gt;Together, &lt;a href=&#34;https://httpd.apache.org&#34;&gt;Apache HTTP&lt;/a&gt; server, &lt;a href=&#34;https://php.net&#34;&gt;PHP&lt;/a&gt;, and &lt;a href=&#34;https://www.mysql.com&#34;&gt;MySQL&lt;/a&gt; form a powerful and popular combination for Web development. MacOS are often shipped with pre-installed versions of Apache HTTP server and PHP but these are often outdated and merely customised for macOS. The well-known bundles &lt;em&gt;*AMP&lt;/em&gt; (e.g. WAMP for Windows, LAMP for Linux, MAMP for Mac) are commonly used but also considered a tad bloated for the beginners like me ;).&lt;/p&gt; &lt;p&gt;After few years of Java development, I turned myself into Web development, and in particular, PHP programming. As usual, I would start with pure PHP aspects that really help me to understand the fundamental concepts and techniques instead of being drown with everyone-known frameworks and their complexity and hard-to-understand magics. As a result, I first looked for a simple setup of Apache and PHP that best suits the beginning of my initial learning path. In this note, I write down what I learn from many sources on the Internet tweaked to suit my needs.&lt;/p&gt; &lt;h2 id=&#34;goal&#34;&gt;Goal&lt;/h2&gt; &lt;blockquote&gt; &lt;p&gt;Let&amp;rsquo;s assume that we want to set up an exemplary Web development environment including Apache HTTP 2.4 server and PHP 7.&lt;/p&gt; &lt;/blockquote&gt; &lt;h2 id=&#34;strategies&#34;&gt;Strategies&lt;/h2&gt; &lt;p&gt;A typical and well-documented approach is to load PHP processor as a module under Apache httpd using the directive &lt;code&gt;LoadModule&lt;/code&gt;. It is so-called &lt;a href=&#34;http://www.php.net/manual/en/install.unix.apache2.php&#34;&gt;&lt;em&gt;mod_php&lt;/em&gt;&lt;/a&gt; approach. However, this is now gradually out of favor of Web developers and hosting providers because the tight combination of PHP and Apache makes things difficult for monitoring, debugging, and scaling. One of the recent favorite strategies is to set up PHP as Fast-CGI using &lt;a href=&#34;http://php.net/manual/en/install.fpm.php&#34;&gt;PHP-FPM&lt;/a&gt; (FastCGI Process Manager). This method also brings several advantages including good support for nginx integration and &lt;a href=&#34;https://wiki.apache.org/httpd/PHP-FPM&#34;&gt;performance&lt;/a&gt;.&lt;/p&gt; &lt;p&gt;Based on the aforementioned analysis of strategies, I consider the following installation activities to fulfill that goal.&lt;/p&gt; &lt;ol&gt; &lt;li&gt;Installing &lt;a href=&#34;https://brew.sh&#34;&gt;Homebrew&lt;/a&gt; (a sane package manager for macOS)&lt;/li&gt; &lt;li&gt;Installing Apache HTTP server 2.4&lt;/li&gt; &lt;li&gt;Installing PHP 7 and &lt;em&gt;PHP-FPM&lt;/em&gt;&lt;/li&gt; &lt;li&gt;Putting all together&lt;/li&gt; &lt;li&gt;Installing &lt;a href=&#34;http://www.thekelleys.org.uk/dnsmasq/doc.html&#34;&gt;DNSMasq&lt;/a&gt; (optional)&lt;/li&gt; &lt;/ol&gt; &lt;h2 id=&#34;installation-and-configuration&#34;&gt;Installation and Configuration&lt;/h2&gt; &lt;h3 id=&#34;homebrew-https-brew-sh&#34;&gt;&lt;a href=&#34;https://brew.sh&#34;&gt;Homebrew&lt;/a&gt;&lt;/h3&gt; &lt;p&gt;Homebrew is currently a prominent and well-supported package managing solution for macOS. Installing Homebrew is rather straightforward. Nevertheless, you should be familiar with using the command line in order to easily get thing done. All you need is to launch the Terminal app (&lt;code&gt;/Applications/Utilities/Terminal.app&lt;/code&gt;) or even the better &lt;a href=&#34;https://www.iterm2.com&#34;&gt;iTerm 2&lt;/a&gt; and start executing terminal commands.&lt;/p&gt; &lt;blockquote&gt; &lt;p&gt;Note: From now on, the sign &lt;code&gt;$&lt;/code&gt; will denote the user&amp;rsquo;s command line prompt where you will execute the terminal commands, except that you must not type &lt;code&gt;$&lt;/code&gt;.&lt;/p&gt; &lt;/blockquote&gt; &lt;p&gt;Homebrew requires Xcode&amp;rsquo;s command line tooling so we must install it first.&lt;/p&gt; &lt;pre&gt;&lt;code class=&#34;language-bash&#34;&gt;# Install Xcode command line tooling $ xcode-select --install &lt;/code&gt;&lt;/pre&gt; &lt;p&gt;Next we start installing Homebrew using a one-line command.&lt;/p&gt; &lt;pre&gt;&lt;code class=&#34;language-bash&#34;&gt;$ /usr/bin/ruby -e &amp;quot;$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/master/install)&amp;quot; &lt;/code&gt;&lt;/pre&gt; &lt;p&gt;By default, Homebrew will be installed into &lt;code&gt;/usr/local/Cellar&lt;/code&gt; and use &lt;code&gt;/usr/local&lt;/code&gt; and its sub-folders for the its installed binary and configuration files. For more advanced settings and manual configurations, please refer &lt;a href=&#34;https://docs.brew.sh/Installation.html&#34;&gt;here&lt;/a&gt;. To ensure that Homebrew is properly installed, we can simply check.&lt;/p&gt; &lt;pre&gt;&lt;code class=&#34;language-bash&#34;&gt;$ brew --version Homebrew 1.3.8 Homebrew/homebrew-core (git revision 22ac3; last commit 2017-12-02) &lt;/code&gt;&lt;/pre&gt; &lt;p&gt;The command &lt;code&gt;brew config&lt;/code&gt; shows more information about the installed Homebrew.&lt;/p&gt; &lt;pre&gt;&lt;code class=&#34;language-bash&#34;&gt;$ brew config &lt;/code&gt;&lt;/pre&gt; &lt;p&gt;Now we should add some extra &lt;em&gt;taps&lt;/em&gt; (i.e. package repositories in Homebrew&amp;rsquo;s world) that contain packages we need, for instance, Apache HTTP server, PHP, and MySQL along with tools for running them as macOS services.&lt;/p&gt; &lt;pre&gt;&lt;code class=&#34;language-bash&#34;&gt;$ brew tap homebrew/apache $ brew tap homebrew/php $ brew tap homebrew/services &lt;/code&gt;&lt;/pre&gt; &lt;p&gt;Last but not least, always make sure Homebrew is up-to-date.&lt;/p&gt; &lt;pre&gt;&lt;code class=&#34;language-bash&#34;&gt;$ brew update $ brew doctor &lt;/code&gt;&lt;/pre&gt; &lt;h3 id=&#34;apache-http-server-https-httpd-apache-org&#34;&gt;&lt;a href=&#34;https://httpd.apache.org&#34;&gt;Apache HTTP server&lt;/a&gt;&lt;/h3&gt; &lt;h4 id=&#34;installing-apache-http-server-2-4&#34;&gt;Installing Apache HTTP server 2.4&lt;/h4&gt; &lt;p&gt;We can also use the pre-installed Apache HTTP server (from now on, Apache &lt;code&gt;httpd&lt;/code&gt;, Apache, &lt;code&gt;httpd&lt;/code&gt; will be used interchangeably) shipped with macOS. Nevertheless, I want to play around with the newer version. Apart from the Homebrew-based installation commands, the steps for setting up Apache are the same in either way.&lt;/p&gt; &lt;pre&gt;&lt;code class=&#34;language-bash&#34;&gt;$ brew install httpd &lt;/code&gt;&lt;/pre&gt; &lt;blockquote&gt; &lt;p&gt;&lt;strong&gt;NOTE 1&lt;/strong&gt;: Since Sep 30th, 2017 the Apache HTTP server package in Homebrew has been renamed from &lt;code&gt;httpd24&lt;/code&gt; to &lt;code&gt;httpd&lt;/code&gt; and the corresponding folders are also changed from &lt;code&gt;apache2&lt;/code&gt; to &lt;code&gt;httpd&lt;/code&gt;. This note has been updated with the newer versions. Apart from the aforementioned updates, the configuration steps remain the same though.&lt;/p&gt; &lt;p&gt;&lt;strong&gt;NOTE 2&lt;/strong&gt;: When we use &lt;code&gt;brew install &amp;lt;package_name&lt;/code&gt; without any further options, Homebrew often accomplishes the installation faster by downloading a &lt;em&gt;bottled version&lt;/em&gt; (i.e. a &lt;em&gt;pre-compiled package&lt;/em&gt;) from &lt;a href=&#34;https://homebrew.bintray.com&#34;&gt;homebrew.bintray.com&lt;/a&gt;. If there are any extra compling options, Homebrew can download the package&amp;rsquo;s source code and compile the source. The compilation of a source package usually takes a a bit longer. For a simple and quick start, I mostly opt for the bottled versions of Apache server and PHP as the configured and compiled options are rather sufficient. After learning the fundamental aspects, I can turn to a more complex approach with lots of tweaks for further needs or experiments.&lt;/p&gt; &lt;/blockquote&gt; &lt;p&gt;By default, the Homebrew-based Apache server will use the ports &lt;code&gt;http/8080&lt;/code&gt; and &lt;code&gt;https/8443&lt;/code&gt; that do not need system administrator privileges. In my setup, I will go with this option as I simply want to run Apache with my user account. Nonetheless, you can tell Homebrew to install a version that use ports &lt;code&gt;80&lt;/code&gt; and &lt;code&gt;443&lt;/code&gt; by the option &lt;code&gt;--with-privileged-ports&lt;/code&gt;.&lt;/p&gt; &lt;pre&gt;&lt;code class=&#34;language-bash&#34;&gt;$ brew install httpd --with-privileged-ports &lt;/code&gt;&lt;/pre&gt; &lt;p&gt;In case you want to experiment with the bleeding edge Apache server pulled from its development repository, use the option &lt;code&gt;--HEAD&lt;/code&gt; along with other options. For example,&lt;/p&gt; &lt;pre&gt;&lt;code class=&#34;language-bash&#34;&gt;$ brew install httpd --HEAD --with-privileged-ports &lt;/code&gt;&lt;/pre&gt; &lt;p&gt;Let&amp;rsquo;s assume the bottled &lt;code&gt;httpd&lt;/code&gt; is installed. The Apache server will be installed in the following folder &lt;code&gt;/usr/local/Cellar/httpd/2.4.29&lt;/code&gt; (which might be different in your computer). You can check the Homebrew&amp;rsquo;s &lt;em&gt;Cellar&lt;/em&gt;, i.e. where Homebrew puts installed packages, with &lt;code&gt;brew --cellar&lt;/code&gt;. The precise location of &lt;code&gt;httpd&lt;/code&gt; in a bit complex nerdy form is &lt;code&gt;$(brew --cellar)/httpd/$(brew list --versions httpd | cut -d &#39; &#39; -f 2)&lt;/code&gt;.&lt;/p&gt; &lt;pre&gt;&lt;code class=&#34;language-bash&#34;&gt;$ cd $(brew --cellar)/httpd/$(brew list --versions httpd | cut -d &#39; &#39; -f 2) &lt;/code&gt;&lt;/pre&gt; &lt;h4 id=&#34;configuring-apache-server&#34;&gt;Configuring Apache server&lt;/h4&gt; &lt;p&gt;The main configuration file &lt;code&gt;httpd.conf&lt;/code&gt; can be located at &lt;code&gt;/usr/local/etc/httpd&lt;/code&gt;. There are some directives and options that you may want to notice or change ( &lt;code&gt;#&lt;/code&gt; starts a comment).&lt;/p&gt; &lt;p&gt;There is a default directive &lt;code&gt;Listen 8080&lt;/code&gt; denoting the port where Apache server will be listening. You can change it to your favourite one or the one that suits your projects. Note that if you change to a port in the range from &lt;code&gt;1-1023&lt;/code&gt; (so-called privileged ports), you need an administrator role to run the &lt;code&gt;httpd&lt;/code&gt; process. Because I need to create virtual hosts for various projects, I have to configure &lt;code&gt;httpd&lt;/code&gt; to listen at a particular address and port, which is &lt;code&gt;127.0.0.1:8080&lt;/code&gt; in my setting.&lt;/p&gt; &lt;p&gt;The directives &lt;code&gt;LoadModule&lt;/code&gt; will enable some Apache HTTP modules we need for configuring PHP-FPM such as &lt;code&gt;mod_proxy&lt;/code&gt;and &lt;code&gt;mod_proxy_fcgi&lt;/code&gt; (disabled by default).&lt;/p&gt; &lt;pre&gt;&lt;code class=&#34;language-apacheconf&#34;&gt;Listen 127.0.0.1:8080 ... # LoadModule proxy_module libexec/mod_proxy.so ... # LoadModule proxy_fcgi_module libexec/mod_proxy_fcgi.so ... &lt;/code&gt;&lt;/pre&gt; &lt;p&gt;Apache server can be started by using either &lt;code&gt;apachectl start&lt;/code&gt; or &lt;code&gt;brew services start httpd&lt;/code&gt;. Note that the latter also installs a snippet to run Apache &lt;code&gt;httpd&lt;/code&gt; as a startup service.&lt;/p&gt; &lt;pre&gt;&lt;code class=&#34;language-bash&#34;&gt;$ brew services start httpd $ brew services list &lt;/code&gt;&lt;/pre&gt; &lt;h4 id=&#34;running-and-testing&#34;&gt;Running and Testing&lt;/h4&gt; &lt;p&gt;We use the following commands to start, stop, or restart &lt;code&gt;httpd&lt;/code&gt;, respectively.&lt;/p&gt; &lt;pre&gt;&lt;code class=&#34;language-bash&#34;&gt;$ brew services start httpd $ brew services stop httpd $ brew services restart httpd $ launchctl list | grep httpd 91962	0	homebrew.mxcl.httpd &lt;/code&gt;&lt;/pre&gt; &lt;p&gt;To see whether Apache &lt;code&gt;httpd&lt;/code&gt; is up and running, you just start your Web browser and point to the URL &lt;a href=&#34;http://localhost:8080&#34;&gt;&lt;code&gt;http://localhost:8080&lt;/code&gt;&lt;/a&gt; and should see a simple Web page saying &lt;em&gt;&amp;ldquo;It works&amp;rdquo;&lt;/em&gt;.&lt;/p&gt; &lt;pre&gt;&lt;code class=&#34;language-bash&#34;&gt;$ ps -ef | grep httpd 501 91962 1 0 8:51AM ?? 0:00.07 /usr/local/opt/httpd/bin/httpd -D FOREGROUND 501 91968 91962 0 8:51AM ?? 0:00.04 /usr/local/opt/httpd/bin/httpd -D FOREGROUND 501 91969 91962 0 8:51AM ?? 0:00.04 /usr/local/opt/httpd/bin/httpd -D FOREGROUND 501 91970 91962 0 8:51AM ?? 0:00.04 /usr/local/opt/httpd/bin/httpd -D FOREGROUND $ lsof -Pni4 | grep httpd httpd 91962 huytran 5u IPv4 0xd51255ae3385c3d7 0t0 TCP *:* (CLOSED) httpd 91968 huytran 5u IPv4 0xd51255ae3385c3d7 0t0 TCP *:* (CLOSED) httpd 91969 huytran 5u IPv4 0xd51255ae3385c3d7 0t0 TCP *:* (CLOSED) httpd 91970 huytran 5u IPv4 0xd51255ae3385c3d7 0t0 TCP *:* (CLOSED) &lt;/code&gt;&lt;/pre&gt; &lt;p&gt;We can also test whether Apache server configuration file is correct:&lt;/p&gt; &lt;pre&gt;&lt;code class=&#34;language-bash&#34;&gt;$ apachectl configtest Syntax OK $ httpd -t Syntax OK &lt;/code&gt;&lt;/pre&gt; &lt;h3 id=&#34;php-7-http-php-net&#34;&gt;&lt;a href=&#34;http://php.net&#34;&gt;PHP 7&lt;/a&gt;&lt;/h3&gt; &lt;h4 id=&#34;install-php-and-php-fpm&#34;&gt;Install PHP and PHP-FPM&lt;/h4&gt; &lt;p&gt;Likewise, I just use Homebrew to install newer/older versions of PHP ranging from 5.x to 7.x. I opt for the stable release of PHP 7.&lt;/p&gt; &lt;pre&gt;&lt;code class=&#34;language-bash&#34;&gt;$ brew install php72 &lt;/code&gt;&lt;/pre&gt; &lt;p&gt;The default installation of PHP 7 almost covers several useful aspects including a PHP module &lt;code&gt;libphp7.so&lt;/code&gt; that can be integrated with Apache HTTP server via the directive &lt;code&gt;LoadModule&lt;/code&gt; and PHP-FPM that can be used as FastCGI.&lt;/p&gt; &lt;pre&gt;&lt;code class=&#34;language-bash&#34;&gt;$ php -version PHP 7.2.0 (cli) (built: Dec 2 2017 11:27:08) ( NTS ) Copyright (c) 1997-2017 The PHP Group Zend Engine v3.2.0, Copyright (c) 1998-2017 Zend Technologies &lt;/code&gt;&lt;/pre&gt; &lt;h4 id=&#34;php-configurations&#34;&gt;PHP configurations&lt;/h4&gt; &lt;p&gt;The main configuration file of PHP is &lt;code&gt;php.ini&lt;/code&gt; as shown below.&lt;/p&gt; &lt;pre&gt;&lt;code class=&#34;language-bash&#34;&gt;Configuration File (php.ini) Path: /usr/local/etc/php/7.2 Loaded Configuration File: /usr/local/etc/php/7.2/php.ini Scan for additional .ini files in: /usr/local/etc/php/7.2/conf.d Additional .ini files parsed: (none) &lt;/code&gt;&lt;/pre&gt; &lt;p&gt;The default setting in &lt;code&gt;/usr/local/etc/php/7.2/php.ini&lt;/code&gt; is quite sufficient for simple development purposes. We may tweak later if necessary but can leave it for now.&lt;/p&gt; &lt;h4 id=&#34;starting-php-fpm&#34;&gt;Starting PHP-FPM&lt;/h4&gt; &lt;p&gt;The configuration for PHP-FPM is &lt;code&gt;/usr/local/etc/php/7.2/php-fpm.conf&lt;/code&gt;. Note the last lines in this file&lt;/p&gt; &lt;pre&gt;&lt;code class=&#34;language-ini&#34;&gt;;include=/usr/local/etc/php/7.1/php-fpm.d/*.conf &lt;/code&gt;&lt;/pre&gt; &lt;p&gt;You can remove the semi-colon to enable the inclusion of other configurations and/or might also change the path to whether it fits your development environment. In the folder &lt;code&gt;/usr/local/etc/php/7.1/php-fpm.d/*&lt;/code&gt;, there is a file &lt;code&gt;www.conf&lt;/code&gt; that can be used as a starting point for setting up your own PHP-FPM.&lt;/p&gt; &lt;p&gt;Now we can start PHP-FPM to see whether everything is fine before doing some extra configuration steps.&lt;/p&gt; &lt;pre&gt;&lt;code class=&#34;language-bash&#34;&gt;$ brew services start php72 ==&amp;gt; Successfully started `php72` (label: homebrew.mxcl.php72) $ brew services stop php72 Stopping `php72`... (might take a while) ==&amp;gt; Successfully stopped `php72` (label: homebrew.mxcl.php72) $ brew services restart php72 &lt;/code&gt;&lt;/pre&gt; &lt;p&gt;The command &lt;code&gt;brew services start php72&lt;/code&gt; can create the file &lt;code&gt;homebrew.mxcl.php72.plist&lt;/code&gt; in &lt;code&gt;~/Library/LaunchAgents&lt;/code&gt; for starting up.&lt;/p&gt; &lt;pre&gt;&lt;code class=&#34;language-bash&#34;&gt;$ launchctl list | grep php 47728	0	homebrew.mxcl.php72 $ ps -ef | grep php-fpm ... &lt;/code&gt;&lt;/pre&gt; &lt;h3 id=&#34;putting-all-together&#34;&gt;Putting all together&lt;/h3&gt; &lt;p&gt;After basically finishing the installation of Apache, PHP 7 and PHP-FPM, we start putting these pieces together.&lt;/p&gt; &lt;h4 id=&#34;configurating-a-php-fpm-pool&#34;&gt;Configurating a &amp;lsquo;PHP-FPM&amp;rsquo; pool&lt;/h4&gt; &lt;p&gt;PHP-FPM supports multiple resource &lt;strong&gt;&lt;em&gt;pools&lt;/em&gt;&lt;/strong&gt;. Each pool defines how PHP-FPM will create and manage processes. Let&amp;rsquo;s start with enabling the inclusion and handling of pools in &lt;code&gt;/usr/local/etc/php/7.2/php-fpm.conf&lt;/code&gt; by changing the following line&lt;/p&gt; &lt;pre&gt;&lt;code class=&#34;language-ini&#34;&gt;;include=/usr/local/etc/php/7.2/php-fpm.d/*.conf &lt;/code&gt;&lt;/pre&gt; &lt;p&gt;to (i.e. uncommenting it)&lt;/p&gt; &lt;pre&gt;&lt;code class=&#34;language-ini&#34;&gt;include=/usr/local/etc/php/7.2/php-fpm.d/*.conf &lt;/code&gt;&lt;/pre&gt; &lt;p&gt;Then we can leverage the stock configuration in &lt;code&gt;/usr/local/etc/php/7.2/php-fpm.d/www.conf&lt;/code&gt;. In my case, I have cleaned up &lt;code&gt;www.conf&lt;/code&gt; and kept a simple configuration as following for the sake of readability. The configuration explains for itself.&lt;/p&gt; &lt;pre&gt;&lt;code class=&#34;language-ini&#34;&gt;[www] user = _www group = _www listen = 127.0.0.1:9072 pm = dynamic pm.max_children = 5 pm.start_servers = 2 pm.min_spare_servers = 1 pm.max_spare_servers = 3 &lt;/code&gt;&lt;/pre&gt; &lt;p&gt;The most important setting of each pool is the &lt;em&gt;TCP socket&lt;/em&gt; (including &lt;em&gt;IP address&lt;/em&gt; and &lt;em&gt;port&lt;/em&gt;) or Unix domain socket (UDS) that PHP-FPM will be receiving FastCGI requests. This will be set using the directive &lt;code&gt;listen&lt;/code&gt; . A typical setting of PHP-FPM is &lt;code&gt;listen = 127.0.0.1:9000&lt;/code&gt;. As I might want to install multiple PHP versions for testing, I will change the port to &lt;code&gt;9072&lt;/code&gt; that corresponds to the PHP version 7.2.&lt;/p&gt; &lt;blockquote&gt; &lt;p&gt;Note that we can also configure PHP-FPM to serve at a &lt;a href=&#34;https://en.wikipedia.org/wiki/Unix_domain_socket&#34;&gt;Unix domain socket&lt;/a&gt; (UDS) because PHP-FPM and &lt;code&gt;httpd&lt;/code&gt; processes are running in the same host. To do that, the directive &lt;code&gt;listen&lt;/code&gt; must be changed, for example, &lt;code&gt;listen = /usr/local/var/run/php72-fpm.sock&lt;/code&gt;. This approach would need extra effort to configure Apache to use PHP-FPM via UDS that we will visit later near the end of this guide.&lt;/p&gt; &lt;/blockquote&gt; &lt;p&gt;Now as I want to check whether PHP-FPM will be up and running with the above changes, I restart PHP-FPM and check the open ports &lt;code&gt;9072&lt;/code&gt;.&lt;/p&gt; &lt;pre&gt;&lt;code class=&#34;language-bash&#34;&gt;$ brew services restart php72 $ ps -ef | grep php-fpm ... $ lsof -Pni4 | grep php-fpm php-fpm 53180 huytran 6u IPv4 0xd51255ae2d4097b7 0t0 TCP 127.0.0.1:9072 (LISTEN) php-fpm 53187 huytran 0u IPv4 0xd51255ae2d4097b7 0t0 TCP 127.0.0.1:9072 (LISTEN) php-fpm 53188 huytran 0u IPv4 0xd51255ae2d4097b7 0t0 TCP 127.0.0.1:9072 (LISTEN) &lt;/code&gt;&lt;/pre&gt; &lt;h4 id=&#34;php-fpm-delegation&#34;&gt;PHP-FPM Delegation&lt;/h4&gt; &lt;p&gt;I can define virtual hosts in Apache that suit my needs for separating different development projects. Instead of creating one large &lt;code&gt;httpd.conf&lt;/code&gt;, I will create separate virtual host configurations. Again, I will start with the exemplary virtual host configuration provided in &lt;code&gt;/usr/local/etc/httpd/extra/httpd-vhosts.conf&lt;/code&gt;.&lt;/p&gt; &lt;p&gt;&lt;strong&gt;Enabling &amp;lsquo;mod_proxy&amp;rsquo; and &amp;lsquo;mod_proxy_fcgi&amp;rsquo;&lt;/strong&gt;&lt;/p&gt; &lt;p&gt;Change the following lines in &lt;code&gt;/usr/local/etc/httpd/httpd.conf&lt;/code&gt;&lt;/p&gt; &lt;pre&gt;&lt;code class=&#34;language-apacheconf&#34;&gt;# LoadModule proxy_module libexec/mod_proxy.so ... # LoadModule proxy_fcgi_module libexec/mod_proxy_fcgi.so &lt;/code&gt;&lt;/pre&gt; &lt;p&gt;to&lt;/p&gt; &lt;pre&gt;&lt;code class=&#34;language-apacheconf&#34;&gt;LoadModule proxy_module libexec/mod_proxy.so ... LoadModule proxy_fcgi_module libexec/mod_proxy_fcgi.so &lt;/code&gt;&lt;/pre&gt; &lt;p&gt;&lt;strong&gt;Defining Virtual Hosts&lt;/strong&gt;&lt;/p&gt; &lt;p&gt;I want to define a PHP development project residing in &lt;code&gt;/Users/huytran/working/dev/dev-web/php&lt;/code&gt;. Therefore, I change &lt;code&gt;/usr/local/etc/httpd/httpd.conf&lt;/code&gt;&lt;/p&gt; &lt;pre&gt;&lt;code class=&#34;language-apacheconf&#34;&gt;#Include /usr/local/etc/httpd/extra/httpd-vhosts.conf &lt;/code&gt;&lt;/pre&gt; &lt;p&gt;to&lt;/p&gt; &lt;pre&gt;&lt;code class=&#34;language-apacheconf&#34;&gt;Include /usr/local/etc/httpd/extra/httpd-vhosts.conf &lt;/code&gt;&lt;/pre&gt; &lt;p&gt;and then create a file &lt;code&gt;/usr/local/etc/httpd/extra/httpd-vhosts.conf&lt;/code&gt;&lt;/p&gt; &lt;pre&gt;&lt;code class=&#34;language-apacheconf&#34;&gt;&amp;lt;VirtualHost *:8080&amp;gt; ServerName php7.test DocumentRoot &amp;quot;/Users/huytran/working/dev/dev-web/php&amp;quot; ProxyPassMatch ^/(.*\.php(/.*)?)$ fcgi://127.0.0.1:9072/Users/huytran/working/dev/dev-web/php/$1 DirectoryIndex index.php index.html &amp;lt;Directory &amp;quot;/Users/huytran/working/dev/dev-web/php&amp;quot;&amp;gt; Require all granted &amp;lt;/Directory&amp;gt; &amp;lt;/VirtualHost&amp;gt; &lt;/code&gt;&lt;/pre&gt; &lt;p&gt;Further information on Apache virtual hosts can be found &lt;a href=&#34;https://httpd.apache.org/docs/current/vhosts&#34;&gt;here&lt;/a&gt; or &lt;a href=&#34;https://httpd.apache.org/docs/current/vhosts/examples.html&#34;&gt;here&lt;/a&gt;. I can briefly explain some relevant directives used in my virtual host configuration:&lt;/p&gt; &lt;ul&gt; &lt;li&gt;&lt;p&gt;&lt;em&gt;&amp;lt;VirtualHost&amp;gt;&lt;/em&gt;&lt;/p&gt; &lt;ul&gt; &lt;li&gt;&lt;a href=&#34;https://httpd.apache.org/docs/current/mod/core.html#virtualhost&#34;&gt;&lt;VirtualHost&gt;&lt;/a&gt; is used to define a new virtual host with respect to a specific hostname or IP address.&lt;/li&gt; &lt;li&gt;Syntax: &lt;code&gt;&amp;lt;VirtualHost addr[:port] [addr[:port]] ...&amp;gt; ... &amp;lt;/VirtualHost&amp;gt;&lt;/code&gt;&lt;/li&gt; &lt;li&gt;Here I use the wildcard &lt;code&gt;*:*&lt;/code&gt; to match any IP addresses and ports. Note that the port specified in a &lt;code&gt;&amp;lt;VirtualHost&amp;gt;&lt;/code&gt; does not affect the real port Apache &lt;code&gt;httpd&lt;/code&gt; is listening.&lt;/li&gt; &lt;/ul&gt;&lt;/li&gt; &lt;li&gt;&lt;p&gt;&lt;em&gt;ServerName&lt;/em&gt;&lt;/p&gt; &lt;ul&gt; &lt;li&gt;&lt;a href=&#34;https://httpd.apache.org/docs/current/mod/core.html#servername&#34;&gt;ServerName&lt;/a&gt; is recommended in each &lt;code&gt;&amp;lt;VirtualHost&amp;gt;&lt;/code&gt; for resolution and matching. If absent, Apache will use the global &lt;code&gt;ServerName&lt;/code&gt; stated in &lt;code&gt;httpd.conf&lt;/code&gt;.&lt;/li&gt; &lt;li&gt;In my case, I assign different &lt;code&gt;ServerName&lt;/code&gt;, &lt;code&gt;php7.test&lt;/code&gt; and &lt;code&gt;htmljs.test&lt;/code&gt;, respectively, for each project to distinguish them. As Apache mainly matches virtual hosts via IP addresses and it will resolve host names based on DNS servers, I will configure corresponding hostname resolution for &lt;code&gt;php7.test&lt;/code&gt; and &lt;code&gt;htmljs.test&lt;/code&gt; using &lt;code&gt;/etc/hosts&lt;/code&gt; or &lt;em&gt;DNSMasq&lt;/em&gt;.&lt;/li&gt; &lt;/ul&gt;&lt;/li&gt; &lt;li&gt;&lt;p&gt;&lt;em&gt;DocumentRoot&lt;/em&gt;&lt;/p&gt; &lt;ul&gt; &lt;li&gt;&lt;a href=&#34;https://httpd.apache.org/docs/current/mod/core.html&#34;&gt;DocumentRoot&lt;/a&gt; specifies the place where Apache &lt;code&gt;httpd&lt;/code&gt; will look for files to serve relevant incoming request. In each case, &lt;code&gt;DocumentRoot&lt;/code&gt; will be the absolute path of my development project.&lt;/li&gt; &lt;/ul&gt;&lt;/li&gt; &lt;li&gt;&lt;p&gt;&lt;em&gt;ProxyPassMatch&lt;/em&gt;&lt;/p&gt; &lt;ul&gt; &lt;li&gt;&lt;a href=&#34;https://httpd.apache.org/docs/current/mod/mod_proxy.html#proxypassmatch&#34;&gt;ProxyPassMatch&lt;/a&gt; is part of &lt;code&gt;mod_proxy&lt;/code&gt; that can map remote servers into local URLs using regular expressions.&lt;/li&gt; &lt;li&gt;Syntax: &lt;code&gt;ProxyPassMatch [regex] !|url [key=value [key=value ...]]&lt;/code&gt;&lt;/li&gt; &lt;li&gt;When Apache &lt;code&gt;httpd&lt;/code&gt; receives a request for a certain PHP file (e.g. &lt;code&gt;test.php&lt;/code&gt;) then it needs PHP to handle that request. The regular expression &lt;code&gt;^/(.*\.php(/.*)?)$&lt;/code&gt; is used to check whether the incoming request is for a &lt;code&gt;.php&lt;/code&gt; file.&lt;/li&gt; &lt;li&gt;&lt;code&gt;$1&lt;/code&gt; is called back-reference, as it refers to the matched part of the regular expression corresponding to the outermost pair of parentheses. In case the expression matches the incoming request URI (i.e. the request corresponds to a file &lt;code&gt;.php&lt;/code&gt;, for instance, &lt;code&gt;/test.php&lt;/code&gt;) &lt;code&gt;$1&lt;/code&gt; will represent the request URI. As a request is often treated as relative path from the &lt;code&gt;DocumentRoot&lt;/code&gt;, we must add &lt;code&gt;DocumentRoot&lt;/code&gt; path before &lt;code&gt;$1&lt;/code&gt; to form an exact absolute path and hand it over to PHP-FPM by adding the prefix &lt;code&gt;fcgi://127.0.0.1:9072&lt;/code&gt;. Note that PHP-FPM is serving at &lt;a href=&#34;#configuring&#34;&gt;&lt;code&gt;127.0.0.1:9072&lt;/code&gt;&lt;/a&gt; and &lt;code&gt;fcgi://&lt;/code&gt; denotes the scheme FastCGI provided by &lt;code&gt;mod_proxy_fcgi&lt;/code&gt;.&lt;/li&gt; &lt;li&gt;The project &lt;strong&gt;&lt;em&gt;htmljs.test&lt;/em&gt;&lt;/strong&gt; does not need PHP processing, therefore I do not set the directive &lt;code&gt;ProxyPassMatch&lt;/code&gt; there.&lt;/li&gt; &lt;/ul&gt;&lt;/li&gt; &lt;li&gt;&lt;p&gt;&lt;em&gt;DirectoryIndex&lt;/em&gt;&lt;/p&gt; &lt;ul&gt; &lt;li&gt;&lt;a href=&#34;https://httpd.apache.org/docs/current/mod/mod_dir.html#directoryindex&#34;&gt;DirectoryIndex&lt;/a&gt; sets the list of resources for an indexing request. As I want to use PHP, I set &lt;code&gt;index.php&lt;/code&gt; as index resource backed up by the default &lt;code&gt;index.html&lt;/code&gt;. Note that &lt;code&gt;DirectoryIndex&lt;/code&gt; can also be set globally in &lt;code&gt;httpd.conf&lt;/code&gt; that affects the main server and can be inherited in all virtual hosts.&lt;/li&gt; &lt;/ul&gt; &lt;pre&gt;&lt;code class=&#34;language-apacheconf&#34;&gt;&amp;lt;IfModule dir_module&amp;gt; DirectoryIndex index.php index.html &amp;lt;/IfModule&amp;gt; &lt;/code&gt;&lt;/pre&gt; &lt;ul&gt; &lt;li&gt;Note that &lt;code&gt;DirectoryIndex index.html&lt;/code&gt; is the default global option defined in &lt;code&gt;httpd.conf&lt;/code&gt;.&lt;/li&gt; &lt;/ul&gt;&lt;/li&gt; &lt;li&gt;&lt;p&gt;&lt;em&gt;&amp;lt;Directory&amp;gt;&lt;/em&gt;&lt;/p&gt; &lt;ul&gt; &lt;li&gt;&lt;a href=&#34;https://httpd.apache.org/docs/current/mod/core.html#directory&#34;&gt;&lt;Directory&gt;&lt;/a&gt; encloses the settings for folders, subfolders, and their contents.&lt;/li&gt; &lt;li&gt;&lt;a href=&#34;https://httpd.apache.org/docs/current/mod/mod_authz_core.html#require&#34;&gt;&lt;code&gt;Require all granted&lt;/code&gt;&lt;/a&gt; : access is allowed unconditionally (authorization &lt;code&gt;mod_authz_core&lt;/code&gt;). We need this, otherwise Apache will return an error &lt;code&gt;403 Forbidden&lt;/code&gt;.&lt;/li&gt; &lt;/ul&gt;&lt;/li&gt; &lt;/ul&gt; &lt;h4 id=&#34;hostname-resolution&#34;&gt;Hostname Resolution&lt;/h4&gt; &lt;p&gt;As mentioned before, I will use the virtual host &lt;code&gt;php7.test&lt;/code&gt; in my macOS to refer to my corresponding Web development projects. The hostname is not known by Apache. Thus, I must tell it how to resolve this hostname. In my setting, all virtual hosts are sharing in the same local computer with the address &lt;code&gt;127.0.0.1&lt;/code&gt;. A simple solution is to change the file &lt;code&gt;/etc/hosts&lt;/code&gt; where macOS will look for when resolving hostnames. This solution requires sufficient administration privilege.&lt;/p&gt; &lt;pre&gt;&lt;code class=&#34;language-bash&#34;&gt;$ sudo open -e /etc/hosts Password: (enter your password here) &lt;/code&gt;&lt;/pre&gt; &lt;p&gt;After entering the administrator password, I will add two following lines to &lt;code&gt;/etc/hosts&lt;/code&gt;.&lt;/p&gt; &lt;pre&gt;&lt;code&gt;127.0.0.1 php7.test &lt;/code&gt;&lt;/pre&gt; &lt;p&gt;In case either you do not want to mess up system files like &lt;code&gt;/etc/hosts&lt;/code&gt; or you have several development projects, you can leverage &lt;code&gt;dnsmasq&lt;/code&gt; for automatically resolving hostnames with very simple configurations. Note that this is also the reason I chose the &lt;code&gt;.test&lt;/code&gt; for all of my development projects such that I can use &lt;code&gt;dnsmasq&lt;/code&gt; and only &lt;strong&gt;one line directive&lt;/strong&gt; to resolve the TLD (Top-Level Domain) &lt;code&gt;test&lt;/code&gt;. You can surely pick any TLD other than &lt;code&gt;test&lt;/code&gt; .&lt;/p&gt; &lt;h4 id=&#34;testing-apache-and-php&#34;&gt;Testing Apache and PHP&lt;/h4&gt; &lt;p&gt;Apart from the aforementioned tests, we need to check whether the integration of Apache and PHP-FPM is working. Let&amp;rsquo;s create a file &lt;code&gt;index.php&lt;/code&gt; in &lt;code&gt;/Users/huytran/working/dev/dev-web/php&lt;/code&gt;&lt;/p&gt; &lt;pre&gt;&lt;code class=&#34;language-php&#34;&gt;&amp;lt;?php echo &#39;PHP Development Project&#39;; &lt;/code&gt;&lt;/pre&gt; &lt;p&gt;Restart &lt;code&gt;httpd&lt;/code&gt; and PHP-FPM to apply these changes.&lt;/p&gt; &lt;pre&gt;&lt;code class=&#34;language-bash&#34;&gt;$ brew services restart httpd $ brew services restart php72 &lt;/code&gt;&lt;/pre&gt; &lt;p&gt;Given no problems, the servers should be restarted smoothly. Then open your Web browser to the following URLs &lt;a href=&#34;http://php7.test:8080&#34;&gt;&lt;code&gt;http://php7.test:8080&lt;/code&gt;&lt;/a&gt;. If you see the content created above, our configuration is working.&lt;/p&gt; &lt;h3 id=&#34;dnsmasq-http-www-thekelleys-org-uk-dnsmasq-doc-html&#34;&gt;&lt;a href=&#34;http://www.thekelleys.org.uk/dnsmasq/doc.html&#34;&gt;DNSMasq&lt;/a&gt;&lt;/h3&gt; &lt;p&gt;Instead of altering system hosts &lt;code&gt;/etc/hosts&lt;/code&gt;, I can make use of &lt;code&gt;dnsmasq&lt;/code&gt; to conveniently resolve many hostnames used in my virtual hosts.&lt;/p&gt; &lt;h4 id=&#34;installing-dnsmasq&#34;&gt;Installing DNSMasq&lt;/h4&gt; &lt;pre&gt;&lt;code class=&#34;language-bash&#34;&gt;# update homebrew and install dnsmasq $ brew update &amp;amp;&amp;amp; brew install dnsmasq # Copy the dnsmasq daemon configuration file to be loaded at system startup time $ sudo cp $(brew list dnsmasq | grep /homebrew.mxcl.dnsmasq.plist$) /Library/LaunchDaemons/ # start dnsmasq $ sudo launchctl load -w /Library/LaunchDaemons/homebrew.mxcl.dnsmasq.plist &lt;/code&gt;&lt;/pre&gt; &lt;h4 id=&#34;configuring-dnsmasq&#34;&gt;Configuring DNSMasq&lt;/h4&gt; &lt;p&gt;After installing DNSMasq, let&amp;rsquo;s open the configuration file&lt;/p&gt; &lt;pre&gt;&lt;code class=&#34;language-bash&#34;&gt;$ open -e /usr/local/etc/dnsmasq.conf &lt;/code&gt;&lt;/pre&gt; &lt;p&gt;and add the following line at the end.&lt;/p&gt; &lt;pre&gt;&lt;code&gt;address=/app/127.0.0.1 &lt;/code&gt;&lt;/pre&gt; &lt;p&gt;The above configuration line tells DNSMasq to resolve the TLD &lt;code&gt;dev&lt;/code&gt; to the local IP address &lt;code&gt;127.0.0.1&lt;/code&gt;. You can now use any hostnames like &lt;code&gt;this.is.a.development.project.test&lt;/code&gt; in Apache virtual hosts.&lt;/p&gt; &lt;h4 id=&#34;configuring-macos-to-use-dnsmasq&#34;&gt;Configuring macOS to use DNSMasq&lt;/h4&gt; &lt;p&gt;We have to tell macOS that DNSMasq is now a nameserver running at the local host. The configuration file is &lt;code&gt;/etc/resolv.conf&lt;/code&gt; specifies the nameservers for looking up hostnames. On the one hand, we should not mess up the system setting. Moreover, macOS might overwrite &lt;code&gt;/etc/resolv.conf&lt;/code&gt; when there are changes in Network setting. An elegant solution is to create a file in the folder &lt;code&gt;/etc/resolver/&lt;/code&gt;with the exact TLD managed by DNSMasq.&lt;/p&gt; &lt;pre&gt;&lt;code class=&#34;language-bash&#34;&gt;$ sudo mkdir -p /etc/resolver/ $ sudo sh -c &#39;echo &amp;quot;nameserver 127.0.0.1&amp;quot; &amp;gt; /etc/resolver/test&#39; &lt;/code&gt;&lt;/pre&gt; &lt;p&gt;The aforementioned commands needs administrator privileges and will create a file &lt;code&gt;test&lt;/code&gt; with the content &lt;code&gt;nameserver 127.0.0.1&lt;/code&gt; in the folder &lt;code&gt;/etc/resolver/&lt;/code&gt;.&lt;/p&gt; &lt;h4 id=&#34;testing-dnsmasq&#34;&gt;Testing DNSMasq&lt;/h4&gt; &lt;p&gt;Now we can delete the lines added before in &lt;code&gt;/etc/hosts&lt;/code&gt; and start &lt;code&gt;dnsmasq&lt;/code&gt; (as &lt;code&gt;root&lt;/code&gt;) and test the resolving of hostnames.&lt;/p&gt; &lt;pre&gt;&lt;code class=&#34;language-bash&#34;&gt;# start dnsmasq $ sudo brew services start dnsmasq # ping the hostnames $ ping -c 1 php7.test PING php7.test (127.0.0.1): 56 data bytes 64 bytes from 127.0.0.1: icmp_seq=0 ttl=64 time=0.040 ms # query hostname using dnsmasq running at 127.0.0.1 $ dig php7.test @127.0.0.1 ... ;; ANSWER SECTION: php7.test. 0	IN	A	127.0.0.1 # test arbitrary hostnames ending with .test $ dig an.arbitrary.host.test @127.0.0.1 &lt;/code&gt;&lt;/pre&gt; &lt;h3 id=&#34;using-proxy-fastcgi-via-handler&#34;&gt;Using Proxy FastCGI via Handler&lt;/h3&gt; &lt;p&gt;Instead of configuring &lt;code&gt;ProxyPassMatch&lt;/code&gt; for each individual virtual host to handle &lt;code&gt;.php&lt;/code&gt; files, we can also set up directives in Apache &lt;code&gt;httpd.conf&lt;/code&gt; (global scope) or at the beginning of the virtual host configuration &lt;code&gt;localhost.conf&lt;/code&gt; (virtual host scope) via handlers.&lt;/p&gt; &lt;p&gt;1) First comment out or delete the line &lt;code&gt;ProxyPassMatch ...&lt;/code&gt; in the virtual host configuration &lt;code&gt;/usr/local/etc/httpd/extra/httpd-vhosts.conf&lt;/code&gt;.&lt;/p&gt; &lt;pre&gt;&lt;code class=&#34;language-apacheconf&#34;&gt;# ProxyPassMatch ^/(.*\.php(/.*)?)$ fcgi://127.0.0.1:9072/Users/huytran/working/dev/dev-web/php/$1 &lt;/code&gt;&lt;/pre&gt; &lt;p&gt;2) Then, add the following lines to either the end of &lt;code&gt;/usr/local/etc/httpd/httpd.conf&lt;/code&gt; or the beginning of &lt;code&gt;/usr/local/etc/httpd/extra/httpd-vhosts.conf&lt;/code&gt;.&lt;/p&gt; &lt;pre&gt;&lt;code class=&#34;language-apacheconf&#34;&gt;&amp;lt;Proxy &amp;quot;fcgi://localhost:9072/&amp;quot; enablereuse=on max=10&amp;gt; &amp;lt;/Proxy&amp;gt; &amp;lt;FilesMatch &amp;quot;\.php$&amp;quot;&amp;gt; &amp;lt;If &amp;quot;-f %{REQUEST_FILENAME}&amp;quot;&amp;gt; SetHandler &amp;quot;proxy:fcgi://127.0.0.1:9072/&amp;quot; &amp;lt;/If&amp;gt; &amp;lt;/FilesMatch&amp;gt; &lt;/code&gt;&lt;/pre&gt; &lt;ul&gt; &lt;li&gt;&lt;a href=&#34;https://httpd.apache.org/docs/current/mod/core.html#filesmatch&#34;&gt;&amp;lt;FilesMatch&amp;gt;&lt;/a&gt; : defines the scope of the enclosed directives by filenames that match the regular expression. &lt;ul&gt; &lt;li&gt;&lt;em&gt;Syntax&lt;/em&gt;: &lt;code&gt;&amp;lt;FilesMatch regex&amp;gt; ... &amp;lt;/FilesMatch&amp;gt;&lt;/code&gt;&lt;/li&gt; &lt;/ul&gt;&lt;/li&gt; &lt;li&gt;&lt;a href=&#34;https://httpd.apache.org/docs/current/mod/core.html#sethandler&#34;&gt;SetHandler&lt;/a&gt;: forces matching files to be processed by a handler. &lt;ul&gt; &lt;li&gt;&lt;em&gt;Syntax&lt;/em&gt;: &lt;code&gt;SetHandler handler-name|none|expression&lt;/code&gt;&lt;/li&gt; &lt;/ul&gt;&lt;/li&gt; &lt;/ul&gt; &lt;p&gt;3) Restart &lt;code&gt;httpd&lt;/code&gt;&lt;/p&gt; &lt;h3 id=&#34;handling-php-via-unix-domain-sockets&#34;&gt;Handling PHP via Unix Domain Sockets&lt;/h3&gt; &lt;p&gt;As mentioned before, PHP-FPM can serve on &lt;em&gt;Unix domain sockets (UDS)&lt;/em&gt;, too. UDS is widely used in the Unix/Linux world for inter-process communication. To enable PHP-FPM listening on UDS, open file &lt;code&gt;/usr/local/etc/php/7.1/php-fpm.d/www.conf&lt;/code&gt; and change the directive &lt;code&gt;listen&lt;/code&gt; .&lt;/p&gt; &lt;pre&gt;&lt;code class=&#34;language-ini&#34;&gt;[www] ... listen = /usr/local/var/run/php72-fpm.sock ... &lt;/code&gt;&lt;/pre&gt; &lt;p&gt;Now we must change the Apache configuration to adapt to UDS as well. In case we use &lt;code&gt;ProxyPassMatch&lt;/code&gt; directive, change it like this:&lt;/p&gt; &lt;pre&gt;&lt;code class=&#34;language-apacheconf&#34;&gt;ProxyPassMatch ^/(.*\.php(/.*)?)$ unix:/usr/local/var/run/php72-fpm.sock|fcgi://127.0.0.1:9072/Users/huytran/working/dev/dev-web/php &lt;/code&gt;&lt;/pre&gt; &lt;p&gt;The change is to add &lt;code&gt;unix:/usr/local/var/run/php72-fpm.sock|&lt;/code&gt; before &lt;code&gt;fcgi://...&lt;/code&gt; and remove the captured request URI &lt;code&gt;/$1&lt;/code&gt; at the end.&lt;/p&gt; &lt;p&gt;Similarly, if we switch to Apache handler as above, we update the Apache configuration accordingly.&lt;/p&gt; &lt;pre&gt;&lt;code class=&#34;language-apacheconf&#34;&gt;&amp;lt;Proxy &amp;quot;unix:/usr/local/var/run/php72-fpm.sock|fcgi://localhost:9072/&amp;quot; enablereuse=on max=10&amp;gt; &amp;lt;/Proxy&amp;gt; &amp;lt;FilesMatch &amp;quot;\.php$&amp;quot;&amp;gt; &amp;lt;If &amp;quot;-f %{REQUEST_FILENAME}&amp;quot;&amp;gt; SetHandler &amp;quot;proxy:unix:/usr/local/var/run/php72-fpm.sock|fcgi://127.0.0.1:9072/&amp;quot; &amp;lt;/If&amp;gt; &amp;lt;/FilesMatch&amp;gt; &lt;/code&gt;&lt;/pre&gt; &lt;p&gt;We should ensure the configurations are good and then restart the servers afterwards.&lt;/p&gt; &lt;pre&gt;&lt;code class=&#34;language-bash&#34;&gt;# check Apache config $ apachectl -t Syntax OK # check php-fpm config $ php-fpm -t [30-Sep-2017 19:39:46] NOTICE: configuration file /usr/local/etc/php/7.2/php-fpm.conf test is successful # restart servers $ brew services restart httpd $ brew services restart php72 &lt;/code&gt;&lt;/pre&gt;</description></item><item><title>Cách xưng hô họ hàng (st)</title><link>https://htr3n.github.io/2016/08/cach-xung-ho/<pubdate>Sun, 07 Aug 2016 00:00:00 +0000</pubdate><guid>ea6fd974f85bfad39608b10181e73ad4</guid><description>&lt;p&gt;Bài sưu tầm về cách xưng hô với họ hàng nội ngoại lưu lại đây thể tham khảo về sau.&lt;/p&gt; &lt;h2 id=&#34;với-họ-nội-tức-là-họ-hàng-bên-cha&#34;&gt;Với họ nội (tức là họ hàng bên cha)&lt;/h2&gt; &lt;ul&gt; &lt;li&gt;Các anh của ba và vợ của họ = bác&lt;/li&gt; &lt;li&gt;Các em trai của ba = chú.&lt;/li&gt; &lt;li&gt;Vợ của em trai của ba = thím.&lt;/li&gt; &lt;li&gt;Các em gái, chị gái của = cô.&lt;/li&gt; &lt;li&gt;Chồng của em gái, chị gái của ba = dượng.&lt;/li&gt; &lt;/ul&gt; &lt;h2 id=&#34;với-họ-ngoại-tức-họ-hàng-bên-mẹ&#34;&gt;Với họ ngoại (tức họ hàng bên mẹ)&lt;/h2&gt; &lt;ul&gt; &lt;li&gt;Các anh, em trai của mẹ = cậu.&lt;/li&gt; &lt;li&gt;Vợ của anh trai, em trai của mẹ = mợ&lt;/li&gt; &lt;li&gt;Các chị, em gái của mẹ = dì.&lt;/li&gt; &lt;li&gt;Chồng các chị, em gái của mẹ = dượng.&lt;/li&gt; &lt;/ul&gt; &lt;h2 id=&#34;còn-cách-xưng-hô-bên-gia-đình-sui-gia&#34;&gt;Còn cách xưng hô bên gia đình sui gia&lt;/h2&gt; &lt;ul&gt; &lt;li&gt;Vợ của em trai = em dâu.&lt;/li&gt; &lt;li&gt;Chồng của em gái = em rể.&lt;/li&gt; &lt;li&gt;Vợ của anh trai = chị dâu.&lt;/li&gt; &lt;li&gt;Chồng của chị gái = anh rể.&lt;/li&gt; &lt;/ul&gt; &lt;p&gt;Đặc biệt bạn có tới 8 cố gồm 4 cố là ông bà nội ba, ông bà ngoại ba và 4 cố nữa là ông bà nội mẹ, ông bà ngoại mẹ.&lt;/p&gt; &lt;p&gt;Người miền Nam gộp chung các cố ông, cố bà (các cặp) thành một gọi cho dễ nhưng nên nhớ bạn chỉ có duy nhất 1 cố nội là ông bà nội của ba còn 3 cặp ông bà cố kia là cố ngoại hết theo quy định.&lt;/p&gt;</description></item><item><title>Khen con (st)</title><link>https://htr3n.github.io/2015/07/khen-con-st/<pubdate>Wed, 01 Jul 2015 00:00:00 +0000</pubdate><guid>5101faee12a6a170cceac095e50f7d80</guid><description>&lt;h2 id=&#34;thói-quen-khen-ngợi-con-giỏi-hay-khả-năng-sẵn-có-của-con&#34;&gt;Thói quen khen ngợi con giỏi hay khả năng sẵn có của con&lt;/h2&gt; &lt;p&gt;Mình để thấy không chỉ cha mẹ Việt mà cả cha mẹ người nước ngoài nữa thường hay con &amp;ldquo;giỏi quá&amp;rdquo; &amp;ldquo;thông minh quá&amp;rdquo; &amp;ldquo;sao con làm nhanh vậy&amp;rdquo;. Mới hôm qua thôi, mình để ý có một bà mẹ đố đứa con hơn 2 tuổi của mình &amp;ldquo;con chó kêu như thế nào&amp;rdquo;, đứa bé trả lời &amp;ldquo;gâu,gâu&amp;rdquo;, thế là bà mẹ khen luôn &amp;ldquo;giỏi quá&amp;rdquo;. Ngày trước có dịp đi nhà thờ, mình để ý thấy những người ở trong Nam, cứ trẻ con làm gì tốt hay ngoan cũng quen miệng khen &amp;ldquo;giỏi quá&amp;rdquo; &amp;ldquo;ngoan quá&amp;rdquo;.&lt;/p&gt; &lt;p&gt;Những khen ngợi như thế này có ảnh hưởng tới sự phát triển tính cách, cách nhìn nhận vấn đề của trẻ như thế nào?&lt;/p&gt; &lt;h2 id=&#34;khen-ngợi-con-giỏi-thông-minh-là-không-tốt&#34;&gt;Khen ngợi con giỏi, thông minh là không tốt&lt;/h2&gt; &lt;p&gt;Khen ngợi con cái là một việc bố mẹ nên làm vì lời khen giúp trẻ được khích lệ và tự tin hơn. Nhưng không phải lời khen nào cũng có tác dụng như vậy. Nghiên cứu chỉ ra rằng, khen ngợi con cái là &amp;ldquo;giỏi và thông minh&amp;rdquo; một cách chung chung thậm chí sẽ có tác dụng ngược lại. Cách cha mẹ khen ngợi con cái cũng ảnh hưởng rất lớn đến khả năng đối mặt với thất bại, sẵn sàng chấp nhận thử thách và kiên trì trước những vấn đề khó.&lt;/p&gt; &lt;p&gt;Theo nghiên cứu của Carol Dwreck, Khi đối mặt với những vấn đề khó (hơn khả năng hiện tại của mình), những đứa trẻ quen được khen là thông minh có xu hướng rụt rè, không muốn giải quyết, do đó chúng tự hạn chế cơ hội học hỏi, nâng cao kiến thức, kĩ năng của mình. Ngược lại những đứa trẻ thường được khen ngợi bởi sự nỗ lực của mình thì vui vẻ, thậm chí rất yêu thích những vấn đề khó. Trước vấn đề khó, những đứa trẻ này thậm chí còn reo lên &amp;ldquo;Thật là thú vị, cháu thích những bài toán hóc búa kiểu này&amp;rdquo;. Và khi chúng thất bại, những đứa trẻ được khen là thông minh thường cảm thấy mất đi tự tin, trong khi những đứa trẻ được khen đã nỗ lực nói &amp;ldquo;có thể cháu đã chưa cố gắng hết sức mình&amp;rdquo;.&lt;/p&gt; &lt;p&gt;Dr. Dweck nói &amp;ldquo;Khen ngợi trí thông minh của trẻ không những không nâng cao sự tự tin của trẻ mà còn khuyến khích chúng quen với việc lo lắng sợ thất bại và sẽ lảng tránh không chấp nhận thử thách&amp;rdquo; &amp;ldquo;Tuy nhiên khi trẻ được dạy về gia trị của việc tập trung, tìm chiến lược và chăm chỉ hết sức mình khi đối mắt với những vấn đề khó trong học tập, chúng sẽ được khuyến khích giữ vững động lực, sự tự tin và thành thích của mình&amp;rdquo;&lt;/p&gt; &lt;p&gt;&amp;ldquo;Những đứa trẻ được khen ngợi là thông minh thường quan tâm đến việc xem những bạn khác làm như thế nào hơn là quan tâm đến việc tìm tòi chiến lược mới để giải quyết vấn đề&amp;rdquo;&lt;/p&gt; &lt;h2 id=&#34;khen-con-như-thế-nào&#34;&gt;Khen Con Như Thế Nào&lt;/h2&gt; &lt;h3 id=&#34;khen-ngợi-sự-cẩn-thận&#34;&gt;Khen ngợi sự cẩn thận&lt;/h3&gt; &lt;ul&gt; &lt;li&gt;&amp;ldquo;Con làm rất là tỉ mỉ, cẩn thận. Thảo nào mà mẹ thấy không vết mực nào rây ra ngoài cả&amp;rdquo;&lt;/li&gt; &lt;li&gt;&amp;ldquo;Sự tỉ mỉ cẩn thận của con đã đem lại kết quả tốt rồi, con thấy ko?&amp;rdquo;&lt;/li&gt; &lt;/ul&gt; &lt;h3 id=&#34;khen-ngợi-sự-bình-tĩnh&#34;&gt;Khen ngợi sự bình tĩnh&lt;/h3&gt; &lt;ul&gt; &lt;li&gt;Mẹ rất vui vì con đã giữ được bình tĩnh mặc dù khối gỗ xây dựng của con cứ đổ xuống.&lt;/li&gt; &lt;li&gt;Hôm nay con đã dạy mẹ một bài học về sự cần thiết của việc giữ bình tĩnh đó.&lt;/li&gt; &lt;li&gt;Bình tĩnh luôn luôn giúp con đạt được mục đích đúng ko?&lt;/li&gt; &lt;/ul&gt; &lt;h3 id=&#34;khen-ngợi-sự-nỗ-lực-kiên-trì-cố-gắng&#34;&gt;Khen ngợi sự nỗ lực, kiên trì, cố gắng&lt;/h3&gt; &lt;ul&gt; &lt;li&gt;&amp;ldquo;cuối cùng thì con cũng làm được rồi&amp;rdquo;&lt;/li&gt; &lt;li&gt;&amp;ldquo;Mẹ rất hạnh phúc khi con biết nỗ lực như vậy&amp;rdquo;&lt;/li&gt; &lt;li&gt;&amp;ldquo;Con đã rất cố gắng kiên trì và con đã thành công rồi&amp;rdquo;&lt;/li&gt; &lt;/ul&gt; &lt;h3 id=&#34;khen-ngợi-sự-chăm-chỉ&#34;&gt;Khen ngợi sự chăm chỉ&lt;/h3&gt; &lt;ul&gt; &lt;li&gt;&amp;ldquo;Con đã rất chăm chỉ ôn bài. Mẹ nghĩ con hoàn toàn xứng đáng với điểm 10 này&amp;rdquo;&lt;/li&gt; &lt;li&gt;&amp;ldquo;UI, hôm nay con mẹ chăm chỉ, hang say quá. Con thực sự làm mẹ tự hào về con.&lt;/li&gt; &lt;/ul&gt; &lt;h3 id=&#34;khen-ngợi-sự-tập-trung&#34;&gt;Khen ngợi sự tập trung&lt;/h3&gt; &lt;ul&gt; &lt;li&gt;&amp;ldquo;Mẹ để ý thấy con rất say sưa, tập trung xếp hình&amp;rdquo;. Có lẽ vì thế mà hôm nay con xếp tiến bộ hơn hẳn&amp;rdquo;&lt;/li&gt; &lt;li&gt;&amp;ldquo;Mẹ để ý thấy con đã rất tập trung đọc sách. Chắc con đã thấy rất nhiều điều thú vị trong câu chuyện đó&amp;rdquo;&lt;/li&gt; &lt;/ul&gt; &lt;p&gt;Mỗi lần trẻ thành công trong bất cứ việc gì, đặc biệt những việc đòi hỏi sự cố gắng, nỗ lực, cha mẹ hãy áp dụng những câu khen ngợi này. Sau một thời gian, hãy để ý sự thay đổi trong cách ứng xử của con trước thất bại hay những vấn đề khó và chờ đợi cảm giác hạnh phúc khi nghe con hào hứng khoe thành quả của mình và nói &amp;ldquo;Mẹ ơi, con làm đi làm lại, làm mãi cũng được, con đã rất kiên trì mẹ ạ&amp;rdquo;.&lt;/p&gt; &lt;blockquote&gt; &lt;p&gt;Mỗi lời nói của cha mẹ đều có ảnh hưởng đến sự phát triển tính cách của con, tương lai của con&lt;/p&gt; &lt;/blockquote&gt; &lt;p&gt;(Bài viết sưu tầm đâu đó trên mạng)&lt;/p&gt;</description></item><item><title>Transitional words (st)</title><link>https://htr3n.github.io/2013/08/transitional-words-st/<pubdate>Tue, 20 Aug 2013 00:00:00 +0000</pubdate><guid>9bd01877c62dbdc67bb70c5ea65a260a</guid><description>&lt;p&gt;Một số transitional words rất hữu dụng trong việc nối hoặc liên kết câu hoặc đoạn văn trong tiếng Anh. Để tránh sự lặp lại gây nhàm chán, các transitional words tương đương nên được dùng xen kẽ.&lt;/p&gt; &lt;h3 id=&#34;addition&#34;&gt;Addition&lt;/h3&gt; &lt;p&gt;also, besides, furthermore, in addition, moreover, again&lt;/p&gt; &lt;h3 id=&#34;consequence&#34;&gt;Consequence&lt;/h3&gt; &lt;p&gt;accordingly, as a result, consequently, hence, otherwise, so then, therefore, thus, there upon&lt;/p&gt; &lt;h3 id=&#34;summarizing&#34;&gt;Summarizing&lt;/h3&gt; &lt;p&gt;after all, all in all, all things considered, briefly, by and large, in any case, in any event, in brief, in conclusion, on the whole, in short, in summary, in the final analysis, in the long run, on balance, to sum up, to summarize, finally&lt;/p&gt; &lt;h3 id=&#34;generalizing&#34;&gt;Generalizing&lt;/h3&gt; &lt;p&gt;as a rule, as usual, for the most part, generally, generally speaking, ordinarily, usually&lt;/p&gt; &lt;h3 id=&#34;restatement&#34;&gt;Restatement&lt;/h3&gt; &lt;p&gt;in essence, in other words, namely, that is, that is to say, in short, in brief, to put it differently&lt;/p&gt; &lt;h3 id=&#34;contrast-and-comparison&#34;&gt;Contrast and Comparison&lt;/h3&gt; &lt;p&gt;contrast, by the same token, conversely, instead, likewise, on one hand, on the other hand, on the contrary, rather, similarly, yet, but, however, still, nevertheless, in contrast&lt;/p&gt; &lt;h3 id=&#34;sequence&#34;&gt;Sequence&lt;/h3&gt; &lt;p&gt;at first, first of all, to begin with, in the first place, at the same time, for now, for the time being, the next step, in time, in turn, later on, meanwhile, next, then, soon, the meantime, later, while, earlier, simultaneously, afterward, in conclusion&lt;/p&gt; &lt;h3 id=&#34;diversion&#34;&gt;Diversion&lt;/h3&gt; &lt;p&gt;by the way, incidentally&lt;/p&gt; &lt;h3 id=&#34;illustration&#34;&gt;Illustration&lt;/h3&gt; &lt;p&gt;for example, for instance, for one thing&lt;/p&gt; &lt;h3 id=&#34;similarity&#34;&gt;Similarity&lt;/h3&gt; &lt;p&gt;likewise, similar, moreover&lt;/p&gt; &lt;h3 id=&#34;direction&#34;&gt;Direction&lt;/h3&gt; &lt;p&gt;here, there, over there, beyond, nearly, opposite, under, above, to the left, to the right, in the distance&lt;/p&gt;</description></item><item><title>Sắp xếp trích dẫn (citations) trong (La)TeX</title><link>https://htr3n.github.io/2009/01/sap-xep-trich-dan-latex/<pubdate>Thu, 15 Jan 2009 00:00:00 +0000</pubdate><guid>481c3a6c849b3c62c04fc32d65fccc32</guid><description>&lt;p&gt;LaTeX cho phép tạo các trích dẫn (citations) để tham chiếu đến các tài liệu tham khảo tương ứng. Các trích dẫn, tùy theo định dạng (format/style) của tài liệu, có thể dạng số như &lt;code&gt;[1, 2]&lt;/code&gt; hoặc dạng chữ như &lt;code&gt;[Lamport94]&lt;/code&gt;.&lt;/p&gt; &lt;p&gt;Một ví dụ đơn giản như sau&lt;/p&gt; &lt;pre&gt;&lt;code class=&#34;language-tex&#34;&gt;\LaTeX{} \cite{latex} is a document preparation system for the \TeX{} \cite{tex} typesetting program. &lt;/code&gt;&lt;/pre&gt; &lt;p&gt;sẽ tạo ra kết quả&lt;/p&gt; &lt;pre&gt;&lt;code class=&#34;language-tex&#34;&gt;LaTeX [1] is a document preparation system for the TeX [2] typesetting program. &lt;/code&gt;&lt;/pre&gt; &lt;p&gt;Trong ví dụ trên, &lt;code&gt;[1]&lt;/code&gt; và &lt;code&gt;[2]&lt;/code&gt; là các trích dẫn. Tài liệu tham khảo tương ứng sẽ được để trong phần &lt;code&gt;\bibliography{}&lt;/code&gt;. Nhiều trích dẫn liên kế có thể được gom lại và liệt kê chung trong một cặp dấu ngoặc vuông như sau &lt;code&gt;[6, 4, 5, 22, 27, 29]&lt;/code&gt;.&lt;/p&gt; &lt;p&gt;Mặc định trong trường hợp nhiều trích dẫn, LaTeX không xếp thứ tự và không thu gọn cho dễ nhìn. Nếu muốn thu gọn, ví dụ như &lt;code&gt;[4–6, 22, 27, 29]&lt;/code&gt; thì có thể dùng &lt;a href=&#34;http://www.ctan.org/tex-archive/help/Catalogue/entries/natbib.html&#34;&gt;natbib&lt;/a&gt; hoặc &lt;a href=&#34;http://www.ctan.org/tex-archive/macros/latex/contrib/cite&#34;&gt;cite&lt;/a&gt;.&lt;/p&gt; &lt;p&gt;Hãy đặt những dòng sau ở phần đầu file &lt;code&gt;.tex&lt;/code&gt;, trước &lt;code&gt;\begin{document}&lt;/code&gt;.&lt;/p&gt; &lt;pre&gt;&lt;code class=&#34;language-tex&#34;&gt;\usepackage{cite} &lt;/code&gt;&lt;/pre&gt; &lt;p&gt;hoặc&lt;/p&gt; &lt;pre&gt;&lt;code class=&#34;language-tex&#34;&gt;\usepackage[sort&amp;amp;compress]{natbib} &lt;/code&gt;&lt;/pre&gt; &lt;p&gt;Sau đó, chạy latex/pdflatex và bibtex như bình thường. Dạng trích dẫn trong bài sẽ được sắp xếp và nhóm lại hợp lý và dễ nhìn hơn. Gói &lt;code&gt;natbib&lt;/code&gt; có một đặc điểm là tương thích tốt với gói &lt;code&gt;hyperref&lt;/code&gt; (dùng để tạo các liên kết trong tài liệu pdf). Do đó, nếu cần dùng &lt;a href=&#34;http://tug.ctan.org/pkg/hyperref&#34;&gt;hyperref&lt;/a&gt; thì bạn nên sử dụng &lt;a href=&#34;http://www.ctan.org/tex-archive/help/Catalogue/entries/natbib.html&#34;&gt;natbib&lt;/a&gt;.&lt;/p&gt;</description></item><item><title>Tính chất hai mặt của một vấn đề</title><link>https://htr3n.github.io/2009/01/hai-mat-cua-mot-van-de/<pubdate>Thu, 15 Jan 2009 00:00:00 +0000</pubdate><guid>340930720d54b391b2e2e104a9ee70a2</guid><description>&lt;p&gt;Người ta thường dùng câu nói &lt;a href=&#34;http://proverbhunter.com/proverb/every-medal-has-two-sides&#34;&gt;&amp;ldquo;&lt;em&gt;mọi cái huân chương luôn có hai mặt&lt;/em&gt;&amp;ldquo;&lt;/a&gt; để ám chỉ rằng sự việc nào cũng có những mặt đối lập nhau. Do đó, đứng trước một sự kiện (fact) hoặc một luận điểm (argument), việc lật tới lật lui hầu phát hiện các ngóc ngách (các mặt đối lập) nhiều khi mang đến những ý rất thú vị.&lt;/p&gt; &lt;p&gt;Hôm trước, nhân đọc mấy bài báo về cái bắt tay giữa vn và Microsoft, cùng với những nhận định của mấy nhân vật chóp bu Microsoft như S.Balmer, B.Gates về xu hướng mã nguồn mở, về sao chép bất hợp pháp,v.v&amp;hellip; mình chợt có ý vui vui, phân tích xem các mặt trái của những điều mà Microsoft nghĩ/cho rằng xâm hại đến lợi ích của họ.&lt;/p&gt; &lt;h3 id=&#34;windows-được-bị-sao-chép-lậu-bất-hợp-pháp-hầu-như-khắp-thế-giới&#34;&gt;Windows &amp;ldquo;được/bị&amp;rdquo; sao chép lậu (bất hợp pháp) hầu như khắp thế giới&lt;/h3&gt; &lt;p&gt;Đứng về cái nhìn kinh doanh thì ai cũng dễ dàng đồng tình với Microsoft là họ bị tổn thất nhiều $$$ do sao chép trao đổi bất hợp pháp. Có điều rằng, những chỗ nào xiết được thì Microsoft đâu có từ, còn những chỗ vẫn tồn tại việc sao chép bất hợp pháp thì có nghĩa là Microsoft không thể nào xiết, không thể nào vắt cho ra $$$ được (ví dụ như ở vn, lâu lâu khi có phái đoàn qua thì các bác quản lý thị trường lại chạy đến Bùi thị Xuân, Tôn thất Tùng mà thu đĩa, thu máy, phạt hành chính.. cho xôm tụ, chứ có đồng nào cho Microsoft đâu). Nhưng, về mặt marketing thì Microsoft lời to, thậm chí không tốn một cắc bạc mà lại được nhiệt tình truyền bá rộng rãi. Như vậy, ở một nơi mà anh không tài nào dùng luật để bắt buộc người ta sử dụng phần mềm bản quyền, nhưng bù lại thì người ta quảng cáo miễn phí, đỡ tốn bao nhiêu là chi phí PR, marketing, thế mà anh còn kêu ca nỗi giề&amp;hellip;(mà thực ra thì Microsoft cũng chẳng kêu ca gì vì biết có kêu cũng không ăn thua, họ cũng được lợi phần nào từ việc sao chép lậu mà, thôi thì &amp;hellip;)&lt;/p&gt; &lt;h3 id=&#34;windows-có-nhiều-vấn-đề-nhiều-sự-cố-nhiều-virus-worm&#34;&gt;Windows có nhiều vấn đề, nhiều sự cố, nhiều virus/worm&lt;/h3&gt; &lt;p&gt;Đúng là về một mặt nào đó, nó làm tổn hại hình ảnh của Windows và Microsoft. Báo chí offline, online &amp;hellip; nhan nhản tin tức về vấn đề, virus, worm,&amp;hellip; trên WINDOWS. Search engine cũng thường cho kết quả tìm kiếm hàng đầu khi cần tìm các thông tin như vậy và luôn hiện ra ở những trang đầu là WINDOWS. ..Rồi những câu chuyện tếu đâm thọc những vấn đề của WINDOWS &amp;hellip;. WINDOWS &amp;hellip;. WINDOWS &amp;hellip;Nhưng mặt trái của những sự kiện trên, vô hình chung lại giúp cho công tác tiếp thị hình ảnh WINDOWS thêm phần đắc lợi. Ngày này qua ngày khác, ai ai cũng nghe WINDOWS, nói về WINDOWS riết rồi cứ tưởng là trên thế giới này hình như chỉ có WINDOWS !?! Mục tiêu tối hậu của việc tiếp thị là cố gắng nhồi nhét vào đầu, vào suy nghĩ của mọi người những hình ảnh, âm thanh, logo của sản phẩm&amp;hellip;chứ còn gì nữa !!! (nói thế thôi, chứ Windows mà càng ngày càng nhiều sự cố thì người ta bỏ chạy hết á)&lt;/p&gt; &lt;h3 id=&#34;windows-bị-linux-cạnh-tranh-khốc-liệt-làm-cho-thu-hẹp-thị-phần&#34;&gt;Windows bị Linux cạnh tranh khốc liệt làm cho thu hẹp thị phần&lt;/h3&gt; &lt;p&gt;Đúng là thị phần Windows có giảm đi rõ rệt và thị phần Linux tăng. Đúng là cộng đồng Linux và mã nguồn mở đã trở thành đối trọng đáng gờm của Windows. Nhưng mặt trái của việc này là gì? Sự cạnh tranh mặc dù làm giảm thị phần của Windows, nhưng lại có tác dụng bất ngờ là thúc đẩy, tạo sức ép lớn hơn cho đội ngũ phát triển của Microsoft. Trong một khoảng thời gian dài thống trị thị trường desktop OS, hầu như các sản phẩm của Microsoft càng ngày càng đi xuống, càng kém sáng tạo đi. Một trong các nguyên nhân tiềm ẩn, bất thành văn có lẽ là sự chủ quan, giống như ngủ quên trên chiến thắng (vì họ nghĩ là không có &amp;ldquo;đối thủ xứng tầm&amp;rdquo;). Y như kiểu mấy đội bóng, Barca, MU, Brazil.. sau khi vô địch là cầu thủ đá lơ mơ, đi bộ, rồi có khi thua cả mấy đội hạng gà nữa. Đến khi có đối thủ xuất hiện, có sự đe dọa thì họ mới &amp;ldquo;bừng tỉnh&amp;rdquo;. Chứ nếu Linux không cạnh tranh khốc liệt thì không biết mấy OS về sau của Microsoft sẽ ra sao nữa. Cạnh tranh sẽ là đòn bẩy cho sự phát triển.&lt;/p&gt;</description></item><item><title>Người lớn hãy tử tế hơn với tương lai đất nước</title><link>https://htr3n.github.io/2008/12/nguoi-lon-hay-tu-te-hon/<pubdate>Sun, 28 Dec 2008 00:00:00 +0000</pubdate><guid>efb0c6ecc984ccf2256605d963c3f273</guid><description>&lt;p&gt;Thỉnh thoảng lên báo để dõi theo tình hình trong nước, cũng có nhiều tin vui về sự đổi mới, phát triển, về sự năng động của những bạn cùng thế hệ hoặc trẻ hơn, cũng có nhiều hạt sạn làm ê răng. Ừ, thì cũng tự nhủ rằng trên đời không có một cái gì thực sự hoàn hảo và mở lòng ra đón nhận với một niềm tin rằng những gì tiến bộ, tốt đẹp rồi sẽ ngày một nhiều hơn, nhiều hơn, sẽ lấn át và triệt tiêu những gì chưa hay. Cuối tuần đọc được tin &lt;a href=&#34;http://www.tuoitre.com.vn/Tianyon/Index.aspx?ArticleID=229540&amp;amp;ChannelID=3&#34;&gt;này từ Tuổi trẻ&lt;/a&gt; mà không vui quá chừng.&lt;/p&gt; &lt;p&gt;Thử điểm lại một vài vụ tương tự gần nhất: &lt;a href=&#34;http://www.tuoitre.com.vn/Tianyon/Index.aspx?ArticleID=197574&amp;amp;ChannelID=3&#34;&gt;vụ bé Trâm ở Đồng Tháp&lt;/a&gt;, vụ &lt;a href=&#34;http://www.tuoitre.com.vn/Tianyon/Index.aspx?ArticleID=197104&amp;amp;ChannelID=13&#34;&gt;này&lt;/a&gt;, vụ &lt;a href=&#34;http://www.tuoitre.com.vn/Tianyon/Index.aspx?ArticleID=229076&amp;amp;ChannelID=89&#34;&gt;em Hiền ở buôn Đôn&lt;/a&gt;. Rất nhiều ý kiến bức xúc, rất nhiều sự &amp;ldquo;bức xúc&amp;rdquo; của quan chức các ngành, bộ, thậm chí cả những đau lòng và băn khoăn của những người có chức có quyền (không thể loại trừ kiểu đau lòng &amp;ldquo;chính trị&amp;rdquo;). Nhưng những sự việc như thế này không có dấu hiệu được cải thiện mà có xu hướng ngày càng tệ đi. Những nguyên nhân như cách xử lý đối tượng vi phạm (ví dụ như &amp;ldquo;tạm đình chỉ các dân quân&amp;rdquo; ở vụ đánh học sinh lớp 9 ở Saigon)&amp;hellip; cũng chỉ là cái ngọn, cũng giống như kiểu giảm tai nạn giao thông bằng chiến dịch mũ bảo hiểm hoặc là bắt buộc có kính chiếu hậu.&lt;/p&gt; &lt;p&gt;Cái cách đối xử không hay (hoặc nói nặng là kiểu lính tẩy, kiểu quan nha) như thế này với thế hệ tương lai của đất nước vẫn còn, thì &amp;ldquo;người lớn&amp;rdquo; cũng nên tự xấu hổ và thôi đừng phiền trách vì sao thế hệ trẻ ngày nay thế này thế khác. Người lớn đối xử hiền hòa, độ lượng và tử tế với thế hệ trẻ thì có lẽ thế hệ trẻ sẽ tử tế hơn, đàng hoàng hơn và sẽ tạo ra một thế hệ con cái của họ cũng tử tế như thế.&lt;/p&gt; &lt;p&gt;Người lớn vượt đèn đỏ &amp;ldquo;làm gương&amp;rdquo; thì khó mà bảo con cái họ chờ đèn xanh, người lớn đụng chuyện là hùng hùng hổ hổ đòi ăn tươi nuốt sống người ta thì khó mà dạy con cái chịu lép khi gặp chuyện tương tự? người lớn thản nhiên ăn hối lộ, nhận phong bì, vơ vét của công thì làm sao dạy con cái thanh liêm, liêm khiết (tệ hơn nữa, có khi còn dạy con cái là nếu mình không ăn người khác ăn, đại loại thế)? người lớn vẫn muốn làm ăn một cách đảo điên, điêu ngoa, gian dối, hàng giả, hàng nhái thì làm sao dạy con cái thiện tâm, trung thực? người lớn vì lợi riêng mà bất chấp, đang tay đầu độc nước, đầu độc đất, đầu độc không khí,&amp;hellip; thì làm sao dạy con cái bảo vệ rừng, bảo vệ đất, bảo vệ màu xanh? Người lớn đi ra nước ngoài ăn cắp ở siêu thị, đi tàu trốn vé, sống bất hợp pháp, làm ăn phi pháp, rước lấy quốc nhục,&amp;hellip; thì thử hỏi làm sao dạy con cái giữ danh dự, thể diện quốc gia, quốc thể, quốc thống?&lt;/p&gt; &lt;p&gt;Tương lai đất nước là của những thế hệ trẻ tiếp nối cha anh. Đầu tư cho thế hệ trẻ là đầu tư cho thịnh vượng và phát triển lâu dài. Người lớn, hãy đừng nói ngoài miệng là yêu nước, là thương nòi, là mong muốn đưa nước ta ngang hàng với năm châu bốn bể, mà hành động thì lại đang góp phần nào làm suy hao, hư hỏng thế hệ trẻ. Hãy đối xử tử tế hơn với thế hệ trẻ thì tương lai đất nước mới mong được sáng sủa.&lt;/p&gt;</description></item><item><title>Du học sinh - chuyện nên vui hay buồn</title><link>https://htr3n.github.io/2008/12/du-hoc-sinh/<pubdate>Sat, 27 Dec 2008 00:00:00 +0000</pubdate><guid>3e0cce6d6dc32a792070bacc035d62e8</guid><description>&lt;p&gt;Hôm nay qua mailling list nhận được link về bài báo &lt;a href=&#34;http://vietnamnet.vn/giaoduc/duhoc/2006/12/642385/&#34;&gt;này&lt;/a&gt;, đề ngày 09/12/06, nhưng tôi nhớ là có một bài báo tương tự trên báo Thanh niên mùa Noel năm ngoái. Bài báo trên báo Thanh niên đã biến mất (có lẽ vì vấp phải sự phản đối từ các du học sinh và cả đọc giả trong nước), giờ lại xuất hiện ở Vietnamnet, với chú thích là &amp;ldquo;Theo Thông tin thương mại&amp;rdquo;, tức là từ một nguồn khác nữa. Xin trích lại những đoạn gây nóng (mặt) nhất:&lt;/p&gt; &lt;blockquote&gt; &lt;p&gt;chuyên gia du lịch bụi các xứ Châu Âu là Trần Long - du học sinh Pháp áp dụng triệt để những &amp;ldquo;mánh” mà sinh viên nước nào cùng dùng để giảm thiểu chi phí cho những chuyến đi: “&lt;em&gt;Nếu như đi nhiều, bạn sẽ phát hiện thấy là có những chuyến tàu họ không hề kiểm tra vé. Ví dụ tuyến đi từ Monaco về Nice (Pháp) chẳng hạn, nhưng cái này ai liều lắm mới áp dụng. Hoặc ở Đức, có loại vé cuối tuần WE giá 28 euro cho 5 người. Mình cứ lên tàu, đi quanh quẩn, thế nào chẳng có một cụ ông cụ bà đi một mình, hoặc một nhóm khuyết 5 nào đó cho mình đi ké. Nếu họ xuống ga trước mình, mình xin lại vé và đi tiếp&lt;/em&gt;&amp;hellip;&amp;rdquo;&lt;/p&gt; &lt;/blockquote&gt; &lt;p&gt;Tôi không hiểu tác giả bài báo nghĩ thế nào mà cổ xúy và phổ biến những tư tưởng nguy hiểm kiểu &amp;ldquo;&lt;em&gt;đi tàu chui&lt;/em&gt;&amp;rdquo; trên mặt báo (báo Thanh niên và vnN). Và cũng không hiểu, các nhân vật chính của bài báo nghĩ gì mà lại có thể phát biểu và hành động như thế. Tương lai của đất nước sẽ ra sao nếu (lỡ) đặt vào tay những người như họ? Dường như vẫn còn ăn sâu đâu đó cái tư duy văn minh lúa nước thiển cận, chỉ có biết đến bản thân và chút lợi ích nhỏ. Chưa cần nói to tát đến việc làm xấu đi hình ảnh người Việt trong mắt thế giới bên ngoài, mà hãy nói đến lòng tự trọng của bản thân anh ta. Suy nghĩ thế, hành động thế, để rồi phàn nàn tại sao ở nước sở tại, người ta xét visa, giấy tờ ghê quá (vì không tin tưởng); tại sao người Việt (và China nữa) đi CH Czech chơi thì &amp;ldquo;dù có một ngày cũng phải xin visa&amp;rdquo; trong khi công dân Sing, Thái, Nhật thì thoải mái. Nếu lấy lý do &amp;ldquo;vì nghèo&amp;rdquo; là xảo biện. Đồng ý là phải tiết kiệm, nhưng để tiết kiệm vài chục Euro mà vứt cả lòng tự trọng và danh dự vào sọt rác thì có nên không?&lt;/p&gt; &lt;p&gt;Nhân chuyện này, tôi nhớ lại dịp tâm sự với một bác lái xe. Lúc ấy bác bảo tôi nhìn về phía lề đường đang được tu sửa dở dang có mấy đống cát đá. Một người dân kéo chiếc xe kút kít xúc đầy cát đá rồi thản nhiên kéo về nhà mình. Bác nói với vẻ không vui: Thế thì bao giờ vn mình giàu lên được !?&lt;/p&gt; &lt;p&gt;P.S.: Có lẽ đọc bài này thì sẽ có bạn bảo tôi rằng sao yếm thế và bi quan, chỉ toàn nhìn thấy cái không tốt. Nhận ra cái tốt là một điều hay (nhưng phải chú ý đừng có ăn bánh vẽ), nhưng buồn và suy ngẫm về những điều chưa tốt cũng không phải dở. Vì tôi nhận ra một điều rằng, khi buồn người ta thấm thía và ngộ ra nhiều điều hơn là khi vui. Buồn không đồng nghĩa với bi quan và chắc hẳn tốt hơn nhiều với lạc quan tếu và AQ.&lt;/p&gt;</description></item><item><title>Qui luật tiến hóa của tự nhiên</title><link>https://htr3n.github.io/2008/12/quy-luat-tien-hoa/<pubdate>Sat, 27 Dec 2008 00:00:00 +0000</pubdate><guid>cec6a413b4b2aed64a18e37e00603c4c</guid><description>&lt;p&gt;Tôi trở thành nhà sinh vật học từ lúc nào nhỉ? Không đâu. Tự nhiên tôi thấy nhớ Darwin và qui luật tiến hóa của tự nhiên mà ông ta phát biểu. Tất cả là vì như thế này: Thời gian rồi chúi múi vào công việc nên lơ đễnh zụ cập nhật tin tức vn (chủ yếu cập nhật bằng &amp;ldquo;kênh&amp;rdquo; đặc biệt ;). Hôm nay lò dò lên Tuổi trẻ để refresh thì bắt gặp ngay cái tin nóng hổi &amp;ldquo;&lt;a href=&#34;http://www.tuoitre.com.vn/Tianyon/Index.aspx?ArticleID=168243&amp;amp;ChannelID=6&#34;&gt;Quốc hội thảo luận dự án Luật cư trú: Sổ hộ khẩu hay thẻ cư trú?&lt;/a&gt;&amp;rdquo;. Hăm hở đọc (một phần vì nó cũng liên quan đến cuộc sống &amp;hellip; sau này của mình, một phần vì quan tâm đến các ông bà nghị sĩ đang đại diện cho mình ở cơ quan &amp;ldquo;quyền lực nhất nước&amp;rdquo;). Thông tin thu lượm được đã làm tắt đi một phần nào cái phấn khích ban đầu ấy. Đến lúc này, lúc mà kinh tế vn, theo cách nói của các nhà lạc quan trong nước, là đang chuyển mình mạnh mẽ; lúc mà chỉ còn bao lâu nữa vn sẽ là thành viên của WTO mà thách thức nhiều hơn cơ hội; mà các ông bà nghị sĩ còn ngồi bàn bạc với nhau là giữ sổ hộ khẩu hay chuyển sang hình thức thẻ cư trú (hiện đại hơn?). Xem ra, làn sóng trí thức trẻ và hiện đại mới chỉ là khẩu hiệu đầu môi, hoặc chỉ là mới mấp mé ở cửa ra vào Quốc hội chứ chưa thể hiện được gì. Để bàn bạc kĩ hơn thì chắc phải lật lại xem sổ hộ khẩu là cái gì và tại sao cần nó?&lt;/p&gt; &lt;p&gt;Sổ hộ khẩu (SHK) có xuất xứ từ đâu thì cũng không nhiều người am tường (nhất là thế hệ trẻ như mình :D), nhưng nó có công dụng gì thì hầu như ai cũng biết qua? SHK là một trong những vật chứng pháp lý ghi nhận sự &amp;ldquo;tồn tại&amp;rdquo; của một hoặc nhiều công dân tại một địa phương nào đó (ngoài SHK còn có những loại khác như tạm trú ngắn hạn, dài hạn, etc.). Sự tồn tại được để trong dấu nháy kép bởi vì ý nghĩa của SHK đối với sự tồn tại, hiện diện của một công dân nào đó vẫn không rõ ràng rành mạch lắm. Nhưng công dụng của nó thì cực kỳ quan trọng: một công dân không thể làm chứng minh nhân dân nếu không có hộ khẩu, một đứa trẻ không thể đến trường tại nơi nó đang cư trú (hợp pháp) với bố mẹ nếu không có hộ khẩu (hoặc tạm trú dài hạn xem như ngang bằng với hộ khẩu), trước đây có thời gian, công dân không thể đứng tên nhà nếu không có hộ khẩu, &amp;hellip; Còn rất rất nhiều công việc quan trọng mà nếu không có hộ khẩu thì chắc chắn không thể nào xúc tiến được (nếu không có những-người-mà-ai-cũng-biết-là-ai !!!).&lt;/p&gt; &lt;p&gt;Chính quyền địa phương quản lý người dân theo những hộ gia đình. Mỗi hộ gia đình sẽ được ghi nhận bằng một SHK riêng, do một người làm chủ hộ đứng tên chịu trách nhiệm. Khái niệm hộ gia đình khá rộng, đó có thể là cặp vợ chồng son, hoặc một gia đình hai thế hệ, hoặc có thể là cả một gia đình tứ đại đồng đường. Khi có một thành viên mới chào đời, chủ hộ sẽ sẽ tiến hành làm thủ tục khai báo và địa phương sẽ ghi nhận thành viên mới bằng một mục mới trong SHK. Khi một thành viên chuyển đi nơi khác, ra nước ngoài, hoặc mất đi, địa phương sẽ ghi nhận bằng cách bỏ đi mục tương ứng trong SHK. Khi có thành viên lập gia đình không sống chung với bố mẹ thì phải đăng ký thành một hộ gia đình mới. Như vậy, SHK là phương tiện để quản lý công dân của chính quyền. Nhưng nếu như mọi thứ tuần tự nhi tiến như thế thì chắc chắn các ông bà nghị nhà ta không bỏ thời gian quí báu ra bàn bạc nhiều vậy. Sự thật là có quá nhiều vấn đề phát sinh từ cái SHK. Với vốn thông tin hạn hẹp, tôi chỉ xin đơn cử một vài ví dụ. Đó là cái vòng lẩn quẩn &amp;ldquo;hộ khẩu-nhà&amp;rdquo; ở Saigon. Giả sử anh A là một anh giáo quèn từ tỉnh xa vào Saigon lập nghiệp. Anh có vợ và con. Con của anh sẽ phải đi học một trường phổ thông nhưng thủ tục nhập trường đòi hỏi hộ khẩu thành phố! Và để có hộ khẩu thành phố thì anh phải chứng minh điều kiện tiên quyết là công việc làm ổn định và một cái nhà do anh là sở hữu chủ (những điều kiện &amp;ldquo;hậu quyết&amp;rdquo; thì ngoài tầm bài này nên không bàn kĩ). Sau thời gian dành dụm, anh ta mua một ngôi nhà và xin đứng tên sở hữu chủ. Oái ăm một cái, hộ khẩu gốc của anh A vẫn ở tỉnh, thế nên ở Saigon người ta từ chối quyền đứng tên sở hữu nhà của anh. Tình thế lẩn quẩn và bế tắc này xuất hiện rất phổ biến! Ví dụ nhỏ thứ hai là, giả sử anh A được chấp nhận hộ khẩu TP bằng cách nào đó (mà-có-thể-ai-cũng-biết) thì phải làm lại thẻ công dân với mã số mới, kéo theo một loạt các điều chỉnh thông tin lằng nhằng vì những thứ giấy tờ dựa trên thẻ công dân.&lt;/p&gt; &lt;p&gt;Bây giờ, nếu bàn về việc giải quyết những vấn đề phát sinh (mà các ông bà nghị gọi là qui định &amp;ldquo;ăn theo&amp;rdquo;, khoảng 420 văn bản theo thống kê của Bộ CA!) thì sẽ lại giống các ông bà ấy, mà theo tôi nghĩ, là đang tìm cách tỉa các cành lùm xùm của một cái cây ăn hại. Sao các ông bà nghị không đặt vấn đề thẳng ra giống như tiêu đề bài báo: không dùng SHK mà nghĩ đến hình thức khác thuận tiện và khoa học hơn, thì sẽ chặt bỏ một cây ăn hại và trồng một cây ăn quả? Tôi chưa hiểu rõ định nghĩa thẻ cư trú trong ý nghĩ của các ông bà nghị, nên không dám lạm bàn về nó. Nhưng tôi thiết nghĩ là không cần thêm một thứ thẻ gì hết ngoài thẻ công dân (được gọi là CMND), còn việc dùng thẻ điện tử hay giấy, polyme thì tùy điều kiện mà triển khai. Thử hỏi một công dân đang cần tiến hành một thủ tục hành chính xem người đó phải chuẩn bị bao nhiêu thứ giấy tờ: CMND, SHK,&amp;hellip;? Và thử đối chiếu xem thông tin trên CMND và SHK thì có thừa thiếu cái gì cần bổ sung nhau không? Vậy, nguyên nhân sâu xa của việc duy trì hệ thống quản lý nhân khẩu SHK là gì? Tại sao hệ thống với nhiều bất cập đó tồn tại quá lâu như vậy? Không có SHK thì sẽ có lợi gì, và lực lượng nào của xã hội bị ảnh hưởng và ảnh hưởng như thế nào? Và cuối cùng là nên cải tiến hệ thống đó theo hướng nào? Tôi xin nêu ra những ý kiến mang màu sắc chủ quan (và có phần phiến diện vì bản thân tôi là công dân bình thường nên góc nhìn từ phía người sử dụng của hệ thống)&lt;/p&gt; &lt;p&gt;Thẻ công dân có thể thay thế hoàn toàn SHK nếu bổ sung thêm thông tin và cải biến hình thức đăng kí cư trú. Thẻ công dân đã có thông tin cơ bản về một cá nhân nào đó. Việc sử dụng SHK chỉ có tác dụng là quản lý các hộ gia đình (và thống kê dân số?) và thực sự không cần thiết. Cải biến hình thức đăng kí cư trú bằng cách cho phép một cá nhân tạm trú bất kì nơi đâu trong nước, nhưng họ phải đăng kí với cơ quan quản lý nơi họ cư trú trong vòng vài ngày sau khi đến hoặc đi. Điều kiện để đăng kí cư trú là có nhà ở (thuê hoặc mua) và có sự chấp thuận của chủ nhà thể hiện trên giấy đăng kí cư trú bằng chữ kí. Nếu là hộ gia đình thì con cái có thể đăng kí cư trú với sự bảo lãnh của bố hoặc mẹ. Hệ thống này loại bỏ sự tồn tại với nhiều bất cập của SHK và mang lại sự tự do trong cư trú và đi lại cho công dân (theo Hiến pháp rõ ràng). Có thể có vấn đề đặt ra là: nếu người ta không đăng kí thì sao? Thì đó chính là cư trú bất hợp pháp. Người cư trú bất hợp pháp sẽ không được hưởng những quyền lợi mà người cư trú hợp pháp có, như sự bảo vệ của pháp luật khi cần thiết, quyền được đi làm (liên quan tới giấy phép đi làm và giấy xác nhận cư trú). Như vậy, nó khuyến khích sự tự giác của cá nhân và cho họ có quyền lựa chọn của riêng họ. Đa số các hệ thống ở các nước tiên tiến đều áp dụng hình thức này, không hiểu vì lí do gì ở vn vẫn chưa có (hoặc chưa thể hiện là bắt đầu nghĩ đến nó và triển khai). Việc triển khai ban đầu có thể tốn kém nhiều tài chính và nhân lực, nhưng nó thực sự là một trong các giải pháp kết hợp để cải cách bộ máy hành chính quá ì ạch của vn để vận động kịp với các nước khác. Cái lợi của hệ thống &amp;ldquo;thẻ công dân + đăng kí cư trú&amp;rdquo; là giảm bớt sự phức tạp và rắc rối trong thủ tục hành chính, giảm bớt thời gian và tiền bạc mà người dân đã phải tiêu tốn bởi sự phức tạp đó. Không nên để quyền lợi và sự tự chủ của một công dân bị hoạnh họe và gây phiền hà bởi các công dân (nhân-viên-hành-chính) khác. Ngoài ra, nó mang lại một hệ thống thông tin quản lý thông suốt trong cả nước chứ không theo kiểu vùng miền như hiện tại. Hệ thống với nhiều tiện lợi như vậy mà chưa triển khai thì chỉ có thể biện minh bằng lí do hết sức tiêu cực là hệ thống này sẽ mang đến hậu quả khó khăn khi loại ra những nhân công thừa trong bộ máy hành chính (mà những người đó thường lại có quan hệ dây mơ rễ mà và không-minh-bạch trong suốt hệ thống), hoặc nó sẽ mang lại khó khăn không-thể-nói-ra cho các lực lượng an ninh.&lt;/p&gt; &lt;p&gt;Sự việc khiến tôi nhớ Darwin bởi vì nếu ông ấy còn sống thì quan điểm của ông về qui luật tiến hóa của tự nhiên rất có thể sẽ không như ông đã nói vì nó không đúng khi áp dụng trong trường hợp này. Nhưng tận đáy lòng, tôi vẫn hằng tin là Darwin không thay đổi quan điểm.&lt;/p&gt;</description></item><item><title>Quyền và nghĩa vụ im lặng</title><link>https://htr3n.github.io/2008/12/quyen-va-nghia-vu-im-lang/<pubdate>Sat, 27 Dec 2008 00:00:00 +0000</pubdate><guid>5497751c45eb170296894c66d6e013b7</guid><description>&lt;p&gt;Đặt gạch lâu rồi, mà bị deadline của mấy bài báo &amp;ldquo;dí&amp;rdquo;&amp;rdquo; cháy mông nên giờ mới viết được mấy dòng chia sẻ vài suy nghĩ cá nhân về sự kiện &amp;ldquo;quyền im lặng&amp;rdquo; (sau đây là QIM ;) đang gây tranh luận trong và ngoài cái &amp;ldquo;phòng ngủ lớn nhất vn&amp;rdquo; (có khả năng &amp;ldquo;lớn nhất thế giới&amp;rdquo;, sau đây gọi tăt là QH). Có rất nhiều điểm đáng bàn về sự kiện đó, trong đó mình thấy một tín hiệu rất đáng mừng là mối quan tâm đến chính trị đang lớn dần và rõ ràng hơn. Cũng có nghĩa là có nhiều người đã và đang từ chối &amp;ldquo;nghĩa vụ im lặng&amp;rdquo; (hay đi kèm với &amp;ldquo;tự kiểm duyệt&amp;rdquo;) để bày tỏ ý kiến của mình.&lt;/p&gt; &lt;p&gt;Quay lại với sự kiện nói trên. Tóm tắt lại, trong tranh luận tại QH luồng ý kiến &amp;ldquo;chống&amp;rdquo; thì chủ yếu cho rằng luật im lặng &amp;ldquo;gây khó khăn&amp;rdquo; cho cơ quan điều tra (hàm ý &amp;ldquo;gián tiếp gây hại cho xã hội&amp;rdquo; &amp;ndash; vì cho rằng sẽ cản trở việc truy &amp;ldquo;tội phạm&amp;rdquo; (!?)) &amp;ndash; bỏ qua các ý kiến linh tinh của ông nghị &amp;ldquo;rau muống&amp;rdquo;. Xem các ý kiến ủng hộ quan điểm này đại khái như ko muốn có QIM để đối phó với khủng bố hoặc tội phạm nguy hiểm. Vài ngày qua có rất nhiều phân tích rất sắc sảo để phản bác lại luận điểm nguy hiểm đó. Một số ví dụ ở đây như status của nhà báo Huy Đức (Trương Huy San trên FB), hoặc bài viết &amp;ldquo;Quyền im lặng&amp;rdquo; của LS Thái Bảo Anh trên vnExpress. Mình tự nhận không thể viết cái gì hay hơn những ý kiến đó, vì chúng đã hàm chứa hết những cái căn bản của QIM và lý giải thuyết phục tại sao nhất thiết phải có QIM, cho dù với hoàn cảnh hiện tại ở vn. Ở đây mình chia sẻ một vài góc nhìn khác, và muốn biết thêm nhiều ý kiến khác.&lt;/p&gt; &lt;p&gt;Với mình, luật áp dụng cho đại chúng để duy trì trật tự và công bằng xã hội. Những trường hợp như chống khủng bố hay tội phạm là cá biệt, không tiêu biểu cho tình hình toàn xã hội (mà khi cần thì phải ra dự luật đặc biệt, ví dụ như Patriot Act của Mỹ, hoặc kiểu giới nghiêm thời chiến loạn). Do đó, không ai lấy một vài trường hợp cá biệt để làm đại diện cho toàn thể cả. Về mặt duy trì công bằng xã hội, người &amp;ldquo;yếu thế&amp;rdquo; mới phải cần được bảo vệ. Nếu hiểu &amp;ldquo;yếu thế&amp;rdquo;&amp;rdquo; theo nghĩa rộng, ví dụ như không đủ kiến thức luật pháp là đa số dân đen trừ luật sư (có bạn và tôi nữa) rơi vào diện đó. Có ví dụ hay là người dân thường đa phần &amp;ldquo;yếu thế&amp;rdquo; hơn so với nhân viên hành pháp (công an, điều tra viên, kiểm soát viên, etc.). Thế nên QIM là một trong các cách để bảo vệ người dân hữu hiệu. Có ý kiến cho rằng dân trí thấp không cần QIM. Điều đó không đúng, mà ngược lại, QIM rất cần thiết và phải được thi hành chặt chẽ nhất là khi &amp;ldquo;dân trí thấp&amp;rdquo; (thực ra nên lo cho &amp;ldquo;quan trí&amp;rdquo; dưới trung bình thì hơn ;).&lt;/p&gt; &lt;p&gt;Sự kiện QIM (và nhiều sự kiện liên quan), một lần nữa, cho thấy rõ, thay vì đại diện cho dân và quyền lợi của dân thì các ông/bà nghị như ông Đương, tướng Xuyên (và những ý kiến ủng hộ) lại đề nghi tước bỏ quyền căn bản của dân. Vì sao lại ra nông nỗi đó? Bên cạnh việc đổ lỗi cho cơ chế, thể chế, cái &amp;ldquo;nghĩa vụ im lặng&amp;rdquo; mà mỗi người đang &amp;ldquo;chăm chỉ thực hiện&amp;rdquo; là tác nhân không nhỏ. Chọn cách im lặng trước các việc làm, ý kiến, sự kiện &amp;ldquo;chính trị&amp;rdquo; như thế chính là tự bán rẻ quyền của một con người tự do. Nếu bạn nghĩ là không đụng tới chính trị thì bạn sẽ yên thân, nhưng khổ nỗi chính trị hiện diện và ảnh hưởng đến mọi thứ xung quanh bạn, trực tiếp hay gián tiếp, như sự kiện QIM này chẳng hạn. Có thể bạn đúng, nhưng điều đó chỉ mang tính tạm thời. Thử đặt vào trường hợp bạn như ông Chấn (10 năm tù oan), em học sinh Thiện (52 ngày tù vì giúp người bị tai nạn) và nhiều cảnh đời tương tự để suy nghĩ, chính bạn sẽ biết rõ câu trả lời hơn ai hết, có nên tuân thủ &amp;ldquo;nghĩa vụ im lặng&amp;rdquo; nữa hay không.&lt;/p&gt;</description></item><item><title>Từ niềm tin tuyệt đối đến critical thinking</title><link>https://htr3n.github.io/2008/12/critical-thinking/<pubdate>Sat, 27 Dec 2008 00:00:00 +0000</pubdate><guid>54192f4fecafa4c300930c600892e603</guid><description>&lt;p&gt;Trên Tuổi trẻ Online, tôi đọc &lt;a href=&#34;http://www.tuoitre.com.vn/Tianyon/Index.aspx?ArticleID=179846&amp;amp;ChannelID=13&#34;&gt;bài báo này&lt;/a&gt; của một du học sinh, trong đó cung cấp cho ta góc nhìn về giáo dục đại học ở Mỹ. Ý kiến mà tôi rất đồng ý là:&lt;/p&gt; &lt;blockquote&gt; &lt;p&gt;Khác biệt lớn nhất là sinh viên được quyền chất vấn giáo sư. Sinh viên không bị bắt buộc phải theo ý kiến của bất cứ ai, có thể có luận điểm của riêng mình chừng nào anh bảo vệ được luận điểm ấy&lt;/p&gt; &lt;/blockquote&gt; &lt;p&gt;Đúng là phải như thế. Ở cấp đại học, một sinh viên nên tập luyện cho mình thói quen đừng quá tin tưởng tuyệt đối vào sách vở hoặc lời thầy giáo. Điều đó có nghĩa là với một luận điểm nào đó cũng nên tiếp tục đặt những câu hỏi để xem xét mọi khía cạnh, e.g.: liệu luận điểm này có còn đúng khi thay đổi ngữ cảnh, v.v. Những câu hỏi này có thể tự biện giải bằng hiểu biết của mình hoặc thảo luận với bạn bè, giáo sư. Việc bất đồng quan điểm là chuyện bình thường và mỗi người có thể đặt luận điểm riêng vào các cuộc tranh luận.&lt;/p&gt; &lt;p&gt;Thế giới thay đổi hằng ngày, một luận điểm hôm nay đúng nhưng ngày mai có thể không còn phù hợp. Để bắt kịp với những thay đổi đó thì cách giảng dạy như trên thật không tệ.&lt;/p&gt;</description></item></channel></rss>