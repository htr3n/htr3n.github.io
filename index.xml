<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>
      htr3n&#39;s
      </title>
    <link>https://htr3n.github.io/</link>
    <description>
      Recent content on htr3n&#39;s
    </description>
    <generator>Hugo -- gohugo.io</generator>
    
      <language>en</language>
    
    
    
    
    
      <lastBuildDate>Fri, 05 Jul 2019 12:33:36 +1000</lastBuildDate>
    
    
	    <atom:link href="https://htr3n.github.io/index.xml" rel="self" type="application/rss+xml" />
    
    
      <item>
        <title>Chromium and macOS Environment Variables</title>
        <link>https://htr3n.github.io/2019/07/chromium-macos-environment/</link>
        <pubDate>Fri, 05 Jul 2019 12:33:36 +1000</pubDate>
        
        <guid>9d9620dc5d6e366dcf16797da8eca372</guid>
        <description>

&lt;p&gt;Trying Chromium in macOS Mojave (10.14), I confronted with the popular issue regarding &lt;a href=&#34;https://www.google.com/search?q=chromium+google+api+key+missing&#34;&gt;Google API key missing&lt;/a&gt;. After obtaining an API key along with client ID and secret, I put it on some shell startup scripts as following.&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-sh&#34;&gt;export GOOGLE_API_KEY=&amp;quot;your_google_api_key&amp;quot;
export GOOGLE_DEFAULT_CLIENT_ID=&amp;quot;your_client_id&amp;quot;
export GOOGLE_DEFAULT_CLIENT_SECRET=&amp;quot;your_client_secret&amp;quot;
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;Even more careful, I also use &lt;code&gt;launchctl setenv&lt;/code&gt; to ensure these variables are available for macOS GUI applications (usually launched via Finder, Dock, Spotlight or so).&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-sh&#34;&gt;[[ -x /bin/launchctl ]] &amp;amp;&amp;amp; /bin/launchctl setenv GOOGLE_API_KEY $GOOGLE_API_KEY
[[ -x /bin/launchctl ]] &amp;amp;&amp;amp; /bin/launchctl setenv GOOGLE_DEFAULT_CLIENT_ID $GOOGLE_DEFAULT_CLIENT_ID
[[ -x /bin/launchctl ]] &amp;amp;&amp;amp; /bin/launchctl setenv GOOGLE_DEFAULT_CLIENT_SECRET $GOOGLE_DEFAULT_CLIENT_SECRET
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;Sadly, it didn&amp;rsquo;t work under Mojave. When launching Chrome from Finder or Dock, the warning is still there. It seems Apple has silently altered macOS a lot and many existing work-arounds stop working under Mojave.&lt;/p&gt;

&lt;p&gt;There are also some working methods involving renaming the original executable binary &lt;code&gt;/Applications/Chromium.app/Contents/MacOS/Chromium&lt;/code&gt;, creating a new script to launch Chrome in which the aforementioned variables are set properly (even leading to automated scripts like &lt;a href=&#34;https://github.com/ezeeyahoo/ChromiumSyncEnabler&#34;&gt;this&lt;/a&gt;). Personally, I don&amp;rsquo;t like these ways as they are rather intrusive and therefore less upgrade-proof (I guess future updates of Chromium will override these launching scripts and you must circumvent that) and only consider them last resort.&lt;/p&gt;

&lt;p&gt;Fortunately, I have found an &lt;a href=&#34;https://stackoverflow.com/q/25385934&#34;&gt;old StackOverflow&amp;rsquo;s topic&lt;/a&gt; with two methods that work perfectly fine for macOS Mojave and systems before that as you can see in that SO&amp;rsquo;s topic. Better then, they are much less intrusive and upgrade-friendly.&lt;/p&gt;

&lt;h2 id=&#34;method-1-using-login-items&#34;&gt;Method 1: Using Login Items&lt;/h2&gt;

&lt;p&gt;&lt;strong&gt;Step 1&lt;/strong&gt;: Open the built-in app &amp;ldquo;Script Editor&amp;rdquo; in &lt;code&gt;/Applications/Utilities/&lt;/code&gt;, enter the following content&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-applescript&#34;&gt;do shell script &amp;quot;/bin/launchctl setenv GOOGLE_API_KEY your_google_api_key&amp;quot;
do shell script &amp;quot;/bin/launchctl setenv GOOGLE_DEFAULT_CLIENT_ID your_client_id&amp;quot;
do shell script &amp;quot;/bin/launchctl setenv GOOGLE_DEFAULT_CLIENT_SECRET your_client_secret&amp;quot;
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;and then save (&lt;kbd&gt;âŒ˜&lt;/kbd&gt; + &lt;kbd&gt;s&lt;/kbd&gt;) under the format &amp;ldquo;&lt;strong&gt;Application&lt;/strong&gt;&amp;rdquo;. Behind the scene, it will create a new macOS application and wraps the script content inside.&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;Step 2&lt;/strong&gt;: Go to &amp;ldquo;Settings&amp;rdquo;  &amp;ndash;&amp;gt; &amp;ldquo;Users and Groups&amp;rdquo; &amp;ndash;&amp;gt; choose the tab &amp;ldquo;Login Items&amp;rdquo;, click &lt;kbd&gt;+&lt;/kbd&gt; and either point to the newly created application or simply drag and drop it to the box above.&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;Step 3&lt;/strong&gt;: Log out and log in again. Chromium should see the variables and shows no warning.&lt;/p&gt;

&lt;h2 id=&#34;method-2-via-launchagents&#34;&gt;Method 2: Via LaunchAgents&lt;/h2&gt;

&lt;p&gt;&lt;strong&gt;Step 1&lt;/strong&gt;: Create a file &lt;code&gt;environments.plist&lt;/code&gt; inside the folder &lt;code&gt;~/Library/LaunchAgents&lt;/code&gt; with the following content:&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-plist&#34;&gt;&amp;lt;?xml version=&amp;quot;1.0&amp;quot; encoding=&amp;quot;UTF-8&amp;quot;?&amp;gt;
&amp;lt;!DOCTYPE plist PUBLIC &amp;quot;-//Apple//DTD PLIST 1.0//EN&amp;quot; &amp;quot;http://www.apple.com/DTDs/PropertyList-1.0.dtd&amp;quot;&amp;gt;
&amp;lt;plist version=&amp;quot;1.0&amp;quot;&amp;gt;
&amp;lt;dict&amp;gt;
  &amp;lt;key&amp;gt;Label&amp;lt;/key&amp;gt;
  &amp;lt;string&amp;gt;gui-environments&amp;lt;/string&amp;gt;
  &amp;lt;key&amp;gt;ProgramArguments&amp;lt;/key&amp;gt;
  &amp;lt;array&amp;gt;
    &amp;lt;string&amp;gt;sh&amp;lt;/string&amp;gt;
    &amp;lt;string&amp;gt;-c&amp;lt;/string&amp;gt;
    &amp;lt;string&amp;gt;
    /bin/launchctl setenv GOOGLE_API_KEY your_google_api_key
    /bin/launchctl setenv GOOGLE_DEFAULT_CLIENT_ID your_client_id
    /bin/launchctl setenv GOOGLE_DEFAULT_CLIENT_SECRET your_client_secret
    &amp;lt;/string&amp;gt;
  &amp;lt;/array&amp;gt;
  &amp;lt;key&amp;gt;RunAtLoad&amp;lt;/key&amp;gt;
  &amp;lt;true/&amp;gt;
&amp;lt;/dict&amp;gt;
&amp;lt;/plist&amp;gt;
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;&lt;strong&gt;Step 2&lt;/strong&gt;: Enable it with &lt;code&gt;launchctl&lt;/code&gt;&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-sh&#34;&gt;launchctl load ~/Library/LaunchAgents/environments.plist
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;&lt;strong&gt;Step 3&lt;/strong&gt;: There is no step 3, just launch &lt;code&gt;Chromium&lt;/code&gt; and see that it should work without warning ;)&lt;/p&gt;

&lt;p&gt;In this method, you don&amp;rsquo;t even need to log out or reboot. The variables are made available to &lt;code&gt;launchctl&lt;/code&gt; after Step 2.&lt;/p&gt;

&lt;h2 id=&#34;conclusion&#34;&gt;Conclusion&lt;/h2&gt;

&lt;p&gt;The aforementioned methods work flawlessly under macOS Mojave (10.14) and less intrusive with respect to the target applications. As a result, we can upgrade or change the applications without concerning about re-creating, updating or changing the launching scripts. The only caveat is that, the environment variables will be exposed to all applications, and hence, could lead to some security concerns (e.g. regarding Google keys and secrets).&lt;/p&gt;

&lt;p&gt;In that same SO&amp;rsquo;s topic, there is also &lt;a href=&#34;https://stackoverflow.com/a/26477515&#34;&gt;a slightly different way&lt;/a&gt; to elevate a bit more to make it work for the whole system instead of only the particular user. It involves in putting the main script where environment vars are set in &lt;code&gt;/etc/environment&lt;/code&gt; and creating a launching agent in &lt;code&gt;/Library/LaunchAgents/&lt;/code&gt; along with another daemon service in &lt;code&gt;/Library/LaunchDaemons/&lt;/code&gt; to monitor the content of &lt;code&gt;/etc/environment&lt;/code&gt;.&lt;/p&gt;
</description>
      </item>
    
      <item>
        <title>Lenovo Thinkpad T430s Supervisor Password Removal</title>
        <link>https://htr3n.github.io/2019/06/t430s-supervisor-password-removal/</link>
        <pubDate>Mon, 24 Jun 2019 10:50:24 +1000</pubDate>
        
        <guid>6f6da4dac8b79a2ba3e92137e3dec347</guid>
        <description>

&lt;p&gt;After a while merely working with macOS and Linux, I have recently decided to have an additional Windows box for some Windows-specific tools and development. I could be able to secure a second-hand &lt;a href=&#34;https://www.lenovo.com/us/en/laptops/thinkpad/t-series/t430s/&#34;&gt;Lenovo Thinkpad T430s&lt;/a&gt; on eBay for around 130 AUD, which is quite a decent price with CPU i5-3320M (2.6GHz), 4GB RAM, 14in 1600x900 LCD and its battery could last about two hours.&lt;/p&gt;

&lt;p&gt;I was away when the seller delivered the laptop and thus unable to check anything right after receiving. It turns out the seller (or his seller before that, as he claimed) had lost or could not retrieve the BIOS &lt;a href=&#34;https://support.lenovo.com/au/en/solutions/ht036206&#34;&gt;supervisor password&lt;/a&gt;. I only noticed this issue when I tried unsuccessfully to alter the BIOS to UEFI mode in order to install and dual boot Windows and Ubuntu in UEFI. Without the correct supervisor password, I am not allowed to make any meaningful changes in the BIOS.&lt;/p&gt;

&lt;p&gt;You got supervisor password locked when you see this after pressing &lt;kbd&gt;F1&lt;/kbd&gt; to enter the BIOS at boot time.&lt;/p&gt;

&lt;figure&gt;
    &lt;img src=&#34;password-lock.jpg&#34; style=&#34;max-width:50%;display:block;margin:auto&#34;&gt; 
&lt;/figure&gt;

&lt;p&gt;You may just &lt;kbd&gt;Enter&lt;/kbd&gt; with blank and can still get into BIOS but most of the options are grayed out to your dismay.&lt;/p&gt;

&lt;figure&gt;
    &lt;img src=&#34;bios-grayed-out.jpg&#34; style=&#34;max-width:80%;display:block;margin:auto&#34;&gt;
&lt;/figure&gt;

&lt;p&gt;Searching around on the Internet, most of Lenovo forum experts will tell you that the only way is to get Lenovo replacing the mainboard due to security setting. Some will point to &lt;a href=&#34;http://www.ja.axxs.net&#34;&gt;Joe&amp;rsquo;s KeyMaker kit&lt;/a&gt; that costs at least 113 USD (98 plus 15 USD for shipping and handling).&lt;/p&gt;

&lt;p&gt;Fortunately, there are some workarounds like this &lt;a href=&#34;https://www.reddit.com/r/thinkpad/comments/4z9czz/resetting_the_eepromlost_supervisor_password_on/&#34;&gt;Reddit thread&lt;/a&gt;, David Zou&amp;rsquo;s &lt;a href=&#34;https://davidzou.com/articles/bios-password-bypass&#34;&gt;post&lt;/a&gt;, this SuperUser&amp;rsquo;s &lt;a href=&#34;https://superuser.com/questions/393922/how-to-remove-the-supervisor-bios-password-for-an-ibm-thinkpad&#34;&gt;thread&lt;/a&gt;, or this &lt;a href=&#34;https://www.facts-are-stubborn.com/reset-bios-password-on-lenovo-thinkpad/&#34;&gt;post&lt;/a&gt;, and many YouTube&amp;rsquo;s video like &lt;a href=&#34;https://www.youtube.com/watch?v=ANZjUPUYE7s&#34;&gt;here&lt;/a&gt; or &lt;a href=&#34;https://www.youtube.com/watch?v=FW-RLkzjAS8&#34;&gt;there&lt;/a&gt;. After few trials, I could successfully reset the supervisor password in my T430s. Here I will summarize some basic and working steps with some important notes that might save you some money, time, and effort.&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;IMPORTANT&lt;/p&gt;

&lt;p&gt;The following procedure involves some risky short-circuit of a mainboard&amp;rsquo;s component. I will bear no responsibility when you damage your own computers using these guidance. Proceed at your own risk.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;The main idea is to locate and short-circuit the pins SDA and SCL of the EEPROM during the process of supervisor password checking.&lt;/p&gt;

&lt;ol&gt;
&lt;li&gt;Disassemble T430s to expose the EEPROM&lt;/li&gt;
&lt;li&gt;Clear supervisor password by short-circuiting the EEPROM&amp;rsquo;s pins

&lt;ul&gt;
&lt;li&gt;Turn on and keep short-circuiting the pins &lt;code&gt;SDA&lt;/code&gt; and &lt;code&gt;SCL&lt;/code&gt; of the EEPROM when entering the BIOS (pressing &lt;kbd&gt;F1&lt;/kbd&gt;) and the BIOS is checking the password&lt;/li&gt;
&lt;li&gt;Enter the BIOS, change the supervisor password, and then save the changes (&lt;kbd&gt;F10&lt;/kbd&gt;)&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;
&lt;/ol&gt;

&lt;h2 id=&#34;disassemble-t430s&#34;&gt;Disassemble T430s&lt;/h2&gt;

&lt;p&gt;The EEPROM is on the mainboard under the keyboard. Hence, we must remove the keyboard to expose it. Unless you are too familiar with opening a T430s, you should refer to the Hardware Maintenance Manual (either &lt;a href=&#34;https://download.lenovo.com/ibmdl/pub/pc/pccbbs/mobiles_pdf/t430s_t430si_hmm_en_0b48538_01.pdf&#34;&gt;pdf&lt;/a&gt; or &lt;a href=&#34;https://support.lenovo.com/solutions/pd023494&#34;&gt;online&lt;/a&gt; version).&lt;/p&gt;

&lt;p&gt;Using the instructions for &lt;a href=&#34;https://support.lenovo.com/solutions/pd023557&#34;&gt;&amp;ldquo;Removing and Installing the Keyboard - ThinkPad T430s, T430si&amp;rdquo;&lt;/a&gt;:&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;Remove the &lt;a href=&#34;https://support.lenovo.com/documents/pd023501&#34;&gt;battery pack&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;Remove the &lt;a href=&#34;https://support.lenovo.com/au/en/solutions/pd023551&#34;&gt;memory cover&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;Locate and remove the two keyboard screws marked with red color.&lt;/li&gt;
&lt;/ul&gt;

&lt;figure&gt;
    &lt;img src=&#34;rear-keyoard-screws.jpg&#34; style=&#34;max-width:80%;display:block;margin:auto&#34;&gt;
&lt;/figure&gt;

&lt;ul&gt;
&lt;li&gt;&lt;p&gt;Turn to the upper side, slightly press or push the keyboard a little towards the direction of the display to unlatch it.&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;You better use a small flat screwdriver to gently push and lift up the keyboard&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;

&lt;li&gt;&lt;p&gt;Pull the keyboard out gently to avoid breaking the thin keyboard cable.&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;figure&gt;
    &lt;img src=&#34;mainboard-exposed.jpg&#34; style=&#34;max-width:80%;display:block;margin:auto&#34;&gt;
&lt;/figure&gt;

&lt;p&gt;Now we need to locate the EEPROM. As the chip is very small, it will take a little effort. It would be faster with a good loupe or similar. In my T430s, the chip is south of the CPU and hidden under the black sticky isolation tape.&lt;/p&gt;

&lt;figure&gt;
    &lt;img src=&#34;8pinEEPROM.png&#34; style=&#34;max-width:40%;display:block;margin:auto&#34;&gt;
    &lt;figcaption&gt;Ref: https://davidzou.com/user/pages/03.articles/bios-password-bypass/8pinEEPROM.png&lt;/figcaption&gt;
&lt;/figure&gt;

&lt;p&gt;According to the &lt;a href=&#34;https://davidzou.com/user/pages/03.articles/bios-password-bypass/8pinEEPROM.png&#34;&gt;layout diagram&lt;/a&gt; shown by David Zou, the pins SCL and SDA are on the lower opposite side of the dot. The EEPROM in my laptop got some sticky from the isolation tape on the surface and therefore difficult to see the dot. In this case, you can use a pointy driver to gently scan all over the chip&amp;rsquo;s surface like I did.&lt;/p&gt;

&lt;figure&gt;
    &lt;img src=&#34;eeprom-location.jpg&#34; style=&#34;max-width:80%;display:block;margin:auto&#34;&gt;
&lt;/figure&gt;

&lt;p&gt;The &lt;code&gt;SDA&lt;/code&gt; and &lt;code&gt;SCL&lt;/code&gt; pins are identified with two blue arrows. Note that the space between them is tiny, so make sure you are using appropriate tool to only short these pins and don&amp;rsquo;t touch anything else. In my case, I found it very precise and comfortable with a pointy driver from a cheap screwdriver set.&lt;/p&gt;

&lt;figure&gt;
    &lt;img src=&#34;pointy-driver.jpg&#34; style=&#34;max-width:40%;display:block;margin:auto&#34;&gt;
&lt;/figure&gt;

&lt;h2 id=&#34;clear-supervisor-password&#34;&gt;Clear Supervisor Password&lt;/h2&gt;

&lt;p&gt;After successfully locating the EEPROM and identifying the two pins, as David Zou wrote &lt;a href=&#34;https://davidzou.com/articles/bios-password-bypass&#34;&gt;here&lt;/a&gt;, the steps and responses for BIOS and UEFI based computers are slightly different, please refer to his information in your particular case. As my T430s is UEFI based, the process is following.&lt;/p&gt;

&lt;ol&gt;
&lt;li&gt;Turn on the computer / laptop&lt;/li&gt;
&lt;li&gt;Short-circuit the two pins &lt;code&gt;SDA&lt;/code&gt; and &lt;code&gt;SCL&lt;/code&gt; and keep them shorted while pressing &lt;kbd&gt;F1&lt;/kbd&gt; to enter BIOS setup. I was taken directly to the BIOS without any prompt or asking.&lt;/li&gt;
&lt;li&gt;Stop short-circuiting after successfully entering the BIOS (otherwise, start over from Step 1)&lt;/li&gt;
&lt;li&gt;Navigate to the menu &lt;kbd&gt;Security&lt;/kbd&gt; &amp;gt; &lt;kbd&gt;Password&lt;/kbd&gt; &amp;gt; &lt;kbd&gt;Supervisor Password&lt;/kbd&gt; to change the supervisor password (&lt;strong&gt;&lt;em&gt;please read the following note&lt;/em&gt;&lt;/strong&gt;).&lt;/li&gt;
&lt;/ol&gt;

&lt;figure&gt;
    &lt;img src=&#34;password-cleared.jpg&#34; style=&#34;max-width:80%;display:block;margin:auto&#34;&gt;
&lt;/figure&gt;

&lt;p&gt;An important lesson I learned at this point (in a hard way) is that, you &lt;strong&gt;should change the supervisor password to something not blank&lt;/strong&gt;. After clearing the supervisor password as above, I tested few times and put back every thing just to realize that the old or locked supervisor password kicked back in. That means I got locked out as before and must re-open the keyboard to start over the short-circuit.&lt;/p&gt;

&lt;p&gt;The issue was somehow noticed by &lt;a href=&#34;https://www.reddit.com/user/clocow/&#34;&gt;clocow&lt;/a&gt; in &lt;a href=&#34;https://www.reddit.com/r/thinkpad/comments/4z9czz/resetting_the_eepromlost_supervisor_password_on/&#34;&gt;this Reddit thread&lt;/a&gt; and his suspect is due to the backup battery (the yellow one in the mainboard). He suggested to leave the battery disconnected for 3 hours and retried.&lt;/p&gt;

&lt;p&gt;Nonetheless, I have just changed the supervisor password and experienced no kick back or reset so far. My suspect is that the reverting of old/locked supervisor password happens when the supervisor password is blank after the hiccup (i.e. the attempt to clear password via short-circuiting). That&amp;rsquo;s why I got the aforementioned simple solution.&lt;/p&gt;

&lt;p&gt;Eventually, I am truly happy to gain control of my laptop without spending extra money and learn few more thing on the way.&lt;/p&gt;

&lt;p&gt;Happy hacking (aka short-circuiting), mates !!!&lt;/p&gt;

&lt;h3 id=&#34;p-s&#34;&gt;P.S.&lt;/h3&gt;

&lt;ul&gt;
&lt;li&gt;For other models, you should research carefully whether the supervisor password can be cleared using this method. In some models, the places to store passwords are totally different and you can risk burning or bricking a working laptop.&lt;/li&gt;
&lt;li&gt;Information about the location of EEPROM and two pins of other Lenovo models can be found &lt;a href=&#34;http://www.ja.axxs.net/eeprom_location.htm&#34;&gt;here&lt;/a&gt; or &lt;a href=&#34;https://www.allservice.ro/forum/viewtopic.php?t=52&#34;&gt;here&lt;/a&gt;.&lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&#34;references&#34;&gt;References&lt;/h2&gt;

&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;https://support.lenovo.com/au/en/solutions/ht036206&#34;&gt;Lenovo Support: Types of password for ThinkPad&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://davidzou.com/articles/bios-password-bypass&#34;&gt;https://davidzou.com/articles/bios-password-bypass&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://www.reddit.com/r/thinkpad/comments/4z9czz/resetting_the_eepromlost_supervisor_password_on&#34;&gt;https://www.reddit.com/r/thinkpad/comments/4z9czz/resetting_the_eepromlost_supervisor_password_on&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
</description>
      </item>
    
      <item>
        <title>Making JSP work with Spring Boot 2</title>
        <link>https://htr3n.github.io/2018/12/jsp-spring-boot/</link>
        <pubDate>Mon, 24 Dec 2018 00:00:00 +0000</pubDate>
        
        <guid>e9efe4471fa9fb943d02c0d872c1bfd2</guid>
        <description>

&lt;p&gt;One of my past projects relied heavily on XML based configurations and JSP technologies dated back to Spring Framework 3.x. It is still working fine after upgrading to Spring 5 and corresponding dependent libraries such as &lt;a href=&#34;https://hibernate.org/orm/&#34;&gt;Hibernate&lt;/a&gt; 5, &lt;a href=&#34;https://brettwooldridge.github.io/HikariCP/&#34;&gt;HikariCP&lt;/a&gt; 3 and &lt;a href=&#34;https://cxf.apache.org/&#34;&gt;Apache CXF&lt;/a&gt; 3.3.&lt;/p&gt;

&lt;p&gt;Exploring further into Spring ecosystem, I decided to give a shot on migrating to Spring Boot 2 whilst keeping most of the existing MVC (e.g. controllers, validations, JSP views) working. Most of the significant information are scattered throughout the Internet and most of the useful tutorials are sort of &amp;ldquo;&lt;em&gt;just-follow-these-steps-and-it-will-guarantee-to-work-but-nothing-will-be-explained&lt;/em&gt;&amp;rdquo;.&lt;/p&gt;

&lt;p&gt;It took me much unexpected effort and trial-and-error to get things right not to mention numerous do&amp;rsquo;s and don&amp;rsquo;ts got undocumented or lost among a bunch of documentations. This post merely focuses some  on major aspects on bringing Spring Boot 2 and &lt;a href=&#34;https://docs.spring.io/spring/docs/current/spring-framework-reference/web.html&#34;&gt;Spring Web&lt;/a&gt; with JSP together. The versions that I consider here are &lt;a href=&#34;https://github.com/spring-projects/spring-boot/wiki/Spring-Boot-2.1-Release-Notes&#34;&gt;Spring Boot 2.1&lt;/a&gt; and respectively &lt;a href=&#34;https://github.com/spring-projects/spring-framework/wiki/What%27s-New-in-Spring-Framework-5.x#What&#39;s-New-in-Version-5.1&#34;&gt;Spring 5.1&lt;/a&gt;.&lt;/p&gt;

&lt;h2 id=&#34;creating-a-spring-boot-project&#34;&gt;Creating a Spring Boot Project&lt;/h2&gt;

&lt;p&gt;We can quickly create a new Spring Boot project using &lt;a href=&#34;https://start.spring.io/&#34;&gt;Spring Initializr&lt;/a&gt; web site or via &lt;a href=&#34;https://docs.spring.io/spring-boot/docs/2.1.1.RELEASE/reference/htmlsingle/#cli&#34;&gt;command line&lt;/a&gt; or IDE (e.g. Eclipse, IntelliJ IDEA). For less verbose build configuration, I will opt for &lt;a href=&#34;https://gradle.org/&#34;&gt;Gradle&lt;/a&gt; build instead of Maven.&lt;/p&gt;

&lt;blockquote &gt;
    &lt;strong&gt;IMPORTANT:&lt;/strong&gt;&lt;br&gt;
    Spring Boot documentation especially emphasises &lt;a href=&#34;https://docs.spring.io/spring-boot/docs/2.1.1.RELEASE/reference/htmlsingle/#boot-features-jsp-limitations&#34;&gt;the problems of using JSP in Spring Boot&lt;/a&gt;. One of the many issues is that JSP/JSTL technologies are not supported well in all embedded servers as well as when packaging as executable JARs. As such, we &lt;strong&gt;&lt;em&gt;must create a WAR packaging project&lt;/em&gt;&lt;/strong&gt; instead of the default JAR packaging.
&lt;/blockquote&gt;

&lt;p&gt;For instance, with the &amp;ldquo;&lt;em&gt;New Project&lt;/em&gt;&amp;rdquo; wizard with Spring Initialzr in Intellij IDEA, I picked &amp;ldquo;&lt;em&gt;War&lt;/em&gt;&amp;rdquo; for &amp;ldquo;&lt;em&gt;Packaging&lt;/em&gt;&amp;rdquo;. The other non-default option is &amp;ldquo;&lt;em&gt;Gradle Config&lt;/em&gt;&amp;rdquo;, as mentioned above.&lt;/p&gt;

&lt;figure&gt;
  &lt;img src=&#34;war-project.png&#34; style=&#34;max-width:100%&#34;&gt;
&lt;/figure&gt;

&lt;h2 id=&#34;project-configurations&#34;&gt;Project Configurations&lt;/h2&gt;

&lt;h3 id=&#34;dependencies&#34;&gt;Dependencies&lt;/h3&gt;

&lt;p&gt;Spring Boot 2 comes with &lt;a href=&#34;https://docs.spring.io/spring-boot/docs/2.1.1.RELEASE/reference/htmlsingle/#using-boot-starter&#34;&gt;a number of starters&lt;/a&gt; (conventionally named as &lt;code&gt;spring-boot-starter-*&lt;/code&gt;) to help us integrating appropriate dependencies in our Spring projects. I pick the module &amp;ldquo;&lt;code&gt;spring-boot-starter-web&lt;/code&gt;&amp;rdquo; that adds an embedded &lt;a href=&#34;https://tomcat.apache.org/&#34;&gt;Tomcat&lt;/a&gt; servlet container and Spring MVC.&lt;/p&gt;

&lt;p&gt;Note that the embedded Tomcat package does not include JSP by default, we must add the module &amp;ldquo;&lt;code&gt;org.apache.tomcat.embed:tomcat-embed-jasper&lt;/code&gt;&amp;rdquo; as well.  In case you need JavaServer Pages Standard Tag Library (JSTL), just add  &amp;ldquo;&lt;code&gt;javax.servlet:jstl&lt;/code&gt;&amp;rdquo;.&lt;/p&gt;

&lt;p&gt;Apart from those, I also consider to use &lt;a href=&#34;https://www.webjars.org/&#34;&gt;WebJars&lt;/a&gt; as it provides client-side web libraries in terms of JAR files. Thus, It&amp;rsquo;s truly convenient for Java based web projects to bundle popular front-end libraries such as jQuery, Bootstrap, Font-Awesome, to name but a few. I will illustrate the use of WebJars Bootstrap 4 module to our demo project.&lt;/p&gt;

&lt;p&gt;Eventually, our main build configuration &lt;code&gt;build.gradle&lt;/code&gt; should look like this.&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-groovy&#34;&gt;buildscript {
  ext {
    springBootVersion = &#39;2.1.1.RELEASE&#39;
  }
  repositories {
    mavenCentral()
  }
  dependencies {
    classpath(&amp;quot;org.springframework.boot:spring-boot-gradle-plugin:${springBootVersion}&amp;quot;)
  }
}

apply plugin: &#39;org.springframework.boot&#39;
apply plugin: &#39;io.spring.dependency-management&#39;
apply plugin: &#39;war&#39;

group = &#39;io.github.htr3n&#39;
version = &#39;0.0.1-SNAPSHOT&#39;
sourceCompatibility = &#39;1.8&#39;

repositories {
  mavenCentral()
}

dependencies {
  implementation &#39;org.springframework.boot:spring-boot-starter-web&#39;
  implementation &#39;org.webjars:bootstrap:4.1.3&#39;
  providedRuntime &#39;javax.servlet:jstl:1.2&#39;
  providedRuntime &#39;org.apache.tomcat.embed:tomcat-embed-jasper:9.0.14&#39;
  testImplementation &#39;org.springframework.boot:spring-boot-starter-test&#39;
}
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;You might notice that some Spring Boot modules such as &lt;code&gt;spring-boot-starter-*&lt;/code&gt; do not have their version numbers. The plugin &lt;a href=&#34;https://github.com/spring-gradle-plugins/dependency-management-plugin&#34;&gt;&lt;code&gt;io.spring.dependency-management&lt;/code&gt;&lt;/a&gt; will automatically &lt;a href=&#34;https://docs.spring.io/spring-boot/docs/current/gradle-plugin/reference/html/#reacting-to-other-plugins-dependency-management&#34;&gt;imports the &lt;code&gt;spring-boot-dependencies&lt;/code&gt; bom&lt;/a&gt; with adequate versions for Spring Boot&amp;rsquo;s dependencies.&lt;/p&gt;

&lt;h3 id=&#34;auto-configurations&#34;&gt;Auto-configurations&lt;/h3&gt;

&lt;p&gt;The aforementioned wizard created a &lt;code&gt;DemoApplication&lt;/code&gt; class annotated with &lt;a href=&#34;https://docs.spring.io/spring-boot/docs/2.1.1.RELEASE/api/org/springframework/boot/autoconfigure/SpringBootApplication.html&#34;&gt;&lt;code&gt;@SpringBootApplication&lt;/code&gt;&lt;/a&gt; to start our Spring Boot application. The &lt;code&gt;@SpringBootApplication&lt;/code&gt; annotation includes three other annotations that perform several configuration tasks automatically, which are,&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;&lt;p&gt;&lt;a href=&#34;https://docs.spring.io/spring-boot/docs/2.1.1.RELEASE/api/org/springframework/boot/SpringBootConfiguration.html&#34;&gt;&lt;code&gt;@SpringBootConfiguration&lt;/code&gt;&lt;/a&gt; embraces &lt;a href=&#34;https://docs.spring.io/spring-framework/docs/5.1.3.RELEASE/javadoc-api/org/springframework/context/annotation/Configuration.html?is-external=true&#34;&gt;&lt;code&gt;@Configuration&lt;/code&gt;&lt;/a&gt; (i.e. the annotated application class also provides Spring configurations)&lt;/p&gt;&lt;/li&gt;

&lt;li&gt;&lt;p&gt;&lt;a href=&#34;https://docs.spring.io/spring-boot/docs/2.1.1.RELEASE/api/org/springframework/boot/autoconfigure/EnableAutoConfiguration.html&#34;&gt;&lt;code&gt;@EnableAutoConfiguration&lt;/code&gt;&lt;/a&gt; will trigger Spring Boot &lt;a href=&#34;https://docs.spring.io/spring-boot/docs/2.1.1.RELEASE/reference/html/using-boot-auto-configuration.html&#34;&gt;auto-configuration mechanism&lt;/a&gt;&lt;/p&gt;&lt;/li&gt;

&lt;li&gt;&lt;p&gt;&lt;a href=&#34;https://docs.spring.io/spring-framework/docs/5.1.3.RELEASE/javadoc-api/org/springframework/context/annotation/ComponentScan.html&#34;&gt;&lt;code&gt;@ComponentScan&lt;/code&gt;&lt;/a&gt; will enable the scanning for Spring components annotated with &lt;a href=&#34;https://docs.spring.io/spring-framework/docs/5.1.3.RELEASE/javadoc-api/org/springframework/stereotype/Component.html&#34;&gt;&lt;code&gt;@Component&lt;/code&gt;&lt;/a&gt; or its sub-types on the package of the main application.&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;It&amp;rsquo;s convenient but not mandatory to use &lt;code&gt;@SpringBootApplication&lt;/code&gt;. For advanced configuring or fine-tuning, one can surely pick apart individual annotations and add/customise them to particular needs.&lt;/p&gt;

&lt;p&gt;In order to create &lt;em&gt;a deployable WAR&lt;/em&gt; file, Spring Boot team &lt;a href=&#34;https://docs.spring.io/spring-boot/docs/2.1.1.RELEASE/reference/html/howto-traditional-deployment.html&#34;&gt;recommends to subclass &lt;code&gt;SpringBootServletInitializer&lt;/code&gt; and override its &lt;code&gt;configure()&lt;/code&gt; method&lt;/a&gt;.&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-java&#34;&gt;package io.github.htr3n;

import org.springframework.boot.SpringApplication;
import org.springframework.boot.autoconfigure.SpringBootApplication;
import org.springframework.boot.builder.SpringApplicationBuilder;
import org.springframework.boot.web.servlet.support.SpringBootServletInitializer;

@SpringBootApplication
public class DemoApplication extends SpringBootServletInitializer {

  public static void main(String[] args) {
    SpringApplication.run(DemoApplication.class, args);
  }

  @Override
  protected SpringApplicationBuilder configure(SpringApplicationBuilder application) {
    return application.sources(DemoApplication.class);
  }
}
&lt;/code&gt;&lt;/pre&gt;

&lt;h3 id=&#34;view-resolvers&#34;&gt;View Resolvers&lt;/h3&gt;

&lt;p&gt;In Spring Web MVC, the return value of a &lt;code&gt;@Controller&lt;/code&gt;, if not a valid &lt;code&gt;View&lt;/code&gt; object, should be resolved by a &lt;a href=&#34;https://docs.spring.io/spring-framework/docs/5.1.2.RELEASE/javadoc-api/org/springframework/web/servlet/ViewResolver.html&#34;&gt;&lt;code&gt;ViewResolver&lt;/code&gt;&lt;/a&gt; . Spring Boot 2, by default, will load &lt;a href=&#34;https://docs.spring.io/spring-framework/docs/5.1.3.RELEASE/javadoc-api/org/springframework/web/servlet/view/InternalResourceViewResolver.html&#34;&gt;&lt;code&gt;InternalResourceViewResolver&lt;/code&gt;&lt;/a&gt; that combines with &lt;a href=&#34;https://docs.spring.io/spring/docs/5.1.3.RELEASE/javadoc-api/org/springframework/web/servlet/view/InternalResourceView.html&#34;&gt;&lt;code&gt;InternalResourceView&lt;/code&gt;&lt;/a&gt; for handling JSP based views. As such, a controller&amp;rsquo;s return values will be mapped to a JSP resource.&lt;/p&gt;

&lt;p&gt;&lt;code&gt;InternalResourceViewResolver&lt;/code&gt;, which is based on &lt;a href=&#34;https://docs.spring.io/spring-framework/docs/5.1.3.RELEASE/javadoc-api/org/springframework/web/servlet/view/UrlBasedViewResolver.html&#34;&gt;&lt;code&gt;UrlBasedViewResolver&lt;/code&gt;&lt;/a&gt;, will use the following rule &amp;ldquo;&lt;code&gt;prefix + view_name + suffix&lt;/code&gt;&amp;rdquo; for view resolution. For instance, if a view&amp;rsquo;s logical name is &amp;ldquo;&lt;code&gt;index&lt;/code&gt;&amp;rdquo;, prefix = &amp;ldquo;&lt;code&gt;/WEB-INF/jsp/&lt;/code&gt;&amp;rdquo; and suffix = &amp;ldquo;&lt;code&gt;.jsp&lt;/code&gt;&amp;rdquo; then the resulting view will be  &amp;ldquo;&lt;code&gt;/WEB-INF/jsp/index.jsp&lt;/code&gt;&amp;rdquo;.&lt;/p&gt;

&lt;p&gt;Therefore, we need to configure the &lt;code&gt;prefix&lt;/code&gt; and &lt;code&gt;suffix&lt;/code&gt;. This can be done quite easily in Spring Boot , either using &lt;code&gt;application.properties&lt;/code&gt;&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-properties&#34;&gt;spring.mvc.view.prefix=/WEB-INF/jsp/
spring.mvc.view.suffix=.jsp
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;or an equivalent but longer Java based configuration&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-java&#34;&gt;@Configuration
public class WebConfig implements WebMvcConfigurer {
  @Bean
  public ViewResolver jspViewResolver() {
    InternalResourceViewResolver viewResolver = new InternalResourceViewResolver();
    viewResolver.setPrefix(&amp;quot;/WEB-INF/jsp/&amp;quot;);
    viewResolver.setSuffix(&amp;quot;.jsp&amp;quot;);
    return viewResolver;
  }
}
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;Note that Spring Boot will map a logical view onto a JSP file inside the folder &amp;ldquo;&lt;code&gt;src/main/webapp/WEB-INF/jsp/&lt;/code&gt;&amp;rdquo;.&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;&lt;strong&gt;IMPORTANT&lt;/strong&gt;&lt;br&gt;Many developers, especially who have a lot of experience with Spring Web MVC, tend to annotate the &lt;code&gt;@Configuration&lt;/code&gt; class with &lt;a href=&#34;https://docs.spring.io/spring-framework/docs/5.1.3.RELEASE/javadoc-api/org/springframework/web/servlet/config/annotation/EnableWebMvc.html&#34;&gt;&lt;code&gt;@EnableWebMvc&lt;/code&gt;&lt;/a&gt;. It&amp;rsquo;s crucial to notice that &lt;a href=&#34;https://docs.spring.io/spring-framework/docs/5.1.3.RELEASE/javadoc-api/org/springframework/web/servlet/config/annotation/EnableWebMvc.html&#34;&gt;&lt;code&gt;@EnableWebMvc&lt;/code&gt;&lt;/a&gt; will &lt;a href=&#34;https://docs.spring.io/spring-boot/docs/2.1.1.RELEASE/reference/htmlsingle/#howto-switch-off-default-mvc-configuration&#34;&gt;switch off all default Spring Boot auto-configuration&lt;/a&gt; for Spring Web MVC. That means, JSP files and other resources might not be served correctly without extra configurations.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;h3 id=&#34;embedded-servlet-container&#34;&gt;Embedded Servlet Container&lt;/h3&gt;

&lt;p&gt;By default, Spring Boot package &lt;code&gt;spring-boot-starter-web&lt;/code&gt; includes Tomcat server via &lt;code&gt;spring-boot-starter-tomcat&lt;/code&gt; which is rather sufficient. As we adopt Spring Boot&amp;rsquo;s convention for the embedded Tomcat, it will be later accessible at the default address &amp;ldquo;&lt;a href=&#34;http://localhost:8080&#34;&gt;http://localhost:8080&lt;/a&gt;&amp;rdquo;. In case you want to fine tune Tomcat, please reference to the &lt;a href=&#34;https://docs.spring.io/spring-boot/docs/current/reference/html/howto-embedded-web-servers.html&#34;&gt;full documentation&lt;/a&gt;.&lt;/p&gt;

&lt;h2 id=&#34;spring-boot-jsp-login-page&#34;&gt;Spring Boot + JSP Login Page&lt;/h2&gt;

&lt;h3 id=&#34;login-view&#34;&gt;Login View&lt;/h3&gt;

&lt;p&gt;To illustrate how Spring Boot works with JSP technologies, I will use a simple login page that asks for an email and password, conducts some trivial validations, and then informs whether it&amp;rsquo;s successful or failed.&lt;/p&gt;

&lt;p&gt;First, let&amp;rsquo;s create a simple JSP file &amp;ldquo;&lt;code&gt;webapp/WEB-INF/jsp/login.jsp&lt;/code&gt;&amp;rdquo; as the login view.&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-jsp&#34;&gt;&amp;lt;%@ taglib prefix=&amp;quot;form&amp;quot; uri=&amp;quot;http://www.springframework.org/tags/form&amp;quot; %&amp;gt;
&amp;lt;html lang=&amp;quot;en&amp;quot;&amp;gt;
&amp;lt;head&amp;gt;
  &amp;lt;link href=&amp;quot;webjars/bootstrap/4.1.3/css/bootstrap.min.css&amp;quot; rel=&amp;quot;stylesheet&amp;quot;&amp;gt;
  &amp;lt;title&amp;gt;Login&amp;lt;/title&amp;gt;
&amp;lt;/head&amp;gt;
&amp;lt;body&amp;gt;
&amp;lt;div class=&amp;quot;jumbotron&amp;quot;&amp;gt;
  &amp;lt;h1&amp;gt;Spring Boot 2 + JSP Demo&amp;lt;/h1&amp;gt;
&amp;lt;/div&amp;gt;
&amp;lt;div class=&amp;quot;container&amp;quot;&amp;gt;
  &amp;lt;div class=&amp;quot;row&amp;quot;&amp;gt;
    &amp;lt;form:form method=&amp;quot;POST&amp;quot; modelAttribute=&amp;quot;loginForm&amp;quot;&amp;gt;
      &amp;lt;div class=&amp;quot;form-group&amp;quot;&amp;gt;
        &amp;lt;label for=&amp;quot;email&amp;quot;&amp;gt;E-Mail&amp;lt;/label&amp;gt;
        &amp;lt;form:input path=&amp;quot;email&amp;quot; cssClass=&amp;quot;form-control&amp;quot;/&amp;gt;
        &amp;lt;form:errors path=&amp;quot;email&amp;quot; cssStyle=&amp;quot;color: red&amp;quot;/&amp;gt;
      &amp;lt;/div&amp;gt;
      &amp;lt;div class=&amp;quot;form-group&amp;quot;&amp;gt;
        &amp;lt;label for=&amp;quot;password&amp;quot;&amp;gt;Password&amp;lt;/label&amp;gt;
        &amp;lt;form:password path=&amp;quot;password&amp;quot; cssClass=&amp;quot;form-control&amp;quot;/&amp;gt;
        &amp;lt;form:errors path=&amp;quot;password&amp;quot; cssStyle=&amp;quot;color: red&amp;quot;/&amp;gt;
      &amp;lt;/div&amp;gt;
      &amp;lt;form:button class=&amp;quot;btn btn-primary&amp;quot;&amp;gt;Log in&amp;lt;/form:button&amp;gt;
    &amp;lt;/form:form&amp;gt;
  &amp;lt;/div&amp;gt;
  &amp;lt;!--- check login status and display message --&amp;gt;
  &amp;lt;div class=&amp;quot;row&amp;quot;&amp;gt;
    &amp;lt;% Object status = session.getAttribute(&amp;quot;loginStatus&amp;quot;);
      if (&amp;quot;OK&amp;quot;.equals(status)) { %&amp;gt;
    &amp;lt;div class=&amp;quot;alert alert-success&amp;quot; role=&amp;quot;alert&amp;quot;&amp;gt;
      Congratulations! Login successfully.
    &amp;lt;/div&amp;gt;
    &amp;lt;% }
      if (&amp;quot;FAILED&amp;quot;.equals(status)) { %&amp;gt;
    &amp;lt;div class=&amp;quot;alert alert-danger&amp;quot; role=&amp;quot;alert&amp;quot;&amp;gt;
      Login failed. Please try again!!!
    &amp;lt;/div&amp;gt;
    &amp;lt;% } %&amp;gt;
  &amp;lt;/div&amp;gt;
&amp;lt;/div&amp;gt;
&amp;lt;script src=&amp;quot;webjars/bootstrap/4.1.3/js/bootstrap.min.js&amp;quot;&amp;gt;&amp;lt;/script&amp;gt;
&amp;lt;/body&amp;gt;
&amp;lt;/html&amp;gt;
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;Nothing is spectacular here. I will use some tags from &lt;a href=&#34;https://docs.spring.io/spring/docs/4.2.x/spring-framework-reference/html/spring-form-tld.html&#34;&gt;Spring form library&lt;/a&gt; to conveniently define and bind HTML form elements with the back-end controllers and model. The major elements are&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;&lt;code&gt;&amp;lt;form:form method=&amp;quot;POST&amp;quot; modelAttribute=&amp;quot;loginForm&amp;quot;&amp;gt;&lt;/code&gt;&amp;mdash;indicates the HTTP method POST as well as a model attribute namely &lt;code&gt;loginForm&lt;/code&gt;&lt;br /&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;&amp;lt;form:input path=&amp;quot;email&amp;quot;&amp;gt;&lt;/code&gt; &amp;mdash; the input element for email&lt;/li&gt;
&lt;li&gt;&lt;code&gt;&amp;lt;form:input path=&amp;quot;password&amp;quot;&amp;gt;&lt;/code&gt;&amp;mdash;the input element for password&lt;/li&gt;
&lt;li&gt;&lt;code&gt;&amp;lt;form:errors .../&amp;gt;&lt;/code&gt; are placeholders for Spring&amp;rsquo;s validation errors (if any)&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;The later part of &lt;code&gt;login.jsp&lt;/code&gt; is to check whether the login process succeeded or failed and display a corresponding message via access to a session attribute &lt;code&gt;loginStatus&lt;/code&gt; . The actual value of &lt;code&gt;loginStatus&lt;/code&gt; will be updated by the business logic of the controller. Other than that, the JSP view includes Bootstrap 4&amp;rsquo;s stylesheet and JavaScript as provided by WebJars and use Bootstrap 4 CSS classes for styling.&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-html&#34;&gt;...
&amp;lt;link href=&amp;quot;webjars/bootstrap/4.1.3/css/bootstrap.min.css&amp;quot; rel=&amp;quot;stylesheet&amp;quot;&amp;gt;
...
&amp;lt;script src=&amp;quot;webjars/bootstrap/4.1.3/js/bootstrap.min.js&amp;quot;&amp;gt;&amp;lt;/script&amp;gt;
&lt;/code&gt;&lt;/pre&gt;

&lt;h3 id=&#34;login-controller&#34;&gt;Login Controller&lt;/h3&gt;

&lt;p&gt;First of all, we will need a data object to transfer the login input data in the JSP view (e.g. email and password) with the controllers and models. Here comes the &lt;code&gt;LoginForm&lt;/code&gt; class.&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-java&#34;&gt;public class LoginForm {
  private String email;
	private String password;
  
  public LoginForm() {}
  public String getEmail() { return email; }
  public void setEmail(String email) { this.email = email; }
  public String getPassword() { return password; }
  public void setPassword(String password) { this.password = password; }
}
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;No worries about the annotations &lt;code&gt;@NotBlank&lt;/code&gt;, &lt;code&gt;@Email&lt;/code&gt; for now as they are part of &lt;a href=&#34;#data-validation&#34;&gt;data validation&lt;/a&gt;. Apart from those, &lt;code&gt;LoginForm&lt;/code&gt; is just a normal bean with a no-arg constructor and the getters / setters.&lt;/p&gt;

&lt;p&gt;Now, we create a &lt;code&gt;LoginHandler&lt;/code&gt; class to coordinate and handle the whole login process.&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-java&#34;&gt;@Controller
@RequestMapping(&amp;quot;/login&amp;quot;)
public class LoginHandler {
  private static final String LOGIN_VIEW = &amp;quot;login&amp;quot;;
  private static final String LOGOUT_VIEW = &amp;quot;logout&amp;quot;;
  // controller body  
}
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;The &lt;code&gt;LoginHandler&lt;/code&gt; class is annotated with &lt;a href=&#34;https://docs.spring.io/spring-framework/docs/5.1.3.RELEASE/javadoc-api/org/springframework/stereotype/Controller.html&#34;&gt;&lt;code&gt;@Controller&lt;/code&gt;&lt;/a&gt; to indicate it is a web controller that will be automatically detected by Spring Boot. In the &lt;code&gt;LoginHandler&lt;/code&gt; class, let&amp;rsquo;s define some handler methods.&lt;/p&gt;

&lt;h4 id=&#34;handling-get-requests&#34;&gt;Handling GET Requests&lt;/h4&gt;

&lt;p&gt;We create a &lt;code&gt;showLoginView()&lt;/code&gt; method annotated with &lt;code&gt;@GetMapping&lt;/code&gt; for handling GET requests, i.e. when a client opens the corresponding URL &amp;ldquo;&lt;a href=&#34;http://localhost:8080/login&#34;&gt;http://localhost:8080/login&lt;/a&gt;&amp;rdquo;.&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-java&#34;&gt;@GetMapping(&amp;quot;/login&amp;quot;)
public String showLoginView(Model model) {
  model.addAttribute(&amp;quot;loginForm&amp;quot;, new LoginForm());
  return LOGIN_VIEW;
}
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;This method simply adds a new model attribute &lt;code&gt;loginForm&lt;/code&gt; (explained later in &lt;a href=&#34;#data-binding&#34;&gt;Data Binding&lt;/a&gt;) and returns a logical login view name &amp;ldquo;&lt;code&gt;login&lt;/code&gt;&amp;rdquo; (which will be resolved to &amp;ldquo;&lt;code&gt;login.jsp&lt;/code&gt;&amp;rdquo;).&lt;/p&gt;

&lt;h4 id=&#34;handling-post-requests&#34;&gt;Handling POST Requests&lt;/h4&gt;

&lt;p&gt;For processing POST requests (i.e. when the client enters some input data and submits the form), we define a &lt;code&gt;login()&lt;/code&gt; method annotated with &lt;code&gt;@PostMapping&lt;/code&gt;.&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-java&#34;&gt;@PostMapping(&amp;quot;/login&amp;quot;)
public String login(@Valid @ModelAttribute(&amp;quot;loginForm&amp;quot;) LoginForm form,
                    BindingResult bindingResult,
                    HttpSession session) {
  if (!bindingResult.hasErrors()) {
    final boolean authenticated = &amp;quot;abc@test.com&amp;quot;.equals(form.getEmail());
    final String loginStatus = authenticated ? &amp;quot;OK&amp;quot; : &amp;quot;FAILED&amp;quot;;
    session.setAttribute(&amp;quot;loginStatus&amp;quot;, loginStatus);
  }
  return LOGIN_VIEW;
}
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;The input data of the submitted form will be explicitly mapped to the method parameter &lt;code&gt;form&lt;/code&gt; via the annotation &lt;code&gt;@ModelAttribute&lt;/code&gt;. The &lt;code&gt;@Valid&lt;/code&gt; annotation and the parameter &lt;code&gt;bindingResult&lt;/code&gt; are for &lt;a href=&#34;#data-validation&#34;&gt;data validation&lt;/a&gt;, and the &lt;code&gt;session&lt;/code&gt; is for storing session data indicating a valid authentication.&lt;/p&gt;

&lt;p&gt;The actual authentication business logic has been simplified so that an input email &amp;ldquo;&lt;code&gt;abc@test.com&lt;/code&gt;&amp;rdquo; will pass. Of course, it should be revised with proper data and authentication process in real apps.&lt;/p&gt;

&lt;h4 id=&#34;handling-log-out&#34;&gt;Handling Log-Out&lt;/h4&gt;

&lt;p&gt;For the sake of completeness, we should also add a handler method for logging out in which we remove the session attribute &lt;code&gt;loginStatus&lt;/code&gt; added in the POST method &lt;code&gt;login()&lt;/code&gt; and redirect to a &amp;ldquo;&lt;code&gt;logout.jsp&lt;/code&gt;&amp;rdquo; page.&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-java&#34;&gt;@RequestMapping(&amp;quot;/logout&amp;quot;)
public String logout(HttpSession session) {
  session.removeAttribute(&amp;quot;loginStatus&amp;quot;);
  return LOGOUT_VIEW;
}
&lt;/code&gt;&lt;/pre&gt;

&lt;h4 id=&#34;data-binding-a-name-data-binding-a&#34;&gt;Data Binding &lt;a name=&#34;data-binding&#34;&gt;&lt;/a&gt;&lt;/h4&gt;

&lt;p&gt;We need to connect the HTML login form to a data transfer object (also known as &lt;em&gt;command object&lt;/em&gt;, &lt;em&gt;form object&lt;/em&gt;,  &lt;em&gt;form-backing object&lt;/em&gt;) of type &lt;code&gt;LoginForm&lt;/code&gt;. Otherwise, Spring MVC will raise the infamous error &amp;ldquo;&lt;em&gt;Caused by: java.lang.IllegalStateException: Neither BindingResult nor plain target object for bean name &amp;lsquo;loginForm&amp;rsquo; available as request attribute&lt;/em&gt;&amp;rdquo;.&lt;/p&gt;

&lt;p&gt;There are more than one way to do that:&lt;/p&gt;

&lt;ol&gt;
&lt;li&gt;Declare a new method that returns a &lt;code&gt;LoginForm&lt;/code&gt; object and is annotated with &lt;a href=&#34;https://docs.spring.io/spring-framework/docs/5.1.3.RELEASE/javadoc-api/org/springframework/web/bind/annotation/ModelAttribute.html&#34;&gt;&lt;code&gt;@ModelAttribute(&amp;quot;loginForm&amp;quot;)&lt;/code&gt;&lt;/a&gt;. Note that all &lt;code&gt;@ModelAttribute&lt;/code&gt; annotated methods will be invoked before any handler methods. Thus, &lt;code&gt;LoginForm&lt;/code&gt; objects can be fed with some initial data, for instance, from a database.&lt;/li&gt;
&lt;li&gt;For the GET method &lt;code&gt;showLoginView()&lt;/code&gt;, create a parameter of type &lt;code&gt;LoginForm&lt;/code&gt; and annotate it with &lt;code&gt;@ModelAttribute(&amp;quot;loginForm&amp;quot;)&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;Do the same as (2) but omit &lt;code&gt;@ModelAttribute&lt;/code&gt;  for the method parameter because according to &lt;a href=&#34;https://docs.spring.io/spring/docs/current/spring-framework-reference/web.html#mvc-ann-arguments&#34;&gt;Spring Web documentation&lt;/a&gt;, it will be resolved as &lt;code&gt;@ModelAttribute&lt;/code&gt; implicitly&lt;/li&gt;
&lt;li&gt;Create a parameter of type &lt;a href=&#34;https://docs.spring.io/spring-framework/docs/5.1.3.RELEASE/javadoc-api/org/springframework/ui/Model.html&#34;&gt;&lt;code&gt;Model&lt;/code&gt;&lt;/a&gt; for the GET method &lt;code&gt;showLoginView()&lt;/code&gt; and then invoke &lt;code&gt;Model.addAttribute(&amp;quot;loginForm&amp;quot;, new LoginForm())&lt;/code&gt; to add a model attribute &lt;code&gt;loginForm&lt;/code&gt;&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;Even though I can just go with (3) for its simplicity, I always prefer the other three as they advocate explicit declaration. It might make the code a bit verbose but would be easy to understand and maintain later on. I exemplify (4) and implement in &lt;code&gt;showLoginView()&lt;/code&gt;.&lt;/p&gt;

&lt;h4 id=&#34;data-validation-a-name-data-validation-a&#34;&gt;Data Validation&lt;a name=&#34;data-validation&#34;&gt;&lt;/a&gt;&lt;/h4&gt;

&lt;p&gt;In my previous Spring 3 projects, I used to create validators that implement the &lt;a href=&#34;https://docs.spring.io/spring-framework/docs/5.1.3.RELEASE/javadoc-api/org/springframework/validation/Validator.html&#34;&gt;&lt;code&gt;Validator&lt;/code&gt;&lt;/a&gt; interface and utilise &lt;a href=&#34;https://docs.spring.io/spring-framework/docs/5.1.3.RELEASE/javadoc-api/org/springframework/validation/ValidationUtils.html&#34;&gt;ValidationUtils&lt;/a&gt; helper methods to check the input data. These validator beans will be injected into Spring controllers to validate the input before handing over to the actual business logics.&lt;/p&gt;

&lt;p&gt;Nevertheless, we can also leverage &lt;a href=&#34;https://beanvalidation.org/1.0/&#34;&gt;Bean Validation 1.0&lt;/a&gt; (JSR-303) and &lt;a href=&#34;https://beanvalidation.org/1.1/&#34;&gt;1.1&lt;/a&gt; (JSR-349) supported since Spring 4 and &lt;a href=&#34;https://beanvalidation.org/2.0/&#34;&gt;Bean Validation 2.0&lt;/a&gt; (JSR-380) supported since Spring 5 via &lt;a href=&#34;http://hibernate.org/validator/&#34;&gt;Hibernate Validator&lt;/a&gt;. These modules are already included with &lt;code&gt;spring-boot-starter-web&lt;/code&gt;.&lt;/p&gt;

&lt;p&gt;First, we annotate &lt;code&gt;LoginForm&lt;/code&gt;&amp;rsquo;s fields with some Bean Validation constraints and corresponding messages.&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-java&#34;&gt;public class LoginForm {
  
  @NotBlank(message = &amp;quot;E-Mail must not be empty.&amp;quot;)
  @Email(message = &amp;quot;Please enter a valid e-mail address.&amp;quot;)  
  private String email;

  @NotBlank(message = &amp;quot;Password must not be empty.&amp;quot;)
	private String password;
	...
}
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;Then we need to update &lt;code&gt;LoginHandler&lt;/code&gt; with respect to validation logics but mostly with the POST handler &lt;code&gt;login()&lt;/code&gt;.  The simplest way is to add a &lt;code&gt;@Valid&lt;/code&gt; annotation to the parameter &lt;code&gt;form&lt;/code&gt;. It indicates that Spring should pass &lt;code&gt;form&lt;/code&gt; to a &lt;code&gt;Validator&lt;/code&gt; beforehand. To get access to validation errors, we have to declare a parameter &lt;code&gt;bindingResult&lt;/code&gt; of type &lt;a href=&#34;https://docs.spring.io/spring-framework/docs/5.1.3.RELEASE/javadoc-api/org/springframework/validation/BindingResult.html&#34;&gt;&lt;code&gt;BindingResult&lt;/code&gt;&lt;/a&gt; and place it immediately next to &lt;code&gt;form&lt;/code&gt;. Inside &lt;code&gt;login()&lt;/code&gt;, we can invoke the method &lt;code&gt;BindingResult#hasErrors()&lt;/code&gt; to see whether there are some validation errors and act accordingly. In this case, the login process won&amp;rsquo;t proceed until no validation error occurs.&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-java&#34;&gt;public String login(@Valid @ModelAttribute(&amp;quot;loginForm&amp;quot;) LoginForm form,
                    BindingResult bindingResult,
                    HttpSession session) {
  if (!bindingResult.hasErrors()) {
    ...
  }
}
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;Thanks to Spring tag &amp;ldquo;&lt;code&gt;&amp;lt;form:errors .../&amp;gt;&lt;/code&gt;&amp;rdquo;, any validation errors will be displayed on the JSP login view. For instance, when I left both email and password empty, I got the following messages.&lt;/p&gt;

&lt;figure&gt;
  &lt;img src=&#34;input-errors.png&#34; style=&#34;max-width:100%&#34;&gt;
&lt;/figure&gt;

&lt;blockquote&gt;
&lt;p&gt;If the &lt;code&gt;BindingResult&lt;/code&gt; parameter &lt;em&gt;is not placed immediately next to&lt;/em&gt; the corresponding model attribute &lt;code&gt;loginForm&lt;/code&gt;, Spring Boot will throw a &lt;a href=&#34;https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/validation/BindException.html&#34;&gt;&lt;code&gt;BindException&lt;/code&gt;&lt;/a&gt; that will be resolved via &lt;a href=&#34;https://docs.spring.io/spring-framework/docs/5.1.3.RELEASE/javadoc-api/org/springframework/web/servlet/mvc/support/DefaultHandlerExceptionResolver.html&#34;&gt;&lt;code&gt;DefaultHandlerExceptionResolver&lt;/code&gt;&lt;/a&gt; as an error HTTP 404 - Bad Request.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;h2 id=&#34;building-and-executing&#34;&gt;Building and Executing&lt;/h2&gt;

&lt;p&gt;The &lt;code&gt;build.gradle&lt;/code&gt; created previously is mainly based on the &lt;a href=&#34;https://docs.spring.io/spring-boot/docs/current/gradle-plugin/reference/html/&#34;&gt;Spring Boot Gradle plugin&lt;/a&gt; for dependency and task management.&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-sh&#34;&gt;./gradlew bootRun
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;When visiting &lt;a href=&#34;http://localhost:8080/login&#34;&gt;http://localhost:8080/login&lt;/a&gt;, you can see the login page.&lt;/p&gt;

&lt;figure&gt;
  &lt;img src=&#34;login-ok.png&#34; style=&#34;max-width:100%&#34;&gt;
&lt;/figure&gt;

&lt;p&gt;To build a WAR package that is executable and deployable&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-sh&#34;&gt;./gradlew bootWar
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;The resulting WAR file is &amp;ldquo;&lt;code&gt;./build/libs/spring-boot-jsp-demo-0.0.1-SNAPSHOT.war&lt;/code&gt;&amp;rdquo;.  It&amp;rsquo;s interesting that you can deploy the WAR file to a standalone Tomcat server as well as directly execute it with &amp;ldquo;&lt;code&gt;java -jar&lt;/code&gt;&amp;rdquo; .&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-sh&#34;&gt;java -jar ./build/libs/spring-boot-jsp-demo-0.0.1-SNAPSHOT.war
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;In case you want to change the WAR file name, Spring Boot Gradle plugin inherits from, and therefore, offers similar options as, the &lt;a href=&#34;https://docs.gradle.org/current/userguide/war_plugin.html&#34;&gt;official Gradle War plugin&lt;/a&gt;. For instance, I can get rid of the version and use the build project&amp;rsquo;s name to form the WAR file name by customise the task &lt;a href=&#34;https://docs.spring.io/spring-boot/docs/2.1.1.RELEASE/gradle-plugin/api/org/springframework/boot/gradle/tasks/bundling/BootWar.html&#34;&gt;&lt;code&gt;BootWar&lt;/code&gt;&lt;/a&gt; in &lt;code&gt;build.gradle&lt;/code&gt;.&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-groovy&#34;&gt;bootWar {
	archiveName &amp;quot;${project.name}.war&amp;quot;
}
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;Also note that, when applying together with Gradle war plugin, Spring Boot Gradle plugin &lt;a href=&#34;https://docs.spring.io/spring-boot/docs/current/gradle-plugin/reference/html/#reacting-to-other-plugins-war&#34;&gt;will disable the task &lt;code&gt;war&lt;/code&gt;&lt;/a&gt;. Should you want to use &lt;code&gt;war&lt;/code&gt; alongside &lt;code&gt;bootWar&lt;/code&gt;, just simply enable it.&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-groovy&#34;&gt;war {
	enabled = true
}
&lt;/code&gt;&lt;/pre&gt;

&lt;h2 id=&#34;references&#34;&gt;References&lt;/h2&gt;

&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;https://spring.io/guides/gs/serving-web-content/&#34;&gt;https://spring.io/guides/gs/serving-web-content/&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://stackoverflow.com/questions/46391915/how-to-render-jsp-using-spring-boot-application/46399638#46399638&#34;&gt;https://stackoverflow.com/questions/46391915/how-to-render-jsp-using-spring-boot-application/46399638#46399638&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://stackoverflow.com/questions/45533908/unable-to-render-the-jsp-using-spring-boot/45543355#45543355&#34;&gt;https://stackoverflow.com/questions/45533908/unable-to-render-the-jsp-using-spring-boot/45543355#45543355&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://stackoverflow.com/questions/24661289/spring-boot-not-serving-static-content&#34;&gt;https://stackoverflow.com/questions/24661289/spring-boot-not-serving-static-content&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
</description>
      </item>
    
      <item>
        <title>Tour de Spring Boot: DI meets CoC</title>
        <link>https://htr3n.github.io/2018/12/spring-boot-di-meets-coc/</link>
        <pubDate>Tue, 04 Dec 2018 00:00:00 +0000</pubDate>
        
        <guid>6f108583da019c7509b0b9cf7f842a91</guid>
        <description>

&lt;p&gt;I started using Spring framework few years back in 2009 to develop demo systems for some EU projects. These projects featured a number of Web services some of which share back-end databases and some other talk to external services or WS-BPEL business processes.&lt;/p&gt;

&lt;p&gt;The &lt;a href=&#34;https://en.wikipedia.org/wiki/Dependency_injection&#34;&gt;dependency injection&lt;/a&gt; implemented in Spring works so well and on top of that, many other parts like Spring MVC,  data access, transactions messaging and even some third-party libraries such as Apache &lt;a href=&#34;http://activemq.apache.org/&#34;&gt;ActiveMQ&lt;/a&gt;, Apache &lt;a href=&#34;http://cxf.apache.org/&#34;&gt;CXF&lt;/a&gt; and JBoss (now Red Hat and likely IBM) &lt;a href=&#34;http://hibernate.org/orm/&#34;&gt;Hibernate ORM&lt;/a&gt;, and many other helper libraries all came to play nicely.&lt;/p&gt;

&lt;p&gt;One of my concerns is that configuring a complex Spring based project is truly tedious and error-prone. I have made countless trial-and errors and gone through lots of warning and errors, not to mention XML verbosity and complexity, Maven dependency hell, the conflicts or incompatibilities among numerous dependencies. Fast forward to 2018 I want to refresh my experience through existing Spring projects. I was thinking about similar rough paths when upgrading Spring and Hibernate to some prior versions until discovering &lt;a href=&#34;http://spring.io/projects/spring-boot&#34;&gt;Spring Boot&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;To be precise, Spring Boot is not a magic wand that would help us to navigate through the forest of Spring framework complexity or automatically resolve certain problems. It is more or less some sort of &lt;a href=&#34;https://en.wikipedia.org/wiki/Convention_over_configuration&#34;&gt;&lt;em&gt;convention over configuration&lt;/em&gt;&lt;/a&gt; that might reduce significant effort on making Spring applications quickly up and running as well as ensure better compatibilities among integrated libraries.&lt;/p&gt;

&lt;h2 id=&#34;quickstart&#34;&gt;A Quick Start&lt;/h2&gt;

&lt;p&gt;Let&amp;rsquo;s consider the following Java code defining a REST controller for an endpoint &amp;ldquo;&lt;code&gt;/&lt;/code&gt;&amp;rdquo; that shall display a greeting.&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-java&#34;&gt;@RestController
class HelloWorld {
  
  @RequestMapping(&amp;quot;/&amp;quot;)
  public String hello(){
    return &amp;quot;Hello World!&amp;quot;;
  }
}
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;Just with this very minimal code, we can have a working Spring application. Assume that the &lt;a href=&#34;https://docs.spring.io/spring-boot/docs/current/reference/html/cli.html&#34;&gt;Spring Boot CLI&lt;/a&gt; is available, start our application with the following command.&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-sh&#34;&gt;spring run HelloWorld.java
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;Spring Boot will launch an embedded Tomcat server and initialise a Web application to serve the endpoint at &amp;ldquo;&lt;a href=&#34;http://localhost:8080&#34;&gt;http://localhost:8080&lt;/a&gt;&amp;rdquo;. Visiting this address will give us &amp;ldquo;&lt;em&gt;Hello World!&lt;/em&gt;&amp;rdquo;. What could be cooler than that !?&lt;/p&gt;

&lt;p&gt;Now, let&amp;rsquo;s start a quick tour on some more appealing features that Spring Boot 2.1.0 offers.&lt;/p&gt;

&lt;h2 id=&#34;bootstrapping&#34;&gt;Project Bootstrapping&lt;/h2&gt;

&lt;p&gt;Using &lt;a href=&#34;https://start.spring.io/&#34;&gt;Spring Initializr&lt;/a&gt; directly or via IDE /CLI, we can quickly bootstrap a dead simple or full-blown Spring development project. For instance, this command will create a Spring application development project, namely, &lt;code&gt;hello-world&lt;/code&gt;, with JPA and H2 database.&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-sh&#34;&gt;spring init --dependencies=web,data-jpa,h2 hello-world
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;After asking some questions such as the project&amp;rsquo;s and package&amp;rsquo;s names, the command line will download the core package and create a new development project that is ready to be imported to any IDE. Other than that, Eclipse or IntelliJ IDEA can just walk you through simple wizards in which you can craft your own project and choose the necessary components for the new project.&lt;/p&gt;

&lt;p&gt;&lt;img src=&#34;spring-boot-in-ide.png&#34; alt=&#34;Spring Boot project in Eclipse&#34; /&gt;&lt;/p&gt;

&lt;h2 id=&#34;dependency-management&#34;&gt;Build and Dependency Management&lt;/h2&gt;

&lt;p&gt;Spring Boot 2 works with Spring Framework 5 and requires at least Java 8. You can either choose Maven or Gradle build system when creating the project. An excerpt of Maven &lt;code&gt;pom.xml&lt;/code&gt; (stripped off few minor details) of our project is shown below.&lt;/p&gt;

&lt;div&gt;
  &lt;pre&gt;&lt;code class=&#34;language-xml&#34;&gt;&amp;lt;project&amp;gt;
  &amp;lt;modelVersion&amp;gt;4.0.0&amp;lt;/modelVersion&amp;gt;
  &amp;lt;groupId&amp;gt;io.github.htr3n&amp;lt;/groupId&amp;gt;
  &amp;lt;artifactId&amp;gt;hello-world&amp;lt;/artifactId&amp;gt;
  &amp;lt;version&amp;gt;0.0.1-SNAPSHOT&amp;lt;/version&amp;gt;
  &amp;lt;packaging&amp;gt;jar&amp;lt;/packaging&amp;gt;
  &amp;lt;name&amp;gt;hello-world&amp;lt;/name&amp;gt;
  &amp;lt;description&amp;gt;Demo project for Spring Boot&amp;lt;/description&amp;gt;
    
  &amp;lt;parent&amp;gt;
    &amp;lt;groupId&amp;gt;org.springframework.boot&amp;lt;/groupId&amp;gt;
    &amp;lt;artifactId&amp;gt;spring-boot-starter-parent&amp;lt;/artifactId&amp;gt;
    &amp;lt;version&amp;gt;2.1.0.RELEASE&amp;lt;/version&amp;gt;
    &amp;lt;relativePath/&amp;gt; &amp;lt;!-- lookup parent from repository --&amp;gt;
  &amp;lt;/parent&amp;gt;
    
  &amp;lt;properties&amp;gt;
    &amp;lt;project.build.sourceEncoding&amp;gt;UTF-8&amp;lt;/project.build.sourceEncoding&amp;gt;
    &amp;lt;project.reporting.outputEncoding&amp;gt;UTF-8&amp;lt;/project.reporting.outputEncoding&amp;gt;
    &amp;lt;java.version&amp;gt;1.8&amp;lt;/java.version&amp;gt;
  &amp;lt;/properties&amp;gt;
    
  &amp;lt;dependencies&amp;gt;
    &amp;lt;dependency&amp;gt;
      &amp;lt;groupId&amp;gt;org.springframework.boot&amp;lt;/groupId&amp;gt;
      &amp;lt;artifactId&amp;gt;spring-boot-starter-data-jpa&amp;lt;/artifactId&amp;gt;
    &amp;lt;/dependency&amp;gt;
    &amp;lt;dependency&amp;gt;
      &amp;lt;groupId&amp;gt;org.springframework.boot&amp;lt;/groupId&amp;gt;
      &amp;lt;artifactId&amp;gt;spring-boot-starter-web&amp;lt;/artifactId&amp;gt;
    &amp;lt;/dependency&amp;gt;
    &amp;lt;dependency&amp;gt;
      &amp;lt;groupId&amp;gt;com.h2database&amp;lt;/groupId&amp;gt;
      &amp;lt;artifactId&amp;gt;h2&amp;lt;/artifactId&amp;gt;
      &amp;lt;scope&amp;gt;runtime&amp;lt;/scope&amp;gt;
    &amp;lt;/dependency&amp;gt;
    &amp;lt;dependency&amp;gt;
      &amp;lt;groupId&amp;gt;org.springframework.boot&amp;lt;/groupId&amp;gt;
      &amp;lt;artifactId&amp;gt;spring-boot-starter-test&amp;lt;/artifactId&amp;gt;
      &amp;lt;scope&amp;gt;test&amp;lt;/scope&amp;gt;
    &amp;lt;/dependency&amp;gt;
  &amp;lt;/dependencies&amp;gt;
  &amp;lt;build&amp;gt;
    &amp;lt;plugins&amp;gt;
      &amp;lt;plugin&amp;gt;
        &amp;lt;groupId&amp;gt;org.springframework.boot&amp;lt;/groupId&amp;gt;
        &amp;lt;artifactId&amp;gt;spring-boot-maven-plugin&amp;lt;/artifactId&amp;gt;
      &amp;lt;/plugin&amp;gt;
    &amp;lt;/plugins&amp;gt;
  &amp;lt;/build&amp;gt;
&amp;lt;/project&amp;gt;
&lt;/code&gt;&lt;/pre&gt;
  &lt;div class=&#34;code--caption&#34;&gt;A simplified &lt;code&gt;pom.xml&lt;/code&gt;&lt;/div&gt;
&lt;/div&gt;


&lt;p&gt;This POM inherits many &lt;a href=&#34;https://docs.spring.io/spring-boot/docs/current/reference/html/using-boot-build-systems.html#using-boot-maven&#34;&gt;useful default settings and values&lt;/a&gt; from &lt;code&gt;spring-boot-starter-parent&lt;/code&gt;.  We might opt to not use &lt;code&gt;spring-boot-starter-parent&lt;/code&gt; and go old-school to set everything up on our own. I have just recalled working with Spring 3 and trying to integrate an embedded Jetty server. I really struggled with different Jetty versions as well as other libraries to make them click. When I tried to upgrade the legacy projects to newer Spring and Hibernate versions, things all turned out really messy with loads of mysterious errors.&lt;/p&gt;

&lt;p&gt;Spring Boot eases this kind of burden with some opinionated design and configuration decisions. We can truly leverage its strength and choose among a set of &lt;a href=&#34;https://docs.spring.io/spring-boot/docs/current/reference/html/using-boot-build-systems.html#using-boot-starter&#34;&gt;starters&lt;/a&gt; (beginning with &lt;code&gt;spring-boot-starter-&lt;/code&gt;). The starters are intended for better compatiblity and smooth integration.&lt;/p&gt;

&lt;p&gt;In the &lt;code&gt;hello-world&lt;/code&gt; project, we have chosen three components &lt;code&gt;spring-boot-starter-data-jpa&lt;/code&gt; (JPA), &lt;code&gt;spring-boot-starter-web&lt;/code&gt; (Web), &lt;code&gt;spring-boot-starter-test&lt;/code&gt; (for testing) along with &lt;code&gt;mysql-connector-java&lt;/code&gt; (MySQL).&lt;/p&gt;

&lt;h2 id=&#34;autoconfiguration&#34;&gt;Autoconfiguration&lt;/h2&gt;

&lt;p&gt;Intelligent autoconfiguration is perhaps one of the most prominent and important parts of Spring Boot. There are different levels of configuring a Spring based application. The simplest form of autoconfiguration is the &amp;ldquo;&lt;em&gt;Hello World&lt;/em&gt;&amp;rdquo; example mentioned above. The new Maven based project created via the wizard or command line consists of &lt;code&gt;pom.xml&lt;/code&gt; along with &lt;code&gt;application.properties&lt;/code&gt;, &lt;code&gt;HelloWorldApplication.java&lt;/code&gt; and &lt;code&gt;HelloWorldApplicationTest.java&lt;/code&gt; as shown in Figure 1.&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-java&#34;&gt;package io.github.htr3n;

import org.springframework.boot.SpringApplication;
import org.springframework.boot.autoconfigure.SpringBootApplication;

@SpringBootApplication
public class HelloWorldApplication {

  public static void main(String[] args) {
    SpringApplication.run(HelloWorldApplication.class, args);
  }
}
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;The &lt;code&gt;HelloWorldApplication&lt;/code&gt; class is annotated with &lt;a href=&#34;https://docs.spring.io/spring-boot/docs/current/api/org/springframework/boot/autoconfigure/SpringBootApplication.html&#34;&gt;&lt;code&gt;@SpringBootApplication&lt;/code&gt;&lt;/a&gt; which is actually an umbrella for three annotations:&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;https://docs.spring.io/spring-boot/docs/current/api/org/springframework/boot/autoconfigure/EnableAutoConfiguration.html&#34;&gt;&lt;code&gt;@EnableAutoConfiguration&lt;/code&gt;&lt;/a&gt; that triggers auto-configuration of Spring application context.&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://docs.spring.io/spring-framework/docs/5.1.2.RELEASE/javadoc-api/org/springframework/context/annotation/ComponentScan.html?is-external=true&#34;&gt;&lt;code&gt;@ComponentScan&lt;/code&gt;&lt;/a&gt; that enables the scanning of classes annotated with &lt;code&gt;@Component&lt;/code&gt; or its sub-types on the package where the application is located (that&amp;rsquo;s why &lt;a href=&#34;https://docs.spring.io/spring-boot/docs/current/reference/html/using-boot-structuring-your-code.html#using-boot-locating-the-main-class&#34;&gt;it is often recommended&lt;/a&gt; to place the class annotated with &lt;code&gt;@SpringBootApplication&lt;/code&gt; at the root package above other classes)&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://docs.spring.io/spring-boot/docs/current/api/org/springframework/boot/SpringBootConfiguration.html&#34;&gt;&lt;code&gt;@SpringBootConfiguration&lt;/code&gt;&lt;/a&gt; is an alias to &lt;a href=&#34;https://docs.spring.io/spring-framework/docs/5.1.2.RELEASE/javadoc-api/org/springframework/context/annotation/Configuration.html?is-external=true&#34;&gt;&lt;code&gt;@Configuration&lt;/code&gt;&lt;/a&gt; allows for registering some more beans in the context or import additional configuration classes&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;The aforementioned annotations are sufficient to launch not-so-complex Spring applications. In case one wants to fine-tune the application context autoloading, individual annocations mentioned above and/or customised annotations can be leveraged.&lt;/p&gt;

&lt;p&gt;Examining the Spring Boot &lt;a href=&#34;https://github.com/spring-projects/spring-boot/tree/master/spring-boot-project/spring-boot-autoconfigure/src/main/java/org/springframework/boot/autoconfigure&#34;&gt;auto-configure project&lt;/a&gt; on Github, we can see many &lt;a href=&#34;https://github.com/spring-projects/spring-boot/blob/v2.1.0.RELEASE/spring-boot-project/spring-boot-autoconfigure/src/main/resources/META-INF/spring.factories&#34;&gt;scripts&lt;/a&gt; for essential libraries. Depending on what are detected on the classpath and the application-specific configuration directives, Spring Boot will automatically include and configure the corresponding components.&lt;/p&gt;

&lt;p&gt;We can explicitly disable certain parts using &lt;code&gt;@EnableAutoConfiguration(exclude={class1, class2, ...})&lt;/code&gt; or the directive &amp;ldquo;&lt;code&gt;spring.autoconfigure.exclude=class1, class2, ...&lt;/code&gt;&amp;rdquo; in &lt;code&gt;application.properties&lt;/code&gt;.&lt;/p&gt;

&lt;h3 id=&#34;app-launcher-configuration&#34;&gt;App Launcher Configuration&lt;/h3&gt;

&lt;p&gt;The &lt;a href=&#34;https://docs.spring.io/spring-boot/docs/current/api/org/springframework/boot/SpringApplication.html&#34;&gt;&lt;code&gt;SpringApplication&lt;/code&gt;&lt;/a&gt; class is the main launcher of a Spring application. Prior to Spring Boot, in order to start a Spring app we have to manually initialise an &lt;a href=&#34;https://docs.spring.io/spring-framework/docs/5.1.2.RELEASE/javadoc-api/org/springframework/context/ApplicationContext.html?is-external=true&#34;&gt;&lt;code&gt;ApplicationContext&lt;/code&gt;&lt;/a&gt;, parse system- and application-specific properties and input arguments (if needed), load all necessary beans and/or launch an embedded Web server like &lt;a href=&#34;https://tomcat.apache.org/&#34;&gt;Tomcat&lt;/a&gt; or &lt;a href=&#34;https://www.eclipse.org/jetty/&#34;&gt;Jetty&lt;/a&gt;. Now, all of these tasks will be automatically done using &lt;code&gt;SpringApplication&lt;/code&gt; with &lt;code&gt;@SpringBootApplication&lt;/code&gt; (or a combination of its sub-annotations).&lt;/p&gt;

&lt;p&gt;Apart from &lt;a href=&#34;https://docs.spring.io/spring-boot/docs/current/reference/html/boot-features-external-config.html#boot-features-external-config-application-property-files&#34;&gt;&lt;code&gt;application.properties&lt;/code&gt;&lt;/a&gt; (or &lt;code&gt;.yml&lt;/code&gt;), we can configure and customise a Spring app using a &lt;code&gt;SpringApplication&lt;/code&gt; or &lt;a href=&#34;https://docs.spring.io/spring-boot/docs/current/reference/html/boot-features-spring-application.html#boot-features-fluent-builder-api&#34;&gt;&lt;code&gt;SpringApplicationBuilder&lt;/code&gt;&lt;/a&gt; instance. For instance, the following code will turn off the banner when launching our Spring app&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-java&#34;&gt;public static void main(String[] args) {
  SpringApplication app = new SpringApplication(HelloWorldApplication.class);
  app.setBannerMode(Banner.Mode.OFF);
  app.run(args);
}
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;which is equivalent to &lt;code&gt;spring.main.banner-mode=off&lt;/code&gt; in &lt;code&gt;application.properties&lt;/code&gt;. Spring Boot comes with numerous predefined properties. Indeed, almost every autoconfigured component offers some default property settings. These predefined settings will be overriden with our own settings, if exist.&lt;/p&gt;

&lt;h3 id=&#34;properties-loading&#34;&gt;Properties Loading&lt;/h3&gt;

&lt;p&gt;By default, Spring Boot will bind external properties from &lt;code&gt;application.properties&lt;/code&gt; (or &lt;code&gt;.yml&lt;/code&gt;) at runtime. That is called &lt;a href=&#34;https://docs.spring.io/spring-boot/docs/current/reference/html/boot-features-external-config.html&#34;&gt;externalized configuration&lt;/a&gt;. More details on application properties can be found &lt;a href=&#34;https://docs.spring.io/spring-boot/docs/current/reference/html/common-application-properties.html&#34;&gt;here&lt;/a&gt;.&lt;/p&gt;

&lt;blockquote class=&#34;warning&#34;&gt;
    &lt;strong&gt;Warning&lt;/strong&gt;&lt;br&gt;
    Please beware of the trailing whitespaces in Spring &lt;code&gt;.properties&lt;/code&gt; as Spring Boot &lt;a href=&#34;https://github.com/spring-projects/spring-boot/issues/4106#issuecomment-173278825&#34;&gt;won&amp;rsquo;t trim off any of them&lt;/a&gt; and in some cases that might lead to unexpected issues or even crash the applications (see &lt;a href=&#34;https://htr3n.github.io/2018/11/spring-boot-trailing-whitespaces/&#34;&gt;my other relevant post&lt;/a&gt;)
&lt;/blockquote&gt;


&lt;p&gt;Besides the default &lt;code&gt;application.properties&lt;/code&gt;, Spring allows us to activate various profiles using the naming convention &lt;code&gt;application-{profile}.properties&lt;/code&gt;. It comes very handy in case we look forward to separating testing-specific environments, for example, using &lt;code&gt;application-test.properties&lt;/code&gt;, from production environments. We can still ask to load property sources with &lt;a href=&#34;https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/context/annotation/PropertySource.html&#34;&gt;&lt;code&gt;@PropertySource&lt;/code&gt;&lt;/a&gt; as usual in Spring.&lt;/p&gt;

&lt;h3 id=&#34;components-and-beans-configuration&#34;&gt;Components and Beans Configuration&lt;/h3&gt;

&lt;p&gt;Other components and bean configurations can be loaded from different sources including XML files, Java classes (with &lt;a href=&#34;https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/context/annotation/Configuration.html&#34;&gt;&lt;code&gt;@Configuration&lt;/code&gt;&lt;/a&gt;), or Groovy (also annotated with &lt;code&gt;@Configuration&lt;/code&gt; as Java or via Groovy &lt;a href=&#34;https://docs.spring.io/spring-boot/docs/current/reference/html/cli-groovy-beans-dsl.html&#34;&gt;Beans DSL&lt;/a&gt; &amp;ldquo;&lt;code&gt;beans {...}&lt;/code&gt;&amp;rdquo;).&lt;/p&gt;

&lt;p&gt;Note that, all components in the sub-paths under the main class annotated with &lt;code&gt;@SpringBootApplication&lt;/code&gt; will be automatically scanned and initialised. The rest of beans configuration will be handed over to Spring&amp;rsquo;s &lt;a href=&#34;https://docs.spring.io/spring-boot/docs/current/reference/html/using-boot-spring-beans-and-dependency-injection.html&#34;&gt;&lt;em&gt;dependency injection mechanism&lt;/em&gt;&lt;/a&gt;.&lt;/p&gt;

&lt;h3 id=&#34;web-configuration&#34;&gt;Web Configuration&lt;/h3&gt;

&lt;p&gt;Spring Boot often &lt;a href=&#34;https://docs.spring.io/spring-boot/docs/current/reference/html/boot-features-spring-application.html#boot-features-web-environment&#34;&gt;tries to establish&lt;/a&gt; an appropriate &lt;a href=&#34;https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/context/ApplicationContext.html&#34;&gt;&lt;code&gt;ApplicationContext&lt;/code&gt;&lt;/a&gt; based on classpath scanning and app-specific configurations. For instance, to enable the traditional Spring Web MVC, I simply include the component &lt;code&gt;spring-boot-starter-web&lt;/code&gt; in the POM as &lt;a href=&#34;#dependency-management&#34;&gt;shown in the previous section&lt;/a&gt;. Spring Boot will automatically adds relevant components for resolving and serving Web pages and resources.&lt;/p&gt;

&lt;p&gt;We can add extra components such as &lt;a href=&#34;https://docs.spring.io/spring/docs/current/spring-framework-reference/web-reactive.html&#34;&gt;WebFlux&lt;/a&gt;&amp;mdash;the reactive framework added in Spring 5+  (&lt;code&gt;spring-boot-starter-webflux&lt;/code&gt;), &lt;a href=&#34;https://www.thymeleaf.org/&#34;&gt;Thymeleaf&lt;/a&gt; template engine (&lt;code&gt;spring-boot-starter-thymeleaf&lt;/code&gt;), Spring Web services (&lt;code&gt;spring-boot-starter-web-services&lt;/code&gt;) and &lt;a href=&#34;https://docs.spring.io/spring/docs/current/spring-framework-reference/web.html#websocket&#34;&gt;WebSocket&lt;/a&gt;  (&lt;code&gt;spring-boot-starter-websocket&lt;/code&gt;).&lt;/p&gt;

&lt;p&gt;Spring &lt;a href=&#34;https://docs.spring.io/spring/docs/current/spring-framework-reference/web.html&#34;&gt;Web MVC&lt;/a&gt; is totally capable to handle most of HTTP requests via &lt;a href=&#34;https://docs.spring.io/spring/docs/current/spring-framework-reference/web.html&#34;&gt;servlets&lt;/a&gt; or &lt;a href=&#34;https://docs.spring.io/spring/docs/current/javadoc-api/org/springframework/stereotype/Controller.html&#34;&gt;controllers&lt;/a&gt; like the simple Hello World example above. Should you need more advanced control of RESTful endpoints, just add either one of &lt;a href=&#34;http://spring.io/projects/spring-hateoas&#34;&gt;Spring HATEOAS&lt;/a&gt; (&lt;code&gt;spring-boot-starter-hateoas&lt;/code&gt;), &lt;a href=&#34;https://jersey.github.io/&#34;&gt;Jersey&lt;/a&gt; (&lt;code&gt;spring-boot-starter-jersey&lt;/code&gt;) or &lt;a href=&#34;https://cxf.apache.org/&#34;&gt;Apache CXF&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;By default, the Web starter will use Tomcat as the underlying embedded application server. When we opt for another server, we must explicitly exclude Tomcat and add either &lt;code&gt;spring-boot-starter-jetty&lt;/code&gt; (Jetty) or &lt;code&gt;spring-boot-starter-undertow&lt;/code&gt; (Undertow) in our POM.&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-xml&#34;&gt;&amp;lt;dependency&amp;gt;
  &amp;lt;groupId&amp;gt;org.springframework.boot&amp;lt;/groupId&amp;gt;
  &amp;lt;artifactId&amp;gt;spring-boot-starter-web&amp;lt;/artifactId&amp;gt;
  &amp;lt;exclusions&amp;gt;
    &amp;lt;exclusion&amp;gt;
      &amp;lt;groupId&amp;gt;org.springframework.boot&amp;lt;/groupId&amp;gt;
      &amp;lt;artifactId&amp;gt;spring-boot-starter-tomcat&amp;lt;/artifactId&amp;gt;
    &amp;lt;/exclusion&amp;gt;
  &amp;lt;/exclusions&amp;gt;
&amp;lt;/dependency&amp;gt;
&amp;lt;dependency&amp;gt;
  &amp;lt;groupId&amp;gt;org.springframework.boot&amp;lt;/groupId&amp;gt;
  &amp;lt;artifactId&amp;gt;spring-boot-starter-jetty&amp;lt;/artifactId&amp;gt;
&amp;lt;/dependency&amp;gt;
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;Many of the embedded server&amp;rsquo;s settings can be defined in &lt;code&gt;application.properties&lt;/code&gt; such as the network address, port, sessions, and so on. These settings can also be done programmatically by defining bean implementing &lt;a href=&#34;https://docs.spring.io/spring-boot/docs/current/api/org/springframework/boot/web/server/WebServerFactoryCustomizer.html&#34;&gt;&lt;code&gt;WebServerFactoryCustomizer&lt;/code&gt;&lt;/a&gt; that enables access to customise the underlying &lt;a href=&#34;https://docs.spring.io/spring-boot/docs/current/api/org/springframework/boot/web/server/WebServerFactory.html&#34;&gt;&lt;code&gt;WebServerFactory&lt;/code&gt;&lt;/a&gt;. For instance, you can refer to more fine-tuned customisations for &lt;a href=&#34;https://github.com/spring-projects/spring-boot/blob/v2.1.0.RELEASE/spring-boot-project/spring-boot-autoconfigure/src/main/java/org/springframework/boot/autoconfigure/web/embedded/JettyWebServerFactoryCustomizer.java&#34;&gt;Jetty&lt;/a&gt;, &lt;a href=&#34;https://github.com/spring-projects/spring-boot/blobv2.1.0.RELEASE/spring-boot-project/spring-boot-autoconfigure/src/main/java/org/springframework/boot/autoconfigure/web/embedded/TomcatWebServerFactoryCustomizer.java&#34;&gt;Tomcat&lt;/a&gt;, or &lt;a href=&#34;https://github.com/spring-projects/spring-boot/blob/v2.1.0.RELEASE/spring-boot-project/spring-boot-autoconfigure/src/main/java/org/springframework/boot/autoconfigure/web/embedded/UndertowWebServerFactoryCustomizer.java&#34;&gt;Undertow&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;Following up our example on excluding Tomcat and adding Jetty, we can create a simple bean to change the Jetty server from the default port &lt;code&gt;8080&lt;/code&gt; to &lt;code&gt;9999&lt;/code&gt;.&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-java&#34;&gt;package io.github.htr3n;

import org.springframework.boot.web.server.ConfigurableWebServerFactory;
import org.springframework.boot.web.server.WebServerFactoryCustomizer;
import org.springframework.stereotype.Component;

@Component
public class JettyServerCustomizer implements WebServerFactoryCustomizer&amp;lt;ConfigurableWebServerFactory&amp;gt; {

  @Override
  public void customize(ConfigurableWebServerFactory factory) {
    factory.setPort(9999);
  }
}
&lt;/code&gt;&lt;/pre&gt;

&lt;h3 id=&#34;data-access-configuration&#34;&gt;Data Access Configuration&lt;/h3&gt;

&lt;p&gt;Going through various versions, Spring framework always provides considerable support and different abstraction levels for &lt;a href=&#34;http://spring.io/projects/spring-data&#34;&gt;database access&lt;/a&gt;. In general, it often requires some configurations for data sources and sometimes the intermediate layers such as pooling or caching.&lt;/p&gt;

&lt;p&gt;Spring Boot has taken further steps forward by auto-configuring in some popular circumstances, for instance, embedded databases, database pooling, to name but a few. What we need to do is to add appropriate dependencies. In the &lt;code&gt;hello-world&lt;/code&gt; project, &lt;a href=&#34;https://www.h2database.com/html/main.html&#34;&gt;H2 database engine&lt;/a&gt; will be auto-configured by Spring Boot.&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-xml&#34;&gt;&amp;lt;dependencies&amp;gt;
  ...
  &amp;lt;dependency&amp;gt;
    &amp;lt;groupId&amp;gt;com.h2database&amp;lt;/groupId&amp;gt;
    &amp;lt;artifactId&amp;gt;h2&amp;lt;/artifactId&amp;gt;
    &amp;lt;scope&amp;gt;runtime&amp;lt;/scope&amp;gt;
  &amp;lt;/dependency&amp;gt;
  ...
&amp;lt;/dependencies&amp;gt;
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;Note that, including database dependencies alone won&amp;rsquo;t trigger any auto-configuration. It&amp;rsquo;s only when Spring Boot found some sort of data access components such as &lt;code&gt;spring-boot-starter-jdbc&lt;/code&gt;, &lt;code&gt;spring-boot-starter-data-jpa&lt;/code&gt; (which transitively embraces &lt;code&gt;spring-jdbc&lt;/code&gt;) on the classpath.&lt;/p&gt;

&lt;p&gt;Atop the data connection layer, Spring Boot takes the liberty of &lt;a href=&#34;https://docs.spring.io/spring-boot/docs/current/reference/html/boot-features-sql.html#boot-features-connect-to-production-database&#34;&gt;choosing other data access components&lt;/a&gt;. Note that the design decisions taken by Spring Boot are often based on some popular and widely-used conventions in Spring based application developments. The decisions for data access, like other components, can be overriden with our own information. For example, I can define my own H2 data source in &lt;code&gt;application.properties&lt;/code&gt;.&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-properties&#34;&gt;spring.datasource.url=jdbc:h2:mem:helloword_db;DB_CLOSE_ON_EXIT=FALSE
spring.datasource.driverClassName=org.h2.Driver
spring.datasource.username=sa
spring.datasource.password=sa
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;Next, Spring Boot will try to initialise the database. High level data access components such as &lt;a href=&#34;https://spring.io/projects/spring-data-jpa&#34;&gt;Spring Data JPA&lt;/a&gt;, &lt;a href=&#34;http://hibernate.org/orm/&#34;&gt;Hibernate&lt;/a&gt; can be customised via &lt;a href=&#34;https://docs.spring.io/spring-boot/docs/current/reference/html/howto-database-initialization.html#howto-database-initialization&#34;&gt;specific properties&lt;/a&gt;. Nonetheless, Spring Boot can look into the classpath for a &lt;a href=&#34;https://en.wikipedia.org/wiki/Data_definition_language&#34;&gt;schema definition script&lt;/a&gt;, namely, &lt;code&gt;schema.sql&lt;/code&gt;, and a &lt;a href=&#34;https://en.wikipedia.org/wiki/Data_manipulation_language&#34;&gt;data manipulation script&lt;/a&gt;, namely, &lt;code&gt;data.sql&lt;/code&gt; and execute them if found. Here is an example of these scripts for a simple database &lt;code&gt;customer&lt;/code&gt;.&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-sql&#34;&gt;-- schema.sql
DROP TABLE customer;
CREATE TABLE customer(
  id integer not null auto_increment,
  name varchar(255) not null,
  email varchar (255) not null,
  primary key (id)
);
-- data.sql
INSERT INTO customer(name, email) VALUES (&#39;Bob&#39;, &#39;bob@test.com&#39;);
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;Instead, you may indicate the initialising scripts for specific databases using the naming convention &lt;code&gt;schema-${platform}.sql&lt;/code&gt; and &lt;code&gt;data-${platform}.sql&lt;/code&gt; where &lt;code&gt;platform&lt;/code&gt; is taken from &lt;code&gt;spring.datasource.platform&lt;/code&gt;. This convention helps us to separate vendor-specific data creation and manipulation scripts.&lt;/p&gt;

&lt;p&gt;Last but not least, Spring Boot classpath scanning mechanism may help us to entirely skip JPA&amp;rsquo;s  &lt;code&gt;persistence.xml&lt;/code&gt; as it will try to search for all classes annotated with &lt;a href=&#34;https://docs.oracle.com/javaee/7/api/javax/persistence/Entity.html&#34;&gt;&lt;code&gt;@Entity&lt;/code&gt;&lt;/a&gt;, &lt;a href=&#34;https://docs.oracle.com/javaee/7/api/javax/persistence/Embeddable.html&#34;&gt;&lt;code&gt;@Embeddable&lt;/code&gt;&lt;/a&gt;, or &lt;a href=&#34;https://docs.oracle.com/javaee/7/api/javax/persistence/MappedSuperclass.html&#34;&gt;&lt;code&gt;@MappedSuperclass&lt;/code&gt;&lt;/a&gt; in our application&amp;rsquo;s classpath.&lt;/p&gt;

&lt;h2 id=&#34;development-support&#34;&gt;Development Support&lt;/h2&gt;

&lt;h3 id=&#34;testing&#34;&gt;Testing&lt;/h3&gt;

&lt;p&gt;Testing is always a crucial part of any development process and Spring apps are no exception. That&amp;rsquo;s why Spring Boot provides &lt;code&gt;spring-boot-starter-test&lt;/code&gt; that comprises several handy components such as &lt;a href=&#34;https://junit.org/junit4/&#34;&gt;JUnit&lt;/a&gt;, &lt;a href=&#34;https://docs.spring.io/spring/docs/current/spring-framework-reference/testing.html&#34;&gt;Spring Tests&lt;/a&gt;, &lt;a href=&#34;https://site.mockito.org/&#34;&gt;Mockito&lt;/a&gt;, to name but a few.&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-java&#34;&gt;import org.junit.Test;
import org.junit.runner.RunWith;
import org.springframework.boot.test.context.SpringBootTest;
import org.springframework.test.context.junit4.SpringRunner;

@RunWith(SpringRunner.class)
@SpringBootTest
public class ` {  
  @Test
  public void contextLoads() {
  }
}
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;Consider inside the project &lt;code&gt;hello-world&lt;/code&gt;, we have a simple class &lt;code&gt;HelloWorldApplicationTests&lt;/code&gt; annotated with &lt;a href=&#34;https://docs.spring.io/spring-boot/docs/current/api/org/springframework/boot/test/context/SpringBootTest.html&#34;&gt;&lt;code&gt;@SpringBootTest&lt;/code&gt;&lt;/a&gt; that detects and initialises Spring Boot&amp;rsquo;s application context and testing environment. We can fine tune the testing environment in a similar manner as production&amp;rsquo;s (i.e. with &lt;a href=&#34;https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/context/annotation/Configuration.html&#34;&gt;&lt;code&gt;@Configuration&lt;/code&gt;&lt;/a&gt;, &lt;a href=&#34;https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/test/context/ContextConfiguration.html&#34;&gt;&lt;code&gt;@ContextConfiguration&lt;/code&gt;&lt;/a&gt; along with &lt;a href=&#34;https://docs.spring.io/spring-boot/docs/current/api/org/springframework/boot/test/context/TestConfiguration.html&#34;&gt;&lt;code&gt;@TestConfiguration&lt;/code&gt;&lt;/a&gt;).&lt;/p&gt;

&lt;p&gt;We won&amp;rsquo;t delve into evey detail of testing support but you can find &lt;a href=&#34;https://docs.spring.io/spring-boot/docs/current/reference/html/test-auto-configuration.html&#34;&gt;an extensive list of test auto-configurations&lt;/a&gt; for JDBC, JPA, Neo, Redis, REST, Web MVC, and WebFlux as well as a rich documentation of Spring Boot testing features &lt;a href=&#34;https://docs.spring.io/spring-boot/docs/current/reference/html/boot-features-testing.html&#34;&gt;here&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;In &lt;a href=&#34;https://htr3n.github.io/2018/11/test-driven-spring-jdbc/&#34;&gt;one of my previous posts&lt;/a&gt;, we can see that the annotation &lt;a href=&#34;https://docs.spring.io/spring-boot/docs/current/api/org/springframework/boot/test/autoconfigure/jdbc/JdbcTest.html&#34;&gt;&lt;code&gt;@JdbcTest&lt;/code&gt;&lt;/a&gt; has simplified a lot of settings needed for loading up databases, testing CRUD app with automatic transactions. As such it truly helps me better focus on the actual testing logics.&lt;/p&gt;

&lt;h3 id=&#34;troubleshooting&#34;&gt;Troubleshooting&lt;/h3&gt;

&lt;p&gt;In order to dig deeper or to resolve bugs for our Spring apps, we may need more detailed information on logs and traces. Just start the Spring application under analysis with the command line option&amp;rdquo;&lt;code&gt;--debug&lt;/code&gt;&amp;rdquo;, system property &amp;ldquo;&lt;code&gt;-Ddebug&lt;/code&gt;&amp;rdquo;,  or set &amp;ldquo;&lt;code&gt;debug=true&lt;/code&gt;&amp;rdquo; in &lt;code&gt;application.properties&lt;/code&gt;. Here is an example of enabling debugging using command line.&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-sh&#34;&gt;mvn spring-boot:run --debug
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;The &amp;ldquo;&lt;code&gt;--debug&lt;/code&gt;&amp;rdquo; option will enable the &lt;code&gt;DEBUG&lt;/code&gt; logging level for &lt;em&gt;some selected core Spring components&lt;/em&gt;. Likewise, we can also enable &lt;code&gt;TRACE&lt;/code&gt; logging level with the &amp;ldquo;&lt;code&gt;--trace&amp;quot;&lt;/code&gt; or &amp;ldquo;&lt;code&gt;trace=true&lt;/code&gt;&amp;rdquo; in &lt;code&gt;application.properties&lt;/code&gt;.&lt;/p&gt;

&lt;h3 id=&#34;developer-tools&#34;&gt;Developer Tools&lt;/h3&gt;

&lt;p&gt;Spring Boot equips us&amp;mdash;Spring app developers&amp;mdash;with a set of nice tools in hope that our life might become less miserable, or so they said ;)&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-xml&#34;&gt;&amp;lt;dependencies&amp;gt;
  ...
  &amp;lt;dependency&amp;gt;
    &amp;lt;groupId&amp;gt;org.springframework.boot&amp;lt;/groupId&amp;gt;
    &amp;lt;artifactId&amp;gt;spring-boot-devtools&amp;lt;/artifactId&amp;gt;
    &amp;lt;optional&amp;gt;true&amp;lt;/optional&amp;gt;
  &amp;lt;/dependency&amp;gt;
  ...
&amp;lt;/dependencies&amp;gt;
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;One of my favourie features provided by &lt;code&gt;spring-boot-devtools&lt;/code&gt; is &lt;em&gt;automatic restart&lt;/em&gt;. That is, a Spring app can automatically reload whenever any changes on the classpath are detected. As &lt;a href=&#34;https://docs.spring.io/spring-boot/docs/current/reference/html/using-boot-devtools.html#using-boot-devtools-restart&#34;&gt;stated in the documentation&lt;/a&gt;, it works really well with &lt;a href=&#34;https://livereload.com/&#34;&gt;LiveReload&lt;/a&gt; to instantly refresh the corresponding Web browsers. The &lt;em&gt;automatic restart&lt;/em&gt; feature mimics &lt;a href=&#34;https://zeroturnaround.com/software/jrebel/&#34;&gt;JRebel&lt;/a&gt; but in a slower and less advanced manner using two classloaders: a &lt;em&gt;base classloader&lt;/em&gt; for unchanged resources and a &lt;em&gt;restart classloader&lt;/em&gt; for changable ones.&lt;/p&gt;

&lt;h2 id=&#34;finale&#34;&gt;Finale&lt;/h2&gt;

&lt;p&gt;Most of the decisions taken in Spring Boot are opinionated and some might like or dislike, especially hard-core experienced developers who know deeply about Spring.&lt;/p&gt;

&lt;p&gt;Fairly speaking, the way Spring Boot hides the underneath complexity turns out rather ideal for beginners. An inexperienced developer can start the journey with minimal effort and configuration to have a running application. After that, more and more advanced configurations or features can be gradually  added or customised until we no longer rely on Spring Boot. Instead of struggling with complex settings, Spring app developers can now better concentrate on the core system business logics to be designed and implemented.&lt;/p&gt;

&lt;p&gt;Having said that, a Spring lover like me would truly appreciate the ideas and massive efforts behind the Spring Boot project to achieve an integrated set of various in-house and third-party libraries working smoothly. I think Spring development teams have made some bold and good decisions. With simple starting points and open to a plethora of advanced features, configurations and customisations, even experienced teams and developers would greatly benefit from that with more focused system designs and better speed of development.&lt;/p&gt;
</description>
      </item>
    
      <item>
        <title>Spring Boot properties issues with trailing whitespaces</title>
        <link>https://htr3n.github.io/2018/11/spring-boot-trailing-whitespaces/</link>
        <pubDate>Tue, 27 Nov 2018 00:00:00 +0000</pubDate>
        
        <guid>512a7f7eb163a10acc8266e5f0a34071</guid>
        <description>

&lt;blockquote&gt;
&lt;p&gt;&lt;strong&gt;TL;DR:&lt;/strong&gt;&lt;br&gt;Spring Boot does not trim off the &lt;a href=&#34;#root-causes&#34;&gt;trailing whitespaces in &lt;code&gt;*.properties&lt;/code&gt;&lt;/a&gt; that in turn might lead to some &lt;a href=&#34;#problem&#34;&gt;unexpected errors&lt;/a&gt;. As the Spring development team decides to &lt;a href=&#34;https://github.com/spring-projects/spring-boot/issues/4106#issuecomment-173278825&#34;&gt;not fix this issue&lt;/a&gt;, we can &lt;a href=&#34;#solutions&#34;&gt;configure code editors&lt;/a&gt; to avoid some similar problems.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;h2 id=&#34;fun&#34;&gt;The fun &amp;hellip;&lt;/h2&gt;

&lt;p&gt;Coming back working with Spring after few years, I was thrilled trying out Spring Boot 2 with its superb cool auto-configurations and many more. It&amp;rsquo;s a lot much more fun to work with than Spring 3 used in &lt;a href=&#34;https://github.com/htr3n/loan-approval-portal&#34;&gt;some&lt;/a&gt; of my previous projects.&lt;/p&gt;

&lt;h2 id=&#34;problem&#34;&gt;, the problem &amp;hellip;&lt;/h2&gt;

&lt;p&gt;When tinkering with Spring Boot, I found a half-funny half-annoying issue that made one of my Spring apps failed to launch. As the project is rather clumpy and full of experimenting code, here I will replicate this issue in a smaller and simpler scale.&lt;/p&gt;

&lt;p&gt;Let&amp;rsquo;s create a small Spring Boot project with JPA and H2. We can either use &lt;a href=&#34;https://start.spring.io/&#34;&gt;Spring Initialzr&lt;/a&gt;, &lt;a href=&#34;https://docs.spring.io/spring-boot/docs/current/reference/html/cli-using-the-cli.html&#34;&gt;Spring Boot CLI&lt;/a&gt;, or IDE such as IntelliJ IDEA, Eclipse or NetBeans. To keep it simple, I use Spring Boot CLI that &lt;a href=&#34;https://docs.spring.io/spring-boot/docs/current/reference/html/getting-started-installing-spring-boot.html#getting-started-installing-the-cli&#34;&gt;can be easily installed&lt;/a&gt;.&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-sh&#34;&gt;$ spring version
Spring CLI v2.1.0.RELEASE
$ spring init --dependencies=data-jpa,h2 spring-boot-trailing-spaces
Using service at https://start.spring.io
Project extracted to &#39;/dev/spring-framework/spring-boot-trailing-spaces&#39;
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;The newly created Spring application can be launched with Maven.&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-sh&#34;&gt;$ cd spring-boot-trailing-spaces
$ mvn spring-boot:run
...
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;There should be no problem as we have not made any changes. Now, open &amp;ldquo;&lt;code&gt;src/main/resources/application.properties&lt;/code&gt;&amp;rdquo; with an editor, then copy and paste the following code. Promise me that you don&amp;rsquo;t change the pasted code ;)&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-properties&#34;&gt;spring.datasource.url=jdbc:h2:mem:testdb
spring.datasource.driverClassName=org.h2.Driver 
spring.datasource.username=sa
spring.datasource.password=
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;These lines are typical data source configuration of an embedded H2 database engine that you might have seen around or used many times. Unfortunately, this time they will crash the Spring application.&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-sh&#34;&gt;$ mvn spring-boot:run
...
2018-11-27 21:20:54.289 ERROR 92868 --- [           main] o.s.boot.SpringApplication               : Application run failed
org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name &#39;org.springframework.boot.autoconfigure.orm.jpa.HibernateJpaConfiguration&#39;: Unsatisfied dependency expressed through constructor parameter 0; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name &#39;dataSource&#39; defined in class path resource [org/springframework/boot/autoconfigure/jdbc/DataSourceConfiguration$Hikari.class]: Bean instantiation via factory method failed; nested exception is org.springframework.beans.BeanInstantiationException: Failed to instantiate [com.zaxxer.hikari.HikariDataSource]: Factory method &#39;dataSource&#39; threw exception; nested exception is java.lang.IllegalStateException: Cannot load driver class: org.h2.Driver
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;Walking across the lengthy exception stack and error messages, the main culprit seems to be &amp;ldquo;&lt;em&gt;Cannot load driver class: org.h2.Driver&lt;/em&gt;&amp;rdquo;.&lt;/p&gt;

&lt;p&gt;Why is that?&lt;/p&gt;

&lt;h2 id=&#34;root-causes&#34;&gt;, the root causes? &amp;hellip;&lt;/h2&gt;

&lt;p&gt;The very first thing came to my mind is to check whether H2 jar is included properly in the classpath.&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-sh&#34;&gt;$ mvn dependency:tree
...
[INFO] +- com.h2database:h2:jar:1.4.197:runtime
...
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;Yup, it&amp;rsquo;s there!&lt;/p&gt;

&lt;p&gt;You can try further on, like I did, to remove &lt;code&gt;$HOME/.m2&lt;/code&gt; and re-run Maven or even restart the machine (but the app still doesn&amp;rsquo;t work!!!).&lt;/p&gt;

&lt;p&gt;I have searched around for this specific issue and found some similar or the same exception, for instance, &lt;a href=&#34;https://stackoverflow.com/a/51193609&#34;&gt;here&lt;/a&gt;, &lt;a href=&#34;https://stackoverflow.com/q/40137347&#34;&gt;here&lt;/a&gt;, &lt;a href=&#34;https://stackoverflow.com/q/4008011&#34;&gt;here&lt;/a&gt; or &lt;a href=&#34;https://stackoverflow.com/q/43616563&#34;&gt;here&lt;/a&gt;. None of the solutions there can fix it.&lt;/p&gt;

&lt;p&gt;It took me nearly half an hour to figure out the root cause. That is the single &lt;em&gt;trailing space&lt;/em&gt; at the end of &lt;code&gt;org.h2.Driver&lt;/code&gt;. Here I intentionally added in order to replicate exactly the original problem in my experimenting project. And the fault was mine who just lazily copied and pasted these few lines of Spring Boot configurations. After I removed all trailing spaces, the error disappeared.&lt;/p&gt;

&lt;p&gt;VoilÃ !&lt;/p&gt;

&lt;h2 id=&#34;solutions&#34;&gt;&amp;hellip; and the solutions?!&lt;/h2&gt;

&lt;p&gt;No copy &amp;amp; paste please, you might say ;)&lt;/p&gt;

&lt;p&gt;&lt;img src=&#34;no-copy-paste.jpg&#34; alt=&#34;&#34; /&gt;&lt;/p&gt;

&lt;p&gt;I would blame the Pivotal development team (just kidding ;) as they should have handled such a trivial issue better because trailing whitespaces, by default in most editors, are not always visible nor printable. Indeed, trailing whitespaces in Spring properties has driven many developers crazy &lt;a href=&#34;https://github.com/spring-projects/spring-boot/issues/7251&#34;&gt;here&lt;/a&gt;, &lt;a href=&#34;https://github.com/spring-projects/spring-boot/issues/7251&#34;&gt;here&lt;/a&gt;, &lt;a href=&#34;https://github.com/spring-projects/spring-boot/issues/13967&#34;&gt;here&lt;/a&gt;, &lt;a href=&#34;https://github.com/spring-projects/spring-boot/issues/5421&#34;&gt;here&lt;/a&gt; or &lt;a href=&#34;https://github.com/spring-projects/spring-boot/issues/4106&#34;&gt;here&lt;/a&gt;. Note that it&amp;rsquo;s for now &lt;a href=&#34;https://github.com/spring-projects/spring-boot/issues/4106&#34;&gt;official&lt;/a&gt; that the Spring Boot team won&amp;rsquo;t fix this because they &lt;a href=&#34;https://github.com/spring-projects/spring-boot/issues/4106#issuecomment-173278825&#34;&gt;cannot safely trim properties&lt;/a&gt;. So, it&amp;rsquo;s our responsibilities to take care of these whitespaces.&lt;/p&gt;

&lt;blockquote &gt;
    &lt;strong&gt;Sidenote:&lt;/strong&gt;&lt;br&gt;
    Whitespaces can also become &lt;a href=&#34;https://blog.codinghorror.com/whitespace-the-silent-killer/&#34;&gt;worst enemies to source code controls&lt;/a&gt; (but not all whitespaces are born equal, for instance, two continuous trailing spaces in some flavours of &lt;a href=&#34;https://daringfireball.net/projects/markdown/&#34;&gt;Markdown&lt;/a&gt; should be persisted as they are translated into HTML line-breaks &lt;code&gt;&amp;lt;br&amp;gt;&lt;/code&gt;).
&lt;/blockquote&gt;


&lt;p&gt;Fortunately, most of code editors somehow can help to remedy the aforementioned issue either with built-in features or extensions. There are two possible non-exclusive methods (which can be combined of course)&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;&lt;p&gt;&lt;strong&gt;M1&lt;/strong&gt;. Showing or highlighting whitespaces&lt;/p&gt;&lt;/li&gt;

&lt;li&gt;&lt;p&gt;&lt;strong&gt;M2&lt;/strong&gt;. (Automatically) trimming off whitespaces&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;For the first method, we configure the editors to force hard-to-see non-printable characters like tabs and spaces become visible. For instance, the problematic example above is shown in Visual Studio Code with the extension &lt;a href=&#34;https://marketplace.visualstudio.com/items?itemName=shardulm94.trailing-spaces&#34;&gt;Trailing Spaces&lt;/a&gt; helps to highlight the trailing whitespaces in red. This way might be a bit UI-intrusive as highlighted whitespaces everywhere can distract many of us. I personally don&amp;rsquo;t really like having the whitespaces and tabs messing up with my code structure.&lt;/p&gt;

&lt;p&gt;&lt;img src=&#34;trailing-space.png&#34; alt=&#34;Trailing spaces in code editor&#34; /&gt;&lt;/p&gt;

&lt;p&gt;The second method can be automatic or manual in which the editors (maybe with support from extensions) can remove the whitespaces during saving or via some editing commands. However, beware the issues with Markdown trailing whitespaces, we should use this option per language specific settings if possible.&lt;/p&gt;

&lt;p&gt;We will examine few popular code editors (please add more of yours in the comment) regarding these two methods.&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;&lt;p&gt;&lt;a href=&#34;https://atom.io/&#34;&gt;Atom&lt;/a&gt;&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;Either &lt;span class=&#34;menu&#34;&gt;Preferences â–¸ Show Invisibles&lt;/span&gt;
 or &lt;code&gt;config.cson&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;pre&gt;&lt;code class=&#34;language-json&#34;&gt;&amp;quot;*&amp;quot;:
  editor:
    ...
    showInvisibles: true
&lt;/code&gt;&lt;/pre&gt;

&lt;ul&gt;
&lt;li&gt;&lt;p&gt;&lt;a href=&#34;https://www.eclipse.org/&#34;&gt;Eclipse&lt;/a&gt;&lt;/p&gt;&lt;/li&gt;

&lt;li&gt;&lt;p&gt;(&lt;strong&gt;M1&lt;/strong&gt;) From version 3.7+:  &lt;span class=&#34;menu&#34;&gt;Preferences â–¸ General â–¸ Editors â–¸ Text Editors &lt;/span&gt;
: Turn on &amp;ldquo;&lt;em&gt;Show whitespace characters&lt;/em&gt;&amp;rdquo; and fine-tune the option via &amp;ldquo;&lt;em&gt;configure visibility&lt;/em&gt;&amp;ldquo;&lt;/p&gt;&lt;/li&gt;

&lt;li&gt;&lt;p&gt;(&lt;strong&gt;M2&lt;/strong&gt;) It&amp;rsquo;s rather tedious in Eclipse as many people have already complained. It&amp;rsquo;s perhaps due to the nature of Eclipse as a platform for several editors and plugins working together. IMHO, Eclipse should offer a common option to remove trailing whitespaces for all editors in the same level and place as &amp;ldquo;&lt;em&gt;Show whitespace characters&lt;/em&gt;&amp;rdquo; above. Each kind of editor then might offer specific and optimal ways for certain file types. Unfortunately, for now we have to configure for each file type editor or formatter. For instance, Java editor &lt;span class=&#34;menu&#34;&gt;Preferences â–¸ Java â–¸ Editor â–¸ Save Actions&lt;/span&gt;
,  check &amp;ldquo;&lt;em&gt;Additional actions&lt;/em&gt;&amp;rdquo;, choose &amp;ldquo;&lt;em&gt;Configure&lt;/em&gt;&amp;rdquo;. Next, in the &amp;ldquo;&lt;em&gt;Code Organizing&lt;/em&gt;&amp;rdquo; tab check &amp;ldquo;&lt;em&gt;Remove trailing whitespace&lt;/em&gt;&amp;rdquo;. Unfortunately, properties file in our example does not provide such options in Eclipse.&lt;/p&gt;&lt;/li&gt;

&lt;li&gt;&lt;p&gt;(&lt;strong&gt;M2&lt;/strong&gt;) You may want to use the plugin &lt;a href=&#34;https://github.com/iloveeclipse/anyedittools&#34;&gt;AnyEdit Tools&lt;/a&gt; to clean up trailing whitespaces for all file types:  &lt;span class=&#34;menu&#34;&gt;Preferences â–¸ AnyEdit Tools â–¸ Auto â–¸ Convert â–¸ Remove trailing whitespace&lt;/span&gt;
&lt;/p&gt;&lt;/li&gt;

&lt;li&gt;&lt;p&gt;(&lt;strong&gt;M2&lt;/strong&gt;) A universal approach, also a little more difficult, is to use &amp;ldquo;&lt;em&gt;Search &amp;amp; Replace&lt;/em&gt;&amp;rdquo; to search with regular expressions for all of &lt;code&gt;&amp;quot;[\t ]+$&amp;quot;&lt;/code&gt; (i.e. more than one whitespaces and/or tabs, please note the whitespace between &lt;code&gt;\t&lt;/code&gt; and &lt;code&gt;]&lt;/code&gt;) and replace them with&lt;code&gt;&amp;quot;&amp;quot;&lt;/code&gt; (blank/empty).&lt;/p&gt;&lt;/li&gt;

&lt;li&gt;&lt;p&gt;&lt;a href=&#34;https://www.jetbrains.com/idea/&#34;&gt;IntelliJ IDEA&lt;/a&gt;&lt;/p&gt;&lt;/li&gt;

&lt;li&gt;&lt;p&gt;(&lt;strong&gt;M1&lt;/strong&gt;) &lt;span class=&#34;menu&#34;&gt;Preferences â–¸ Editor â–¸ Appearance â–¸ Show whitespaces&lt;/span&gt;
 or &lt;span class=&#34;menu&#34;&gt;View â–¸ Active Editor â–¸ Show whitespaces&lt;/span&gt;
&lt;/p&gt;&lt;/li&gt;

&lt;li&gt;&lt;p&gt;(&lt;strong&gt;M2&lt;/strong&gt;) Since 2017.2 and later, there is an option &lt;span class=&#34;menu&#34;&gt;Preferences â–¸ Editor â–¸ General â–¸ Strip trailing whitespaces on Save&lt;/span&gt;
 with &amp;ldquo;&lt;code&gt;All&lt;/code&gt;&amp;rdquo;, &amp;ldquo;&lt;code&gt;Modified Lines&lt;/code&gt;&amp;rdquo; or &amp;ldquo;&lt;code&gt;None&lt;/code&gt;&amp;rdquo; but the IDE does not quite behave, i.e. I chose &amp;ldquo;&lt;code&gt;All&lt;/code&gt;&amp;rdquo; but the trailing spaces are still there after saving. It&amp;rsquo;s rather lame and embarrassing for such a highly praised and expensive IDEs.&lt;/p&gt;&lt;/li&gt;

&lt;li&gt;&lt;p&gt;&lt;a href=&#34;https://www.sublimetext.com/&#34;&gt;Sublime Text&lt;/a&gt;&lt;/p&gt;&lt;/li&gt;

&lt;li&gt;&lt;p&gt;(&lt;strong&gt;M1&lt;/strong&gt;) &lt;span class=&#34;menu&#34;&gt;Preferences â–¸ Preferences.sublime-settingsâ€”User&lt;/span&gt;
: &lt;code&gt;&amp;quot;draw_white_space&amp;quot;: &amp;quot;all&amp;quot;&lt;/code&gt; (show all whitespaces) or &lt;code&gt;&amp;quot;draw_white_space&amp;quot;: &amp;quot;selection&amp;quot;&lt;/code&gt; (only show within the selection)&lt;/p&gt;&lt;/li&gt;

&lt;li&gt;&lt;p&gt;(&lt;strong&gt;M2&lt;/strong&gt;) &lt;span class=&#34;menu&#34;&gt;Preferences â–¸ Preferences.sublime-settingsâ€”User&lt;/span&gt;
: &lt;code&gt;&amp;quot;trim_trailing_white_space_on_save&amp;quot;: false&lt;/code&gt;&lt;/p&gt;&lt;/li&gt;

&lt;li&gt;&lt;p&gt;(&lt;strong&gt;M2&lt;/strong&gt;) Use the plug-in &lt;a href=&#34;https://github.com/jonlabelle/Trimmer&#34;&gt;Trimmer&lt;/a&gt; for manually cleaning up whitespaces&lt;/p&gt;&lt;/li&gt;

&lt;li&gt;&lt;p&gt;&lt;a href=&#34;https://code.visualstudio.com/&#34;&gt;Visual Studio Code&lt;/a&gt;&lt;/p&gt;&lt;/li&gt;

&lt;li&gt;&lt;p&gt;(&lt;strong&gt;M1&lt;/strong&gt;) Either &lt;span class=&#34;menu&#34;&gt;Preferences â–¸ Settings â–¸ Render Whitespace&lt;/span&gt;
 or &lt;code&gt;settings.json&lt;/code&gt; â–¸ &lt;code&gt;&amp;quot;editor.renderWhitespace&amp;quot;: &amp;quot;boundary&amp;quot;&lt;/code&gt; (to render whitespaces everywhere except single space between words) or &lt;code&gt;&amp;quot;editor.renderWhitespace&amp;quot;: &amp;quot;all&amp;quot;&lt;/code&gt; (to render all whitespaces)&lt;/p&gt;&lt;/li&gt;

&lt;li&gt;&lt;p&gt;(&lt;strong&gt;M2&lt;/strong&gt;) Either &lt;span class=&#34;menu&#34;&gt;Preferences â–¸ Settings â–¸ Render Whitespace&lt;/span&gt;
 or &lt;code&gt;settings.json&lt;/code&gt; â–¸  &lt;code&gt;&amp;quot;files.trimTrailingWhitespace&amp;quot;: true&lt;/code&gt;&lt;/p&gt;&lt;/li&gt;

&lt;li&gt;&lt;p&gt;(&lt;strong&gt;M1+2&lt;/strong&gt;) I use the extension &lt;a href=&#34;https://marketplace.visualstudio.com/items?itemName=shardulm94.trailing-spaces&#34;&gt;Trailing Spaces&lt;/a&gt; that even goes further with red colour highlighting of whitespaces and provides extra commands for (manually) trimming whitespaces.&lt;/p&gt;&lt;/li&gt;

&lt;li&gt;&lt;p&gt;&lt;a href=&#34;https://www.vim.org/&#34;&gt;Vim&lt;/a&gt;&lt;/p&gt;&lt;/li&gt;

&lt;li&gt;&lt;p&gt;You can follow the tips on &lt;a href=&#34;http://vim.wikia.com/wiki/Highlight_unwanted_spaces&#34;&gt;highlighting unwanted spaces&lt;/a&gt; and &lt;a href=&#34;http://vim.wikia.com/wiki/Remove_unwanted_spaces&#34;&gt;removing unwanted spaces&lt;/a&gt;, some other &lt;a href=&#34;https://vi.stackexchange.com/a/2285&#34;&gt;advanced tips on Vi and Vim SE&lt;/a&gt;, or using a plug-in that can highlight trailing whitespaces and provide commands to strip all of them&lt;/p&gt;&lt;/li&gt;

&lt;li&gt;&lt;p&gt;(&lt;strong&gt;M1+2&lt;/strong&gt;) &lt;a href=&#34;https://github.com/bronson/vim-trailing-whitespace&#34;&gt;vim-trailing-whitespace&lt;/a&gt; highlighting and trimming with &lt;code&gt;:FixWhitespace&lt;/code&gt;&lt;/p&gt;&lt;/li&gt;

&lt;li&gt;&lt;p&gt;(&lt;strong&gt;M1+2&lt;/strong&gt;) &lt;a href=&#34;ntpeters/vim-better-whitespace&#34;&gt;ntpeters/vim-better-whitespace&lt;/a&gt; highlighting and trimming with &lt;code&gt;:StripWhitespace&lt;/code&gt;&lt;/p&gt;&lt;/li&gt;

&lt;li&gt;&lt;p&gt;(&lt;strong&gt;M1&lt;/strong&gt;) &lt;a href=&#34;https://www.vim.org/scripts/script.php?script_id=3966&#34;&gt;ShowTrailingWhitespace&lt;/a&gt;: mostly trimming whitespaces&lt;/p&gt;&lt;/li&gt;

&lt;li&gt;&lt;p&gt;(&lt;strong&gt;M2&lt;/strong&gt;) &lt;a href=&#34;https://www.vim.org/scripts/script.php?script_id=3967&#34;&gt;DeleteTrailingWhitespace&lt;/a&gt;: removing trailing whitespaces with &lt;code&gt;:DeleteTrailingWhitespace&lt;/code&gt; or automatically when the buffer is saved&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;For the sake of completeness, there are some editor-independent solutions too.&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;&lt;p&gt;&lt;a href=&#34;https://www.gnu.org/software/sed/manual/sed.html&#34;&gt;sed&amp;mdash;a stream editor&lt;/a&gt; (credits to Tim Pote&amp;rsquo;s excellent &lt;a href=&#34;https://stackoverflow.com/a/10711226/339302&#34;&gt;SO answer&lt;/a&gt;)&lt;/p&gt;&lt;/li&gt;

&lt;li&gt;&lt;p&gt;For POSIX&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;pre&gt;&lt;code class=&#34;language-sh&#34;&gt;find . -type f -name &#39;*.properties&#39; \
-exec sed --in-place &#39;s/[[:space:]]\+$//&#39; {} \+
&lt;/code&gt;&lt;/pre&gt;

&lt;ul&gt;
&lt;li&gt;For macOS/BSD&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;pre&gt;&lt;code class=&#34;language-sh&#34;&gt;  find . -iname &#39;*.properties&#39; -type f \
   -exec sed -i &#39;&#39; &#39;s/[[:space:]]\{1,\}$//&#39; {} \+
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;Wow, quite a long post for such a trivial issue, eh?! Thanks for reading to the end and I hope that my wasted time and effort here would save some of yours in future.&lt;/p&gt;

&lt;p&gt;Cheers!&lt;/p&gt;
</description>
      </item>
    
      <item>
        <title>Back to basics: Test-driven Spring JDBC</title>
        <link>https://htr3n.github.io/2018/11/test-driven-spring-jdbc/</link>
        <pubDate>Tue, 20 Nov 2018 00:00:00 +0000</pubDate>
        
        <guid>f89076865a7b648f52333c3fe60a3dcb</guid>
        <description>

&lt;p&gt;&lt;a href=&#34;https://spring.io&#34;&gt;Spring&lt;/a&gt; is a popular heavy-weight framework for developing Java/Groovy based applications. Its rich libraries and software stack can cover from front-end to back-end development. In 2009 I used Spring Framework 3 to develop &lt;a href=&#34;https://github.com/htr3n/loan-approval-portal&#34;&gt;web services and MVC + Hibernate portal&lt;/a&gt; for a fictious &lt;a href=&#34;https://github.com/htr3n/loan-approval&#34;&gt;loan approval process&lt;/a&gt;. Despite a tad steep learning-curve, I could manage to get the services and portal up and running and integrated with third-party libraries quite smoothly.&lt;/p&gt;

&lt;p&gt;In my prevous projects, I mostly used Spring with Hibernate and/or JPA for higher abstraction level of data access. Coming back working with Spring after few years, I want to delve into lower layer of data access to better understand what behind the scene of Hibernate/JPA abstraction layers. This post is sort of my note-to-self on Spring and JDBC (Java Database Connectivity), especially on &lt;a href=&#34;https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/jdbc/core/JdbcTemplate.html&#34;&gt;JdbcTemplate&lt;/a&gt;. Besides, it also reports a tricky case with retrieving data with &lt;code&gt;JdbcTemplate.queryForXXX()&lt;/code&gt; employed by several on-line tutorials which was efficiently exposed by appropriate tests.&lt;/p&gt;

&lt;h2 id=&#34;background&#34;&gt;Background&lt;/h2&gt;

&lt;p&gt;JDBC defines standard application programming interface (API) based on that a client can access a database. Each database vendor often provides low-level vendor-specific database drivers based on JDBC predefined interfaces. JDBC is considered the lowest recommended abstraction level to work with databases in Java.&lt;/p&gt;

&lt;p&gt;In short, a typical approach to database access using JDBC comprises these basic steps:&lt;/p&gt;

&lt;ol&gt;
&lt;li&gt;Obtain a &lt;a href=&#34;https://docs.oracle.com/javase/8/docs/api/java/sql/Connection.html&#34;&gt;Connection&lt;/a&gt;, e.g. via &lt;a href=&#34;https://docs.oracle.com/javase/8/docs/api/java/sql/DriverManager.html&#34;&gt;DriverManager&lt;/a&gt; or &lt;a href=&#34;https://docs.oracle.com/javase/8/docs/api/javax/sql/DataSource.html&#34;&gt;DataSource&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;Create an instance of type &lt;a href=&#34;https://docs.oracle.com/javase/8/docs/api/java/sql/Statement.html&#34;&gt;Statement&lt;/a&gt; or its sub-types such as &lt;a href=&#34;https://docs.oracle.com/javase/8/docs/api/java/sql/CallableStatement.html&#34;&gt;CallableStatement&lt;/a&gt;, &lt;a href=&#34;https://docs.oracle.com/javase/8/docs/api/java/sql/PreparedStatement.html&#34;&gt;PreparedStatement&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;Use the aforementioned statement to execute database queries&lt;/li&gt;
&lt;li&gt;Retrieve and process the &lt;a href=&#34;https://docs.oracle.com/javase/8/docs/api/java/sql/ResultSet.html&#34;&gt;ResultSet&lt;/a&gt; (if any)&lt;/li&gt;
&lt;li&gt;Close the statement and release all resources (connection is &lt;a href=&#34;https://docs.oracle.com/javase/8/docs/api/java/lang/AutoCloseable.html&#34;&gt;AutoCloseable&lt;/a&gt;)&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;Along these steps, we should also handle any &lt;a href=&#34;https://docs.oracle.com/javase/tutorial/jdbc/basics/sqlexception.html&#34;&gt;database exceptions&lt;/a&gt; as well. You can find more details on JDBC programming &lt;a href=&#34;https://docs.oracle.com/javase/tutorial/jdbc/basics/index.html&#34;&gt;here&lt;/a&gt;.  Here is a simple example of accessing databases using JDBC and &lt;a href=&#34;https://docs.oracle.com/javase/tutorial/essential/exceptions/tryResourceClose.html&#34;&gt;&lt;em&gt;try-with-resources&lt;/em&gt;&lt;/a&gt;.&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-java&#34;&gt;DataSource ds = ...; // obtain a DataSource object
try (
  Connection conn = ds.getConnection();
  Statement stmt = conn.createStatement()) {
  try (ResultSet rs = smmt.executeQuery(&amp;quot;SELECT * FROM customer&amp;quot;)){
    while (rs.next()){
      // process the ResultSet
    }
  } catch (SQLException e2) {
    e2.printStackTrace();
  }
} catch (SQLException e1) {
  e1.printStackTrace();
}
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;Fortunately, Spring, via  &lt;a href=&#34;https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/jdbc/core/JdbcTemplate.html&#34;&gt;JdbcTemplate&lt;/a&gt;, ofters a higher level of abstraction on top of Java JDBC that would save us a lot of boiler plate code and enable smooth integration with the rest of Spring framework&amp;rsquo;s ecosystem. As such, we can leverage other parts of Spring farmework, for instance, the awesome &lt;a href=&#34;https://spring.io/projects/spring-boot&#34;&gt;Spring Boot&lt;/a&gt;, to automate lots of configuration effort.&lt;/p&gt;

&lt;h2 id=&#34;a-simple-crud-project-with-spring-jdbc&#34;&gt;A simple CRUD project with Spring JDBC&lt;/h2&gt;

&lt;p&gt;Nothing is better than a hand-on development project that demonstrate how Spring JDBC works. We can start with &lt;a href=&#34;https://start.spring.io/&#34;&gt;Spring Initialzr&lt;/a&gt; and &lt;a href=&#34;https://spring.io/projects/spring-boot&#34;&gt;Spring Boot&lt;/a&gt; to jump start and better concentrate on the main code instead of numerous dependencies and configurations.&lt;/p&gt;

&lt;p&gt;There are a few ways to bootstrap a project with Spring Initialzr. Most of the popular Java IDE such as Eclipse or Intellij IDEA with Spring extensions can create a new project via Spring Initialzr. You can also achieve the same result from the web site &lt;a href=&#34;https://start.spring.io&#34;&gt;https://start.spring.io&lt;/a&gt; or even using &lt;a href=&#34;https://docs.spring.io/spring-boot/docs/current/reference/html/getting-started-installing-spring-boot.html#getting-started-installing-the-cli&#34;&gt;Spring Boot CLI&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;Here I will use Intellij IDEA for just showing the necessary steps and dependencies. You can use any of the aforementioned methods to obtain the same result.&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;Step 1&lt;/strong&gt;:&lt;/p&gt;

&lt;p&gt;Create a new project and choose Spring Initialzr.&lt;/p&gt;

&lt;p&gt;&lt;img src=&#34;ide-step-1.png&#34; alt=&#34;&#34; /&gt;&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;Step 2&lt;/strong&gt;:&lt;/p&gt;

&lt;p&gt;Fill in necessary project information, keep default values for project&amp;rsquo;s type (Maven), language (Java), packaging (Jar), Java version (8).&lt;/p&gt;

&lt;p&gt;&lt;img src=&#34;ide-step-2.png&#34; alt=&#34;&#34; /&gt;&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;Step 3&lt;/strong&gt;:&lt;/p&gt;

&lt;p&gt;Choose the section SQL and make sure the checkboxes of H2 and JDBC are ticked.&lt;/p&gt;

&lt;p&gt;&lt;img src=&#34;ide-step-3.png&#34; alt=&#34;&#34; /&gt;&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;Step 4&lt;/strong&gt;:&lt;/p&gt;

&lt;p&gt;Finish the project creation wizard.&lt;/p&gt;

&lt;p&gt;&lt;img src=&#34;ide-step-4.png&#34; alt=&#34;&#34; /&gt;&lt;/p&gt;

&lt;p&gt;After Step 4, Intellij IDEA will create a new Maven Spring Boot project with some initial source and configuration files.&lt;/p&gt;

&lt;p&gt;By default, the main configuration file for Spring Boot is &lt;code&gt;application.properties&lt;/code&gt;.&lt;/p&gt;

&lt;p&gt;&lt;img src=&#34;ide-main.png&#34; alt=&#34;&#34; /&gt;&lt;/p&gt;

&lt;h3 id=&#34;defining-domain-entities&#34;&gt;Defining Domain Entities&lt;/h3&gt;

&lt;p&gt;We might not need a complex domain model but rather a simple entity mapped to a database table. For example, a &lt;code&gt;Customer&lt;/code&gt; entity as shown in Java code and a corresponding &lt;code&gt;customer&lt;/code&gt; table.&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-java&#34;&gt;package io.github.htr3n.springjdbcsimple.entity;

public class Customer {
  private Integer id;
  private String name;
  private String email;

  public Integer getId() {
    return id;
  }
  public void setId(Integer id) {
    this.id = id;
  }
  public String getName() {
    return name;
  }
  public void setName(String name) {
    this.name = name;
  }
  public String getEmail() {
    return email;
  }
  public void setEmail(String email) {
    this.email = email;
  }
}
&lt;/code&gt;&lt;/pre&gt;

&lt;h3 id=&#34;configuring-database-connection&#34;&gt;Configuring Database Connection&lt;/h3&gt;

&lt;p&gt;Normally, we have to provide sufficient information to establish database connections, for instance, JDBC url, authentication, and maybe some extra parameters. &lt;a href=&#34;https://docs.spring.io/spring-boot/docs/current/reference/html/howto-data-access.html#howto-configure-a-datasource&#34;&gt;Per convention&lt;/a&gt;, Spring Boot can scan for data sources configurations as &lt;code&gt;@Bean&lt;/code&gt; or in &lt;code&gt;application.properties&lt;/code&gt;.&lt;/p&gt;

&lt;p&gt;For better concentraton on test-driven JDBC CRUD, we can leverage &lt;code&gt;@JdbcTest&lt;/code&gt; explained in the subsequent section to set up an in-memory embedded database and skip the details on data source configuration for now.&lt;/p&gt;

&lt;p&gt;However, we must still initialise the database (otherwise Spring will complain that the table &lt;code&gt;customer&lt;/code&gt; &lt;em&gt;does not exist&lt;/em&gt; when our application or a test starts). By convention documented &lt;a href=&#34;https://docs.spring.io/spring-boot/docs/current/reference/html/howto-database-initialization.html#howto-initialize-a-database-using-spring-jdbc&#34;&gt;here&lt;/a&gt;, we simply add a file &lt;code&gt;schema.sql&lt;/code&gt; in the folder &lt;code&gt;src/main/resources&lt;/code&gt; which contains a simple SQL DDL script for creating a table &lt;code&gt;customer&lt;/code&gt;.&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-sql&#34;&gt;DROP TABLE customer;
CREATE TABLE customer(
  id integer not null auto_increment,
  name varchar(255) not null,
  email varchar (255) not null,
  primary key (id)
);
&lt;/code&gt;&lt;/pre&gt;

&lt;h3 id=&#34;test-driven-crud&#34;&gt;Test-Driven CRUD&lt;/h3&gt;

&lt;p&gt;At the heart of our JDBC project is a &lt;code&gt;CustomerDao.java&lt;/code&gt; with basic &lt;a href=&#34;https://en.wikipedia.org/wiki/Create,_read,_update_and_delete&#34;&gt;CRUD methods&lt;/a&gt;. The class &lt;code&gt;CustomerDao&lt;/code&gt; is annotated with &lt;a href=&#34;https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/stereotype/Repository.html&#34;&gt;@Repository&lt;/a&gt; to indicate this is a data access component that is autodetected through normal Spring&amp;rsquo;s classpath scanning.&lt;/p&gt;

&lt;p&gt;As &lt;code&gt;JdbcTemplate&lt;/code&gt; will be used to work with H2 database, we just declared an &lt;a href=&#34;https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/beans/factory/annotation/Autowired.html&#34;&gt;@Autowired&lt;/a&gt; field, the rest will be taken care by Spring.&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-java&#34;&gt;package io.github.htr3n.springjdbcsimple.dao;

import java.util.List;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.jdbc.core.JdbcTemplate;

@Repository
public class CustomerDao {
  @Autowired
  private JdbcTemplate jdbcTemplate;

  // Create
  public Customer create(Customer customer) { ... }
  // Retrieve
  public List&amp;lt;Customer&amp;gt; findAll() {...}
  // Retrieve
  public Optional&amp;lt;Customer&amp;gt; findById(Integer id) { ... }
  // Update
  public boolean update(Customer customer) { ... }
  // Delete
  public boolean delete(Integer id) { ... }
}
&lt;/code&gt;&lt;/pre&gt;

&lt;h4 id=&#34;crud-tests&#34;&gt;CRUD Tests&lt;/h4&gt;

&lt;p&gt;Before starting implementing the CRUD methods, we create some unit tests in &lt;code&gt;CustomerDaoTest&lt;/code&gt;. Again, Spring Boot will help us a lot here with setting up and shutting down properly the testing environment via annotations such as &lt;code&gt;@RunWith&lt;/code&gt; and &lt;code&gt;@SpringBootTest&lt;/code&gt;. We only need to declare an &lt;em&gt;autowired&lt;/em&gt; object &lt;code&gt;CustomerDao&lt;/code&gt;.&lt;/p&gt;

&lt;p&gt;Spring offers powerful means for database testing, for instance, &lt;code&gt;@Transational&lt;/code&gt; and &lt;code&gt;@Rollback&lt;/code&gt;. With these annotations, Spring will take care of database transactions as well as rollling back the testing databases to its initial state.&lt;/p&gt;

&lt;p&gt;Unfortunately, it would be too tedious to annotate each test method. Spring Boot comes to handy with  &lt;a href=&#34;https://docs.spring.io/spring-boot/docs/current/api/org/springframework/boot/test/autoconfigure/jdbc/JdbcTest.html&#34;&gt;&lt;code&gt;@JdbcTest&lt;/code&gt;&lt;/a&gt; that enables several useful features for JDBC tests including an in-memory embedded database as well as transactional and roll back at the end of each test.&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;&lt;strong&gt;IMPORTANT&lt;/strong&gt;&lt;br&gt;By default, &lt;code&gt;@JdbcTest&lt;/code&gt; &lt;a href=&#34;https://docs.spring.io/spring-boot/docs/current/reference/html/boot-features-testing.html#boot-features-testing-spring-boot-applications-testing-autoconfigured-jdbc-test&#34;&gt;won&amp;rsquo;t load regular &lt;code&gt;Component&lt;/code&gt;&lt;/a&gt;, and as a result, &lt;code&gt;CustomerDao&lt;/code&gt; won&amp;rsquo;t be loaded because it is a &lt;code&gt;@Repository&lt;/code&gt;, i.e. a sub-type of &lt;code&gt;@Component&lt;/code&gt;. Spring will inform us that it fails to find the required autowire &lt;code&gt;CustomerDao&lt;/code&gt; for &lt;code&gt;CustomerDaoTest&lt;/code&gt;.  To fix this, simply annotation  &lt;code&gt;CustomerDaoTest&lt;/code&gt; with &lt;code&gt;@ComponentScan&lt;/code&gt;.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;This is the whole test case for our tentative CRUD methods.&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-java&#34;&gt;package io.github.htr3n.springjdbcsimple.dao;

import io.github.htr3n.springjdbcsimple.entity.Customer;
import org.junit.Before;
import org.junit.Test;
import org.junit.runner.RunWith;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.boot.test.autoconfigure.jdbc.JdbcTest;
import org.springframework.context.annotation.ComponentScan;
import org.springframework.test.context.junit4.SpringRunner;

import java.util.List;
import java.util.Optional;
import java.util.Random;

import static org.assertj.core.api.Assertions.assertThat;

@RunWith(SpringRunner.class)
@JdbcTest
@ComponentScan
public class CustomerDaoTest {

  private static final String ALICE_NAME = &amp;quot;Alice&amp;quot;;
  private static final String ALICE_EMAIL = &amp;quot;alice@test.com&amp;quot;;
  private static final String BOB_NAME = &amp;quot;Bob&amp;quot;;
  private static final String BOB_EMAIL = &amp;quot;bob@test.com&amp;quot;;
  private static final int ONE_CUSTOMER = 1;
  private static final int TWO_CUSTOMERS = 2;

  @Autowired
  private CustomerDao customerDao;

  private Customer alice;
  private Customer bob;

  @Before
  public void setUp(){
    alice = new Customer();
    alice.setName(ALICE_NAME);
    alice.setEmail(ALICE_EMAIL);

    bob = new Customer();
    bob.setName(BOB_NAME);
    bob.setEmail(BOB_EMAIL);
  }

  @Test
  public void create_shouldReturnValidCustomer_whenAddingNewCustomer() {
    customerDao.create(alice);
    assertThat(alice.getId()).isNotNull();

    Optional&amp;lt;Customer&amp;gt; result = customerDao.findById(alice.getId());
    assertThat(result).isPresent();
    assertThat(alice).hasFieldOrPropertyWithValue(&amp;quot;name&amp;quot;, ALICE_NAME);
    assertThat(alice).hasFieldOrPropertyWithValue(&amp;quot;email&amp;quot;, ALICE_EMAIL);
  }

  @Test
  public void findById_shouldReturnInvalidCustomer_forEmptyDatabase() {
    Optional&amp;lt;Customer&amp;gt; invalidCustomer = customerDao.findById(new Random().nextInt());
    assertThat(invalidCustomer.isPresent()).isFalse();
  }

  @Test
  public void findById_shouldReturnValidCustomer_forExistingCustomer() {
    customerDao.create(alice);
    Optional&amp;lt;Customer&amp;gt; validCustomer = customerDao.findById(alice.getId());
    assertThat(validCustomer).isPresent();
    assertThat(validCustomer.get().getName()).isEqualTo(alice.getName());
    assertThat(validCustomer.get().getEmail()).isEqualTo(alice.getEmail());
  }

  @Test
  public void findAll_shouldYieldEmptyList_forEmptyDatabase() {
    List&amp;lt;Customer&amp;gt; noCustomers = customerDao.findAll();
    assertThat(noCustomers).isNullOrEmpty();
  }

  @Test
  public void findAll_shouldYieldListOfCustomers_forNonemptyDatabase() {
    customerDao.create(alice);
    List&amp;lt;Customer&amp;gt; customers = customerDao.findAll();
    assertThat(customers).isNotNull().hasSize(ONE_CUSTOMER);

    Customer result = customers.get(0);
    assertThat(result).hasFieldOrPropertyWithValue(&amp;quot;name&amp;quot;, ALICE_NAME);
    assertThat(result).hasFieldOrPropertyWithValue(&amp;quot;email&amp;quot;, ALICE_EMAIL);

    customerDao.create(bob);
    customers = customerDao.findAll();
    assertThat(customers).isNotNull().hasSize(TWO_CUSTOMERS);
  }

  @Test
  public void update_shouldYieldFalse_forEmptyDatabase() {
    Customer notFound = new Customer();
    notFound.setId(new Random().nextInt());
    assertThat(customerDao.update(notFound)).isFalse();
  }

  @Test
  public void update_shouldYieldTrue_forExistingCustomer() {
    customerDao.create(alice);
    assertThat(alice.getId()).isNotNull();
    assertThat(customerDao.update(alice)).isTrue();

    alice.setName(BOB_NAME);
    alice.setEmail(BOB_EMAIL);
    assertThat(customerDao.update(alice)).isTrue();

    Optional&amp;lt;Customer&amp;gt; found = customerDao.findById(alice.getId());
    assertThat(found).isPresent();
    assertThat(found.get().getName()).isEqualTo(alice.getName());
    assertThat(found.get().getEmail()).isEqualTo(alice.getEmail());
  }

  @Test
  public void delete_shouldYieldFalse_forEmptyDatabaseOrNonexistingCustomer() {
    assertThat(customerDao.delete(new Random().nextInt())).isFalse();
  }

  @Test
  public void delete_shouldYieldTrue_forExistingCustomer() {
    customerDao.create(alice);
    assertThat(customerDao.findAll()).hasSize(ONE_CUSTOMER);
    assertThat(customerDao.delete(alice.getId())).isTrue();
    assertThat(customerDao.findById(alice.getId()).isPresent()).isFalse();
    assertThat(customerDao.findAll()).isEmpty();
  }
}
&lt;/code&gt;&lt;/pre&gt;

&lt;h4 id=&#34;crud-implementation&#34;&gt;CRUD Implementation&lt;/h4&gt;

&lt;p&gt;With the tests defined, we can start implementing the CRUD using Spring &lt;code&gt;JdbcTemplate&lt;/code&gt;.&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;C&lt;/strong&gt;reate&lt;/p&gt;

&lt;p&gt;To satisfy the test described in &lt;code&gt;create_shouldReturnValidCustomer_whenAddingNewCustomer()&lt;/code&gt;, our &lt;code&gt;Customer.create()&lt;/code&gt; must successfully save the input &lt;code&gt;Customer&lt;/code&gt; and return with an auto-generated primary key (e.g. customer ID). In order to obtain the key, we can use Spring&amp;rsquo;s helper class &lt;a href=&#34;https://docs.spring.io/spring/docs/current/javadoc-api/org/springframework/jdbc/support/KeyHolder.html&#34;&gt;&lt;code&gt;KeyHolder&lt;/code&gt;&lt;/a&gt; along with the standard &lt;a href=&#34;https://docs.oracle.com/javase/8/docs/api/java/sql/PreparedStatement.html&#34;&gt;&lt;code&gt;PreparedStatement&lt;/code&gt;&lt;/a&gt;. Note that the code was simplified with &lt;a href=&#34;https://docs.oracle.com/javase/tutorial/java/javaOO/lambdaexpressions.html&#34;&gt;Java 8 Lambda notation&lt;/a&gt;.&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-java&#34;&gt;// Create
public Customer create(Customer customer) {
  String sql = &amp;quot;INSERT INTO customer (name, email) VALUES (?, ?)&amp;quot;;
  KeyHolder keyHolder = new GeneratedKeyHolder();
  
  this.jdbcTemplate.update(connection -&amp;gt; {
    PreparedStatement statement = connection.prepareStatement(sql, Statement.RETURN_GENERATED_KEYS);
    statement.setString(1, customer.getName());
    statement.setString(2, customer.getEmail());
    return statement;
  }, keyHolder);
  
  Integer newCustomerId = keyHolder.getKey().intValue();
  customer.setId(newCustomerId);
  return customer;
}
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;Please note that, Spring also provides another helper, namely, &lt;a href=&#34;https://docs.spring.io/spring/docs/current/javadoc-api/org/springframework/jdbc/core/simple/SimpleJdbcInsert.html&#34;&gt;&lt;code&gt;SimpleJdbcInsert&lt;/code&gt;&lt;/a&gt; with methods &lt;code&gt;executeAndReturnKey()&lt;/code&gt;. Per the class&amp;rsquo;s documentation, &lt;code&gt;SimpleJdbcInsert&lt;/code&gt;  is indeed a higher level wrapper of &lt;code&gt;JdbcTemplate&lt;/code&gt;.&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;R&lt;/strong&gt;etrieve&lt;/p&gt;

&lt;p&gt;In this project, we develop two retrieval methods: &lt;code&gt;findAll()&lt;/code&gt; will return a list of all customers whilst &lt;code&gt;findById()&lt;/code&gt; will look for a certain customer using the input ID.&lt;/p&gt;

&lt;p&gt;The method &lt;code&gt;findAll()&lt;/code&gt; is rather a piece of cake but &lt;code&gt;findById()&lt;/code&gt; is quite tricky. Most of the tutorials or guides on Spring &lt;code&gt;JdbcTemplate&lt;/code&gt; I have found on the Internet blindly use the method &lt;a href=&#34;https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/jdbc/core/JdbcTemplate.html#queryForObject-java.lang.String-java.lang.Class-&#34;&gt;JdbcTemplate.queryForObject()&lt;/a&gt; to look up a database row. Trust me, I made the same mistake, too, along the line of this.&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-java&#34;&gt;public Optional&amp;lt;Customer&amp;gt; findById(Integer id) {
  String sql = &amp;quot;SELECT id, name, email FROM customer WHERE id = ?&amp;quot;;
  return Optional.of(jdbcTemplate.queryForObject(sql, new Object[] { id }, new CustomerMapper()));
}
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;Neater and cleaner, eh!? Unfortunately, the aforementioned &lt;code&gt;findById()&lt;/code&gt; based on the problematic methods &lt;code&gt;JdbcTemplate.queryForXXX()&lt;/code&gt; which is recommended to use in case the query shall return a single row and fails miserably in other cases.&lt;/p&gt;

&lt;p&gt;This issue has been exposed by the test &lt;code&gt;findById_shouldReturnInvalidCustomer_forEmptyDatabase()&lt;/code&gt; and I was able to come up with a slightly better version that uses &lt;code&gt;JdbcTemplate.query()&lt;/code&gt; and checks for the returning &lt;code&gt;ResultSet&lt;/code&gt;, in case of non-exiting customer yielding correctly &lt;code&gt;null&lt;/code&gt;.&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-java&#34;&gt;// Retrieve
public List&amp;lt;Customer&amp;gt; findAll() {
  String sql = &amp;quot;SELECT * FROM customer&amp;quot;;
  return this.jdbcTemplate.query(sql, new CustomerMapper());
}
// Retrieve
public Optional&amp;lt;Customer&amp;gt; findCustomerById(Integer id) {
  String sql = &amp;quot;SELECT id, name, email FROM customer WHERE id = ?&amp;quot;;
  return this.jdbcTemplate.query(sql,
    rs -&amp;gt; rs.next() ? Optional.of(new CustomerMapper().mapRow(rs, 1)): Optional.empty(),
    id);
}
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;When working with pure JDBC, we must map the database query result onto the domain entity on our own. This can be quickly done by implementing the interface &lt;a href=&#34;https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/jdbc/core/RowMapper.html&#34;&gt;&lt;code&gt;RowMapper&amp;lt;T&amp;gt;&lt;/code&gt;&lt;/a&gt;.&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-java&#34;&gt;class CustomerMapper implements RowMapper&amp;lt;Customer&amp;gt; {
  @Override
  public Customer mapRow(ResultSet rs, int rowNum) throws SQLException {
    Customer customer = new Customer();
    customer.setId(rs.getInt(&amp;quot;id&amp;quot;));
    customer.setName(rs.getString(&amp;quot;name&amp;quot;));
    customer.setEmail(rs.getString(&amp;quot;email&amp;quot;));
    return customer;
  }
}
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;&lt;strong&gt;U&lt;/strong&gt;pdate / &lt;strong&gt;D&lt;/strong&gt;elete&lt;/p&gt;

&lt;p&gt;The implementation of updating and deletion is rather straightforward.&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-java&#34;&gt;// Update
public boolean update(Customer customer) {
  String sql = &amp;quot;UPDATE customer SET name=?, email=? WHERE id=?&amp;quot;;
  Object[] params = new Object[]{customer.getName(), customer.getEmail(), customer.getId()};
  return this.jdbcTemplate.update(sql, params) == 1;
}
&lt;/code&gt;&lt;/pre&gt;

&lt;pre&gt;&lt;code class=&#34;language-java&#34;&gt;// Delete
public boolean delete(Integer id) {
  String sql = &amp;quot;DELETE FROM customer WHERE id = ?&amp;quot;;
  Object[] params = new Object[]{id};
  return this.jdbcTemplate.update(sql, params) == 1;
}
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;Finally, we finish implementing all necessary CRUD methods and hopefully pass all the aforementioned tests.&lt;/p&gt;

&lt;p&gt;&lt;img src=&#34;passed-tests.png&#34; alt=&#34;Passed tests&#34; /&gt;&lt;/p&gt;

&lt;p&gt;You can check out the &lt;a href=&#34;https://github.com/htr3n/spring-jdbc-simple&#34;&gt;project source code&lt;/a&gt; available on Github.&lt;/p&gt;
</description>
      </item>
    
      <item>
        <title>Handy macOS QuickLook configurations</title>
        <link>https://htr3n.github.io/2018/07/handy-quicklook/</link>
        <pubDate>Mon, 30 Jul 2018 00:00:00 +0000</pubDate>
        
        <guid>c3533b2e96c3a8016a794ff75432a454</guid>
        <description>

&lt;p&gt;&lt;a href=&#34;https://en.wikipedia.org/wiki/Quick_Look&#34;&gt;QuickLook&lt;/a&gt; is a simple but powerful feature of macOS that helps to preview the content of a file or folder in Finder without using any particular apps. This feature is very handy when we only want to have brief glance on a certain file or quickly examine its parts instead of opening a full-fledged app for that particular file.&lt;/p&gt;

&lt;p&gt;Even nicer, Apple provides &lt;a href=&#34;https://developer.apple.com/documentation/quicklook&#34;&gt;API&lt;/a&gt; for QuickLook programming and enables the use of &lt;a href=&#34;http://www.quicklookplugins.com/&#34;&gt;plugins&lt;/a&gt; that convert a certain document from its native format into QuickLook previewing format. Before, it was also possible to also &lt;a href=&#34;http://www.mactricksandtips.com/2013/01/22-finder-hacks-tricks-and-changes.html&#34;&gt;select and copy text from QuickLook previewing&lt;/a&gt; but then Apple removed that feature since macOS 10.11 El Capitan.&lt;/p&gt;

&lt;p&gt;QuickLook is well supported in Spotlight search. In Finder, it can be conveniently activated by selecting a file or folder and  then, for normal previewing, press &lt;kbd&gt;Space&lt;/kbd&gt; or &lt;kbd&gt;âŒ˜&lt;/kbd&gt;+&lt;kbd&gt;Y&lt;/kbd&gt;. For full-screen previewing, you can press &lt;kbd&gt;âŒ¥&lt;/kbd&gt;+&lt;kbd&gt;Space&lt;/kbd&gt; (or using &lt;kbd&gt;âŒ˜&lt;/kbd&gt;+&lt;kbd&gt;âŒ¥&lt;/kbd&gt;+&lt;kbd&gt;Y&lt;/kbd&gt; in case you have &lt;kbd&gt;âŒ¥&lt;/kbd&gt;+&lt;kbd&gt;Space&lt;/kbd&gt; bound to some apps, for instance, &lt;a href=&#34;https://www.alfredapp.com&#34;&gt;Alfred&lt;/a&gt; in my case).&lt;/p&gt;

&lt;p&gt;We might also use the command &lt;code&gt;qlmanage&lt;/code&gt; but it works properly with built-in support and has issues with some external plugins.&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-sh&#34;&gt;# show the preview of file
qlmanage -p &amp;lt;path_to_file&amp;gt;

# or only show the thumpnail
qlmanage -t &amp;lt;path_to_file&amp;gt;
&lt;/code&gt;&lt;/pre&gt;

&lt;h2 id=&#34;quicklook-settings&#34;&gt;QuickLook Settings&lt;/h2&gt;

&lt;p&gt;QuickLook looks for and uses the plugins from both system-wide folders &amp;lsquo;&lt;em&gt;/System/Library/QuickLook&lt;/em&gt;&amp;rsquo; and  &amp;lsquo;&lt;em&gt;/Library/QuickLook&lt;/em&gt;&amp;rsquo; and also the home folder of each user in  &amp;lsquo;&lt;em&gt;~/Library/QuickLook&lt;/em&gt;&amp;rsquo;.&lt;/p&gt;

&lt;p&gt;A QuickLook plugin is organised in a folder with an extension &lt;code&gt;.qlgenerator&lt;/code&gt;. The main task of a plugin, as mentioned above, is to generate previewing contents for the corresponding file types.  We can see an example of the built-in plugin &lt;code&gt;Image.qlgenerator&lt;/code&gt;.&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-sh&#34;&gt;$ tree /System/Library/QuickLook/Image.qlgenerator
/System/Library/QuickLook/Image.qlgenerator
â””â”€â”€ Contents
    â”œâ”€â”€ Info.plist
    â”œâ”€â”€ MacOS
    â”‚Â Â  â””â”€â”€ Image
    â”œâ”€â”€ _CodeSignature
    â”‚Â Â  â””â”€â”€ CodeResources
    â””â”€â”€ version.plist
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;The command &lt;code&gt;qlmanage&lt;/code&gt; is provided in macOS since the announcement of QuickLook in 2007. It&amp;rsquo;s very helpful for manipulating QuickLook, for instance, reloading the generators, resetting cache, and many more.  We will walk through some handy usage of &lt;code&gt;qlmanage&lt;/code&gt;.&lt;/p&gt;

&lt;h5 id=&#34;forcing-reloading-the-list-of-generators&#34;&gt;Forcing reloading the list of generators&lt;/h5&gt;

&lt;pre&gt;&lt;code class=&#34;language-sh&#34;&gt;qlmanage -r
qlmanage: resetting quicklookd
&lt;/code&gt;&lt;/pre&gt;

&lt;h5 id=&#34;showing-the-list-of-generators&#34;&gt;Showing the list of generators&lt;/h5&gt;

&lt;p&gt;This command can be used to see the current QuickLook generators list and also check which generator handles what file types. You might then see a long list of generators in your macOS.&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-sh&#34;&gt;qlmanage -m plugins
&lt;/code&gt;&lt;/pre&gt;

&lt;h5 id=&#34;resetting-quicklook-caches&#34;&gt;Resetting QuickLook caches&lt;/h5&gt;

&lt;pre&gt;&lt;code class=&#34;language-sh&#34;&gt;qlmanage -r cache
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;For more usage of &lt;code&gt;qlmanage&lt;/code&gt;, we can look into its manual.&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-sh&#34;&gt;man qlmanage
&lt;/code&gt;&lt;/pre&gt;

&lt;h2 id=&#34;quicklook-plugins&#34;&gt;QuickLook Plugins&lt;/h2&gt;

&lt;p&gt;&lt;a href=&#34;https://www.google.com/search?q=quicklook+plugins&#34;&gt;Looking around&lt;/a&gt;, we can easily find a lot of plugins to enhance the built-in support of macOS. Moreover, when we install some applications, there might be included QuickLook plugins too.&lt;/p&gt;

&lt;p&gt;Here is a list of plugins that I find very handy and use quite often in my macOS development box.&lt;/p&gt;

&lt;h4 id=&#34;qlstephen&#34;&gt;QLStephen&lt;/h4&gt;

&lt;p&gt;&lt;a href=&#34;https://whomwah.github.io/qlstephen&#34;&gt;QLStephen&lt;/a&gt; is sort of an awesome Swiss-army-knife that I ever used. It enables the preview of numerous plain text files not handled by the default support of macOS QuickLook, especially files having no extensions such as README, CHANGELOG, Makefile, Rakefile, etc.&lt;/p&gt;

&lt;p&gt;If you have already installed &lt;a href=&#34;https://brew.sh&#34;&gt;Homebrew&lt;/a&gt;, it takes only a simple command to install QLStephen (in case you haven&amp;rsquo;t, please feel free to head to &lt;a href=&#34;https://htr3n.github.io/2018/06/bootstrapping-macos-workspace/#homebrew&#34;&gt;another post&lt;/a&gt;).&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-sh&#34;&gt;brew cask install qlstephen
&lt;/code&gt;&lt;/pre&gt;


  





&lt;figure &gt;
  
  &lt;img
      
        src=&#34;https://htr3n.github.io/2018/07/handy-quicklook/qlstephen.png&#34;
      
        alt=&#34;QLStephen preview&#34;
        
        
        
        width=&#34;80%&#34; style=&#34;max-width: 100%;&#34;
         /&gt;
  
  
  
    &lt;figcaption&gt;
      &lt;span class=&#34;img--caption&#34;&gt;
        Figure . Using QLStephen to preview a Makefile (which has no extension and is not supported by macOS)
        
      &lt;/span&gt;
    &lt;/figcaption&gt;
  
&lt;/figure&gt;




&lt;h4 id=&#34;qlcolorcode&#34;&gt;QLColorCode&lt;/h4&gt;

&lt;p&gt;I often quickly review my code using &lt;a href=&#34;https://github.com/anthonygelibert/QLColorCode&#34;&gt;this amazing plugin&lt;/a&gt; forked/derived from the &lt;a href=&#34;https://github.com/n8gray/QLColorCode&#34;&gt;original one&lt;/a&gt; developed by Nathan Gray (&lt;a href=&#34;https://github.com/n8gray&#34;&gt;n8gray&lt;/a&gt;). The preview code will be nicely formatted and highlighted.&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-sh&#34;&gt;brew cask install qlcolorcode
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;The default setting of QLColorCode is totall fine. Nonetheless, you might want to customise some of its settings to your tastes too. Here are some of my favourites.&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-sh&#34;&gt;defaults write org.n8gray.QLColorCode textEncoding UTF-16
defaults write org.n8gray.QLColorCode webkitTextEncoding UTF-16
defaults write org.n8gray.QLColorCode font &amp;quot;Source Code Pro&amp;quot;
defaults write org.n8gray.QLColorCode fontSizePoints 10
defaults write org.n8gray.QLColorCode hlTheme zenburn
defaults write org.n8gray.QLColorCode extraHLFlags &amp;quot;-W -J 160&amp;quot;
defaults write org.n8gray.QLColorCode pathHL /usr/local/bin/highlight
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;Here is the result of previewing Java code.&lt;/p&gt;


  





&lt;figure &gt;
  
  &lt;img
      
        src=&#34;https://htr3n.github.io/2018/07/handy-quicklook/qlcolorcode.png&#34;
      
        alt=&#34;QLStephen preview&#34;
        
        
        
        width=&#34;80%&#34; style=&#34;max-width: 100%;&#34;
         /&gt;
  
  
  
    &lt;figcaption&gt;
      &lt;span class=&#34;img--caption&#34;&gt;
        Figure 1. Code preview with syntax highlighting
        
      &lt;/span&gt;
    &lt;/figcaption&gt;
  
&lt;/figure&gt;




&lt;h4 id=&#34;qlcommonmark&#34;&gt;QLCommonMark&lt;/h4&gt;

&lt;p&gt;I have been working with Markdown a lot, especially writing this blog all using Markdown and Hugo generator. It was quite a while I have searched around for a stable QuickLook plugin for Markdown. Before, I used &lt;a href=&#34;https://github.com/ttscoff/MMD-QuickLook&#34;&gt;MDD-QuickLook&lt;/a&gt;, an excellent fork of the well-known &lt;a href=&#34;https://github.com/fletcher&#34;&gt;Fletcher&lt;/a&gt;&amp;rsquo;s original &lt;a href=&#34;https://github.com/fletcher/MMD-QuickLook&#34;&gt;plugin&lt;/a&gt;. MDD-QuickLook allows me to customise the look of the Markdown preview using a Github based CSS file &lt;code&gt;~/.mdqlstyle.css&lt;/code&gt;.&lt;/p&gt;

&lt;p&gt;When I found &lt;a href=&#34;https://github.com/digitalmoksha/QLCommonMark&#34;&gt;QLCommonMark&lt;/a&gt;, it replaces MDD-QuickLook with a broader coverage including &lt;a href=&#34;http://commonmark.org/&#34;&gt;CommonMark&lt;/a&gt; and Markdown and can be configured in the same way, just different filename &lt;code&gt;~/.cmqlstyle.css&lt;/code&gt;. You can find my Markdown preview style &lt;a href=&#34;https://gist.github.com/htr3n/ffdcb6238f868dd1605af2bbd1e53546&#34;&gt;here&lt;/a&gt;.&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-sh&#34;&gt;brew cask install qlcommonmark
&lt;/code&gt;&lt;/pre&gt;


  





&lt;figure &gt;
  
  &lt;img
      
        src=&#34;https://htr3n.github.io/2018/07/handy-quicklook/qlcommonmark.png&#34;
      
        alt=&#34;QLCommonMark preview&#34;
        
        
        
        width=&#34;80%&#34; style=&#34;max-width: 100%;&#34;
         /&gt;
  
  
  
    &lt;figcaption&gt;
      &lt;span class=&#34;img--caption&#34;&gt;
        Figure 2. Markdown preview with a Github based style
        
      &lt;/span&gt;
    &lt;/figcaption&gt;
  
&lt;/figure&gt;




&lt;h4 id=&#34;quicklook-json&#34;&gt;QuickLook JSON&lt;/h4&gt;

&lt;p&gt;Both front-end and back-end developers are somehow familiar with &lt;a href=&#34;https://www.json.org/&#34;&gt;JavaScript Object Notation&lt;/a&gt; (JSON) format. As JavaScript and its ecosystem are rapidly growing, JSON and its variations become extremely popular. Hence, a QuickLook plugin for JSON should be ready in your macOS dev box.&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-sh&#34;&gt;brew cask install quicklook-json
&lt;/code&gt;&lt;/pre&gt;

&lt;h4 id=&#34;quicklook-csv&#34;&gt;QuickLook CSV&lt;/h4&gt;

&lt;p&gt;&lt;a href=&#34;https://en.wikipedia.org/wiki/Comma-separated_values&#34;&gt;CSV&lt;/a&gt; is a very popular format due to its simplicity and commonly used in statistics and data analytics. It contains values separated by comma, tabs, semi-colons, or pipes. MacOS provides built-in support for CSV previewing but I prefer a nicer-looking preview with &lt;a href=&#34;https://github.com/p2/quicklook-csv&#34;&gt;QuickLook CSV&lt;/a&gt; developed by Pascal Pfiffner (&lt;a href=&#34;https://github.com/p2&#34;&gt;p2&lt;/a&gt;) with alternate row shading.&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-sh&#34;&gt;brew cask install quicklook-csv
&lt;/code&gt;&lt;/pre&gt;


  





&lt;figure &gt;
  
  &lt;img
      
        src=&#34;https://htr3n.github.io/2018/07/handy-quicklook/csv.png&#34;
      
        alt=&#34;CSV preview&#34;
        
        
        
        width=&#34;80%&#34; style=&#34;max-width: 100%;&#34;
         /&gt;
  
  
  
    &lt;figcaption&gt;
      &lt;span class=&#34;img--caption&#34;&gt;
        Figure 3. A CSV file preview
        
      &lt;/span&gt;
    &lt;/figcaption&gt;
  
&lt;/figure&gt;




&lt;h4 id=&#34;hetimazip&#34;&gt;HetimaZip&lt;/h4&gt;

&lt;p&gt;There are many formats and standards around for compressing and archiving files such as &lt;a href=&#34;https://www.7-zip.org/&#34;&gt;7z&lt;/a&gt;, &lt;a href=&#34;http://bzip.org&#34;&gt;bzip2&lt;/a&gt;,  &lt;a href=&#34;http://www.gzip.org&#34;&gt;gzip&lt;/a&gt;, &lt;a href=&#34;https://www.rarlab.com/rar_file.htm&#34;&gt;rar&lt;/a&gt;, &lt;a href=&#34;https://en.wikipedia.org/wiki/Zip_%28file_format%29&#34;&gt;zip&lt;/a&gt;, to name but a few. &lt;a href=&#34;http://hetima.com/hetimazipql&#34;&gt;HetimaZip&lt;/a&gt; can help to &lt;em&gt;look through&lt;/em&gt; a Zip archive without unzipping or opening it. Note that, this plugin also support well some file types based on Zip format such as &lt;a href=&#34;https://en.wikipedia.org/wiki/JAR_%28file_format%29&#34;&gt;Java ARchive&lt;/a&gt; (&lt;code&gt;.jar&lt;/code&gt;), iOS app (&lt;a href=&#34;https://en.wikipedia.org/wiki/.ipa&#34;&gt;&lt;code&gt;.ipa&lt;/code&gt;&lt;/a&gt;), and many more.&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-sh&#34;&gt;brew cask install hetimazipql
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;Unfortunately, HetimaZip cannot handle &lt;a href=&#34;https://en.wikipedia.org/wiki/Android_application_package&#34;&gt;Android application package&lt;/a&gt; (&lt;code&gt;.apk&lt;/code&gt;). Thus we can combine with another nice plugin, &lt;a href=&#34;https://github.com/hezi/QuickLookAPK&#34;&gt;QuickLook APK&lt;/a&gt;.&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-sh&#34;&gt;brew cask install quicklookapk
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;There is an alternative to HetimaZip, namely, &lt;a href=&#34;https://macitbetter.com&#34;&gt;BetterZip&lt;/a&gt;. I have tried both but could not make BetterZip&amp;rsquo;s work in macOS High Sierra like HetimaZip&amp;rsquo;s to show the content of a normal Zip file.&lt;/p&gt;


  





&lt;figure &gt;
  
  &lt;img
      
        src=&#34;https://htr3n.github.io/2018/07/handy-quicklook/zip.png&#34;
      
        alt=&#34;Zip file preview&#34;
        
        
        
        width=&#34;80%&#34; style=&#34;max-width: 100%;&#34;
         /&gt;
  
  
  
    &lt;figcaption&gt;
      &lt;span class=&#34;img--caption&#34;&gt;
        Figure 4. Looking through a Zip file content
        
      &lt;/span&gt;
    &lt;/figcaption&gt;
  
&lt;/figure&gt;




&lt;h4 id=&#34;suspicious-package&#34;&gt;Suspicious Package&lt;/h4&gt;

&lt;p&gt;MacOs applications are sometimes distributed as &lt;a href=&#34;https://en.wikipedia.org/wiki/Installer_%28macOS%29&#34;&gt;installer packages&lt;/a&gt; (&lt;code&gt;.pkg&lt;/code&gt;). An installer package may run some scripts and install many files in your systems. A curious and careful user would need to find out what exactly the installation scripts doing and what files are going to be installed.&lt;/p&gt;

&lt;p&gt;Advanced macOS users can use &lt;span class=&#34;menu&#34;&gt;Show Package Contents&lt;/span&gt;
 to get inside the package, but it won&amp;rsquo;t show much details. We can use the app &lt;a href=&#34;https://www.mothersruin.com/software/SuspiciousPackage&#34;&gt;&lt;em&gt;Suspicious Package&lt;/em&gt;&lt;/a&gt; or its included QuickLook plugin to inspect any installer packages before approving for installation.&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-sh&#34;&gt;brew cask install suspicious-package
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;Note that it is a tad inconvenient that you &lt;a href=&#34;https://www.mothersruin.com/software/SuspiciousPackage/faq.html#plugin-only&#34;&gt;have to install the app&lt;/a&gt; &lt;em&gt;Suspicious Package&lt;/em&gt; only for its plugin. Copying the plugin alone won&amp;rsquo;t work because it depends on the core libraries for previewing. I&amp;rsquo;m not quite sure whether this is the developers&amp;rsquo; intention or there are actual technical difficulties behind the scene to solely deliver the QuickLook plugin.&lt;/p&gt;


  





&lt;figure &gt;
  
  &lt;img
      
        src=&#34;https://htr3n.github.io/2018/07/handy-quicklook/package.png&#34;
      
        alt=&#34;Installer package preview&#34;
        
        
        
        width=&#34;80%&#34; style=&#34;max-width: 100%;&#34;
         /&gt;
  
  
  
    &lt;figcaption&gt;
      &lt;span class=&#34;img--caption&#34;&gt;
        Figure 5. Looking through an installer package
        
      &lt;/span&gt;
    &lt;/figcaption&gt;
  
&lt;/figure&gt;




&lt;h4 id=&#34;qlimagesize&#34;&gt;qlImageSize&lt;/h4&gt;

&lt;p&gt;Normally macOS provides sufficient plugins for quick-looking images. &lt;a href=&#34;https://github.com/Nyx0uf/qlImageSize&#34;&gt;qlImageSize&lt;/a&gt; can enhance further by displaying the dimensions and size of the previewed image. These information is only available either when opening the image with an application or selecting the image file and pressing &lt;kbd&gt;âŒ˜&lt;/kbd&gt;+&lt;kbd&gt;I&lt;/kbd&gt; in Finder. I like &lt;em&gt;qlImageSize&lt;/em&gt; a lot as many times I just want to quickly see an image&amp;rsquo;s dimensions and size this way.&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-sh&#34;&gt;brew cask install qlimagesize
&lt;/code&gt;&lt;/pre&gt;
</description>
      </item>
    
      <item>
        <title>Faster and enjoyable ZSH (maybe)</title>
        <link>https://htr3n.github.io/2018/07/faster-zsh/</link>
        <pubDate>Mon, 23 Jul 2018 00:00:00 +0000</pubDate>
        
        <guid>ce34ad9666ef3d2b8439a9e24b44bbb8</guid>
        <description>

&lt;p&gt;Z shell (Zsh) has been my shell of choice in both Linux and macOS. I used to install &lt;a href=&#34;https://github.com/robbyrussell/oh-my-zsh&#34;&gt;oh-my-zsh&lt;/a&gt; or the claimed-to-be-faster &lt;a href=&#34;https://github.com/sorin-ionescu/prezto&#34;&gt;Prezto&lt;/a&gt; or &lt;a href=&#34;https://github.com/zimfw/zimfw&#34;&gt;Zim&lt;/a&gt; to leverage some of their cool libraries.&lt;/p&gt;

&lt;p&gt;Unfortunately, I realised that my favourite terminal app, &lt;a href=&#34;https://www.iterm2.com&#34;&gt;iTerm 2&lt;/a&gt;, became more and more sluggish when loading a new tab or window with more than one and a half second (without some virtual environment loaders like &lt;a href=&#34;https://github.com/creationix/nvm&#34;&gt;nvm&lt;/a&gt;, &lt;a href=&#34;https://rvm.io/&#34;&gt;rvm&lt;/a&gt;, &lt;a href=&#34;https://github.com/rbenv/rbenv&#34;&gt;rbenv&lt;/a&gt;, &lt;a href=&#34;http://www.jenv.be&#34;&gt;jenv&lt;/a&gt;).&lt;/p&gt;

&lt;p&gt;A quick &lt;a href=&#34;https://www.google.com/search?q=faster+zsh&#34;&gt;&lt;em&gt;G-fu&lt;/em&gt;&lt;/a&gt; could yield numerous posts on how to debug, optimise, speed up Zsh. I spent some time to refactor my own lightweight scripts instead of using big frameworks and was able to reach nearly one third of a second.  In this post, I will share and discuss some aspects that might affect Zsh loading time and how to mitigate them. Most of the relevant code and configurations can be found &lt;a href=&#34;https://github.com/htr3n/zsh-config&#34;&gt;here&lt;/a&gt;.&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;&lt;strong&gt;TL;DR:&lt;/strong&gt;&lt;br&gt;There are many aspects in Zsh that can potentially slow down its startup time and can be mitigated.&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;#organising-shell-startup-order&#34;&gt;Organising shell startup order&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;#avoiding-creating-subprocesses&#34;&gt;Avoiding creating subprocesses&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;#lazy-loading&#34;&gt;Lazy-loading instead of eager-loading&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;#optimising-completion-system&#34;&gt;Optimising completion system&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;#optimising-shell-prompts&#34;&gt;Optimising shell prompts&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;#macos-optimisations&#34;&gt;MacOS-specific optimisations&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/blockquote&gt;

&lt;h2 id=&#34;performance-analysis&#34;&gt;Performance Analysis&lt;/h2&gt;

&lt;h3 id=&#34;overall-execution-time&#34;&gt;Overall execution time&lt;/h3&gt;

&lt;p&gt;Crunching some numbers on Zsh loading time would be definitely useful for further in depth analysis of its performance. A simple timing of Zsh startup time can be measured approximately using the &lt;code&gt;time&lt;/code&gt; command that is available in most Unix/Linux/Mac systems.&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-sh&#34;&gt;$ /usr/bin/time /bin/zsh -i -c exit
        0.67 real         0.41 user         0.26 sys
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;The output of the command shows the execution time of Zsh breaking down to user-land and system. In order to get a better approximation, we can make a loop that invokes &lt;code&gt;time&lt;/code&gt; for 10 or greater, if possible.&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-sh&#34;&gt;for i in $(seq 1 10); do /usr/bin/time /bin/zsh -i -c exit; done;
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;This timing method is very fast and handy in case you want to quickly see how your Zsh performs, especially to test some changes you have just made.&lt;/p&gt;

&lt;h3 id=&#34;profiling&#34;&gt;Profiling&lt;/h3&gt;

&lt;p&gt;Zsh provides a built-in module &lt;a href=&#34;http://zsh.sourceforge.net/Doc/Release/Zsh-Modules.html#The-zsh_002fzprof-Module&#34;&gt;&lt;code&gt;zsh/zprof&lt;/code&gt;&lt;/a&gt; that can be used to profile Zsh functions. At the beginning of &lt;code&gt;~/.zshrc&lt;/code&gt;, we add &lt;code&gt;zmodload zsh/zprof&lt;/code&gt;. After restart the shell, we can use the command &lt;code&gt;zprof&lt;/code&gt; to show a very rich output on Zsh startup loading. An illustrative output of &lt;code&gt;zprof&lt;/code&gt; is shown below.&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-sh&#34;&gt;$ zprof
num  calls                time                       self            name
------------------------------------------------------------------------------
 1)    1          51.31    51.31   22.68%     49.68    49.68   21.96%  zle-line-init
 2)    2          45.72    22.86   20.21%     45.72    22.86   20.21%  compaudit
 3)  195          34.71     0.18   15.34%     25.52     0.13   11.28%  _zsh_autosuggest_bind_widget
 ...
&lt;/code&gt;&lt;/pre&gt;

&lt;blockquote&gt;
&lt;p&gt;&lt;strong&gt;Note&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;Two aforementioned approaches can give us a rough analysis on what aspects are invoked during Zsh startup so that we might figure out the bottleneck. In case you need to dig deeper, Arnout wrote &lt;a href=&#34;http://blog.xebia.com/profiling-zsh-shell-scripts&#34;&gt;a nice article&lt;/a&gt; in which he suggested a in-depth analysis and visualisation of Zsh loading using &lt;code&gt;xtrace&lt;/code&gt; and &lt;code&gt;kcachegrind&lt;/code&gt;. Benjamin developed &lt;a href=&#34;https://esham.io/2018/02/zsh-profiling&#34;&gt;a similar approach&lt;/a&gt; to more thorough tracing and analysis Zsh execution.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;h2 id=&#34;problematic-aspects-and-mitigation&#34;&gt;Problematic Aspects and Mitigation&lt;/h2&gt;

&lt;p&gt;Using two simple methods mentioned above, I was able to roughly understand some issues of my Zsh settings and tried to mitigate them to reduce startup time. I could not report the exact steps what have been done as it was a lot of trial-and-errors. Here I will discuss some major aspects combining my actual experiment and G-fu research.&lt;/p&gt;

&lt;h3 id=&#34;organising-shell-startup-order&#34;&gt;Organising shell startup order&lt;/h3&gt;

&lt;p&gt;The order that Zsh loads its configuration files are documented &lt;a href=&#34;http://zsh.sourceforge.net/Intro/intro_3.html&#34;&gt;here&lt;/a&gt; and &lt;a href=&#34;http://zsh.sourceforge.net/Doc/Release/Files.html&#34;&gt;here&lt;/a&gt;. Peter Ward &lt;a href=&#34;https://blog.flowblok.id.au/2013-02/shell-startup-scripts.html&#34;&gt;drew a nice diagram&lt;/a&gt; showing the loading process of Zsh alongside with Bash and Sh (note that he omitted the system-wide configurations in Zsh part).&lt;/p&gt;


  





&lt;figure &gt;
  
  &lt;img
      
        src=&#34;https://htr3n.github.io/2018/07/faster-zsh/shell-startup-actual.png&#34;
      
        alt=&#34;Shell startup order&#34;
        
        
        
         style=&#34;max-width: 100%;&#34;
         /&gt;
  
  
  
    &lt;figcaption&gt;
      &lt;span class=&#34;img--caption&#34;&gt;
        Figure . Bash, sh, and zsh shells startup order
        
          [&lt;a href=&#34;https://blog.flowblok.id.au/2013-02/shell-startup-scripts.html&#34;&gt;source&lt;/a&gt;]
        
      &lt;/span&gt;
    &lt;/figcaption&gt;
  
&lt;/figure&gt;




&lt;p&gt;It&amp;rsquo;s also useful to understand relevant shell concepts, such as &lt;em&gt;login&lt;/em&gt; vs. &lt;em&gt;non-login&lt;/em&gt;, &lt;em&gt;interactive&lt;/em&gt; vs. &lt;em&gt;non-interactive&lt;/em&gt; shown in the diagram. Please refer to, for example, &lt;a href=&#34;https://askubuntu.com/a/438170/115425&#34;&gt;here&lt;/a&gt; or &lt;a href=&#34;https://askubuntu.com/a/879400/115425&#34;&gt;here&lt;/a&gt; for further explanations.&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;&lt;strong&gt;Some shell examples:&lt;/strong&gt;&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;when opening a terminal emulator app (e.g. Terminal or iTerm 2), we are creating an &lt;em&gt;interactive, non-login shell&lt;/em&gt; (please see &lt;code&gt;login -pf&lt;/code&gt; later).&lt;/li&gt;
&lt;li&gt;when logging in into a machine using command line &lt;a href=&#34;https://en.wikipedia.org/wiki/Secure_Shell&#34;&gt; &lt;code&gt;ssh&lt;/code&gt;&lt;/a&gt; or &lt;a href=&#34;https://en.wikipedia.org/wiki/Su_%28Unix%29&#34;&gt;&lt;code&gt;su - username&lt;/code&gt;&lt;/a&gt;, we are working with an &lt;em&gt;interactive login&lt;/em&gt; shell.&lt;/li&gt;
&lt;li&gt;when executing a shell script, it is on a &lt;em&gt;non-interactive&lt;/em&gt;, &lt;em&gt;non-login&lt;/em&gt; shell.&lt;/li&gt;
&lt;/ul&gt;
&lt;/blockquote&gt;

&lt;p&gt;Grokking Zsh startup order will help us putting relevant configurations in right files as well as optimising the loading process. My local Zsh setting is orgranised as follow:&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;&lt;code&gt;.zshenv&lt;/code&gt;: invoked by all invocations of Zsh, so we should keep it small and merely initialise necessary variables.&lt;/li&gt;
&lt;li&gt;&lt;code&gt;.zlogin&lt;/code&gt;: will be loaded in login shells after &lt;em&gt;.zshrc&lt;/em&gt;. My &lt;a href=&#34;https://github.com/htr3n/zsh-config/blob/master/zlogin&#34;&gt;&lt;em&gt;.zlogin&lt;/em&gt;&lt;/a&gt; will compile &lt;code&gt;zcompdump&lt;/code&gt; in background as this is time-consuming and done only once per log-in session.&lt;/li&gt;
&lt;li&gt;&lt;code&gt;.zprofile&lt;/code&gt; : similar to &lt;em&gt;.zlogin&lt;/em&gt; but will be sourced before &lt;em&gt;.zshrc&lt;/em&gt;. Note that, both &lt;em&gt;.zprofile&lt;/em&gt; and &lt;em&gt;.zshrc&lt;/em&gt; are skipped in non-login non-interactive shells, as shown in Figure 1. So I learned a trick from &lt;a href=&#34;https://github.com/sorin-ionescu/prezto/tree/master/runcoms&#34;&gt;Prezto&lt;/a&gt; that declares environment variables in &lt;em&gt;.zprofile&lt;/em&gt; and uses &lt;em&gt;.zshenv&lt;/em&gt; to source &lt;em&gt;.zprofile&lt;/em&gt; (e.g. &lt;a href=&#34;https://github.com/htr3n/zsh-config/blob/master/zprofile&#34;&gt;&lt;em&gt;.zprofile&lt;/em&gt;&lt;/a&gt; and &lt;a href=&#34;https://github.com/htr3n/zsh-config/blob/master/zshenv&#34;&gt;&lt;em&gt;.zshenv&lt;/em&gt;&lt;/a&gt;). This way, non-login non-interactive shells will receive proper variable initialisations.&lt;/li&gt;
&lt;li&gt;&lt;code&gt;.zshrc&lt;/code&gt;: will be sourced in interactive shells. This contains the main part of Zsh configuration (e.g. my &lt;a href=&#34;https://github.com/htr3n/zsh-config/blob/master/zshrc&#34;&gt;&lt;em&gt;.zshrc&lt;/em&gt;&lt;/a&gt;).&lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&#34;avoiding-creating-subprocesses&#34;&gt;Avoiding creating subprocesses&lt;/h3&gt;

&lt;p&gt;Some commands look totally innocent and standard in your shell scripts but might cost you dearly. Among them are commands that launch new &lt;a href=&#34;http://tldp.org/LDP/abs/html/othertypesv.html#CHILDREF2&#34;&gt;child processes&lt;/a&gt; such as &lt;a href=&#34;http://zsh.sourceforge.net/Doc/Release/Expansion.html#Command-Substitution&#34;&gt;&lt;em&gt;command substitutions&lt;/em&gt;&lt;/a&gt; and &lt;a href=&#34;https://www.unix.com/man-page/posix/1posix/eval&#34;&gt;&lt;em&gt;eval&lt;/em&gt; commands&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;Command Substitutions&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;In Zsh, a command enclosed in  &lt;code&gt;$(command)&lt;/code&gt; or quoted with backticks &lt;code&gt;`command`&lt;/code&gt; will be replaced with its standard output. Thus, it is very popular in Unix/Linux world when one wants to execute a command and get the output to process further on. The bad thing is that &lt;em&gt;command substitution&lt;/em&gt; will launch a new process (i.e. a &lt;a href=&#34;http://tldp.org/LDP/abs/html/subshells.html#SUBSHELLSREF&#34;&gt;subshell&lt;/a&gt;).&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;&lt;code&gt;eval&lt;/code&gt; command&lt;/strong&gt;&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-sh&#34;&gt;eval [arg...]
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;The command &lt;code&gt;eval&lt;/code&gt; (sounds with &lt;em&gt;evil&lt;/em&gt;, ^_O) is part of POSIX standard and is available in most shells. It&amp;rsquo;s often used together with &lt;em&gt;command substitution&lt;/em&gt;. Essentially, &lt;code&gt;eval&lt;/code&gt; concats its arguments separated with spaces along with evaluating any variables or expressions to form a command with or without arguments. Then it executes the resulting command in the current shell. As such, &lt;code&gt;eval&lt;/code&gt; will cause side-effects as it must evaluate the inputs and perform expansions, if any.&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-sh&#34;&gt;$ command=&amp;quot;print &#39;Hello World&#39;&amp;quot;
$ command			   # nothing happen
$ eval $command
Hello World
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;This feature makes &lt;code&gt;eval&lt;/code&gt; powerful as it can dynamically evaluate and execute code. But dynamic evaluation also makes &lt;code&gt;eval&lt;/code&gt;  risky and time-consuming.&lt;/p&gt;

&lt;p&gt;In some cases, for instance, simple string manipulation, we can consider to replace command substitutions and &lt;code&gt;eval&lt;/code&gt; commands that invoke &lt;code&gt;sed&lt;/code&gt;, &lt;code&gt;awk&lt;/code&gt;, etc., with Zsh built-in constructs or hard-coded constants. Zsh provides numerous powerful built-in mechanisms for substring matchings, string explosion/splitting, and &lt;a href=&#34;http://zsh.sourceforge.net/Doc/Release/Expansion.html&#34;&gt;expansions&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;For instance, when using &lt;a href=&#34;https://brew.sh&#34;&gt;Homebrew&lt;/a&gt;, it is very convenient to get the path to an installed package using &lt;code&gt;$(brew --prefix &amp;lt;package&amp;gt;)&lt;/code&gt;.&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-sh&#34;&gt;export PATH=$PATH:&amp;quot;$(brew --prefix httpd)/bin&amp;quot;
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;It turns out many calls to &lt;code&gt;$(brew --prefix ...)&lt;/code&gt; would launch many subprocesses and thus &lt;a href=&#34;https://kev.inburke.com/kevin/profiling-zsh-startup-time&#34;&gt;slow down Zsh notably&lt;/a&gt;. When replacing that &lt;code&gt;$()&lt;/code&gt; command with its actual output, I could gain certain improvement. The caveat is that some upgraded versions might break these hard-coded values.&lt;/p&gt;

&lt;h3 id=&#34;lazy-loading&#34;&gt;&lt;em&gt;Lazy-loading&lt;/em&gt; instead of &lt;em&gt;eager-loading&lt;/em&gt;&lt;/h3&gt;

&lt;h4 id=&#34;function-autoloading&#34;&gt;Function autoloading&lt;/h4&gt;

&lt;p&gt;We can define and source new functions in Zsh. In this way, a function is &lt;em&gt;eagerly loaded&lt;/em&gt; and always available for use. Note that most of these functions might be not really needed until being invoked.&lt;/p&gt;

&lt;p&gt;Zsh can help postponing their loading time and allow to &lt;em&gt;load-on-demand&lt;/em&gt; via &lt;a href=&#34;http://zsh.sourceforge.net/Doc/Release/Functions.html#Autoloading-Functions&#34;&gt;function autoloading&lt;/a&gt;. This technique is often called &lt;em&gt;lazy loading&lt;/em&gt;.  Performance-wise, &lt;em&gt;lazy loading&lt;/em&gt; will put less pressure to the underlying system and reduce memory footprint. The same techniques are also preferred in many other fields such as databases, dynamic runtime libraries, etc.&lt;/p&gt;

&lt;p&gt;In my codebase, I create a folder, namely, &lt;code&gt;autoloaded&lt;/code&gt;, to store functions that will be, er&amp;hellip;, autoloaded by Zsh. For each function, for instance, &lt;code&gt;function hello(){...}&lt;/code&gt;, I will create a corresponding file named &lt;code&gt;hello&lt;/code&gt; inside &lt;code&gt;autoloaded&lt;/code&gt;. The content of that file is the function body (i.e. without &lt;code&gt;function&lt;/code&gt; and &lt;code&gt;(){}&lt;/code&gt;).&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-sh&#34;&gt;$ mkdir autoloaded
$ echo &amp;quot;print &#39;Hello World&#39;&amp;quot; &amp;gt;&amp;gt; autoloaded/hello
$ tree
.
â””â”€â”€ autoloaded
    â””â”€â”€ hello
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;The folder &lt;code&gt;autoloaded&lt;/code&gt; must be added to ZSH variable &lt;code&gt;fpath&lt;/code&gt; where ZSH will look for function definitions.&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-zsh&#34;&gt;# add &#39;autoload&#39; to fpath
$ fpath=($fpath autoloaded)
# try to invoke &#39;hello&#39;
$ hello
zsh: command not found: hello
# now mark `hello` for autoloading.
$ autoload hello
# quickly check how `hello` will be loaded.
$ which hello
hello () {
	# undefined
	builtin autoload -X
}
# now it works fine
$ hello
Hello World
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;The body of &lt;code&gt;hello&lt;/code&gt; was marked with &lt;code&gt;#undefined&lt;/code&gt; along with  &lt;code&gt;builtin autoload -X&lt;/code&gt; meaning it will be loaded on-demand. The first time &lt;code&gt;hello&lt;/code&gt; is called, Zsh will automatically load and execute it.&lt;/p&gt;

&lt;p&gt;In the same way, I configured Zsh to load all of my functions on-demand to reduce memory and loading time.&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;&lt;strong&gt;Note&lt;/strong&gt;:&lt;br&gt;In &lt;a href=&#34;https://github.com/htr3n/zsh-config&#34;&gt;my scripts&lt;/a&gt;,  &lt;code&gt;autoload -Uz function_name&lt;/code&gt; was used. The option &lt;code&gt;-U&lt;/code&gt; prevents alias from being expanded. That is, whenever you define an alias and a function having the same name, the alias will be considered first instead, so &lt;code&gt;-U&lt;/code&gt; just skips alias expansion.  And the option &lt;code&gt;-z&lt;/code&gt; indicates that the function will be auto-loaded using &lt;code&gt;zsh&lt;/code&gt; or &lt;code&gt;ksh&lt;/code&gt; style.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;h4 id=&#34;loading-virtual-environments&#34;&gt;Selective- or lazy-loading virtual environments&lt;/h4&gt;

&lt;p&gt;Many virtual environment loaders like &lt;a href=&#34;https://rvm.io/&#34;&gt;rvm&lt;/a&gt;, &lt;a href=&#34;https://github.com/rbenv/rbenv&#34;&gt;rbenv&lt;/a&gt;,  &lt;a href=&#34;http://www.jenv.be&#34;&gt;jenv&lt;/a&gt;, &lt;a href=&#34;https://github.com/creationix/nvm&#34;&gt;nvm&lt;/a&gt; have been developed to manage different run-time versions and libraries.   While being very handy for software development, most of these tools need to be &lt;em&gt;eagerly loaded&lt;/em&gt; (e.g. directly &lt;code&gt;source&lt;/code&gt; in &lt;code&gt;.zshrc&lt;/code&gt;) to work properly.&lt;/p&gt;

&lt;p&gt;Instead, we can consider to transform these loaders as much as possible into &lt;em&gt;on-demand&lt;/em&gt; wrapper functions. You can find a good example &lt;a href=&#34;https://peterlyons.com/problog/2018/01/zsh-lazy-loading&#34;&gt;here&lt;/a&gt;. In summary, Peter&amp;rsquo;s trick is to override &lt;code&gt;nvm&lt;/code&gt; with his own autoloaded &lt;code&gt;nvm()&lt;/code&gt; (that eventually invokes the original &lt;code&gt;nvm&lt;/code&gt; loader).  Carlos also went to same way for &lt;code&gt;rbenv&lt;/code&gt;, his own &lt;code&gt;antibody&lt;/code&gt;, &lt;code&gt;pyenv&lt;/code&gt; and achieved &lt;a href=&#34;https://carlosbecker.com/posts/speeding-up-zsh&#34;&gt;some good results&lt;/a&gt;. Benny C. Wong &lt;a href=&#34;http://bennycwong.github.io/post/speeding-up-oh-my-zsh/&#34;&gt;did similarly&lt;/a&gt; for both &lt;code&gt;nvm&lt;/code&gt; and &lt;code&gt;rvm&lt;/code&gt;.&lt;/p&gt;

&lt;p&gt;You can also find &lt;a href=&#34;https://frederic-hemberger.de/articles/speed-up-initial-zsh-startup-with-lazy-loading&#34;&gt;another interesting post&lt;/a&gt; by Frederic about optimising Zsh loading time by converting Kubernetes&amp;rsquo;s initialisation code into a lazy-loading function. When not using lazy-loading, you might find Adam&amp;rsquo;s &lt;a href=&#34;https://coderwall.com/p/j6cjnq/make-your-zsh-startup-faster-oh-my-zsh-and-rbenv-fixes&#34;&gt;trick&lt;/a&gt; useful for reducing  &lt;code&gt;rbenv&lt;/code&gt; time.&lt;/p&gt;

&lt;h3 id=&#34;optimising-completion-system&#34;&gt;Optimising completion system&lt;/h3&gt;

&lt;p&gt;One of the beloved Zsh&amp;rsquo;s features is its new &lt;a href=&#34;http://zsh.sourceforge.net/Doc/Release/Completion-System.html&#34;&gt;&lt;em&gt;completion system&lt;/em&gt;&lt;/a&gt;, so-called &lt;a href=&#34;https://linux.die.net/man/1/zshcompsys&#34;&gt;&lt;em&gt;zshcompsys&lt;/em&gt;&lt;/a&gt;. That is, when you type half of a certain command and press &lt;kbd&gt;Tab&lt;/kbd&gt;, Zsh is able to show some suggestions for completing that command.&lt;/p&gt;

&lt;p&gt;Zsh does ship with some built-in support for popular commands but not for all kinds of commands. Instead, Zsh offers powerful means for defining custom completion via &lt;a href=&#34;http://zsh.sourceforge.net/Doc/Release/Completion-System.html#Autoloaded-files&#34;&gt;underscored-autoloaded files&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;Zsh completion system must be activated by calling function &lt;a href=&#34;http://zsh.sourceforge.net/Doc/Release/Completion-System.html#Use-of-compinit&#34;&gt;&lt;code&gt;compinit&lt;/code&gt;&lt;/a&gt;. Most of the framework like oh-my-zsh or Prezto will take care of initialising completion system. In my case, after getting rid of big frameworks, I have to manually activate it with &lt;code&gt;autoload -Uz compinit &amp;amp;&amp;amp; compinit&lt;/code&gt;.&lt;/p&gt;

&lt;p&gt;Every time &lt;code&gt;compinit&lt;/code&gt; is invoked, it often checks its configurations and re-generates in case of changes. Some have investigated this matter and suggested improvements such as &lt;a href=&#34;https://gist.github.com/ctechols/ca1035271ad134841284&#34;&gt;checking &lt;em&gt;compinit&lt;/em&gt;&amp;rsquo;s cache  only once a day&lt;/a&gt;. A similar approach has also been implemented in &lt;a href=&#34;https://github.com/sorin-ionescu/prezto/blob/e149367445d2bcb9faa6ada365dfd56efec39de8/modules/completion/init.zsh#L34&#34;&gt;Prezto&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;Here is a simple excerpt based on &lt;a href=&#34;https://carlosbecker.com/posts/speeding-up-zsh&#34;&gt;Carlos&amp;rsquo;s solution&lt;/a&gt;.&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-zsh&#34;&gt;autoload -Uz compinit
if [ $(date +&#39;%j&#39;) != $(/usr/bin/stat -f &#39;%Sm&#39; -t &#39;%j&#39; ${ZDOTDIR:-$HOME}/.zcompdump) ]; then
  compinit
else
  compinit -C
fi
&lt;/code&gt;&lt;/pre&gt;

&lt;h4 id=&#34;lessening-compinit-invocations&#34;&gt;Lessening &lt;code&gt;compinit&lt;/code&gt; invocations&lt;/h4&gt;

&lt;p&gt;When running &lt;code&gt;zprof&lt;/code&gt; to profile Zsh execution, as many others also found out, I noticed a lot of invocations to &lt;code&gt;compinit&lt;/code&gt;. It was because I used some smart plugins like &lt;a href=&#34;https://github.com/zsh-users/zsh-completions&#34;&gt;zsh-users/zsh-completions&lt;/a&gt; and &lt;a href=&#34;https://github.com/zsh-users/zsh-autosuggestions&#34;&gt;zsh-users/zsh-autosuggestions&lt;/a&gt; and scattered &lt;code&gt;compinit&lt;/code&gt; in many places. Using &lt;a href=&#34;https://beyondgrep.com&#34;&gt;&lt;em&gt;ack&lt;/em&gt;&lt;/a&gt;, I could quickly spot and remove all &lt;code&gt;compinit&lt;/code&gt;, then only call once at the end of my &lt;a href=&#34;https://github.com/htr3n/zsh-config/blob/master/zshrc&#34;&gt;.zshrc&lt;/a&gt;.&lt;/p&gt;

&lt;h4 id=&#34;compiling-completion-dumped-files&#34;&gt;Compiling completion dumped files&lt;/h4&gt;

&lt;p&gt;Note that by default &lt;code&gt;compinit&lt;/code&gt; will produce a dumped configuration for accelerating future access. The default dumped file is &lt;code&gt;.zcompdump&lt;/code&gt; (which can be changed with &lt;code&gt;compinit -d new_dump_file&lt;/code&gt; or totally disabled with &lt;code&gt;compinit -D&lt;/code&gt;).&lt;/p&gt;

&lt;p&gt;We can go further by compiling the dumped file with the built-in command &lt;a href=&#34;http://zsh.sourceforge.net/Doc/Release/Shell-Builtin-Commands.html#index-compilation&#34;&gt;&lt;code&gt;zcompile&lt;/code&gt; &lt;/a&gt; for faster autoloading of completion functions. As completion is only needed for interactive shell sessions, I put the &lt;code&gt;zcompile&lt;/code&gt; code inside &lt;a href=&#34;https://github.com/htr3n/zsh-config/blob/master/zlogin&#34;&gt;.zlogin&lt;/a&gt; and force it to run in background mode.&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-zsh&#34;&gt;# Execute code in the background to not affect the current session
{
  # Compile zcompdump, if modified, to increase startup speed.
  zcompdump=&amp;quot;${ZDOTDIR:-$HOME}/.zcompdump&amp;quot;
  if [[ -s &amp;quot;$zcompdump&amp;quot; &amp;amp;&amp;amp; (! -s &amp;quot;${zcompdump}.zwc&amp;quot; || &amp;quot;$zcompdump&amp;quot; -nt &amp;quot;${zcompdump}.zwc&amp;quot;) ]]; then
    zcompile &amp;quot;$zcompdump&amp;quot;
  fi
} &amp;amp;!
&lt;/code&gt;&lt;/pre&gt;

&lt;h3 id=&#34;optimising-shell-prompts&#34;&gt;Optimising shell prompts&lt;/h3&gt;

&lt;p&gt;You can find a lot of frameworks or plugins offer super duper cool command line prompts like &lt;a href=&#34;http://stevelosh.com/blog/2010/02/my-extravagant-zsh-prompt&#34;&gt;this&lt;/a&gt;, &lt;a href=&#34;https://denysdovhan.com/spaceship-prompt/&#34;&gt;this&lt;/a&gt;, or &lt;a href=&#34;https://github.com/bhilburn/powerlevel9k/wiki/Show-Off-Your-Config&#34;&gt;these&lt;/a&gt; that show rich information regarding your current working folder such as versioning status, virtual environments, and many more.&lt;/p&gt;

&lt;p&gt;Obviously getting these information will induce extra execution time, especially for checking large versioned repositories or virtual runtime libraries. That leads to many &lt;a href=&#34;https://github.com/robbyrussell/oh-my-zsh/pull/1570&#34;&gt;workarounds&lt;/a&gt;, &lt;a href=&#34;http://marc-abramowitz.com/archives/2012/04/10/fix-for-oh-my-zsh-git-svn-prompt-slowness&#34;&gt;tweaks&lt;/a&gt;, &lt;a href=&#34;https://github.com/robbyrussell/oh-my-zsh/pull/1570&#34;&gt;hacks&lt;/a&gt;, &lt;a href=&#34;https://github.com/creationix/nvm/issues/539&#34;&gt;other hacks&lt;/a&gt;, and more &lt;a href=&#34;https://github.com/denysdovhan/spaceship-prompt/issues/161&#34;&gt;hacks&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;You might want to consider some recent approaches on speeding up shell prompts such as Anish&amp;rsquo;s &lt;a href=&#34;https://www.anishathalye.com/2015/02/07/an-asynchronous-shell-prompt&#34;&gt;non-blocking prompt&lt;/a&gt; or Sindre Sorhus&amp;rsquo;s &lt;a href=&#34;https://github.com/sindresorhus/pure&#34;&gt;&lt;em&gt;pure&lt;/em&gt;&lt;/a&gt; based on Mathias Fredriksson&amp;rsquo;s &lt;a href=&#34;https://github.com/mafredri/zsh-async&#34;&gt;zsh-async&lt;/a&gt;. I have tried &lt;em&gt;pure&lt;/em&gt; and found out its timing is very close to &lt;a href=&#34;https://github.com/htr3n/zsh-config/blob/master/lib/prompts-htr3n.sh&#34;&gt;my own prompts&lt;/a&gt; based on vanilla Zsh scripts and built-in function &lt;a href=&#34;http://zsh.sourceforge.net/Doc/Release/User-Contributions.html#Version-Control-Information&#34;&gt;&lt;code&gt;vcs_info&lt;/code&gt;&lt;/a&gt;. Therefore, I mostly switch back and forth between these prompts in my dev box and totally satisfy with their performance thus far.&lt;/p&gt;

&lt;h3 id=&#34;macos-optimisations&#34;&gt;MacOS-specific optimisations&lt;/h3&gt;

&lt;h4 id=&#34;path-helper&#34;&gt;Optimising &lt;code&gt;path_helper&lt;/code&gt;&lt;/h4&gt;

&lt;p&gt;In the chain of Zsh startup order, &lt;code&gt;/etc/zprofile&lt;/code&gt; will be sourced before &lt;code&gt;~/.zprofile&lt;/code&gt;. So, macOS uses &lt;code&gt;/etc/profile&lt;/code&gt; to establish paths to executable files via &lt;a href=&#34;https://opensource.apple.com/source/shell_cmds/shell_cmds-162/path_helper/path_helper.c.auto.html&#34;&gt;&lt;em&gt;path_helper&lt;/em&gt;&lt;/a&gt;.&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-sh&#34;&gt;$ cat /etc/zprofile
# system-wide environment settings for zsh(1)
if [ -x /usr/libexec/path_helper ]; then
	eval `/usr/libexec/path_helper -s`
fi
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;To do that, &lt;em&gt;path_helper&lt;/em&gt; will read &lt;code&gt;/etc/paths&lt;/code&gt; and &lt;code&gt;/etc/manpaths&lt;/code&gt;, then read all files inside &lt;code&gt;/etc/paths.d&lt;/code&gt; and &lt;code&gt;/etc/manpaths.d&lt;/code&gt; and append their contents to &lt;code&gt;$PATH&lt;/code&gt; and &lt;code&gt;$MANPATH&lt;/code&gt;, respectively. New paths can be conveniently added by adding a plaintext file in &lt;code&gt;/etc/paths.d&lt;/code&gt; instead of messing common shared configuration files.&lt;/p&gt;

&lt;p&gt;Previously in some cases, &lt;em&gt;path_helper&lt;/em&gt; might be very slow as mentioned by Michael Tsai &lt;a href=&#34;https://mjtsai.com/blog/2009/04/01/slow-opening-terminal-windows&#34;&gt;here&lt;/a&gt; and even deserved a &lt;a href=&#34;https://gist.github.com/mkhl/123525&#34;&gt;patch&lt;/a&gt; and a &lt;a href=&#34;https://github.com/mgprot/path_helper&#34;&gt;Perl based alternative&lt;/a&gt;. I reckoned that &lt;em&gt;path_helper&lt;/em&gt; is getting notably slow when the number of paths are growing but its recent version is no longer a script but 64-bit binary executable and seems to work faster.&lt;/p&gt;

&lt;p&gt;If you notice that &lt;em&gt;path_helper&lt;/em&gt; makes Zsh slow, you can just put the contents of &lt;code&gt;/etc/paths&lt;/code&gt; and of all files in &lt;code&gt;/etc/paths.d&lt;/code&gt; directly in &lt;code&gt;.zprofile&lt;/code&gt; . After that, just comment out the corresponding code in &lt;code&gt;/etc/profile&lt;/code&gt;.&lt;/p&gt;

&lt;blockquote class=&#34;warning&#34;&gt;
    &lt;strong&gt;Warning&lt;/strong&gt;&lt;br&gt;
    Tinkering with system configurations like &lt;code&gt;/etc/zprofile&lt;/code&gt; might be risky. And, most of the time, future system updates often reset these changes back to the default values.
&lt;/blockquote&gt;

&lt;h4 id=&#34;optimising-login-process&#34;&gt;Optimising the login process&lt;/h4&gt;

&lt;p&gt;The default &lt;a href=&#34;https://opensource.apple.com/source/system_cmds/system_cmds-541/login.tproj&#34;&gt;&lt;em&gt;login process&lt;/em&gt;&lt;/a&gt; of macOS could be the culprit too. Opening a terminal window or tab will trigger &lt;code&gt;login -pf username&lt;/code&gt;  which, in turn, reads from and writes into the logs file in &lt;code&gt;/var/log/asl&lt;/code&gt; (note &lt;code&gt;syslog()&lt;/code&gt; invocations in &lt;a href=&#34;https://opensource.apple.com/source/system_cmds/system_cmds-541/login.tproj/login.c.auto.html&#34;&gt;&lt;code&gt;login.c&lt;/code&gt;&lt;/a&gt;).&lt;/p&gt;

&lt;p&gt;We can check this out in any terminal app. The command &lt;code&gt;ps -ef | grep login&lt;/code&gt; will show details about the &lt;code&gt;login&lt;/code&gt; process.&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-sh&#34;&gt;$ ps -ef | grep login
...
  0 25142 25141   0  6:40AM ttys000    0:00.13 login -fp htr3n
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;In case you want to dig deeper, execute the following command in a terminal tab/window,&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-sh&#34;&gt;$ sudo opensnoop | grep &amp;quot;/var/log/asl&amp;quot;
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;then open another tab or window to see a lot of accessing to ASLs (standing for &lt;strong&gt;A&lt;/strong&gt;pple &lt;strong&gt;S&lt;/strong&gt;ystem &lt;strong&gt;L&lt;/strong&gt;og, deprecated since macOS 10.12 but still in use somewhere).&lt;/p&gt;

&lt;p&gt;Thus, some have reported a &lt;em&gt;magic&lt;/em&gt; that somehow speeds up shell startup by &lt;a href=&#34;http://osxdaily.com/2010/05/06/speed-up-a-slow-terminal-by-clearing-log-files&#34;&gt;deleting macOS ASLs&lt;/a&gt;.&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-sh&#34;&gt;# remove all Apple system logs -- more destructive way
$ sudo rm -rf /private/var/log/asl/*.asl
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;Nevertheless, these logs will continuously grow day after day.  We might configure &lt;code&gt;/etc/asl.conf&lt;/code&gt; to permanently reduce the amount of ASLs. Using &lt;a href=&#34;https://en.wikipedia.org/wiki/sudo&#34;&gt;&lt;code&gt;sudo&lt;/code&gt;&lt;/a&gt; to open that file in Text Editor (or your editor of choice),&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-sh&#34;&gt;$ sudo open -e /etc/asl.conf
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;then looking for the following lines and changing them accordingly and leaving the rest intact.&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;...
# save everything from emergency to notice
# ? [&amp;lt;= Level notice] store
? [&amp;lt;= Level critical] store
...
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;The idea is to change the log level from &lt;code&gt;notice&lt;/code&gt; to a higher level such as &lt;code&gt;warning&lt;/code&gt;, &lt;code&gt;error&lt;/code&gt;, or &lt;code&gt;critical&lt;/code&gt; (see more on &lt;em&gt;Syslog Message Severities&lt;/em&gt; in &lt;a href=&#34;https://tools.ietf.org/html/rfc5424#page-11&#34;&gt;RFC 5424&lt;/a&gt;. You might also look further in the folder &lt;code&gt;/etc/asl/&lt;/code&gt; to tinker log configurations of certain applications but that is beyond the scope of this article.&lt;/p&gt;

&lt;p&gt;Another way is to skip the process of accessing ASLs altogether. For instance, with iTerm 2, press &lt;kbd&gt;âŒ˜&lt;/kbd&gt; + &lt;kbd&gt;,&lt;/kbd&gt; to open menu &lt;span class=&#34;menu&#34;&gt;Preferences&lt;/span&gt;
, then go to &lt;span class=&#34;menu&#34;&gt;Profiles â–¸ General&lt;/span&gt;
.&lt;/p&gt;


  





&lt;figure &gt;
  
  &lt;img
      
        src=&#34;https://htr3n.github.io/2018/07/faster-zsh/iterm2-login.png&#34;
      
        alt=&#34;iTerm 2 login setting&#34;
        
        
        
         style=&#34;max-width: 100%;&#34;
         /&gt;
  
  
  
    &lt;figcaption&gt;
      &lt;span class=&#34;img--caption&#34;&gt;
        Figure 1. iTerm 2 login setting
        
      &lt;/span&gt;
    &lt;/figcaption&gt;
  
&lt;/figure&gt;




&lt;p&gt;The same way can be applied for Apple&amp;rsquo;s built-in Terminal app.&lt;/p&gt;


  





&lt;figure &gt;
  
  &lt;img
      
        src=&#34;https://htr3n.github.io/2018/07/faster-zsh/terminal-login.png&#34;
      
        alt=&#34;Built-in Terminal login setting&#34;
        
        
        
         style=&#34;max-width: 100%;&#34;
         /&gt;
  
  
  
    &lt;figcaption&gt;
      &lt;span class=&#34;img--caption&#34;&gt;
        Figure 2. Built-in Terminal login setting
        
      &lt;/span&gt;
    &lt;/figcaption&gt;
  
&lt;/figure&gt;




&lt;h2 id=&#34;conclusion&#34;&gt;Conclusion&lt;/h2&gt;

&lt;p&gt;We have walked through some major aspects that might affect Zsh in particular, and other shells, loading time. I hope these discussions can help you to pinpoint and address your shell startup issues and have better experience working with shells and command line. This is what I got after all these effort.&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-sh&#34;&gt;â¯ for i in $(seq 1 5); do /usr/bin/time /bin/zsh -i -c exit; done
        0.31 real         0.16 user         0.13 sys
        0.28 real         0.15 user         0.12 sys
        0.28 real         0.15 user         0.12 sys
        0.28 real         0.15 user         0.12 sys
        0.28 real         0.15 user         0.12 sys
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;If you have any suggestions for improvement or successful tweaks, please drop a comment below.&lt;/p&gt;

&lt;h2 id=&#34;reading-list&#34;&gt;Reading List&lt;/h2&gt;

&lt;ol&gt;
&lt;li&gt;&lt;a href=&#34;https://kev.inburke.com/kevin/profiling-zsh-startup-time&#34;&gt;https://kev.inburke.com/kevin/profiling-zsh-startup-time&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://esham.io/2018/02/zsh-profiling&#34;&gt;https://esham.io/2018/02/zsh-profiling&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://carlosbecker.com/posts/speeding-up-zsh&#34;&gt;https://carlosbecker.com/posts/speeding-up-zsh&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://github.com/robbyrussell/oh-my-zsh/issues/5327&#34;&gt;https://github.com/robbyrussell/oh-my-zsh/issues/5327&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://coderwall.com/p/sladaq/faster-zsh-in-large-git-repository&#34;&gt;https://coderwall.com/p/sladaq/faster-zsh-in-large-git-repository&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://ahmadnazir.github.io/posts/2016-11-03-load-shell-faster/post.html&#34;&gt;https://ahmadnazir.github.io/posts/2016-11-03-load-shell-faster/post.html&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://superuser.com/a/47856/82870&#34;&gt;https://superuser.com/a/47856/82870&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://github.com/robbyrussell/oh-my-zsh&#34;&gt;https://github.com/robbyrussell/oh-my-zsh&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://github.com/sorin-ionescu/prezto&#34;&gt;https://github.com/sorin-ionescu/prezto&lt;/a&gt;&lt;/li&gt;
&lt;/ol&gt;
</description>
      </item>
    
      <item>
        <title>A mininal Hugo blogging workflow</title>
        <link>https://htr3n.github.io/2018/07/minimal-hugo-workflow/</link>
        <pubDate>Sat, 14 Jul 2018 00:00:00 +0000</pubDate>
        
        <guid>86a31309dc9c0b778df5c3c5ac4f8c1b</guid>
        <description>

&lt;p&gt;&lt;a href=&#34;https://gohugo.io&#34;&gt;Hugo&lt;/a&gt; is a blazingly fast static site generator based on &lt;a href=&#34;https://golang.org&#34;&gt;Go&lt;/a&gt;. My &lt;a href=&#34;https://htr3n.github.io/2018/01/first-experience-with-hugo/&#34;&gt;first experience with Hugo&lt;/a&gt; was truly pleasant. I appreciate the separation of contents, presentations, and site generation logics in Hugo  that leads to less effort for maintenance or switching themes.&lt;/p&gt;

&lt;p&gt;On the run-time side, it&amp;rsquo;s also nice that Hugo is often delivered as a reasonably fat executable binary (about 30~50 MB). We almost do not have to install anything else to make it work (although this is not entirely true since Hugo 0.43+).&lt;/p&gt;

&lt;p&gt;Using Hugo to &lt;a href=&#34;https://github.com/htr3n/htr3n-blog&#34;&gt;build&lt;/a&gt; this blog, I have learned a lot of things and tried to set up a simple blogging workflow to automate as much as possible the process from writing articles and altering themes to generating sites and watching for changes. My Hugo based blogging workflow comprises three aspects:&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;&lt;em&gt;Content&lt;/em&gt; (mainly Markdown)&lt;/li&gt;
&lt;li&gt;&lt;em&gt;Presentation&lt;/em&gt; (theming)&lt;/li&gt;
&lt;li&gt;&lt;em&gt;Site generation&lt;/em&gt; (Hugo)&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;I will take &lt;a href=&#34;https://github.com/htr3n/htr3n-blog&#34;&gt;my own Hugo blogging project&lt;/a&gt; as an illustrative example. An overview of the project structure is shown in the picture below.&lt;/p&gt;


  





&lt;figure &gt;
  
  &lt;img
      
        src=&#34;https://htr3n.github.io/2018/07/minimal-hugo-workflow/project-structure.png&#34;
      
        alt=&#34;A simple Hugo project structure&#34;
        
        
        
         style=&#34;max-width: 100%;&#34;
         /&gt;
  
  
  
    &lt;figcaption&gt;
      &lt;span class=&#34;img--caption&#34;&gt;
        Figure . A simple Hugo project structure
        
      &lt;/span&gt;
    &lt;/figcaption&gt;
  
&lt;/figure&gt;




&lt;p&gt;&lt;strong&gt;Some relevant project resources:&lt;/strong&gt;&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;&lt;code&gt;assets&lt;/code&gt;: my pre-processing resources (e.g. SASS, LESS, images, JavaScript).&lt;/li&gt;
&lt;li&gt;&lt;code&gt;content&lt;/code&gt;: Markdown contents&lt;/li&gt;
&lt;li&gt;&lt;code&gt;public&lt;/code&gt;: the Web sites generated by Hugo&lt;/li&gt;
&lt;li&gt;&lt;code&gt;static&lt;/code&gt;: resources (e.g. CSS, images, JavaScript) to be copied directly to &lt;code&gt;public&lt;/code&gt; by Hugo.&lt;/li&gt;
&lt;li&gt;&lt;code&gt;themes&lt;/code&gt;: Hugo themes (here I use my own theme &lt;a href=&#34;https://github.com/htr3n/hyde-hyde&#34;&gt;&lt;em&gt;hyde-hyde&lt;/em&gt;&lt;/a&gt;)&lt;/li&gt;
&lt;li&gt;&lt;code&gt;package.json&lt;/code&gt;: Node.js / NPM main configuration&lt;/li&gt;
&lt;li&gt;&lt;code&gt;gulpfile.js&lt;/code&gt;: Gulp configuration&lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&#34;content&#34;&gt;Content&lt;/h2&gt;

&lt;p&gt;Among many nice features, Hugo supports Markdown contents out-of-the-box. Thus I can keep writing blog posts with my favourite Markdown editors. I have tried a number of editors in macOS, ranging from simple plain text with preview add-ons like &lt;a href=&#34;https://www.sublimetext.com&#34;&gt;Sublime Text&lt;/a&gt;, &lt;a href=&#34;https://macromates.com&#34;&gt;TextMate&lt;/a&gt;, &lt;a href=&#34;https://atom.io&#34;&gt;Atom&lt;/a&gt;, &lt;a href=&#34;https://code.visualstudio.com&#34;&gt;Visual Studio Code&lt;/a&gt;, &lt;a href=&#34;https://www.vim.org&#34;&gt;Vim&lt;/a&gt; to some built-in ones like &lt;a href=&#34;http://www.bear-writer.com&#34;&gt;Bear&lt;/a&gt;, &lt;a href=&#34;https://bywordapp.com&#34;&gt;Byword&lt;/a&gt;, &lt;a href=&#34;http://macdown.uranusjr.com&#34;&gt;MacDown&lt;/a&gt;, &lt;a href=&#34;http://mouapp.com&#34;&gt;Mou&lt;/a&gt;, &lt;a href=&#34;http://www.texts.io&#34;&gt;Texts&lt;/a&gt;, &lt;a href=&#34;https://ia.net/writer&#34;&gt;IA Writer&lt;/a&gt;, &lt;a href=&#34;http://marked2app.com&#34;&gt;Marked&lt;/a&gt; (only preview), &lt;a href=&#34;https://typora.io&#34;&gt;Typora&lt;/a&gt;, to name but by no means completed. You can see &lt;a href=&#34;https://github.com/mundimark/awesome-markdown-editors&#34;&gt;here&lt;/a&gt; a list including most of Markdown editors available and &lt;a href=&#34;https://www.sitepoint.com/the-best-markdown-editors-for-mac&#34;&gt;here&lt;/a&gt; are some for macOS.&lt;/p&gt;

&lt;p&gt;My first editor was Mou, due to its simplicity and highly customisable themes and rendering styles. Later on Mou&amp;rsquo;s developer decided to sell its ownership, then resumed working on its beta making the software status a bit unclear and frustrated. &lt;a href=&#34;https://uranusjr.com&#34;&gt;Tzu-ping Chung&lt;/a&gt; (@&lt;a href=&#34;https://github.com/uranusjr&#34;&gt;uranusjr&lt;/a&gt;) has created a similar editor, namely, &lt;a href=&#34;http://macdown.uranusjr.com&#34;&gt;MacDown&lt;/a&gt;, and &lt;a href=&#34;https://github.com/MacDownApp/macdown&#34;&gt;open-sourced it&lt;/a&gt;. Then I started using MacDown with the existing Mou&amp;rsquo;s themes and styles.&lt;/p&gt;

&lt;p&gt;I could not remember exactly when and how I found &lt;a href=&#34;https://typora.io&#34;&gt;Typora&lt;/a&gt; but it never ceases to amaze me. With Typora, I can enjoy seamless editing and rendering in the same window, i.e., I can write Markdown normally and directly see the content rendered. Typora is still free in its beta phase and will become paid software when released. It has become my Markdown editor of choice and will be in future should its price tag is reasonable. For quick fixes, I use any editors at hand, for instance Visual Studio Code when working on a Hugo project.&lt;/p&gt;

&lt;h2 id=&#34;presentation&#34;&gt;Presentation&lt;/h2&gt;

&lt;p&gt;The nice thing is that a Hugo theme is a standalone component for decorating Hugo generated sites. Nevertheless, I can override a theme&amp;rsquo;s settings (e.g. layouts, styles) with my own versions with respect to &lt;a href=&#34;https://gohugo.io/templates/lookup-order&#34;&gt;Hugo lookup order&lt;/a&gt;. A theme contains resources for templating, layouting, and styling. Hugo&amp;rsquo;s templating and layouting have been discussed a lot around. Styling resources in a typical Hugo project can be found inside its theme&amp;rsquo;s &lt;code&gt;static&lt;/code&gt; or the project root&amp;rsquo;s &lt;code&gt;static&lt;/code&gt; and &lt;code&gt;assets&lt;/code&gt;.&lt;/p&gt;

&lt;p&gt;I used to work with CSS styles. After learning more about CSS preprocessors and attracted by the abstraction levels and tooling they provide, I decide to give a try and refactored my existing codebase to SCSS. Hence, my workflow should include support for SCSS  (you might opt for LESS or Stylus but still can leverage a similar workflow with just right processing components).&lt;/p&gt;

&lt;h2 id=&#34;site-generation&#34;&gt;Site Generation&lt;/h2&gt;

&lt;p&gt;Hugo will be main element that generates the final Web site taking input resources from content and presentation components. Until version 0.43, Hugo has not provided support for SASS. Hence, many have to develop their own  &lt;a href=&#34;https://blog.carlmjohnson.net/post/2017/hugo-asset-pipeline&#34;&gt;&amp;lsquo;&lt;em&gt;asset pipeline&lt;/em&gt;&amp;lsquo;&lt;/a&gt;, i.e., incorporating preprocessors and post-processors with Hugo generation process.&lt;/p&gt;

&lt;h3 id=&#34;endogenous-pipeline&#34;&gt;Endogenous Pipeline&lt;/h3&gt;

&lt;p&gt;This approach, also called &lt;em&gt;in-line pipeline&lt;/em&gt;, only works since Hugo &lt;a href=&#34;https://gohugo.io/news/0.43-relnotes&#34;&gt;v0.43/extended&lt;/a&gt; and later that supports processing SASS/CSS with consideration for &lt;a href=&#34;https://en.wikipedia.org/wiki/Minification_%28programming%29&#34;&gt;minification&lt;/a&gt;, post-processing, and &lt;a href=&#34;https://www.keycdn.com/support/what-is-cache-busting&#34;&gt;cache busting&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;In Hugo templates, I can refer to SCSS files via &lt;a href=&#34;https://gohugo.io/content-management/page-resources&#34;&gt;&lt;em&gt;page resources&lt;/em&gt;&lt;/a&gt;.&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-html&#34;&gt;{{ $styles := resources.Get &amp;quot;scss/hyde-hyde.scss&amp;quot; | toCSS | postCSS (dict &amp;quot;use&amp;quot; &amp;quot;autoprefixer&amp;quot;) | minify | fingerprint }}
&amp;lt;link rel=&amp;quot;stylesheet&amp;quot; href=&amp;quot;{{ $styles.Permalink }}&amp;quot; integrity=&amp;quot;{{ $styles.Data.Integrity }}&amp;quot;&amp;gt;
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;Note that Hugo will look for &lt;code&gt;scss/hyde-hyde.scss&lt;/code&gt; in the project&amp;rsquo;s root and then the theme&amp;rsquo;s root, in that order.&lt;/p&gt;

&lt;p&gt;Hugo retrieves the resource &lt;code&gt;hyde-hyde.scss&lt;/code&gt;  using &lt;code&gt;Resources.Get&lt;/code&gt;, then &lt;a href=&#34;https://gohugo.io/hugo-pipes/scss-sass&#34;&gt;transforms it&lt;/a&gt; into &lt;code&gt;hyde-hyde.css&lt;/code&gt; and passes it to &lt;a href=&#34;https://gohugo.io/hugo-pipes/postcss&#34;&gt;PostCSS&lt;/a&gt; for &lt;a href=&#34;https://github.com/postcss/autoprefixer&#34;&gt;autoprefixing&lt;/a&gt;. After that, it &lt;a href=&#34;https://gohugo.io/hugo-pipes/minification/&#34;&gt;minifies&lt;/a&gt; the CSS and generates a &lt;em&gt;fingerprinted version&lt;/em&gt;.  The second line simply links the resulting &lt;code&gt;hyde-hyde.css&lt;/code&gt; with HTML via the variable &lt;code&gt;$style&lt;/code&gt;. The result in the generated HTML will be like this (note that the code can be different to yours).&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-html&#34;&gt;&amp;lt;link rel=&amp;quot;stylesheet&amp;quot; href=&amp;quot;http://localhost:1313/scss/hyde-hyde.4ff234ab46aa5302c7e0d2f35b9c76a8bba9fe42a9e8a6c7c47df7f85b8de122.css&amp;quot; integrity=&amp;quot;sha256-T/I0q0aqUwLH4NLzW5x2qLup/kKp6KbHxH33&amp;amp;#43;FuN4SI=&amp;quot;&amp;gt;
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;The fingerprint code is for &lt;em&gt;cache busting&lt;/em&gt; and only changed when the source file is altered.&lt;/p&gt;

&lt;p&gt;The biggest advantage of &lt;em&gt;in-line pipeline&lt;/em&gt; is that Hugo already provides a certain level of built-in support. Hugo&amp;rsquo;s &lt;em&gt;live reload&lt;/em&gt;, i.e. serving the resulting sites live and automatically refreshing whenever there are changes of contents or themes, also works superbly for this case.&lt;/p&gt;

&lt;p&gt;For many scenarios, we can use this approach instead of configuring complex tools like Gulp, Grunt, or Webpack. To be precise, I do need to install extra tools, which are &lt;code&gt;postcss-cli&lt;/code&gt; and &lt;code&gt;autoprefixer&lt;/code&gt;, for the aforementioned example to work and Hugo 0.43 extended version &lt;a href=&#34;https://github.com/Homebrew/homebrew-core/issues/29898&#34;&gt;partially depends on Cgo/libc++&lt;/a&gt;.&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-sh&#34;&gt;$ npm i -g postcss-cli autoprefixer
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;Another downside to consider is that, in this way, external tools like &lt;code&gt;postcss&lt;/code&gt; will slow down Hugo.&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;&lt;strong&gt;Note&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;As I checked out &lt;a href=&#34;https://discourse.gohugo.io/t/how-to-use-source-maps-with-hugo-0-43/12826&#34;&gt;this thread&lt;/a&gt; and &lt;a href=&#34;https://discourse.gohugo.io/t/how-to-use-source-maps-with-hugo-0-43/12826/9&#34;&gt;tried on my project&lt;/a&gt;, Hugo&amp;rsquo;s extensions like &lt;code&gt;postCSS&lt;/code&gt;, &lt;code&gt;minify&lt;/code&gt;, and &lt;code&gt;fingerprint&lt;/code&gt; could mess up CSS sourcemaps. If you need sourcemaps for developing and debugging, please ignore them and consider the &lt;em&gt;exogenous pipeline&lt;/em&gt;.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;h3 id=&#34;exogenous-pipeline&#34;&gt;Exogenous Pipeline&lt;/h3&gt;

&lt;p&gt;When working on more complex asset pipelining, we have to involve external tools to build an &lt;em&gt;exogenous asset pipeline&lt;/em&gt;. This is also my blogging workflow before Hugo v0.43. Now, I can mostly get rid of this &lt;em&gt;exogenous pipeline&lt;/em&gt;. Here we will walk through this approach merely for the sake of completeness.&lt;/p&gt;

&lt;p&gt;There are several ways to handle Web resources. For instance, Netlify provides  a boilerplate project, namely, &lt;a href=&#34;https://github.com/netlify/victor-hugo&#34;&gt;&lt;em&gt;victor-hugo&lt;/em&gt;&lt;/a&gt; for starting a new Hugo project and preparing to deploy to its hosting. This boilerplate employs &lt;a href=&#34;https://gulpjs.com&#34;&gt;Gulp&lt;/a&gt;, &lt;a href=&#34;https://webpack.js.org&#34;&gt;Webpack&lt;/a&gt;, &lt;a href=&#34;https://github.com/postcss/postcss&#34;&gt;PostCSS&lt;/a&gt;, and &lt;a href=&#34;https://browsersync.io&#34;&gt;Browsersync&lt;/a&gt; around Hugo. There are many developers rooting for Gulp &lt;a href=&#34;(#references)&#34;&gt;[1, 2, 3, 4, 5]&lt;/a&gt; whilst some others go for Grunt &lt;a href=&#34;(#references)&#34;&gt;[6]&lt;/a&gt; or Webpack &lt;a href=&#34;#references&#34;&gt;[7, 8]&lt;/a&gt;. And even few brave ones use &lt;a href=&#34;http://thecodestead.com/post/how-to-use-npm-as-a-build-tool-with-hugo&#34;&gt;pure NPM&lt;/a&gt; &lt;a href=&#34;#references&#34;&gt;[9, 10]&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;For starter projects with Hugo, you might want to consider some useful projects such as &lt;a href=&#34;https://github.com/jbrodriguez/hugulp&#34;&gt;hugulp&lt;/a&gt;, &lt;a href=&#34;http://ktmud.github.io/huggle/en/intro&#34;&gt;Huggle&lt;/a&gt;, &lt;a href=&#34;https://github.com/vseventer/hugo-webpack-boilerplate&#34;&gt;hugo-webpack-boilerplate&lt;/a&gt;. In my project, I combine Gulp with NPM and leverage some Gulp&amp;rsquo;s components for the asset pipeline.&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;&lt;em&gt;SASS/SCSS to CSS&lt;/em&gt;: a sensible choice is &lt;a href=&#34;https://www.npmjs.com/package/gulp-sass&#34;&gt;&lt;em&gt;gulp-sass&lt;/em&gt;&lt;/a&gt;.&lt;/li&gt;
&lt;li&gt;&lt;em&gt;Sourcemaps&lt;/em&gt; (optional): this is not mandatory but very handy for developing and debugging phase. I pick &lt;a href=&#34;https://www.npmjs.com/package/gulp-sourcemaps&#34;&gt;&lt;em&gt;gulp-sourcemaps&lt;/em&gt;&lt;/a&gt;.&lt;/li&gt;
&lt;li&gt;&lt;em&gt;Autoprefixing&lt;/em&gt;: it helps adding vendor-specific prefixes to CSS rules. We can use &lt;a href=&#34;https://www.npmjs.com/package/gulp-autoprefixer&#34;&gt;&lt;em&gt;gulp-autoprefixer&lt;/em&gt;&lt;/a&gt; but be careful to combine with &lt;em&gt;gulp-sourcemaps&lt;/em&gt; as it is &lt;a href=&#34;https://github.com/gulp-sourcemaps/gulp-sourcemaps/wiki/Plugins-with-gulp-sourcemaps-support#css&#34;&gt;currently broken&lt;/a&gt;. I decide to useÂ &lt;a href=&#34;https://www.npmjs.org/package/gulp-postcss&#34;&gt;&lt;em&gt;gulp-postcss&lt;/em&gt;&lt;/a&gt; along with &lt;a href=&#34;https://www.npmjs.com/package/autoprefixer&#34;&gt;&lt;em&gt;postcss-autoprefixer&lt;/em&gt;&lt;/a&gt; instead.&lt;/li&gt;
&lt;li&gt;&lt;em&gt;Minification&lt;/em&gt;: &lt;a href=&#34;https://github.com/postcss/postcss&#34;&gt;PostCSS&lt;/a&gt; provides many plugins for CSS post-processing alongside &lt;em&gt;autoprefixer&lt;/em&gt;.  I choose &lt;a href=&#34;http://cssnano.co&#34;&gt;&lt;em&gt;cssnano&lt;/em&gt;&lt;/a&gt; to minify the CSSs.&lt;/li&gt;
&lt;/ul&gt;

&lt;pre&gt;&lt;code class=&#34;language-sh&#34;&gt;$ npm i -D gulp@next gulp-sass gulp-postcss autoprefixer gulp-sourcemaps cssnano
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;In the same way, you can add more components to the list. Here I rather keep it short and simple for illustrative purpose. Now I start configuring Gulp to use them in my project.&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-javascript&#34;&gt;const gulp = require(&#39;gulp&#39;);
const sass = require(&#39;gulp-sass&#39;);
const postcss = require(&#39;gulp-postcss&#39;);
const autoprefixer = require(&#39;autoprefixer&#39;);
const cssnano = require(&#39;cssnano&#39;);
const sourcemaps = require(&#39;gulp-sourcemaps&#39;);
const log = require(&#39;fancy-log&#39;);

const sassSourceFile = &#39;assets/scss/hyde-hyde.scss&#39;;
const outputFolder = &#39;static/css&#39;;
const watchedResources = &#39;assets/scss/**/*&#39;;

gulp.task(&#39;scss&#39;, function (done) {
  gulp.src(sassSourceFile)
    .pipe(sourcemaps.init())
    .pipe(sass().on(&#39;error&#39;, function(err){
      log.error(err.message);
    }))
    .pipe(postcss([autoprefixer, cssnano]))
    .pipe(sourcemaps.write(&#39;.&#39;))
    .pipe(gulp.dest(outputFolder))
    .on(&#39;end&#39;, done);
});

gulp.task(&#39;watch&#39;, gulp.series(&#39;scss&#39;, function (done) {
  gulp.watch(watchedResources, gulp.parallel(&#39;scss&#39;));
  done();
}));

gulp.task(&#39;default&#39;, gulp.series(&#39;watch&#39;, function () {}));
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;Note that the syntax is Gulp v4.0.&lt;/p&gt;

&lt;p&gt;Now I just simply invoke Gulp to trigger its chaining pipeline.&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-sh&#34;&gt;$ gulp
[10:23:40] Using gulpfile ~/working/dev/htr3n-blog/gulpfile.js
[10:23:40] Starting &#39;default&#39;...
[10:23:40] Starting &#39;watch&#39;...
[10:23:40] Starting &#39;scss&#39;...
[10:23:40] Finished &#39;scss&#39; after 58 ms
[10:23:40] Starting &#39;&amp;lt;anonymous&amp;gt;&#39;...
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;Gulp will transform &lt;code&gt;hyde-hyde.scss&lt;/code&gt; into &lt;code&gt;hyde-hyde.css&lt;/code&gt;  which is autoprefixed and saved in &lt;code&gt;static/css&lt;/code&gt; along with its sourcemaps. In the Hugo templates, I refer to &lt;code&gt;hyde-hyde.css&lt;/code&gt; normally.&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-html&#34;&gt;&amp;lt;link rel=&amp;quot;stylesheet&amp;quot; href=&amp;quot;{{ .Site.BaseURL }}/css/hyde-hyde.css&amp;quot;&amp;gt;
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;I can combine &lt;a href=&#34;https://github.com/gulpjs/gulp/blob/master/docs/API.md#gulpwatchglobs-opts-fn&#34;&gt;Gulp.watch()&lt;/a&gt; with Hugo&amp;rsquo;s &lt;em&gt;live reload&lt;/em&gt; feature so that both will continuously monitors for changes and serve them instantly. This way, whenever I made any changes in a post in Typora, a SCSS/CSS file, or Go+HTML layout, I will instantly see the generated HTMLs.&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-sh&#34;&gt;$ hugo server -w --cleanDestinationDir
                   | EN
+------------------+-----+
  Pages            | 320
  Paginator pages  |   0
  Non-page files   |  14
  Static files     |  14
  Processed images |   0
  Aliases          |   0
  Sitemaps         |   1
  Cleaned          |   0

Total in 193 ms
Watching for changes in /Users/htr3n/working/dev/htr3n-blog/{assets,content,data,layouts,static,themes}
Watching for config changes in /Users/htr3n/working/dev/htr3n-blog/config.toml
Serving pages from memory
Running in Fast Render Mode. For full rebuilds on change: hugo server --disableFastRender
Web Server is available at http://localhost:1313/ (bind address 127.0.0.1)
Press Ctrl+C to stop
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;Please note that, by default, Hugo will only keep watching the following folders  &lt;code&gt;{assets, content, data, layouts, static, themes}&lt;/code&gt;. Hence, our SCSS files might not be in one of these folders but we must ensure the resources generated from Gulp are. As I illustrated &lt;em&gt;endogenous pipeline&lt;/em&gt; above, my SCSSs are kept in &lt;code&gt;assets&lt;/code&gt; such that Hugo &lt;code&gt;Resources.Get&lt;/code&gt; can find them. If you opt for &lt;em&gt;exogenous pipeline&lt;/em&gt;, you should put the preprocessing resources elsewhere.&lt;/p&gt;

&lt;p&gt;After all, we can open the browser to &lt;a href=&#34;http://localhost:1313&#34;&gt;http://localhost:1313&lt;/a&gt; and enjoy the experience of live editing side-by-side.&lt;/p&gt;


  





&lt;figure &gt;
  
  &lt;img
      
        src=&#34;https://htr3n.github.io/2018/07/minimal-hugo-workflow/side-by-side.png&#34;
      
        alt=&#34;Typora (left) and the generated HTML pages (right)&#34;
        
        
        
        width=&#34;99%&#34; style=&#34;max-width: 100%;&#34;
         /&gt;
  
  
  
    &lt;figcaption&gt;
      &lt;span class=&#34;img--caption&#34;&gt;
        Figure 1. Typora (left) and the generated HTML pages (right)
        
      &lt;/span&gt;
    &lt;/figcaption&gt;
  
&lt;/figure&gt;




&lt;p&gt;At this point, we seem to miss &lt;em&gt;cache busting&lt;/em&gt; which is provided in the &lt;em&gt;endogenous pipeline&lt;/em&gt; with Hugo. That is also the biggest advantage of using external tools as we need to establish the connections between Hugo generated resources and Gulp&amp;rsquo;s manipulated resources on our own.&lt;/p&gt;

&lt;p&gt;It is a tad complicated as you can find &lt;a href=&#34;https://byteplumbing.net/2017/08/static-asset-cache-busting-for-hugo&#34;&gt;here&lt;/a&gt;, &lt;a href=&#34;https://blog.carlmjohnson.net/post/2017/hugo-asset-pipeline/&#34;&gt;here&lt;/a&gt; and &lt;a href=&#34;http://danbahrami.io/articles/building-a-production-website-with-hugo-and-gulp-js&#34;&gt;here&lt;/a&gt;. In summary, the idea is to generate &lt;a href=&#34;https://en.wikipedia.org/wiki/Hash_function&#34;&gt;&lt;em&gt;hash signatures&lt;/em&gt;&lt;/a&gt; for your CSSs, for instance, using &lt;a href=&#34;https://en.wikipedia.org/wiki/MD5&#34;&gt;MD5&lt;/a&gt; or &lt;a href=&#34;https://en.wikipedia.org/wiki/Secure_Hash_Algorithms&#34;&gt;SHA&lt;/a&gt;, store the relevant data as dictionary &lt;a href=&#34;https://en.wikipedia.org/wiki/Key-value_database&#34;&gt;key-value&lt;/a&gt; pairs, e.g. &lt;code&gt;&#39;hyde-hyde.css&#39; =&amp;gt; &#39;hyde-hyde.the-latest-hash-number.css&#39;&lt;/code&gt;,
then use Hugoâ€™sÂ &lt;a href=&#34;https://gohugo.io/templates/data-templates/&#34;&gt;data templates&lt;/a&gt;Â feature to refer to those pairs. This approach has actually been implemented in the aforementioned Hugo&amp;rsquo;s extensions.&lt;/p&gt;

&lt;p&gt;In case you really need &lt;em&gt;cache busting&lt;/em&gt;, we can utilise Hugo v0.43 extensions to complement Gulp on this matter (ðŸµ). We just modify the Gulp configuration a bit so that the output folder is no longer &lt;code&gt;static&lt;/code&gt; but &lt;code&gt;assets/css&lt;/code&gt; as Hugo&amp;rsquo;s &lt;code&gt;Resources.Get&lt;/code&gt; rather strictly looks for resources in &lt;code&gt;assets&lt;/code&gt;.&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-javascript&#34;&gt;var outputFolder = &#39;assets/css&#39;;
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;And in the HTML, we use similar templates without &lt;code&gt;toCSS&lt;/code&gt; and &lt;code&gt;postCSS&lt;/code&gt; that are done with Gulp.&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-html&#34;&gt;{{ $styles := resources.Get &amp;quot;css/hyde-hyde.css&amp;quot; | minify | fingerprint }}
&amp;lt;link rel=&amp;quot;stylesheet&amp;quot; href=&amp;quot;{{ $styles.Permalink }}&amp;quot; integrity=&amp;quot;{{ $styles.Data.Integrity }}&amp;quot;&amp;gt;
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;It seems Gulp becomes redundant here as Hugo can perform &lt;code&gt;toCSS&lt;/code&gt;, &lt;code&gt;postCSS&lt;/code&gt;, and &lt;code&gt;minify&lt;/code&gt; just fine. Nonetheless, in case you need other functionalities that are not yet provided by Hugo, Gulp will be what you should ask for. Besides, as per &lt;strong&gt;Note&lt;/strong&gt; above, there are still some issues with Hugo&amp;rsquo;s extension regarding sourcemaps whilst Gulp&amp;rsquo;s asset pipeline above works flawlessly.&lt;/p&gt;

&lt;h4 id=&#34;more-automation-please&#34;&gt;More automation, please!!!&lt;/h4&gt;

&lt;p&gt;There are still two manual tasks for the &lt;em&gt;exogenous pipeline&lt;/em&gt;, one for invoking Gulp and another one to start Hugo. Aiming to automate the workflow as much as possible, we can merge two tasks using one execution script, via NPM.&lt;/p&gt;

&lt;p&gt;There are a number of options for running tasks concurrently in NPM including &lt;a href=&#34;https://www.npmjs.com/package/npm-run-all&#34;&gt;npm-run-all&lt;/a&gt;, &lt;a href=&#34;https://www.npmjs.com/package/npm-run-parallel&#34;&gt;npm-run-parallel&lt;/a&gt;, &lt;a href=&#34;https://www.npmjs.com/package/concurrently&#34;&gt;concurrently&lt;/a&gt;, or using &lt;a href=&#34;https://en.wikipedia.org/wiki/Background_process&#34;&gt;background process&lt;/a&gt; if you are using Linux/macOS alike. Even Gulp also has some helper plugins like &lt;a href=&#34;https://www.npmjs.com/package/gulp-exec&#34;&gt;gulp-exec&lt;/a&gt; to execute child processes, &lt;a href=&#34;https://www.npmjs.com/package/gulp-nodemon&#34;&gt;gulp-nodemon&lt;/a&gt; to run in &lt;a href=&#34;https://en.wikipedia.org/wiki/Daemon_%28computing%29&#34;&gt;daemon mode&lt;/a&gt;,  and Gulp 4.0+ has &lt;a href=&#34;https://github.com/gulpjs/gulp/blob/4.0/docs/API.md#gulpparalleltasks&#34;&gt;Gulp.parallel()&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;Let&amp;rsquo;s consider a simple example with &lt;a href=&#34;https://www.npmjs.com/package/npm-run-all&#34;&gt;npm-run-all&lt;/a&gt;. Other tools can be used similarly.&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-sh&#34;&gt;$ npm i -D npm-run-all
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;Then define some simple scripts in &lt;code&gt;package.json&lt;/code&gt; for executing Gulp and Hugo.&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-json&#34;&gt;{
  &amp;quot;scripts&amp;quot;: {
    &amp;quot;scss-build&amp;quot;: &amp;quot;gulp scss&amp;quot;,
    &amp;quot;scss-watch&amp;quot;: &amp;quot;gulp watch&amp;quot;,
    &amp;quot;hugo-watch&amp;quot;: &amp;quot;hugo server -w --buildDrafts --cleanDestinationDir&amp;quot;,
    &amp;quot;dev&amp;quot;: &amp;quot;npm-run-all --parallel scss-watch hugo-watch&amp;quot;
  },
  &amp;quot;devDependencies&amp;quot;: {
    &amp;quot;autoprefixer&amp;quot;: &amp;quot;^9.0.0&amp;quot;,
    &amp;quot;cssnano&amp;quot;: &amp;quot;^4.0.3&amp;quot;,
    &amp;quot;gulp&amp;quot;: &amp;quot;^4.0.0&amp;quot;,
    &amp;quot;gulp-postcss&amp;quot;: &amp;quot;^7.0.1&amp;quot;,
    &amp;quot;gulp-sass&amp;quot;: &amp;quot;^4.0.1&amp;quot;,
    &amp;quot;gulp-sourcemaps&amp;quot;: &amp;quot;^2.6.4&amp;quot;,
    &amp;quot;npm-run-all&amp;quot;: &amp;quot;^4.1.3&amp;quot;
  }
}
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;Given no issues, we should execute &lt;code&gt;npm run dev&lt;/code&gt; and see both Hugo and Gulp running in parallel.&lt;/p&gt;

&lt;h2 id=&#34;further-optimisations&#34;&gt;Further Optimisations&lt;/h2&gt;

&lt;p&gt;As you might have noticed, the Web resources (e.g. HTML, CSS) generated by Hugo may contain a lot of whitespace and/or line-breaks. You can easily see this when viewing the source code of the generated Web pages.&lt;/p&gt;

&lt;p&gt;During the developing phase in my local machines, I always keep the generated resources untouched so that I can read the code for debugging or analysing. When deploying to hosting servers, we don&amp;rsquo;t often preserve the readability of the source code as the end-users mainly see and interact with the beautiful pages rendered by Web browsers.&lt;/p&gt;

&lt;p&gt;Therefore, I configure a simple Gulp task to optimise the generated Web resources before pushing them to the servers. What I need is &lt;a href=&#34;https://www.npmjs.com/package/gulp-htmlmin&#34;&gt;&lt;code&gt;gulp-htmlmin&lt;/code&gt;&lt;/a&gt;&amp;mdash;a Gulp front-end of &lt;a href=&#34;https://github.com/kangax/html-minifier&#34;&gt;&lt;em&gt;html-minifier&lt;/em&gt;&lt;/a&gt;. Please refer to &lt;em&gt;html-minifier&lt;/em&gt;&amp;rsquo;s &lt;a href=&#34;https://github.com/kangax/html-minifier&#34;&gt;documentations&lt;/a&gt; should you need to learn further about its options.&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-sh&#34;&gt;$ npm i -D gulp-htmlmin
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;And I create a simple Gulp task for minifying Web resources that can be invoked at command line as &lt;code&gt;gulp minify-html&lt;/code&gt;. This task should be performed after calling Hugo to generate the Web pages.&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-javascript&#34;&gt;const htmlmin = require(&amp;quot;gulp-htmlmin&amp;quot;);
//...
gulp.task(&amp;quot;minify-html&amp;quot;, function(done) {
  let publicFolder = &amp;quot;./public&amp;quot;;
  let html = publicFolder + &amp;quot;/**/*.html&amp;quot;;
  let css = publicFolder + &amp;quot;/**/*.css&amp;quot;;
  let js = publicFolder + &amp;quot;/**/*.js&amp;quot;;
  let dest = &amp;quot;./dist&amp;quot;;
  log(&amp;quot;Minifying HTML/CSS/JS in &#39;&amp;quot; + publicFolder + &amp;quot;&#39; to &#39;&amp;quot; + dest + &amp;quot;&#39;&amp;quot;);
  gulp.src(publicFolder + &amp;quot;/**&amp;quot;)
    .pipe(gulp.dest(dest));
  gulp.src([html, css, js])
    .pipe(htmlmin({ collapseWhitespace: true }))
    .pipe(gulp.dest(dest))
    .on(&amp;quot;end&amp;quot;, done);
});
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;The main idea is to use &lt;code&gt;gulp-htmlmin&lt;/code&gt; to minify HTMLs, JavaScripts, and CSSs whilst leaving others intact. Note that the place of the optimised resources is the folder &lt;code&gt;dist&lt;/code&gt; inside Hugo project.&lt;/p&gt;

&lt;h2 id=&#34;references&#34;&gt;References&lt;/h2&gt;

&lt;ol&gt;
&lt;li&gt;&lt;a href=&#34;https://markus.oberlehner.net/blog/using-gulp-and-uncss-in-combination-with-sass-based-hugo-themes&#34;&gt;https://markus.oberlehner.net/blog/using-gulp-and-uncss-in-combination-with-sass-based-hugo-themes&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;http://danbahrami.io/articles/building-a-production-website-with-hugo-and-gulp-js&#34;&gt;http://danbahrami.io/articles/building-a-production-website-with-hugo-and-gulp-js&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://devotter.com/blog/using-gulp-with-hugo&#34;&gt;https://devotter.com/blog/using-gulp-with-hugo&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://adamwills.io/blog/discovering-hugo-2-workflow&#34;&gt;https://adamwills.io/blog/discovering-hugo-2-workflow&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;http://www.sagarganatra.com/2016/12/building-your-static-site-with-hugo.html&#34;&gt;http://www.sagarganatra.com/2016/12/building-your-static-site-with-hugo.html&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;http://tjm.io/grunt-hugo&#34;&gt;http://tjm.io/grunt-hugo&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://byteplumbing.net/2017/08/static-asset-cache-busting-for-hugo&#34;&gt;https://byteplumbing.net/2017/08/static-asset-cache-busting-for-hugo&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://tomodwyer.com/post/2017-10-22-hugo---webpack--%EF%B8%8F/&#34;&gt;https://tomodwyer.com/post/2017-10-22-hugo---webpack--%EF%B8%8F/&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;http://thecodestead.com/post/how-to-use-npm-as-a-build-tool-with-hugo&#34;&gt;http://thecodestead.com/post/how-to-use-npm-as-a-build-tool-with-hugo&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://www.henriksommerfeld.se/build-steps-using-npm-scripts-for-my-hugo-blog&#34;&gt;https://www.henriksommerfeld.se/build-steps-using-npm-scripts-for-my-hugo-blog&lt;/a&gt;&lt;/li&gt;
&lt;/ol&gt;
</description>
      </item>
    
      <item>
        <title>Bootstrapping macOS workspace</title>
        <link>https://htr3n.github.io/2018/06/bootstrapping-macos-workspace/</link>
        <pubDate>Wed, 27 Jun 2018 00:00:00 +0000</pubDate>
        
        <guid>703d012e669e6597d86d557878d223b7</guid>
        <description>

&lt;p&gt;I have experienced a number of different Mac systems, ranging from the old white MacBook 2006 to iMac and MacMini 2010 and lately MacBook Pro 13&amp;rdquo; and 15&amp;rdquo;. From time to time, Time Machine has become extremely handy for transferring my data from the old to the new machine.&lt;/p&gt;

&lt;p&gt;Nevertheless, a lot of changes, mostly for software development, have often been ignored or reset to the default values. As a result, I often find myself searching around over and over for some desirable settings. Thus, this post is kind of a note-to-self on few useful tweaks for my development box so that I can easily reach out later.&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;Update&lt;/strong&gt;: As it turned out that the tweaks and configurations were getting longer and became tedious to follow, I split them into two parts:&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;#system-tweak-and-configs&#34;&gt;Part 1: System tweaks and configurations&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;#dev-tools-and-configs&#34;&gt;Part 2: Development tools and configurations&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;hr /&gt;

&lt;h2 id=&#34;system-tweak-and-configs&#34;&gt;Part 1: System tweaks and configurations&lt;/h2&gt;

&lt;h3 id=&#34;disable-sip&#34;&gt;Disable System Integrity Protection (SIP)&lt;/h3&gt;

&lt;p&gt;&lt;a href=&#34;https://support.apple.com/en-us/ht204899&#34;&gt;System Integration Protection&lt;/a&gt; (SIP) is a security technology since OS X El Capitan 10.11 aiming at protecting certain system files and folders against malicious software. SIP even limits the access and actions of the root user account on protected parts of OS X. Unfortunately, the folder  &lt;code&gt;/usr/local&lt;/code&gt; needed for installing many development tools and utilities is under protection as well. That makes a lot of tools like &lt;a href=&#34;https://brew.sh&#34;&gt;Homebrew&lt;/a&gt; fail to install. We can easily check SIP&amp;rsquo;s current status.&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-sh&#34;&gt;$ csrutil status
System Integrity Protection status: enabled.
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;The tweak I always do right after installing or recovering a Mac is to disable SIP. Just (re)start macOS in &lt;em&gt;Recovery Mode&lt;/em&gt; (restarting or turning on your Mac and immediately pressing &lt;kbd&gt;âŒ˜&lt;/kbd&gt; + &lt;kbd&gt;R&lt;/kbd&gt;&amp;mdash;shortcut to remember &lt;kbd&gt;R&lt;/kbd&gt; for &amp;lsquo;&lt;strong&gt;R&lt;/strong&gt;ecovery&amp;rsquo;&amp;mdash;and wait until macOS boots into its recovery mode. Then open menu &lt;span class=&#34;menu&#34;&gt;Utility â–¸ Terminal&lt;/span&gt;
 and execute the following commands.&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-sh&#34;&gt;$ csrutil disable
$ reboot
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;Your Mac will reboot and get back to the normal working mode. You can verify SIP status again.&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-sh&#34;&gt;$ csrutil status
System Integrity Protection status: disabled.
&lt;/code&gt;&lt;/pre&gt;

&lt;h3 id=&#34;disable-gatekeeper&#34;&gt;Disable Gatekeeper&lt;/h3&gt;

&lt;p&gt;&lt;em&gt;Gatekeeper&lt;/em&gt; was first introduced in OS X Mountain Lion. It is a security feature that prevents the users from launching potentially harmful apps.&lt;/p&gt;

&lt;p&gt;From macOS Sierra and later, however, Apple made Gatekeeper even more restricted. Normal users would see only two choices in &lt;em&gt;System Preferences&lt;/em&gt; &amp;ndash;&amp;gt; &lt;em&gt;Security &amp;amp; Privacy&lt;/em&gt; that &amp;ldquo;&lt;em&gt;Allow apps downloaded from&lt;/em&gt;&amp;rdquo; either &amp;ldquo;&lt;em&gt;App Store&lt;/em&gt;&amp;rdquo; or &amp;ldquo;&lt;em&gt;App Store and identified developers&lt;/em&gt;&amp;rdquo;.&lt;/p&gt;

&lt;p&gt;That means only signed apps are allowed to launch, i.e. breaking a lot of useful unsigned apps whose developers cannot afford to pay US$99 yearly membership for &lt;em&gt;Apple Developer Program&lt;/em&gt;.&lt;/p&gt;


  





&lt;figure &gt;
  
  &lt;img
      
        src=&#34;https://htr3n.github.io/2018/06/bootstrapping-macos-workspace/enabled-gatekeeper.png&#34;
      
        alt=&#34;Enabled Gatekeeper&#34;
        
        align=&#34;center&#34;
        
        width=&#34;80%&#34; style=&#34;max-width: 100%;&#34;
         /&gt;
  
  
  
    &lt;figcaption&gt;
      &lt;span class=&#34;img--caption&#34;&gt;
        Figure . Enabled Gatekeeper
        
      &lt;/span&gt;
    &lt;/figcaption&gt;
  
&lt;/figure&gt;




&lt;p&gt;We can circumvent that by disabling Gatekeeper. You do not have to restart macOS but only executing the following command &lt;code&gt;sudo spctl --master-disable&lt;/code&gt;.&lt;/p&gt;

&lt;p&gt;After that, you will be able to see Gatekeeper being disabled.&lt;/p&gt;


  





&lt;figure &gt;
  
  &lt;img
      
        src=&#34;https://htr3n.github.io/2018/06/bootstrapping-macos-workspace/disabled-gatekeeper.png&#34;
      
        alt=&#34;Disabled Gatekeeper&#34;
        
        align=&#34;center&#34;
        
        width=&#34;80%&#34; style=&#34;max-width: 100%;&#34;
         /&gt;
  
  
  
    &lt;figcaption&gt;
      &lt;span class=&#34;img--caption&#34;&gt;
        Figure 1. Disabled Gatekeeper
        
      &lt;/span&gt;
    &lt;/figcaption&gt;
  
&lt;/figure&gt;




&lt;p&gt;Naturally Gatekeeper can be re-enabled at any time with &lt;code&gt;sudo spctl --master-enable&lt;/code&gt;.&lt;/p&gt;

&lt;h3 id=&#34;reveal-library&#34;&gt;Revealing &amp;lsquo;~/Library&amp;rsquo;&lt;/h3&gt;

&lt;p&gt;In macOS, the folder &amp;lsquo;&lt;em&gt;~/Library&lt;/em&gt;&amp;rsquo; within users home folder is hidden (since 10.7!?) seemingly to prevent any unintentional changes. It&amp;rsquo;s not so difficult to navigate to this folder (and any other folders) using command line. In case you want to use Finder to navigate and explore &amp;lsquo;&lt;em&gt;~/Library&lt;/em&gt;&amp;rsquo;, we can simply use the following command.&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-sh&#34;&gt;$ chflags nohidden ~/Library
&lt;/code&gt;&lt;/pre&gt;

&lt;h3 id=&#34;enabling-key-repeating&#34;&gt;Enabling Key Repeating&lt;/h3&gt;

&lt;p&gt;The behaviour for keyboard long pressing in macOS is also of polarised personal taste. A typical behaviour that we often see is that the letter keeps popping out since one holds down a key until the key is released. Some years back this has been changed into &amp;lsquo;&lt;em&gt;Character Picker&lt;/em&gt;&amp;rsquo;. It means when a key is pressed and held, the non-standard characters corresponding characters will pop up as the picture below.&lt;/p&gt;


  





&lt;figure &gt;
  
  &lt;img
      
        src=&#34;https://htr3n.github.io/2018/06/bootstrapping-macos-workspace/enabled-character-picker.png&#34;
      
        alt=&#34;Character Picker in action&#34;
        
        align=&#34;center&#34;
        
        width=&#34;80%&#34; style=&#34;max-width: 100%;&#34;
         /&gt;
  
  
  
    &lt;figcaption&gt;
      &lt;span class=&#34;img--caption&#34;&gt;
        Figure 2. Character Picker in action
        
      &lt;/span&gt;
    &lt;/figcaption&gt;
  
&lt;/figure&gt;




&lt;p&gt;Not a big fan of Character Picker, I rather like characters keep repeating when a key is held. In many cases, this behavior becomes very handy, for instance, when selecting large texts with &lt;kbd&gt;â‡§&lt;/kbd&gt; + &lt;kbd&gt;â†“ â†‘ â† â†’&lt;/kbd&gt;.&lt;/p&gt;

&lt;p&gt;For that reason, I always disable that feature in any macOS that I am working on. Unfortunately, this cannot be done with &lt;span class=&#34;menu&#34;&gt;System Preferences&lt;/span&gt;
 but command line. After each command, you must re-start the editors to see the effect.&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-sh&#34;&gt;# disable &#39;Character Picker&#39;
$ defaults write -g ApplePressAndHoldEnabled -bool false
# it can be enabled
$ defaults write -g ApplePressAndHoldEnabled -bool true
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;Another option relating to key repeating is tuning its speed/rate and delay. Luckily, we can do this via &lt;span class=&#34;menu&#34;&gt;System Preferences â–¸ Keyboard&lt;/span&gt;
. My favourite is &amp;lsquo;&lt;em&gt;fastest&lt;/em&gt;&amp;rsquo; repeating and &amp;lsquo;&lt;em&gt;shortest&lt;/em&gt;&amp;rsquo; delay as possible.&lt;/p&gt;


  





&lt;figure &gt;
  
  &lt;img
      
        src=&#34;https://htr3n.github.io/2018/06/bootstrapping-macos-workspace/speed-delay.png&#34;
      
        alt=&#34;Setting for key repeating and delay&#34;
        
        align=&#34;center&#34;
        
        width=&#34;80%&#34; style=&#34;max-width: 100%;&#34;
         /&gt;
  
  
  
    &lt;figcaption&gt;
      &lt;span class=&#34;img--caption&#34;&gt;
        Figure 3. Setting for key repeating and delay
        
      &lt;/span&gt;
    &lt;/figcaption&gt;
  
&lt;/figure&gt;




&lt;p&gt;Like many other options, we can change it via command line or fine tuning tool such as &lt;a href=&#34;https://pqrs.org/osx/karabiner&#34;&gt;Karabiner&lt;/a&gt;.&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-sh&#34;&gt;# InitialKeyRepeat: 120, 94, 68, 35, 25, 15 (lower is faster, default is 25)
$ defaults write -g InitialKeyRepeat -int 15
# KeyRepeat: 120, 90, 60, 30, 12, 6, 2 (lower is faster, default is 6)
$ defaults write -g KeyRepeat -int 2	
&lt;/code&gt;&lt;/pre&gt;

&lt;h3 id=&#34;changing-hostnames&#34;&gt;Changing Hostnames&lt;/h3&gt;

&lt;p&gt;Most of the time, the default host name is not satisfied and you might want to have a cool name for your dev box. Then you are surely not alone. Here and there, you might find some cool combo like &lt;code&gt;harry@hogwart&lt;/code&gt; , &lt;code&gt;alice@wonderland&lt;/code&gt;,  &lt;code&gt;yoda@dagobah&lt;/code&gt;,  &lt;code&gt;joker@gotham&lt;/code&gt;, &lt;code&gt;neo@matrix&lt;/code&gt;, &lt;code&gt;frodo@mordor&lt;/code&gt; you name it. You can quickly do this via command line.&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-sh&#34;&gt;# change the primary host name
$ sudo scutil --set HostName gotham
# ... do the same for local (Bonjour) host name 
$ sudo scutil --set LocalHostName gotham
# and finally, keep the user-friendly computer&#39;s name in Finder in sync
$ sudo scutil --set ComputerName gotham
&lt;/code&gt;&lt;/pre&gt;

&lt;hr /&gt;

&lt;h2 id=&#34;dev-tools-and-configs&#34;&gt;Part 2: Development tools and configurations&lt;/h2&gt;

&lt;p&gt;In this part, I will focus more on some handy tools and configurations often used for my software development tasks.&lt;/p&gt;

&lt;h3 id=&#34;homebrew&#34;&gt;&lt;a href=&#34;https://brew.sh&#34;&gt;Homebrew&lt;/a&gt;&lt;/h3&gt;

&lt;p&gt;Homebrew provides a rich collection of tools I need, mostly open sources, that Apple does not. Installing Homebrew is super easy with a one-liner command. Before that, we only have to install the Xcode command line tools that Homebrew needs to build its tools.&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-sh&#34;&gt;# install Xcode command line developer tools
$ xcode-select --install

# now install Homebrew
$ /usr/bin/ruby -e &amp;quot;$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/master/install)&amp;quot;
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;Then we need to add &lt;code&gt;/usr/local/bin&lt;/code&gt; and &lt;code&gt;/usr/local/sbin&lt;/code&gt; (where Homebrew links the executable files) to the environment variable &lt;code&gt;PATH&lt;/code&gt;. This can be done by altering the shell startup scripts. For instance, for Bash shell it is &lt;code&gt;~/.bash_profile&lt;/code&gt;, for Zshell it is &lt;code&gt;~/.zsh_profile&lt;/code&gt;.&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-shell&#34;&gt;export PATH=$PATH:/usr/local/bin:/usr/local/sbin
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;If you want the Homebrew tools have higher priority than the others, just switch &lt;code&gt;$PATH&lt;/code&gt; to the end instead. Moreover, there are many Finder-launched apps, agents and daemons in macOS might also need &lt;code&gt;PATH&lt;/code&gt; to find necessary executables (e.g. Intellij IDEA and Eclipse if I&amp;rsquo;m not mistaken). Fortunately, the launching of these tools would go through macOS &lt;a href=&#34;https://en.wikipedia.org/wiki/Launchd&#34;&gt;&lt;em&gt;launchd&lt;/em&gt;&lt;/a&gt; and therefore, can be configure with &lt;code&gt;launchctl&lt;/code&gt;. So I have to add this line to the end of my &lt;code&gt;.zshrc&lt;/code&gt; too.&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-sh&#34;&gt;# this line should be added at the end of .zshrc
/bin/launchctl setenv PATH $PATH
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;Now I can install necessary tools using  &lt;code&gt;brew&lt;/code&gt;.&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-sh&#34;&gt;$ brew install ack curl dnsmasq docker gcc git go gradle maven mysql node openssl openssh python3 php72 composer ruby rbenv sassc yarn zsh 
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;Homebrew can also help handling macOS start-up services which are useful for managing servers like Apache httpd, nginx, php-fpm, MySQL, PostgreSQL, etc.&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-sh&#34;&gt;$ brew services start httpd
$ brew services stop httpd
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;For quick re-installing or recovering Homebrew, I use &lt;a href=&#34;https://github.com/Homebrew/homebrew-bundle&#34;&gt;homebrew-bundle&lt;/a&gt; for backing up the current Homebrew&amp;rsquo;s installation and restoring later.&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-sh&#34;&gt;# tap the bundle
$ brew tap Homebrew/bundle
# dump all existing Homebrew packages to Brewfile
$ brew bundle dump --force
# check the list of entries
$ brew bundle list
# restore/install all packages from the Brewfile 
$ brew bundle
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;Homebrew also incorporates &lt;a href=&#34;https://github.com/Homebrew/homebrew-cask&#34;&gt;Homebrew-Cask&lt;/a&gt; (formerly an independent plugin for Homebrew) that can help to install many macOS apps as you might see in the later sections.&lt;/p&gt;

&lt;h3 id=&#34;terminals-and-shells&#34;&gt;Terminals and Shells&lt;/h3&gt;

&lt;p&gt;Since working with Linux a lot and then macOS, I&amp;rsquo;m rather familiar with the command line. There are many cases using terminals would be more convenient than graphical editors. Thus, I need a good terminal app. The built-in Terminal app in macOS is not bad but I usually opt for &lt;a href=&#34;https://www.iterm2.com&#34;&gt;iTerm2&lt;/a&gt;.&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-sh&#34;&gt;$ brew cask install iterm2
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;Some of my favorite settings for iTerms are including dark themes such as &lt;a href=&#34;https://draculatheme.com/iterm&#34;&gt;Dracula&lt;/a&gt;, &lt;a href=&#34;https://gist.github.com/meqif/1238378&#34;&gt;IR_Black&lt;/a&gt;, &lt;a href=&#34;https://github.com/junegunn/seoul256-iTerm2&#34;&gt;seoul_256&lt;/a&gt;, &lt;a href=&#34;https://github.com/nathanbuchar/atom-one-dark-terminal&#34;&gt;Atom One Dark&lt;/a&gt; along with a fixed-width font like &lt;a href=&#34;https://github.com/adobe-fonts/source-code-pro&#34;&gt;Source Code Pro&lt;/a&gt;, &lt;a href=&#34;https://fonts.google.com/specimen/Cousine&#34;&gt;Cousine&lt;/a&gt;, &lt;a href=&#34;https://fonts.google.com/specimen/Roboto+Mono&#34;&gt;Roboto Mono&lt;/a&gt;, &lt;a href=&#34;https://github.com/tonsky/FiraCode&#34;&gt;Fira Code&lt;/a&gt; or &lt;a href=&#34;https://www.typography.com/fonts/operator/overview/&#34;&gt;Operator Mono&lt;/a&gt; (very nice ligatures and italic mode), &lt;a href=&#34;https://fonts.google.com/specimen/Inconsolata&#34;&gt;Inconsolata&lt;/a&gt; or its variants (Inconsolata-dz, Inconsolata-g), or &lt;a href=&#34;https://github.com/source-foundry/Hack&#34;&gt;Hack&lt;/a&gt;. Some of these fonts can be installed via Homebrew Cask.&lt;/p&gt;

&lt;p&gt;Along with iTerms 2, I also love &lt;a href=&#34;http://www.zsh.org&#34;&gt;Z shell&lt;/a&gt; (zsh) which is an extended version of Bash shell a lot with many nice features like directory alias, command completion, path expansion, etc. You might also find some Zsh configuration frameworks like &lt;a href=&#34;https://ohmyz.sh&#34;&gt;oh-my-zsh&lt;/a&gt; or &lt;a href=&#34;https://github.com/sorin-ionescu/prezto&#34;&gt;Prezto&lt;/a&gt; amazing to start with. I&amp;rsquo;ve tried both of them and found oh-my-zsh a bit sluggish and Prezto a bit difficult to add more extensions or customize. I have actually used a small piece from either of them and found myself quickly forgetting the customised parts taken from the others. Hence, I decided to develop a set of my own &lt;a href=&#34;https://github.com/htr3n/zsh-config&#34;&gt;Zsh configurations&lt;/a&gt;. Moreover, I often keep a habit of writting Shell scripts in standard sh/bash as much as possible and keep Zsh-specific separately for better portability and compatibility.&lt;/p&gt;

&lt;h3 id=&#34;text-code-editors&#34;&gt;Text/Code Editors&lt;/h3&gt;

&lt;p&gt;There are quite a number of editors in macOS for developers ranging from, er, the built-in Text Editor, &lt;a href=&#34;https://www.sublimetext.com/&#34;&gt;Sublime Text&lt;/a&gt;, &lt;a href=&#34;https://macromates.com&#34;&gt;TextMate&lt;/a&gt;, &lt;a href=&#34;https://www.barebones.com/products/textwrangler&#34;&gt;TextWrangler&lt;/a&gt;, the nerdy &lt;a href=&#34;https://www.vim.org&#34;&gt;Vim&lt;/a&gt;, &lt;a href=&#34;https://www.gnu.org/software/emacs&#34;&gt;Emacs&lt;/a&gt;, and recently &lt;a href=&#34;https://atom.io&#34;&gt;Atom&lt;/a&gt;, &lt;a href=&#34;https://code.visualstudio.com&#34;&gt;Visual Studio Code&lt;/a&gt;, &lt;a href=&#34;http://brackets.io&#34;&gt;Brackets&lt;/a&gt;, to name but a few. You might install these editos using Cask.&lt;/p&gt;

&lt;p&gt;In macOS, Sublime Text is often a powerful editor for many of us but it is quite costly. I used to love and work with Atom developed by Github as an effort to build a modern editor for developers. Atom has a plethora of extensions to become a very promising choice. Nevertheless, I was growing skeptical with its sluggishness in early days and therefore leaned to &lt;a href=&#34;https://code.visualstudio.com&#34;&gt;Visual Studio Code&lt;/a&gt;, my current Swiss-army-knife editor-of-choice instead.&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-sh&#34;&gt;$ brew cask install visual-studio-code
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;Frequently using terminal/console, I just grasp vim for quick editing tasks and &lt;a href=&#34;https://github.com/htr3n/vim-config&#34;&gt;customised it&lt;/a&gt; a little bit.&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-sh&#34;&gt;$ brew install vim
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;As working with larger and complex projects, I would need some full-fledged, heavy-weight IDEs such as Eclipse or Jetbrains Intellij IDEA and its brothers like PhpStorm, PyCharm. Other IDE including Netbeans, Visual Studio, Komodo can also be installed with &lt;em&gt;Cask&lt;/em&gt;.&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-sh&#34;&gt;$ brew cask install eclipse-java intellij-idea
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;For Markdown editors, e.g. Github infamous &lt;em&gt;README.md&lt;/em&gt; or my blog posts, I used &lt;a href=&#34;http://macdown.uranusjr.com&#34;&gt;MacDown&lt;/a&gt;. After discovering &lt;a href=&#34;https://typora.io&#34;&gt;Typora&lt;/a&gt;, MacDown becomes second in the pecking order for now (at least until Typora&amp;rsquo;s developers announce their paid plans).&lt;/p&gt;

&lt;p&gt;With Typora, I can directly write Markdown articles just like Microsoft Word.  I can do &lt;kbd&gt;âŒ˜&lt;/kbd&gt; + &lt;kbd&gt;/&lt;/kbd&gt; to instantly switch back and forth between &lt;em&gt;Visual Editing&lt;/em&gt; and &lt;em&gt;Source&lt;/em&gt; modes. Even better, I can adapt the Markdown render in Typora to be nearly indentical to my blog and therefore, experience a kind of semi-&lt;em&gt;WYSIWYG&lt;/em&gt; Markdown editing.&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-sh&#34;&gt;$ brew cask install typora
&lt;/code&gt;&lt;/pre&gt;

&lt;h3 id=&#34;other-tools&#34;&gt;Other nice-to-have tools&lt;/h3&gt;

&lt;h4 id=&#34;gnu-tools&#34;&gt;GNU Tools&lt;/h4&gt;

&lt;pre&gt;&lt;code class=&#34;language-sh&#34;&gt;$ brew install coreutils autoconf automake findutils gawk gcc gnu-sed grep
&lt;/code&gt;&lt;/pre&gt;

&lt;h4 id=&#34;ack-https-beyondgrep-com&#34;&gt;&lt;a href=&#34;https://beyondgrep.com&#34;&gt;Ack&lt;/a&gt;&lt;/h4&gt;

&lt;ul&gt;
&lt;li&gt;Ack is faster and easier to use than grep&lt;/li&gt;
&lt;/ul&gt;

&lt;pre&gt;&lt;code class=&#34;language-sh&#34;&gt;$ brew install ack
&lt;/code&gt;&lt;/pre&gt;

&lt;h4 id=&#34;dropbox-https-www-dropbox-com&#34;&gt;&lt;a href=&#34;https://www.dropbox.com&#34;&gt;Dropbox&lt;/a&gt;&lt;/h4&gt;

&lt;ul&gt;
&lt;li&gt;Many of our customers and friends are sharing files using Dropbox, so are we ;). Note that Dropbox app must be installed in &lt;code&gt;/Applications&lt;/code&gt; to work properly.&lt;/li&gt;
&lt;/ul&gt;

&lt;pre&gt;&lt;code class=&#34;language-sh&#34;&gt;$ brew cask install --appdir=&amp;quot;/Applications&amp;quot; dropbox
&lt;/code&gt;&lt;/pre&gt;

&lt;h4 id=&#34;docker-ce-https-www-docker-com-community-edition-and-command-line&#34;&gt;&lt;a href=&#34;https://www.docker.com/community-edition&#34;&gt;Docker CE&lt;/a&gt; and command line&lt;/h4&gt;

&lt;ul&gt;
&lt;li&gt;Every serious developer is talking about and working with it ;)&lt;/li&gt;
&lt;/ul&gt;

&lt;pre&gt;&lt;code class=&#34;language-sh&#34;&gt;$ brew cask install docker
$ brew install docker
&lt;/code&gt;&lt;/pre&gt;

&lt;h4 id=&#34;spectacle-https-www-spectacleapp-com&#34;&gt;&lt;a href=&#34;https://www.spectacleapp.com&#34;&gt;Spectacle&lt;/a&gt;&lt;/h4&gt;

&lt;ul&gt;
&lt;li&gt;This is an amazing free app for resizing windows using shortcuts. I use it a lot to quickly arrange the working windows.&lt;/li&gt;
&lt;/ul&gt;

&lt;pre&gt;&lt;code class=&#34;language-sh&#34;&gt;$ brew cask install spectacle
&lt;/code&gt;&lt;/pre&gt;

&lt;h4 id=&#34;alfred-https-www-alfredapp-com-powerpack&#34;&gt;&lt;a href=&#34;https://www.alfredapp.com&#34;&gt;Alfred&lt;/a&gt; + Powerpack ($)&lt;/h4&gt;

&lt;ul&gt;
&lt;li&gt;Alfred is a must-have for me and, maybe, many other macOS users. The free version is useful enough but the paid (for Powerpack) can blow anyone away. Alfred helps me much more when I prefer to use the keyboard as much as possible instead of reaching for the mice.&lt;/li&gt;
&lt;/ul&gt;

&lt;pre&gt;&lt;code class=&#34;language-sh&#34;&gt;$ brew cask install alfred
&lt;/code&gt;&lt;/pre&gt;

&lt;h4 id=&#34;f-lux-https-justgetflux-com&#34;&gt;&lt;a href=&#34;https://justgetflux.com&#34;&gt;F.lux&lt;/a&gt;&lt;/h4&gt;

&lt;ul&gt;
&lt;li&gt;Saving my eyes staring daily at computer&amp;rsquo;s monitors (macOS also has Night Shift mode but my eyes still find F.lux more pleasant at night)&lt;/li&gt;
&lt;/ul&gt;

&lt;pre&gt;&lt;code class=&#34;language-sh&#34;&gt;$ brew cask install flux
&lt;/code&gt;&lt;/pre&gt;

&lt;h4 id=&#34;web-browsers&#34;&gt;Web Browsers&lt;/h4&gt;

&lt;ul&gt;
&lt;li&gt;Installing Firefox and Google Chrome mainly for Web development, testing and debugging as I find Safari is, not perfect though, sufficient for daily use and conveniently sharing bookmarks and history links between macOS and my iPad and iPhone.&lt;/li&gt;
&lt;/ul&gt;

&lt;pre&gt;&lt;code class=&#34;language-sh&#34;&gt;$ brew cask install google-chrome firefox
&lt;/code&gt;&lt;/pre&gt;

&lt;h4 id=&#34;remote-access&#34;&gt;Remote Access&lt;/h4&gt;

&lt;p&gt;Nothing is more convenient than &lt;a href=&#34;https://en.wikipedia.org/wiki/Secure_Shell&#34;&gt;SSH&lt;/a&gt; and &lt;a href=&#34;https://en.wikipedia.org/wiki/SSH_File_Transfer_Protocol&#34;&gt;SFTP&lt;/a&gt;.&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-sh&#34;&gt;# I prefer OpenSSH to the stock BSD SSH
$ brew install openssh
# ...  love to quickly copy my public key to the servers
$ brew install ssh-copy-id
# generate key pair
$ ssh-keygen -t rsa -b 4096 -C &amp;quot;MacBookPro email@example.com&amp;quot;
# copy the public key to the host for passwordless authentication
$ ssh-copy-id user@host
&lt;/code&gt;&lt;/pre&gt;

&lt;h4 id=&#34;networking-tools&#34;&gt;Networking Tools&lt;/h4&gt;

&lt;pre&gt;&lt;code class=&#34;language-sh&#34;&gt;$ brew install netcat curl wget nmap
&lt;/code&gt;&lt;/pre&gt;

&lt;h4 id=&#34;communication&#34;&gt;Communication&lt;/h4&gt;

&lt;p&gt;&lt;a href=&#34;https://www.skype.com&#34;&gt;Skype&lt;/a&gt;, &lt;a href=&#34;https://www.slack.com&#34;&gt;Slack&lt;/a&gt;, &lt;a href=&#34;https://keybase.io&#34;&gt;Keybase&lt;/a&gt; (open source end-to-end encryption)&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-sh&#34;&gt;$ brew cask install skype slack keybase
&lt;/code&gt;&lt;/pre&gt;

&lt;h4 id=&#34;1password-https-1password-com&#34;&gt;&lt;a href=&#34;https://1password.com&#34;&gt;1Password&lt;/a&gt; ($)&lt;/h4&gt;

&lt;ul&gt;
&lt;li&gt;Help storing all of my private information and authentication in iCloud or Dropbox and using them in macOS or iOS.&lt;/li&gt;
&lt;/ul&gt;

&lt;pre&gt;&lt;code class=&#34;language-sh&#34;&gt;$ brew cask install 1password
&lt;/code&gt;&lt;/pre&gt;
</description>
      </item>
    
      <item>
        <title>A journey from Apache CXF 2.2 to 3.2</title>
        <link>https://htr3n.github.io/2018/06/apache-cxf-2-to-3/</link>
        <pubDate>Fri, 15 Jun 2018 00:00:00 +0000</pubDate>
        
        <guid>7c49b813106d16be687257e42bb3a606</guid>
        <description>

&lt;p&gt;I have used &lt;a href=&#34;https://cxf.apache.org&#34;&gt;Apache CXF&lt;/a&gt; 2.2 to develop Web services for some R&amp;amp;D projects that I took part in. At that time, it was a choice between &lt;a href=&#34;http://axis.apache.org/axis2/java/core&#34;&gt;Apache Axis/Axis2&lt;/a&gt; and CXF (formerly Codehaus XFire project).&lt;/p&gt;

&lt;p&gt;I eventually decided to get along with CXF due to its simplicity, quite clear documentation, good support for document-style Web services (+) and many standards, especially JAX-WS and JAX-RS.&lt;/p&gt;

&lt;p&gt;Moreover, Apache CXF also embraces smooth integration with Spring Framework (big plus for me as I was using Spring Web MVC 3 to develop the Web front-end). Everything went well for me on modelling and developing Web services based on JAX-WS for both directions: WSDL-first and Java-first.&lt;/p&gt;

&lt;p&gt;In my projects, I designed the WSDLs and used &lt;a href=&#34;http://cxf.apache.org/docs/wsdl-to-java.html&#34;&gt;WSDL2Java&lt;/a&gt; Maven plugin or command line to generate skeleton Java code of the Web services. The Java service implementations were kept separately in a package/folder to avoid any code overwriting. CXF services are so easy to configure with Spring Framework 3.0. The implementations of the services were loaded as Spring managed beans. The expose of a service is done via a CXF directive &lt;code&gt;&amp;lt;jaxws:endpoint&amp;gt;&lt;/code&gt; of which the &lt;code&gt;implementor&lt;/code&gt; attribute refers to the corresponding bean.&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-xml&#34;&gt;&amp;lt;beans xmlns=&amp;quot;http://www.springframework.org/schema/beans&amp;quot;
       xmlns:jaxws=&amp;quot;http://cxf.apache.org/jaxws&amp;quot;&amp;gt;
  &amp;lt;import resource=&amp;quot;classpath:META-INF/cxf/cxf.xml&amp;quot; /&amp;gt;
  &amp;lt;import resource=&amp;quot;classpath:META-INF/cxf/cxf-extension-soap.xml&amp;quot; /&amp;gt;
  &amp;lt;import resource=&amp;quot;classpath:META-INF/cxf/cxf-extension-jaxws.xml&amp;quot; /&amp;gt;
  &amp;lt;import resource=&amp;quot;classpath:META-INF/cxf/cxf-servlet.xml&amp;quot; /&amp;gt;    
  &amp;lt;bean id=&amp;quot;CreditWorthinessImpl&amp;quot;
        class=&amp;quot;westbank.ws.impl.CreditWorthinessImpl&amp;quot;
        p:dataAccessObject-ref=&amp;quot;dataAccessObject&amp;quot;&amp;gt;
  &amp;lt;/bean&amp;gt;
  &amp;lt;jaxws:endpoint id=&amp;quot;CreditWorthiness&amp;quot;
                  implementor=&amp;quot;#CreditWorthinessImpl&amp;quot; 
                  address=&amp;quot;/CreditWorthiness&amp;quot;&amp;gt;
  &amp;lt;/jaxws:endpoint&amp;gt;
&amp;lt;/beans&amp;gt;
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;In the Web app configuration &lt;code&gt;web.xml&lt;/code&gt;, CXF Servlet must be loaded by the container.&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-xml&#34;&gt;&amp;lt;servlet&amp;gt;
  &amp;lt;servlet-name&amp;gt;cxf&amp;lt;/servlet-name&amp;gt;
  &amp;lt;servlet-class&amp;gt;org.apache.cxf.transport.servlet.CXFServlet&amp;lt;/servlet-class&amp;gt;
  &amp;lt;load-on-startup&amp;gt;2&amp;lt;/load-on-startup&amp;gt;
&amp;lt;/servlet&amp;gt;
&amp;lt;servlet-mapping&amp;gt;
  &amp;lt;servlet-name&amp;gt;cxf&amp;lt;/servlet-name&amp;gt;
  &amp;lt;url-pattern&amp;gt;/services/*&amp;lt;/url-pattern&amp;gt;
&amp;lt;/servlet-mapping&amp;gt;
&lt;/code&gt;&lt;/pre&gt;

&lt;h2 id=&#34;upgrading-apache-cxf&#34;&gt;Upgrading Apache CXF&lt;/h2&gt;

&lt;p&gt;For a while I haven&amp;rsquo;t taken part in further WS development, i.e. not using Apache CXF a lot. One day I thought I could use the WS project to showcase and review my relevant knowledge. The codebase still works well after some mysterious library missing that I have not seen before. It is possible due to the built-in libraries for XML parsing that were implicitly used but now changed in the newer JRE. Apart from that, most of the libraries are also outdated. So I dedice to spend some time to exercise upgrading the project and refactor a bit its source code. Here I jot down some major points on upgrading Apache CXF.&lt;/p&gt;

&lt;p&gt;The upgrading was not as easy and smooth as just changing the dependencies&amp;rsquo; versions. A lot of conflicts or major refactoring happened. I had to read thoroughly the &lt;a href=&#34;http://cxf.apache.org/docs/migration-guides.html&#34;&gt;documentation on CXF site for migration&lt;/a&gt; and decided to go gradually over each major version of Apache CXF.&lt;/p&gt;

&lt;h2 id=&#34;from-version-2-2-to-2-7&#34;&gt;&amp;hellip; from version 2.2 to 2.7 &amp;hellip;&lt;/h2&gt;

&lt;p&gt;From Apache CXF 2.2 to 2.6, not so many changes are relevant for the project as I mainly used &lt;code&gt;cxf-rt-frontend-jaxws&lt;/code&gt;.  Another &lt;a href=&#34;http://cxf.apache.org/docs/embedding-cxf-inside-spring.html&#34;&gt;significant change since 2.4&lt;/a&gt; causes errors for Spring / Jetty server regarding importing CXF&amp;rsquo;s XML resources. Recall the aforementioned Spring bean configuration where CXF service implementations were loaded and published? There are a number of &lt;code&gt;&amp;lt;import&amp;gt;&lt;/code&gt; directives. These directives advise Spring to load the corresponding CXF resources. Now we only need &amp;ldquo;&lt;em&gt;one to rule them all&lt;/em&gt;&amp;rdquo;.&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-xml&#34;&gt;&amp;lt;import resource=&amp;quot;classpath:META-INF/cxf/cxf.xml&amp;quot; /&amp;gt;
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;To upgrade to version 2.6, I have to revise the project with respect to the merging of &lt;code&gt;cxf-common-utilites&lt;/code&gt; into &lt;code&gt;cxf-api&lt;/code&gt;, the removal of &lt;code&gt;cxf-rt-binding-http&lt;/code&gt;, and the refactoring that impact &lt;code&gt;cxf-rt-core&lt;/code&gt;.  Most of the other changes from 2.2 to 2.7 are for JAX-RS, which were used very little or none in my project.&lt;/p&gt;

&lt;h2 id=&#34;and-to-version-3-0&#34;&gt;&amp;hellip; and to version 3.0+&lt;/h2&gt;

&lt;p&gt;Apache CXF 3.0 requires a rather disruptive change, from Spring Framework 3.0 to 3.2+. Again, I used standard Spring bean configurations which are still valid for Spring 3.2. Hence, the project works well with Spring 3.2.18-RELEASE. I only need to remove all version numbers in the Spring XML schemas. The major change I must deal with is to remove the dependency of &lt;code&gt;cxf-api&lt;/code&gt; as it was merged with &lt;code&gt;cxf-core&lt;/code&gt;.&lt;/p&gt;

&lt;p&gt;Then there comes the most dramatic issue with CXF 3.0.16 (sic!). &lt;code&gt;cxf-codegen-plugin&lt;/code&gt; used to generate Java code from WSDLs refused to work (which was no problem in earlier verions) and spit out errors like this.&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;[ERROR] Failed to execute goal org.apache.cxf:cxf-codegen-plugin:3.0.16:wsdl2java (generate-sources) on project loan-approval-portal: Execution generate-sources of goal org.apache.cxf:cxf-codegen-plugin:3.0.16:wsdl2java failed: org.apache.cxf.wsdl11.WSDLRuntimeException: Fail to create wsdl definition file:%3c?xml%20version=%221.0%22%20encoding=%22UTF-8%22?%3e: WSDLException: faultCode=PARSER_ERROR: Problem parsing &#39;file:%3c?xml%20version=%221.0%22%20encoding=%22UTF-8%22?%3e&#39;.: java.io.FileNotFoundException: &amp;lt; (No such file or directory) -&amp;gt; [Help 1]
org.apache.maven.lifecycle.LifecycleExecutionException: Failed to execute goal org.apache.cxf:cxf-codegen-plugin:3.0.16:wsdl2java (generate-sources) on project loan-approval-portal: Execution generate-sources of goal org.apache.cxf:cxf-codegen-plugin:3.0.16:wsdl2java failed: org.apache.cxf.wsdl11.WSDLRuntimeException: Fail to create wsdl definition file:%3c?xml%20version=%221.0%22%20encoding=%22UTF-8%22?%3e: WSDLException: faultCode=PARSER_ERROR: Problem parsing &#39;file:%3c?xml%20version=%221.0%22%20encoding=%22UTF-8%22?%3e&#39;.: java.io.FileNotFoundException: &amp;lt; (No such file or directory)
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;What puzzles me is that I have tried the command tool &lt;code&gt;wsdl2java&lt;/code&gt; of Apache CXF 3.0.16 with each WSDL and, strangely, found no errors at all. After some extra trial-and-error effort, I eventually figured out that an extra option for &lt;code&gt;cxf-codegen-plugin&lt;/code&gt; causes the error. The old/original plugin configuration in &lt;code&gt;pom.xml&lt;/code&gt; is as following.&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-xml&#34;&gt;&amp;lt;plugin&amp;gt;
  &amp;lt;groupId&amp;gt;org.apache.cxf&amp;lt;/groupId&amp;gt;
  &amp;lt;artifactId&amp;gt;cxf-codegen-plugin&amp;lt;/artifactId&amp;gt;
  &amp;lt;version&amp;gt;${cxf.version}&amp;lt;/version&amp;gt;
  &amp;lt;executions&amp;gt;
    &amp;lt;execution&amp;gt;
      &amp;lt;id&amp;gt;generate-sources&amp;lt;/id&amp;gt;
      &amp;lt;phase&amp;gt;generate-sources&amp;lt;/phase&amp;gt;
      &amp;lt;configuration&amp;gt;
        &amp;lt;sourceRoot&amp;gt;${basedir}/src/main/java&amp;lt;/sourceRoot&amp;gt;
        &amp;lt;wsdlRoot&amp;gt;${basedir}/src/main/webapp/WEB-INF/wsdl/&amp;lt;/wsdlRoot&amp;gt;
        &amp;lt;defaultOptions&amp;gt;
          &amp;lt;validateWsdl&amp;gt;true&amp;lt;/validateWsdl&amp;gt;
          &amp;lt;wsdlList&amp;gt;true&amp;lt;/wsdlList&amp;gt;
          &amp;lt;defaultExcludesNamespace&amp;gt;true&amp;lt;/defaultExcludesNamespace&amp;gt;
          &amp;lt;extraargs&amp;gt;
            &amp;lt;extraarg&amp;gt;-defaultValues&amp;lt;/extraarg&amp;gt;
            &amp;lt;extraarg&amp;gt;-quiet&amp;lt;/extraarg&amp;gt;
            &amp;lt;extraarg&amp;gt;-wsdlLocation&amp;lt;/extraarg&amp;gt;
            &amp;lt;extraarg&amp;gt;&amp;lt;/extraarg&amp;gt;
          &amp;lt;/extraargs&amp;gt;
        &amp;lt;/defaultOptions&amp;gt;
      &amp;lt;/configuration&amp;gt;
      &amp;lt;goals&amp;gt;
        &amp;lt;goal&amp;gt;wsdl2java&amp;lt;/goal&amp;gt;
      &amp;lt;/goals&amp;gt;
    &amp;lt;/execution&amp;gt;
  &amp;lt;/executions&amp;gt;
&amp;lt;/plugin&amp;gt;
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;The option &lt;code&gt;&amp;lt;wsdlList&amp;gt;&lt;/code&gt; is the culprit. It was declared &lt;code&gt;boolean&lt;/code&gt; since CXF 2.2 to 2.7.0 as I found &lt;a href=&#34;https://cxf.apache.org/javadoc/latest-2.7.x/org/apache/cxf/maven_plugin/wsdl2java/Option.html&#34;&gt;here&lt;/a&gt;. However, in &lt;a href=&#34;http://cxf.apache.org/docs/wsdl-to-java.html&#34;&gt;the most recent documentation&lt;/a&gt; of CXF 3, &lt;code&gt;wsdlList&lt;/code&gt; is still listed as an option for &lt;code&gt;wsdl2java&lt;/code&gt; but no longer of type &lt;code&gt;boolean&lt;/code&gt;  (&lt;code&gt;-wsdlList &amp;lt;wsdlurl&amp;gt;&lt;/code&gt;). To make it worse, the option is totally hidden/undocumented. So all I have to do is to disable the line &lt;code&gt;&amp;lt;wsdlList&amp;gt;true&amp;lt;/wsdlList&amp;gt;&lt;/code&gt; and  &lt;code&gt;cxf-codegen-plugin&lt;/code&gt; works again in CXF 3.0+.&lt;/p&gt;

&lt;p&gt;The problems with &lt;code&gt;cxf-codegen-plugin&lt;/code&gt; keep raising when upgrading CXF to 3.2.4. This time, it threw another exception though.&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;[ERROR] Failed to execute goal org.apache.cxf:cxf-codegen-plugin:3.2.4:wsdl2java (generate-sources) on project loan-approval-portal: Execution generate-sources of goal org.apache.cxf:cxf-codegen-plugin:3.2.4:wsdl2java failed: org.xml.sax.SAXNotRecognizedException: Property &#39;http://javax.xml.XMLConstants/property/accessExternalSchema&#39; is not recognized. -&amp;gt; [Help 1]
org.apache.maven.lifecycle.LifecycleExecutionException: Failed to execute goal org.apache.cxf:cxf-codegen-plugin:3.2.4:wsdl2java (generate-sources) on project loan-approval-portal: Execution generate-sources of goal org.apache.cxf:cxf-codegen-plugin:3.2.4:wsdl2java failed: org.xml.sax.SAXNotRecognizedException: Property &#39;http://javax.xml.XMLConstants/property/accessExternalSchema&#39; is not recognized.
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;We can see that the error is due to schema validation. Before, I wanted to make sure that the WSDLs were valid before generating Java code. Thus, I chose to enable validation by &lt;code&gt;&amp;lt;validateWsdl&amp;gt;true&amp;lt;/validateWsdl&amp;gt;&lt;/code&gt;. This option is actually the root cause of the aforementioned exception during validation. The problem seems to stem from &lt;a href=&#34;http://docs.oracle.com/javase/tutorial/jaxp/properties/properties.html&#34;&gt;new XML security properties in JAXB 1.5&lt;/a&gt; introduced in Java 8. When I disable that option, the plugin works fine again (voila!). But that means I must live in a maybe-not-error-free world (D&amp;rsquo;oh!). But we are all, aren&amp;rsquo;t we?&lt;/p&gt;

&lt;p&gt;After all of the above, I can get my project to work with Apache CXF 3.2.4 while keeping the business logic of services intact.&lt;/p&gt;

&lt;h2 id=&#34;update-2018-06-25-xml-less-spring-configuration&#34;&gt;Update 2018-06-25: XML-less Spring Configuration&lt;/h2&gt;

&lt;p&gt;As deciding to switch to XML-less Spring configuration to learn more about Spring Java annotations, I also tried to migrate CXF settings, too. Here are some last updates.&lt;/p&gt;

&lt;h3 id=&#34;loading-cxfservlet&#34;&gt;Loading CXFServlet&lt;/h3&gt;

&lt;pre&gt;&lt;code class=&#34;language-java&#34;&gt;public class MyWebApplicationInitializer implements org.springframework.web.WebApplicationInitializer {
  @Override
  public void onStartup(ServletContext container) throws ServletException {
    AnnotationConfigWebApplicationContext root = new AnnotationConfigWebApplicationContext();
    root.register(ServiceConfiguration.class);
    root.refresh();

    // Register and map the CXF servlet
    CXFServlet cxfServlet = new CXFServlet();
    ServletRegistration.Dynamic reg = container.addServlet(&amp;quot;cxf&amp;quot;, cxfServlet);
    reg.setLoadOnStartup(1);
    reg.addMapping(&amp;quot;/services/*&amp;quot;);
  }
}
&lt;/code&gt;&lt;/pre&gt;

&lt;h3 id=&#34;publishing-services&#34;&gt;Publishing Services&lt;/h3&gt;

&lt;p&gt;I configured the CXF bus used for publishing web services and defining JAX-WS service endpoints. Instead of importing existing CXF&amp;rsquo;s XML resources as many developers have chosen, I opted for a pure Java approach. What we have to do is to create a bean named &amp;lsquo;&lt;em&gt;cxf&lt;/em&gt;&amp;rsquo; (defined as &lt;code&gt;org.apache.cxf.Bus.DEFAULT_BUS_ID&lt;/code&gt;) and use that bean for defining service endpoints.&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-java&#34;&gt;import com.example.HelloWorldImpl;

import org.apache.cxf.Bus;
import org.apache.cxf.bus.spring.SpringBus;
import org.apache.cxf.jaxws.EndpointImpl;
import org.springframework.context.annotation.Bean;
import org.springframework.context.annotation.Configuration;

import javax.xml.ws.Endpoint;

@Configuration
public class ServiceConfiguration {

  @Bean(name=Bus.DEFAULT_BUS_ID)
  public SpringBus cxf() {
      return new SpringBus();
  }

  @Bean
  public Endpoint helloWorld() {
    HelloWorldImpl implementor = new HelloWorldImpl();
    EndpointImpl endpoint = new EndpointImpl(cxf(), implementor);
    endpoint.publish(&amp;quot;/HelloWorld&amp;quot;);
    return endpoint;
  }
}
&lt;/code&gt;&lt;/pre&gt;

&lt;blockquote&gt;
&lt;p&gt;&lt;strong&gt;IMPORTANT&lt;/strong&gt;&lt;br/&gt; &lt;code&gt;Endpoint.publish()&lt;/code&gt; must be called to expose the service endpoint instead of &lt;code&gt;Endpoint.setAddress()&lt;/code&gt; as above.&lt;/p&gt;
&lt;/blockquote&gt;
</description>
      </item>
    
      <item>
        <title>Integration Laravel 5 and Gentelella admin theme</title>
        <link>https://htr3n.github.io/2018/05/integration-laravel-gentelella/</link>
        <pubDate>Wed, 09 May 2018 00:00:00 +0000</pubDate>
        
        <guid>0acd6b6922aac765a7c7bcc60fc2c522</guid>
        <description>

&lt;p&gt;&lt;a href=&#34;https://github.com/puikinsh/gentelella&#34;&gt;Gentelella&lt;/a&gt; is a very nice and gently-looking &lt;a href=&#34;https://getbootstrap.com&#34;&gt;Bootstrap&lt;/a&gt; based admin theme developed by Aigars Silkalns (aka &lt;a href=&#34;https://github.com/puikinsh&#34;&gt;puikinsh&lt;/a&gt;). It can be integrated into several Web application frameworks. This post is one of my development exercises in which Gentelella is used to decorate a &lt;a href=&#34;https://github.com/laravel/laravel&#34;&gt;Laravel&lt;/a&gt; 5 based Web application. This task is part of building my PHP based framework &lt;a href=&#34;https://github.com/htr3n/laramod&#34;&gt;LaraMod&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;Laravel can act as backend for any Web application. At the moment of this writing, Laravel includes several &lt;a href=&#34;https://laravel.com/docs/frontend&#34;&gt;good supports&lt;/a&gt; for popular front-ends such as Bootstrap, &lt;a href=&#34;https://vuejs.org&#34;&gt;Vue.js&lt;/a&gt;, and &lt;a href=&#34;https://reactjs.org&#34;&gt;React&lt;/a&gt;. The included tool &lt;a href=&#34;https://github.com/JeffreyWay/laravel-mix&#34;&gt;Laravel Mix&lt;/a&gt;, which runs on top of  &lt;a href=&#34;https://webpack.js.org/&#34;&gt;Webpack&lt;/a&gt;, can significantly lessen development effort on compiling and mixing Web resources. Thus, I have just leveraged Laravel Mix for this integration task. Further details on Laravel Mix can be found &lt;a href=&#34;https://laravel.com/docs/mix&#34;&gt;here&lt;/a&gt;.&lt;/p&gt;

&lt;h2 id=&#34;installation&#34;&gt;Installation&lt;/h2&gt;

&lt;p&gt;Laravel provides built-in support for some front-end frameworks but they might cause some conflicts and incompability with Gentelella&amp;rsquo;s own libraries. Therefore, I have decided to start from scratch, i.e. using basic Laravel without any front-end scaffolding&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-sh&#34;&gt;# remove all scaffolding
php artisan preset none
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;This command will remove all relevant scaffolding components including Bootstrap, Vue or React. Note that Laravel configuration for Bootstrap and Vue might still exist. For instance, check &lt;code&gt;resource/assets/js/app.js&lt;/code&gt;  for the following line and make sure it is commented out.&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-js&#34;&gt;// require(&#39;./bootstrap&#39;);
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;Now we just add Gentelella&amp;rsquo;s dependencies.&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-sh&#34;&gt;# adding Gentelella
yarn add --save gentelella 		# or npm install gentelella --save
# update dependencies
yarn install					# or  npm install
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;After this step, Gentelella should be available in the local &lt;code&gt;node_modules&lt;/code&gt; folder.&lt;/p&gt;

&lt;h2 id=&#34;compiling-and-mixing-resources&#34;&gt;Compiling and Mixing Resources&lt;/h2&gt;

&lt;p&gt;The main configuration file of Laravel Mix is &lt;code&gt;webpack.mix.js&lt;/code&gt;. The fundamental tasks are defined as following.&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-js&#34;&gt;let mix = require(&#39;laravel-mix&#39;);
...
mix.js(&#39;resources/assets/js/app.js&#39;, &#39;public/js&#39;)
   .sass(&#39;resources/assets/sass/app.scss&#39;, &#39;public/css&#39;);
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;That is, Mix will compile JavaScript and SASS resources in &lt;code&gt;resources/assets/js/app.js&lt;/code&gt; and &lt;code&gt;resources/assets/sass/app.scss&lt;/code&gt; to &lt;code&gt;public/js&lt;/code&gt; and &lt;code&gt;public/css&lt;/code&gt;, respectively.&lt;/p&gt;

&lt;p&gt;We shall use the same way to compile necessary Gentelella resources. The full configuration can be found in the LaraMod project &lt;a href=&#34;https://github.com/htr3n/laramod/blob/master/webpack.mix.js&#34;&gt;&lt;code&gt;webpack.mix.js&lt;/code&gt;&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;Some common variables are defined to reduce duplicates.&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-js&#34;&gt;// general resources
let public_js = &#39;public/js/&#39;;
let public_css = &#39;public/css/&#39;;
let resource_sass = &#39;resources/assets/sass/&#39;;
// Gentelella resources
let gentelella_home = &#39;node_modules/gentelella/&#39;;
let gentelella_vendor = gentelella_home + &#39;/vendors/&#39;;
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;As using separate styles for different pages, e.g. Login, Dashboard, etc., I configure Mix to compile them accordingly.&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-js&#34;&gt;mix.js(&#39;resources/assets/js/app.js&#39;, public_js).
    sass(resource_sass + &#39;app.scss&#39;, public_css).
    sass(resource_sass + &#39;home.scss&#39;, public_css).
    options({processCssUrls: false}).
    sass(resource_sass + &#39;login.scss&#39;, public_css).
    options({processCssUrls: false}).
    sass(resource_sass + &#39;dashboard.scss&#39;, public_css).
    options({processCssUrls: false});
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;For each component of Gentelella that we need for our project or certain pages, we can copy them into Laravel public folders.&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-js&#34;&gt;/*
 *  Copy dependent JavaScripts and CSSs
 */
mix.
    // gentelella
    copy(gentelella_home + &#39;build/css/custom.css&#39;,
        public_css + &#39;gentelella-custom.css&#39;).
    copy(gentelella_home + &#39;build/js/custom.js&#39;,
        public_js + &#39;gentelella-custom.js&#39;).
...
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;We can definitely use Mix/Webpack tools for optimising/minimising/transforming Gentelella resources. I will leave it as extra deployment exercises. For now, I will mainly concentrate on development aspects. When I need to use a Gentelella&amp;rsquo;s component for a certain page, I will include the following directives in the corresponding Laravel Blade templates for that page.&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-php+HTML&#34;&gt;&amp;lt;!-- Styles --&amp;gt;
&amp;lt;link href=&amp;quot;{{ asset(&#39;css/font-awesome.css&#39;) }}&amp;quot; rel=&amp;quot;stylesheet&amp;quot;&amp;gt;
&amp;lt;link href=&amp;quot;{{ asset(&#39;css/bootstrap.css&#39;) }}&amp;quot; rel=&amp;quot;stylesheet&amp;quot;&amp;gt;
&amp;lt;link href=&amp;quot;{{ asset(&#39;css/gentelella-custom.css&#39;) }}&amp;quot; rel=&amp;quot;stylesheet&amp;quot;&amp;gt;
...
&amp;lt;!-- Scripts --&amp;gt;
&amp;lt;script src=&amp;quot;{{ asset(&#39;js/jquery.min.js&#39;) }}&amp;quot;&amp;gt;&amp;lt;/script&amp;gt;
&amp;lt;script src=&amp;quot;{{ asset(&#39;js/bootstrap.js&#39;) }}&amp;quot;&amp;gt;&amp;lt;/script&amp;gt;
&amp;lt;script src=&amp;quot;{{ asset(&#39;js/gentelella-custom.js&#39;) }}&amp;quot;&amp;gt;&amp;lt;/script&amp;gt;
&amp;lt;script src=&amp;quot;{{ asset(&#39;js/app.js&#39;) }}&amp;quot;&amp;gt;&amp;lt;/script&amp;gt;
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;Note that the specific Laravel Blade directive &lt;code&gt;{{ }}&lt;/code&gt; and &lt;code&gt;asset(...)&lt;/code&gt; are used to refer to the resources inside Laravel &lt;code&gt;public/&lt;/code&gt; folder accordingly. A working example of Laravel and Gentelella integration is illustrated via the &lt;a href=&#34;https://github.com/htr3n/laramod&#34;&gt;LaraMod&lt;/a&gt; project that you can check out and have a deeper look.&lt;/p&gt;

&lt;p&gt;&lt;img src=&#34;login.png&#34; alt=&#34;Login&#34; /&gt;&lt;/p&gt;

&lt;p&gt;&lt;img src=&#34;dashboard.png&#34; alt=&#34;Dashboard&#34; /&gt;&lt;/p&gt;

&lt;h2 id=&#34;conclusion&#34;&gt;Conclusion&lt;/h2&gt;

&lt;p&gt;Integration Laravel 5 and Gentelella is a simple but interesting exercise showing many nice features of Laravel for supporting common front-ends. Laravel Mix provides a good wrapper on top of Webpack that really reduces the complexity of Webpack and lessens considerable amount of development effort.&lt;/p&gt;
</description>
      </item>
    
      <item>
        <title>Node.js package managers: NPM and Yarn</title>
        <link>https://htr3n.github.io/2018/04/node.js-package-managers-npm-and-yarn/</link>
        <pubDate>Mon, 23 Apr 2018 00:00:00 +0000</pubDate>
        
        <guid>b3d7607ba2c296738f3239328d601b95</guid>
        <description>

&lt;p&gt;Node.js is an increasingly popular and widely used JavaScript runtime nowadays. One of the important aspects of Node.js is to manage the dependencies among software artefacts. Better dependency management would advocate modularisation and decoupling of software components. Since the dawn of Node.js, &lt;a href=&#34;https://stackoverflow.com/questions/35062852/npm-vs-bower-vs-browserify-vs-gulp-vs-grunt-vs-webpack&#34;&gt;several package managers&lt;/a&gt; have been developed, notably, &lt;a href=&#34;https://www.npmjs.org/&#34;&gt;npm&lt;/a&gt;, &lt;a href=&#34;https://anymod.com&#34;&gt;anymod&lt;/a&gt; (formerly &lt;code&gt;component&lt;/code&gt;), &lt;a href=&#34;http://volojs.org&#34;&gt;volo&lt;/a&gt;, &lt;a href=&#34;http://packages.ringojs.org&#34;&gt;ringojs&lt;/a&gt;, &lt;a href=&#34;https://bower.io&#34;&gt;bower&lt;/a&gt;, &lt;a href=&#34;https://yarnpkg.com&#34;&gt;yarn&lt;/a&gt;, &lt;a href=&#34;https://pnpm.js.org&#34;&gt;&lt;code&gt;pnpm&lt;/code&gt;&lt;/a&gt;, to name but a few.&lt;/p&gt;

&lt;p&gt;In this post, we shall walk through the two tools that have been seemingly living up to the high expectation of a majority of JavaScript developers and communities, &lt;code&gt;npm&lt;/code&gt; and &lt;code&gt;yarn&lt;/code&gt;. &lt;code&gt;pnpm&lt;/code&gt; is an improvement that &lt;a href=&#34;https://github.com/pnpm/node-package-manager-benchmark&#34;&gt;performs sometimes better&lt;/a&gt; than &lt;code&gt;npm&lt;/code&gt; and &lt;code&gt;yarn&lt;/code&gt;. The great advantage of using &lt;code&gt;pnpm&lt;/code&gt; is that we just replace the command &lt;code&gt;npm&lt;/code&gt; by &lt;code&gt;pnpm&lt;/code&gt; and keep the rest intact.  Bower is a powerful tool that supports not only JS but also various types of Web resources including HTML, CSS, fonts, images. Nevertheless, the core Bower developers and maintainers &lt;a href=&#34;https://bower.io/blog/2017/how-to-migrate-away-from-bower&#34;&gt;had recently recommended the users to switch to &lt;code&gt;yarn&lt;/code&gt;&lt;/a&gt;.&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;&lt;code&gt;npm&lt;/code&gt; seems to be the &lt;em&gt;de facto&lt;/em&gt; package management included with Node.js. When Node.js is installed, &lt;code&gt;npm&lt;/code&gt; will also be available and ready to use as well. This is one among many reasons why &lt;code&gt;npm&lt;/code&gt; is well-known and widely used by JS developers.&lt;/li&gt;
&lt;li&gt;&lt;code&gt;yarn&lt;/code&gt; was &lt;a href=&#34;https://code.facebook.com/posts/1840075619545360&#34;&gt;originally developed by Facebook&lt;/a&gt; to overcome existing problems of existing package management tools. Some notable &lt;code&gt;yarn&lt;/code&gt;&amp;rsquo;s features are &lt;em&gt;deterministic model&lt;/em&gt; (producing the same result when repeating), &lt;em&gt;flat mode&lt;/em&gt; (resolving mismatching versions of dependencies to a single version to avoid duplicate), &lt;em&gt;security first&lt;/em&gt;, &lt;em&gt;offline mode&lt;/em&gt;, &lt;em&gt;network performance&lt;/em&gt;, and so forth. Nevertheless, recent versions of &lt;code&gt;npm&lt;/code&gt; also improve significantly by learning  and incorporate several good features from &lt;code&gt;yarn&lt;/code&gt;.&lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&#34;walking-through&#34;&gt;Walking Through&lt;/h2&gt;

&lt;p&gt;In this part, we will go through a typical development workflow that each tool provides with basic steps and some commonly used options.&lt;/p&gt;

&lt;h3 id=&#34;0-installing-and-upgrading&#34;&gt;0. Installing and Upgrading&lt;/h3&gt;

&lt;h5 id=&#34;npm&#34;&gt;NPM&lt;/h5&gt;

&lt;p&gt;As mentioned above, &lt;code&gt;npm&lt;/code&gt; is available wherever Node.js is installed. So, the only thing to do is to upgrade &lt;code&gt;npm&lt;/code&gt;&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-sh&#34;&gt;npm install npm@latest -g
# you can also use the alias &#39;i&#39;
npm i npm@latest -g
&lt;/code&gt;&lt;/pre&gt;

&lt;h5 id=&#34;yarn&#34;&gt;Yarn&lt;/h5&gt;

&lt;p&gt;Yarn can be installed via &lt;code&gt;npm&lt;/code&gt; but this method is &lt;a href=&#34;https://yarnpkg.com/en/docs/install#install-via-npm&#34;&gt;not recommended due to security reason&lt;/a&gt;.&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-sh&#34;&gt;npm install --g yarn
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;macOS users can install Yarn using &lt;a href=&#34;https://brew.sh&#34;&gt;Homebrew&lt;/a&gt;.&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-sh&#34;&gt;# installing
brew update &amp;amp;&amp;amp; brew install yarn
# upgrading
brew upgrade yarn
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;There are also &lt;a href=&#34;https://yarnpkg.com/en/docs/install&#34;&gt;concrete instructions&lt;/a&gt; for Linux and Windows users, too.&lt;/p&gt;

&lt;h3 id=&#34;1-starting-new-projects&#34;&gt;1. Starting New Projects&lt;/h3&gt;

&lt;h5 id=&#34;npm-1&#34;&gt;NPM&lt;/h5&gt;

&lt;pre&gt;&lt;code class=&#34;language-sh&#34;&gt;npm init [-f|--force] [-y|--yes]
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;&lt;code&gt;npm init&lt;/code&gt; will ask you a number of questions and create an initial configuration file &lt;code&gt;package.json&lt;/code&gt;. In case you do not want to answer the questions one by one, you can use any option &lt;code&gt;-f&lt;/code&gt;, &lt;code&gt;--force&lt;/code&gt;,  &lt;code&gt;-y&lt;/code&gt; or &lt;code&gt;--yes&lt;/code&gt; to skip all questions and get a default &lt;code&gt;package.json&lt;/code&gt; in the current directory.&lt;/p&gt;

&lt;h5 id=&#34;yarn-1&#34;&gt;Yarn&lt;/h5&gt;

&lt;pre&gt;&lt;code class=&#34;language-sh&#34;&gt;yarn init [-y | --yes] [-p | --private]
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;This command is totally similar to &lt;code&gt;npm init&lt;/code&gt; and the outcome will be &lt;code&gt;package.json&lt;/code&gt;. The only difference is &lt;code&gt;-p&lt;/code&gt; or &lt;code&gt;--private&lt;/code&gt; to set &lt;code&gt;&amp;quot;private&amp;quot;: true&lt;/code&gt;.&lt;/p&gt;

&lt;h3 id=&#34;2-getting-information&#34;&gt;2. Getting Information&lt;/h3&gt;

&lt;h5 id=&#34;npm-2&#34;&gt;NPM&lt;/h5&gt;

&lt;pre&gt;&lt;code class=&#34;language-sh&#34;&gt;# display a particular package&#39;s information
npm view eslint
npm info eslint
# search for a package/name
npm search eslint
# list installed packages
npm ls
&lt;/code&gt;&lt;/pre&gt;

&lt;h5 id=&#34;yarn-2&#34;&gt;Yarn&lt;/h5&gt;

&lt;p&gt;Yarn developers deliberately do not add support for searching packages like &lt;code&gt;npm&lt;/code&gt; as &lt;a href=&#34;https://github.com/yarnpkg/yarn/issues/778#issuecomment-253146299&#34;&gt;explained here&lt;/a&gt;.&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-sh&#34;&gt;# display a particular package&#39;s information
yarn info eslint
# list installed packages
yarn list
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;Yarn provodes a nice command for showing why a certain package was installed.&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-sh&#34;&gt;yarn why eslint
&lt;/code&gt;&lt;/pre&gt;

&lt;h3 id=&#34;3-installing-dependencies&#34;&gt;3. Installing Dependencies&lt;/h3&gt;

&lt;p&gt;Both &lt;code&gt;npm&lt;/code&gt; and &lt;code&gt;yarn&lt;/code&gt; provide several options to add dependencies ranging from registered packages, tarballs, to git repositories. Please note that, &lt;code&gt;npm&lt;/code&gt; and &lt;code&gt;yarn&lt;/code&gt; also support manipulating global package repositories, i.e. installed packages that are available to the whole working system instead of local projects. In most of the case, we can use the option &lt;code&gt;-g&lt;/code&gt; for &lt;code&gt;npm&lt;/code&gt; and the command &lt;code&gt;global&lt;/code&gt; for &lt;code&gt;yarn&lt;/code&gt;. Thus, in the following steps, we mainly concentrate on local repositories.&lt;/p&gt;

&lt;h5 id=&#34;npm-3&#34;&gt;NPM&lt;/h5&gt;

&lt;pre&gt;&lt;code class=&#34;language-sh&#34;&gt;# install all dependencies defined in package.json
npm install
# add a registered package and record it in &#39;dependencies&#39; 
npm install eslint
# add an exact version
npm install eslint@3.0.0
# add and record in &#39;devDependencies&#39;
npm install --save-dev eslint
# add a git repos
npm install git@github.com:eslint/eslint.git
&lt;/code&gt;&lt;/pre&gt;

&lt;h5 id=&#34;yarn-3&#34;&gt;Yarn&lt;/h5&gt;

&lt;pre&gt;&lt;code class=&#34;language-sh&#34;&gt;# install all dependencies defined in package.json
yarn install
# add a registered package
yarn add eslint
# add an exact version
yarn add eslint@3.0.0
# add to dev dependencies
yarn add --dev eslint
# add a git repos
yarn add git@github.com:eslint/eslint.git
&lt;/code&gt;&lt;/pre&gt;

&lt;h3 id=&#34;4-upgrading-packages&#34;&gt;4. Upgrading Packages&lt;/h3&gt;

&lt;h5 id=&#34;npm-4&#34;&gt;NPM&lt;/h5&gt;

&lt;pre&gt;&lt;code class=&#34;language-sh&#34;&gt;# check outdated packages
npm outdated
# upgrade all to the latest versions w.r.t version ranges in &#39;package.json&#39; (since 2.6.1 default to top level packages)
npm update
# upgrade a specific package
npm update eslint
&lt;/code&gt;&lt;/pre&gt;

&lt;h5 id=&#34;yarn-4&#34;&gt;Yarn&lt;/h5&gt;

&lt;pre&gt;&lt;code class=&#34;language-sh&#34;&gt;# check outdated packages
yarn outdated
# upgrade all
yarn upgrade
# upgrade all and ignore version ranges in &#39;package.json&#39;
yarn upgrade --latest
# upgrade a specific package
yarn upgrade eslint
# upgrade packages match a pattern
yarn upgrade --pattern eslint
&lt;/code&gt;&lt;/pre&gt;

&lt;h3 id=&#34;5-removing-packages&#34;&gt;5. Removing Packages&lt;/h3&gt;

&lt;h5 id=&#34;npm-5&#34;&gt;NPM&lt;/h5&gt;

&lt;pre&gt;&lt;code class=&#34;language-sh&#34;&gt;npm uninstall eslint
&lt;/code&gt;&lt;/pre&gt;

&lt;h5 id=&#34;yarn-5&#34;&gt;Yarn&lt;/h5&gt;

&lt;pre&gt;&lt;code class=&#34;language-sh&#34;&gt;yarn remove eslint
&lt;/code&gt;&lt;/pre&gt;

&lt;h3 id=&#34;6-running-commands&#34;&gt;6. Running Commands&lt;/h3&gt;

&lt;h5 id=&#34;npm-6&#34;&gt;NPM&lt;/h5&gt;

&lt;p&gt;&lt;code&gt;npm&lt;/code&gt; allows users to define executable scripts in &lt;code&gt;package.json&lt;/code&gt; under the section&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-json&#34;&gt;&amp;quot;scripts&amp;quot; : { &amp;quot;test&amp;quot; : &amp;quot;...&amp;quot; }
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;then use &lt;code&gt;npm run script-name&lt;/code&gt; to execute the predefined scripts.&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-sh&#34;&gt;npm run test
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;Nevertheless, &lt;code&gt;npm&lt;/code&gt; provides a short form for executing testing scripts as well.&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;npm test
&lt;/code&gt;&lt;/pre&gt;

&lt;h5 id=&#34;yarn-6&#34;&gt;Yarn&lt;/h5&gt;

&lt;p&gt;Similar to &lt;code&gt;npm&lt;/code&gt;, &lt;code&gt;yarn&lt;/code&gt; users can execute scripts with &lt;code&gt;yarn run script-name&lt;/code&gt; and &lt;code&gt;yarn test&lt;/code&gt; for testing.&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-sh&#34;&gt;yarn run start
yarn test
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;So far, we have walked through some basic steps of a typical development workflow, ranging from initialisation to inquiring and manipulating packages. Apart from that, both &lt;code&gt;npm&lt;/code&gt; and &lt;code&gt;yarn&lt;/code&gt; also go extra length with many more different functionality. Backing by very strong and active communities, your development projects will surely in safe hands when choosing either of them.&lt;/p&gt;
</description>
      </item>
    
      <item>
        <title>Confusing Hugo issues: datetime and &#39;isset&#39;</title>
        <link>https://htr3n.github.io/2018/03/confusing-hugo-issues-datetime-and-isset/</link>
        <pubDate>Sat, 31 Mar 2018 00:00:00 +0000</pubDate>
        
        <guid>fdd9e8e1cb451d75b702fcce8006aded</guid>
        <description>&lt;p&gt;Yesterday I got notified from Github for &lt;a href=&#34;https://github.com/htr3n/hyde-hyde/issues?q=is%3Aissue&#34;&gt;two opening issues&lt;/a&gt; of the Hugo&amp;rsquo;s theme &lt;a href=&#34;https://github.com/htr3n/hyde-hyde&#34;&gt;hyde-hyde&lt;/a&gt; I have ported and developed further.&lt;/p&gt;

&lt;p&gt;The &lt;a href=&#34;https://github.com/htr3n/hyde-hyde/issues/2&#34;&gt;newest one&lt;/a&gt; is reported by &lt;a href=&#34;https://github.com/jdayton3&#34;&gt;jdayton3&lt;/a&gt; (Jonathan Dayton) on wrong dates shown up. The issue seems very strange and difficult to spot. It took me a while to research around and found some relevant reports by &lt;a href=&#34;https://www.madboa.com/blog/2016/08/24/hugo-dateformat&#34;&gt;Paul Heinlein&lt;/a&gt; and &lt;a href=&#34;https://github.com/gohugoio/hugo/issues/163&#34;&gt;Dana Woodman&lt;/a&gt;, that Hugo date/time formatting is internally based on Golang, and therefore, uses &lt;a href=&#34;https://golang.org/pkg/time/#example_Time_Format&#34;&gt;a smart but confusing convention&lt;/a&gt;. It&amp;rsquo;s funny that I made almost the same mistake as Dana (i.e. he used the format string &amp;ldquo;March 1, 2010&amp;rdquo; whilst mine is &amp;ldquo;Jan 1, 2006&amp;rdquo;). As such, the generated dates were totally incorrect.&lt;/p&gt;

&lt;p&gt;Paul&amp;rsquo;s post summarise excellently the Go&amp;rsquo;s date/time format convention:&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;Format strings absolutely must adhere to the 1-2-3-4-5-6-7 order:&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;Month must be Jan, January, 01, or 1&lt;/li&gt;
&lt;li&gt;Date must be 02 or 2&lt;/li&gt;
&lt;li&gt;Hour must be 03, 3, or 15&lt;/li&gt;
&lt;li&gt;Minute must 04&lt;/li&gt;
&lt;li&gt;Second must be 05&lt;/li&gt;
&lt;li&gt;Year must be 2006&lt;/li&gt;
&lt;li&gt;Timezone must be MST or -7&lt;/li&gt;
&lt;/ul&gt;
&lt;/blockquote&gt;

&lt;p&gt;After changing the format string, the aforementioned issue surely disappears. Even better, &lt;code&gt;hyde-hyde&lt;/code&gt; date/time formatting can also now adopt a default option to prevent such potential issues.&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;{{ .Date.Format (.Site.Params.dateformat | default &amp;quot;Jan 02, 2006&amp;quot;) }}
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;&lt;a href=&#34;https://github.com/htr3n/hyde-hyde/issues/1&#34;&gt;The other issue&lt;/a&gt; reported by &lt;a href=&#34;https://github.com/paskal&#34;&gt;paskal&lt;/a&gt; (Dmitry Verkhoturov) is an error Dmitry spotted when compiling and testing his blog against several Hugo themes including mine, &lt;code&gt;hyde-hyde&lt;/code&gt;.&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;Building sites â€¦ ERROR 2018/03/20 20:35:56 Error while rendering &amp;quot;page&amp;quot; in &amp;quot;&amp;quot;: template: /srv/hugo/themes/hyde-hyde/layouts/_default/single.html:6:7: executing &amp;quot;content&amp;quot; at &amp;lt;partial &amp;quot;post_conten...&amp;gt;: error calling partial: template: theme/partials/post_content.html:22:21: executing &amp;quot;theme/partials/post_content.html&amp;quot; at &amp;lt;len .Params.tags&amp;gt;: error calling len: len of untyped nil
ERROR 2018/03/20 20:35:56 Error while rendering &amp;quot;page&amp;quot; in &amp;quot;post/&amp;quot;: template: /srv/hugo/themes/hyde-hyde/layouts/_default/single.html:6:7: executing &amp;quot;content&amp;quot; at &amp;lt;partial &amp;quot;post_conten...&amp;gt;: error calling partial: template: theme/partials/post_content.html:22:21: executing &amp;quot;theme/partials/post_content.html&amp;quot; at &amp;lt;len .Params.tags&amp;gt;: error calling len: len of untyped nil
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;The problem related to accessing &lt;a href=&#34;https://gohugo.io/variables/page/#page-level-params&#34;&gt;the tags&lt;/a&gt; of each post via &lt;code&gt;.Params.tags&lt;/code&gt;. The function &lt;code&gt;len .Params.tags&lt;/code&gt; receives an untyped &lt;code&gt;nil&lt;/code&gt; value. Strangely, there is a conditional check using the function &lt;a href=&#34;https://github.com/gohugoio/hugo/blob/1823c053c8900cb6ee53b8e5c02939c7398e34dd/tpl/collections/collections.go#L315&#34;&gt;isset&lt;/a&gt; right before that.&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;{{ if isset .Params &amp;quot;tags&amp;quot; }}
   {{ $total := len .Params.tags }}
   ...
{{ end }}
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;The &lt;a href=&#34;https://gohugo.io/functions/isset&#34;&gt;semantics&lt;/a&gt; of &lt;code&gt;isset&lt;/code&gt; is a bit vague:&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;Returns true if the parameter is set.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;pre&gt;&lt;code&gt;isset COLLECTION INDEX
isset COLLECTION KEY
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;It does not say anything when either &lt;code&gt;COLLECTION&lt;/code&gt; or &lt;code&gt;INDEX/KEY&lt;/code&gt; is &lt;code&gt;nil&lt;/code&gt; or empty. As such, perhaps Dmitry&amp;rsquo;s blog contains some posts with empty tags. Hence, the variable &lt;code&gt;.Params.tags&lt;/code&gt; yields &lt;code&gt;&amp;quot;&amp;quot;&lt;/code&gt; whilst &lt;code&gt;isset.Params &amp;quot;tags&amp;quot;&lt;/code&gt; evaluates to &lt;code&gt;true&lt;/code&gt;.&lt;/p&gt;

&lt;p&gt;One of the temporary mitigation is to use &lt;a href=&#34;https://gohugo.io/functions/with&#34;&gt;with&lt;/a&gt; instead. The semantics of &lt;code&gt;with&lt;/code&gt; is a bit clearer.&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;Rebinds the context (&lt;code&gt;.&lt;/code&gt;) within its scope and skips the block if the variable is absent.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;Nevertheless, the error is dismissed when replacing the above code with the following. Hoooraaay!!!&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;{{ with .Params.tags }}
	{{ $total := len . }}
{{ end }}
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;Hugo is quite tricky, eh?&lt;/p&gt;
</description>
      </item>
    
      <item>
        <title>Getting started with Webpack</title>
        <link>https://htr3n.github.io/2018/02/getting-started-webpack/</link>
        <pubDate>Fri, 16 Feb 2018 00:00:00 +0000</pubDate>
        
        <guid>06130095bb82273b20a0ecd55c5723ad</guid>
        <description>

&lt;p&gt;Webpack is a &lt;a href=&#34;https://webpack.js.org/concepts&#34;&gt;&lt;em&gt;static module bundler&lt;/em&gt;&lt;/a&gt; for Web applications. It analyses and processes the &lt;em&gt;input application&lt;/em&gt; and generates output &lt;em&gt;bundles&lt;/em&gt;.&lt;/p&gt;

&lt;p&gt;The design of Webpack architecture is highly modularised and extendable. In this post, I share here some notes on major aspects of Webpack since I&amp;rsquo;ve started learning it.&lt;/p&gt;


  





&lt;figure &gt;
  
  &lt;img
      
        src=&#34;https://htr3n.github.io/2018/02/getting-started-webpack/what-is-webpack.png&#34;
      
        alt=&#34;Webpack overview&#34;
        
        
        
         style=&#34;max-width: 100%;&#34;
         /&gt;
  
  
  
    &lt;figcaption&gt;
      &lt;span class=&#34;img--caption&#34;&gt;
        Figure . Webpack overview
        
          [&lt;a href=&#34;https://webpack.github.io&#34;&gt;source&lt;/a&gt;]
        
      &lt;/span&gt;
    &lt;/figcaption&gt;
  
&lt;/figure&gt;




&lt;h3 id=&#34;main-concepts&#34;&gt;Main Concepts&lt;/h3&gt;

&lt;h5 id=&#34;configuration-https-webpack-js-org-concepts-configuration&#34;&gt;&lt;a href=&#34;https://webpack.js.org/concepts/configuration&#34;&gt;Configuration&lt;/a&gt;&lt;/h5&gt;

&lt;p&gt;Webpack&amp;rsquo;s configuration is conventionally defined using a file &lt;code&gt;webpack.config.js&lt;/code&gt;. It is a JavaScript/Node.js source file. A comprehensive example of &lt;code&gt;webpack.config.js&lt;/code&gt; can be found &lt;a href=&#34;https://webpack.js.org/configuration/#options&#34;&gt;here&lt;/a&gt;. The four major parts of Webpack&amp;rsquo;s configuration are &lt;em&gt;entry&lt;/em&gt;, &lt;em&gt;output&lt;/em&gt;, &lt;em&gt;loaders&lt;/em&gt; and &lt;em&gt;plugins&lt;/em&gt;.&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;https://webpack.js.org/concepts/entry-points&#34;&gt;Entry&lt;/a&gt;: An entry denotes the starting point where Webpack  commences buidling the internal &lt;em&gt;dependency graph&lt;/em&gt; by analysing all direct and indirect dependencies. There might be more than one entry.&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://webpack.js.org/concepts/output&#34;&gt;Output&lt;/a&gt;: The output part defines the places where Webpack stores and how to name the outputs.&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://webpack.js.org/concepts/loaders&#34;&gt;Loaders&lt;/a&gt;: Webpack uses loaders to handle files other than JavaScript by transform them into modules that can be processed by Webpack. Loaders are configured using &lt;code&gt;module.rules&lt;/code&gt; that specify the properties &lt;code&gt;test&lt;/code&gt; (what/which files to be transformed) and &lt;code&gt;use&lt;/code&gt; (which loaders to be used).&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://webpack.js.org/concepts/plugins&#34;&gt;Plugins&lt;/a&gt;: Plugins are important part of Webpack that will carry out different kinds of tasks such as checking, combining files, optimised outputs, and so on. Webpack provides a &lt;a href=&#34;https://webpack.js.org/api/plugins&#34;&gt;clear interface&lt;/a&gt; for creating and/or extending plugins.&lt;/li&gt;
&lt;/ul&gt;

&lt;h5 id=&#34;modules-https-webpack-js-org-concepts-modules&#34;&gt;&lt;a href=&#34;https://webpack.js.org/concepts/modules&#34;&gt;Modules&lt;/a&gt;&lt;/h5&gt;

&lt;p&gt;Webpack considers almost each file of any kinds a &lt;em&gt;module&lt;/em&gt;. The dependencies between modules can be described via various ways, for instance using ES2015&amp;rsquo;s &lt;a href=&#34;https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/import&#34;&gt;&lt;code&gt;import&lt;/code&gt;&lt;/a&gt;, CommonJS&amp;rsquo;s &lt;a href=&#34;http://www.commonjs.org/specs/modules/1.0&#34;&gt;&lt;code&gt;require()&lt;/code&gt;&lt;/a&gt;, &lt;a href=&#34;https://github.com/amdjs/amdjs-api/blob/master/AMD.md&#34;&gt;AMD&lt;/a&gt;&amp;rsquo;s &lt;code&gt;define&lt;/code&gt; and &lt;code&gt;require&lt;/code&gt;, and CSS&amp;rsquo;s &lt;a href=&#34;https://developer.mozilla.org/en-US/docs/Web/CSS/@import&#34;&gt;&lt;code&gt;@import&lt;/code&gt;&lt;/a&gt;. Some built-in module types supported by Webpack are including CoffeeScript, TypeScript, Babel, Sass, Less, and Stylus.&lt;/p&gt;

&lt;h5 id=&#34;dependency-graph-https-webpack-js-org-concepts-dependency-graph&#34;&gt;&lt;a href=&#34;https://webpack.js.org/concepts/dependency-graph&#34;&gt;Dependency Graph&lt;/a&gt;&lt;/h5&gt;

&lt;p&gt;When a file or module needs another, it is considered a &lt;em&gt;dependency&lt;/em&gt;. Webpack analyses all possible dependencies and builds a &lt;a href=&#34;https://en.wikipedia.org/wiki/Dependency_graph&#34;&gt;graph&lt;/a&gt; that includes all &lt;em&gt;needed modules&lt;/em&gt; starting from the &lt;em&gt;entry points&lt;/em&gt;. The &lt;em&gt;dependency graph&lt;/em&gt; is then used to package these modules into the &lt;em&gt;output bundles&lt;/em&gt;.&lt;/p&gt;

&lt;h3 id=&#34;some-typical-usage-scenarios&#34;&gt;Some Typical Usage Scenarios&lt;/h3&gt;

&lt;h5 id=&#34;1-a-simple-greeting&#34;&gt;1. A Simple Greeting&lt;/h5&gt;

&lt;p&gt;To demonstrate the simplest and, somewhat naive, usage of Webpack, we will create a small project as following.&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;simple-greeting
 â”œâ”€â”€ package.json
 â”œâ”€â”€ public
 â”‚Â Â  â””â”€â”€ index.html
 â”œâ”€â”€ src
 â”‚Â Â  â””â”€â”€ main.js
 â””â”€â”€ webpack.config.js
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;The &lt;code&gt;package.json&lt;/code&gt; can be quickly instantiated using &lt;a href=&#34;https://www.npmjs.com&#34;&gt;npm&lt;/a&gt; or &lt;a href=&#34;https://yarnpkg.com&#34;&gt;yarn&lt;/a&gt;, as I prefer)&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-sh&#34;&gt;$ cd simple-greeting
# create a package.json with default options
$ yarn init -y
# now we use npm install webpack as a dependency of our project
$ yarn add --dev webpack
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;Let&amp;rsquo;s create a JavaScript &lt;code&gt;src/main.js&lt;/code&gt; that contains our main business logic, i.e. writing out a heading 1 &lt;code&gt;Hello Webpack!&lt;/code&gt;.&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-javascript&#34;&gt;document.write(&#39;&amp;lt;h1&amp;gt;Hello Webpack!&amp;lt;/h1&amp;gt;&#39;);
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;And we edit &lt;code&gt;public/index.html&lt;/code&gt;.&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-html&#34;&gt;&amp;lt;!DOCTYPE html&amp;gt;
&amp;lt;html lang=&amp;quot;en&amp;quot;&amp;gt;
&amp;lt;head&amp;gt;
    &amp;lt;meta charset=&amp;quot;UTF-8&amp;quot;&amp;gt;
    &amp;lt;title&amp;gt;Getting Started with Webpack - A Simple Greeting&amp;lt;/title&amp;gt;
&amp;lt;/head&amp;gt;
&amp;lt;body&amp;gt;
    &amp;lt;script src=&amp;quot;bundle.js&amp;quot;&amp;gt;&amp;lt;/script&amp;gt;
&amp;lt;/body&amp;gt;
&amp;lt;/html&amp;gt;
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;You might have noticed that &lt;code&gt;index.html&lt;/code&gt; uses &lt;code&gt;bundle.js&lt;/code&gt; instead of &lt;code&gt;main.js&lt;/code&gt; that we created above. You are right, &lt;code&gt;bundle.js&lt;/code&gt; is generated by Webpack given the input &lt;code&gt;main.js&lt;/code&gt;. Let&amp;rsquo;s create a config file &lt;code&gt;webpack.config.js&lt;/code&gt; to do that.&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-javascript&#34;&gt;const webpack = require(&#39;webpack&#39;);
const path = require(&#39;path&#39;);

module.exports = {
  entry: &#39;./src/main.js&#39;,
  output: {
    path: path.resolve(__dirname, &#39;public&#39;),
    filename: &#39;bundle.js&#39;,
  }
};
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;After that, a simple invocation of &lt;code&gt;webpack&lt;/code&gt; at the command line will work. Please note that &lt;code&gt;npm&lt;/code&gt; installs the executable &lt;code&gt;webpack&lt;/code&gt; inside &lt;code&gt;node_modules/.bin&lt;/code&gt;.&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-sh&#34;&gt;$ node_modules/.bin/webpack
Hash: 9300b893968675cae1ef
Version: webpack 3.11.0
Time: 81ms
    Asset     Size  Chunks             Chunk Names
bundle.js  2.52 kB       0  [emitted]  main
   [0] ./src/main.js 43 bytes {0} [built]
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;The execution of &lt;code&gt;webpack&lt;/code&gt; command should be successful. Now should you open &lt;code&gt;public/index.html&lt;/code&gt; using a Web browser, you will see &amp;ldquo;&lt;strong&gt;Hello Webpack&lt;/strong&gt;&amp;rdquo;.&lt;/p&gt;

&lt;h4 id=&#34;2-using-loaders&#34;&gt;2. Using Loaders&lt;/h4&gt;

&lt;p&gt;Several loaders have been developed for Webpack in order to handle various application resource types. An incompleted list of Webpack loaders can be found &lt;a href=&#34;https://github.com/webpack-contrib/awesome-webpack#loaders&#34;&gt;here&lt;/a&gt;. We will exemplify &lt;a href=&#34;https://github.com/webpack-contrib/eslint-loader&#34;&gt;&lt;code&gt;eslint-loader&lt;/code&gt;&lt;/a&gt; for analysing JavaScript sources and reporting errors, if any.&lt;/p&gt;

&lt;p&gt;Let&amp;rsquo;s reuse the previous example &lt;code&gt;webpack.config.js&lt;/code&gt; and add the &lt;code&gt;eslint-loader&lt;/code&gt;.&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-javascript&#34;&gt;module.exports = {
    entry: &#39;./src/main.js&#39;,
    output: {
        path: path.resolve(__dirname, &#39;public&#39;),
		filename: &#39;bundle.js&#39;
    },    
    module: {
        rules: [
            {
                test:/\.js$/,
                exclude:/node_modules/,
                loader: &#39;eslint-loader&#39;
            }
        ],   
    },
};
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;We also needs, at least, the following packages: &lt;code&gt;eslint&lt;/code&gt; and &lt;code&gt;eslint-loader&lt;/code&gt; which can be easily installed. In case you need further styles or rules, you can install more packages, for instance, &lt;code&gt;eslint-config-airbnb&lt;/code&gt;, &lt;code&gt;eslint-config-google&lt;/code&gt;, to name but a few.&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-sh&#34;&gt;$ yarn add --dev eslint eslint-loader
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;For starting, we can initialise a simple configuration for &lt;em&gt;eslint&lt;/em&gt; using the option &lt;code&gt;--init&lt;/code&gt; and answer the corresponding questions.  &lt;code&gt;eslint&lt;/code&gt; will create a file &lt;code&gt;.eslintrc.xxx&lt;/code&gt; where &amp;ldquo;xxx&amp;rdquo; is either &amp;ldquo;js&amp;rdquo;, &amp;ldquo;json&amp;rdquo;, or &amp;ldquo;yaml&amp;rdquo; depending on which file format you had chosen.&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-sh&#34;&gt;$ eslint --init
...
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;Then we can invoke &lt;code&gt;webpack&lt;/code&gt; to trigger the loader. For example, we can add the following line in the &lt;code&gt;src/main.js&lt;/code&gt;&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-javascript&#34;&gt;document.write(&#39;&amp;lt;h1&amp;gt;Hello Webpack!&amp;lt;/h1&amp;gt;&#39;);
document.write(x); // eslint will report an error here
&lt;/code&gt;&lt;/pre&gt;

&lt;pre&gt;&lt;code class=&#34;language-sh&#34;&gt;$ webpack
Hash: 9b7cb596310bf077e30b
Version: webpack 3.11.0
Time: 622ms
    Asset     Size  Chunks             Chunk Names
bundle.js  2.53 kB       0  [emitted]  main
   [0] ./src/main.js 61 bytes {0} [built] [1 error]

ERROR in ./src/main.js

/Users/huytran/working/dev/dev-web/webpack-demo/using-linter/src/main.js
  2:16  error  &#39;x&#39; is not defined  no-undef

âœ– 1 problem (1 error, 0 warnings)
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;So you can see that &lt;code&gt;eslint-loader&lt;/code&gt; indeed caught the intended error. All errors should be fixed such that Webpack can move forward.&lt;/p&gt;

&lt;h4 id=&#34;3-using-plugins&#34;&gt;3. Using Plugins&lt;/h4&gt;

&lt;p&gt;As mentioned above, Webpack architecture enables the use of plugins for performing various kinds of tasks, for example, merging, minimising or uglifying source code. Many of Webpack plugins and guides can be found &lt;a href=&#34;https://webpack.js.org/plugins&#34;&gt;here&lt;/a&gt; or &lt;a href=&#34;https://github.com/webpack-contrib/awesome-webpack#webpack-plugins&#34;&gt;here&lt;/a&gt;. We take an example of &lt;a href=&#34;https://webpack.js.org/plugins/uglifyjs-webpack-plugin&#34;&gt;&lt;code&gt;UglifyjsWebpackPlugin&lt;/code&gt;&lt;/a&gt; to illustrate how plugins actually work.&lt;/p&gt;

&lt;p&gt;Let&amp;rsquo;s modify the file &lt;code&gt;webpack.config.js&lt;/code&gt; taken from the previous scenarios and add the &lt;code&gt;plugins&lt;/code&gt; part.&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-javascript&#34;&gt;module.exports = {
    entry: &#39;./src/main.js&#39;,
    output: {
        path: path.resolve(__dirname, &#39;public&#39;),
		filename: &#39;bundle.js&#39;
    },
    ...
    plugins: [
        new webpack.optimize.UglifyJsPlugin()
    ]
};
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;After executing &lt;code&gt;node_modules/.bin/webpack&lt;/code&gt; again, you can see that JavaScript source in &lt;code&gt;public/bundle.js&lt;/code&gt; has been uglified/minimised whilst the ouput of &lt;code&gt;public/index.html&lt;/code&gt; remains in tact.&lt;/p&gt;

&lt;p&gt;So far, we have walked through some simple scenarios. They are not quite complex and might have not yet shown all aspects and power of Webpack. Nevertheless, I hope they are sufficient for just showing the basis of Webpack architecture and how it works.&lt;/p&gt;

&lt;p&gt;The aforementioned demo projects are hosted at Github, respectively.&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;https://github.com/htr3n/webpack-simple-greeting&#34;&gt;https://github.com/htr3n/webpack-simple-greeting&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://github.com/htr3n/webpack-with-loaders&#34;&gt;https://github.com/htr3n/webpack-with-loaders&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://github.com/htr3n/webpack-with-plugins&#34;&gt;https://github.com/htr3n/webpack-with-plugins&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
</description>
      </item>
    
      <item>
        <title>First experience with Hugo</title>
        <link>https://htr3n.github.io/2018/01/first-experience-with-hugo/</link>
        <pubDate>Tue, 23 Jan 2018 00:00:00 +0000</pubDate>
        
        <guid>2b6be7a16c2673903693860372a1f7e4</guid>
        <description>&lt;p&gt;To commence my journey in software development, I have looked for a Web framework to build my personal blog.  I have started writing blog posts mainly using (Multi)Markdown and plan to migrate other posts to Markdown too. Thus, it&amp;rsquo;s rather natural to go with built-in or first-class support for Markdown to minimise the migration effort.&lt;/p&gt;

&lt;p&gt;I have not foreseen any great use of extensive backend storage and computation thus far. Therefore, I narrowed down my search to static site generators with two prominent candidates &lt;a href=&#34;https://jekyllrb.com&#34;&gt;Jekyll&lt;/a&gt; and &lt;a href=&#34;https://gohugo.io&#34;&gt;Hugo&lt;/a&gt; popping up, for instance, &lt;a href=&#34;https://www.staticgen.com&#34;&gt;here&lt;/a&gt;, &lt;a href=&#34;https://www.smashingmagazine.com/2015/11/static-website-generators-jekyll-middleman-roots-hugo-review&#34;&gt;here&lt;/a&gt;, and &lt;a href=&#34;https://www.netlify.com/blog/2017/05/25/top-ten-static-site-generators-of-2017&#34;&gt;here&lt;/a&gt;. Both offer all essential features to bootstrap a new site or migrate existing sites. Nothing can go wrong when you pick either one.&lt;/p&gt;

&lt;p&gt;After a week trying both Jekyll and Hugo, I ended up deciding to go with Hugo. It&amp;rsquo;s not to say I hate Jekyll but quite the opposite. Jekyll is a rather well-engineered piece of software (by the guys behind &lt;a href=&#34;https://github.com&#34;&gt;Github&lt;/a&gt;).  I love its design, strong community, rich ecosystem, a lot of beautiful themes and good integration with Github.&lt;/p&gt;

&lt;p&gt;There is just one thing I do not feel comfortable working with Jekyll is the way to apply a theme. As far as I know, most of Jekyll&amp;rsquo;s themes ask for copying and pasting theme resources (e.g. CSS, templates) into an existing Jekyll site (please correct me if I am wrong).&lt;/p&gt;

&lt;p&gt;This is quite strange regarding the conventional approach of Ruby &amp;ndash; the backend of Jekyll. As predicted, I had way too many problems changing themes that cross various Jekyll versions. It should be the other way around. That is, a theme would remain in tact inside predefined folders and be plugged into the Jekyll site via the configuration file. I think this approach, in terms of software design, would be less intrusive and much lower &lt;a href=&#34;https://en.wikipedia.org/wiki/Coupling_(computer_programming)&#34;&gt;coupling&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;Hugo gets this design decision quite right. That&amp;rsquo;s why I prefer Hugo, apart from its amazing performance. You can easily find numerous compliments for Hugo around the Internet. I just fall in love with the way Hugo allows me to apply and adapt any themes (of course with some extra effort as each theme might often introduce some additional customizable features or variables). Besides, as I desire to learn more about &lt;a href=&#34;https://golang.org&#34;&gt;Golang&lt;/a&gt;, Hugo would be definitely a nice start.&lt;/p&gt;

&lt;p&gt;The longer I play around with Hugo, the more I become passionate about Hugo in particular and Golang in general. The first week working with Hugo has yielded a Hugo&amp;rsquo;s theme for my personal use that you might find useful,  namely, &lt;a href=&#34;https://github.com/htr3n/hyde-hyde&#34;&gt;hyde-hyde&lt;/a&gt; (based on spf13&amp;rsquo;s &lt;a href=&#34;https://github.com/spf13/hyde&#34;&gt;Hyde&lt;/a&gt;). My journey with Hugo and Golang has just started but it looks quite bright and promising thus far.&lt;/p&gt;

&lt;p&gt;I â¤ï¸ Hugo.&lt;/p&gt;
</description>
      </item>
    
      <item>
        <title>LaraMod - Modularised Laravel 5</title>
        <link>https://htr3n.github.io/2018/01/laramod/</link>
        <pubDate>Fri, 19 Jan 2018 00:00:00 +0000</pubDate>
        
        <guid>f9f750f5803e2645570ef0157d2cd91c</guid>
        <description>

&lt;p&gt;&lt;a href=&#34;https://laravel.com&#34;&gt;Laravel&lt;/a&gt; is an amazing emerging, well-designed and well-developed PHP framework. It is currently under active development and has been among top Web development frameworks. For a simple development project, the structure is totally fine. Nevertheless, you might not want to mix up your source code and resources with Laravel&amp;rsquo;s except some really necessary configurations.&lt;/p&gt;

&lt;p&gt;Moreover, you might also want to organise your project into submodules that are assigned to more than one team/person such that they can be developed silmutaneously. Thus, the need for complex submodule organisation is quite inevitable.&lt;/p&gt;

&lt;p&gt;From my struggle to organise a Laravel-based project such that I can divide and work on individual submodules such as &lt;code&gt;UserManagement&lt;/code&gt;, &lt;code&gt;Authentication&lt;/code&gt;, &lt;code&gt;Dashboard&lt;/code&gt;, etc. whilst keeping the Laravel code base intact as much as possible (this could be convenient for upgrading Laravel) and keeping my code base separate from Laravel&amp;rsquo;s.&lt;/p&gt;

&lt;p&gt;There are a number decent attempts on modalurasing Laravel projects for example &lt;a href=&#34;https://nicolaswidart.com/blog/writing-modular-applications-with-laravel-modules&#34;&gt;here&lt;/a&gt;, &lt;a href=&#34;https://github.com/caffeinated/modules&#34;&gt;here&lt;/a&gt; or &lt;a href=&#34;http://kamranahmed.info/blog/2015/12/03/creating-a-modular-application-in-laravel&#34;&gt;here&lt;/a&gt;. Being inspired and learning from these articles, I decided to start a simple project on my own, namely, &lt;a href=&#34;https://github.com/htr3n/laramod&#34;&gt;&lt;code&gt;LaraMod&lt;/code&gt;&lt;/a&gt;, for many reasons, but the biggest one is to dig deeper into Laravel 5 and PHP.&lt;/p&gt;

&lt;p&gt;Here I only emphasize some major aspects of LaraMod. The rest, including code and extra improvements can be found at LaraMod&amp;rsquo;s &lt;a href=&#34;https://github.com/htr3n/laramod&#34;&gt;repository&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;Update 1 @ 2018-04-25&lt;/strong&gt;: &lt;code&gt;LaraMod&lt;/code&gt; has been revised and updated to work with the most recent version of Laravel framework, &lt;code&gt;5.6.17&lt;/code&gt;. Instead of a standalone git repos, LaraMod is from now on a fork of &lt;a href=&#34;https://github.com/laravel/laravel&#34;&gt;Laravel repos&lt;/a&gt; enhanced with better modularisation.&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;Update 2 @ 2018-11-30&lt;/strong&gt;: &lt;code&gt;LaraMod&lt;/code&gt; has been upgraded and merged with Laravel &lt;code&gt;master&lt;/code&gt; in which the stable release version is &lt;code&gt;5.7.15&lt;/code&gt;.&lt;/p&gt;

&lt;h2 id=&#34;modularising-laravel-5&#34;&gt;Modularising Laravel 5&lt;/h2&gt;

&lt;h3 id=&#34;a-simple-submodule-structure&#34;&gt;A Simple Submodule Structure&lt;/h3&gt;

&lt;p&gt;Assuming that I want to divide my project into submodules of which each comprises own controllers, views, models (MVC) and others such as database migration, i18n, and routes. A simple structure of the submodule &lt;code&gt;Authentication&lt;/code&gt; is shown as following.&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;Authentication
â”œâ”€â”€Controllers
â”œâ”€â”€Lang
â”œâ”€â”€Migrations
â”œâ”€â”€Models
â”œâ”€â”€View
â””â”€â”€routes.php
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;Such a structure can be very useful for different teams/people working independently. In LaraMod, there is an &lt;code&gt;artisan&lt;/code&gt; command &lt;code&gt;gen:module&lt;/code&gt; provided in &lt;a href=&#34;https://github.com/htr3n/laramod/blob/master/app/Console/Commands/GenModuleCommand.php&#34;&gt;&lt;code&gt;App\Console\Commands\GenModuleCommand&lt;/code&gt;&lt;/a&gt; that can quickly create a submodule following that structure.&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-sh&#34;&gt;$ php artisan gen:module Authentication
&lt;/code&gt;&lt;/pre&gt;

&lt;h3 id=&#34;how-to-proceed&#34;&gt;How to Proceed&lt;/h3&gt;

&lt;p&gt;An easy approach is to rely on Laravel&amp;rsquo;s &lt;a href=&#34;https://laravel.com/docs/providers&#34;&gt;&lt;code&gt;ServiceProvider&lt;/code&gt;&lt;/a&gt; to load the submodules and register the necessary components of the submodules.&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-php&#34;&gt;&amp;lt;?php
class XYZServiceProvider extends \Illuminate\Support\ServiceProvider {
  public function boot() {}
  public function register() {}
}
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;A &lt;code&gt;ServiceProvider&lt;/code&gt; contains two important methods &lt;code&gt;register()&lt;/code&gt; and &lt;code&gt;boot()&lt;/code&gt;. In this case, LaraMod mainly uses the method &lt;code&gt;boot()&lt;/code&gt; to load the corresponding submodule. LaraMod also adopts a simple, conventional method for defining a submodule. That is, all submodules will be subfolders of the folder &lt;code&gt;/modules&lt;/code&gt; and each module follows the conventional structure as mentioned above.&lt;/p&gt;

&lt;h4 id=&#34;automatically-loading-submodules&#34;&gt;Automatically Loading Submodules&lt;/h4&gt;

&lt;h5 id=&#34;loading-a-submodule&#34;&gt;Loading a Submodule&lt;/h5&gt;

&lt;p&gt;First, we create a method &lt;code&gt;loadModule()&lt;/code&gt; to load the resources such as views, i18n, database migration, and routes of a submodule using the provided methods &lt;code&gt;loadViewsFrom()&lt;/code&gt;, &lt;code&gt;loadTranslationsFrom()&lt;/code&gt;, &lt;code&gt;loadMigrationsFrom()&lt;/code&gt;, &lt;code&gt;loadRoutesFrom()&lt;/code&gt;, respectively. As models and controllers are essential PHP classes, they can be loaded using PSR-4 autoloaders as shown in the next parts.&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-php&#34;&gt;&amp;lt;?php
protected function loadModule($module)
{
    if ($module) {
      // load the submodule&#39;s routes
        if (file_exists(__DIR__ . &#39;/&#39; . $module . &#39;/routes.php&#39;)) {
            $this-&amp;gt;loadRoutesFrom(__DIR__ . &#39;/&#39; . $module . &#39;/routes.php&#39;);
        }
      // load the submodule&#39;s views
        if (is_dir(__DIR__ . &#39;/&#39; . $module . &#39;/Views&#39;)) {
            $this-&amp;gt;loadViewsFrom(__DIR__ . &#39;/&#39; . $module . &#39;/Views&#39;, $module);
        }
      // load the submodule&#39;s translation
        if (is_dir(__DIR__ . &#39;/&#39; . $module . &#39;/Lang&#39;)) {
            $this-&amp;gt;loadTranslationsFrom(__DIR__ . &#39;/&#39; . $module . &#39;/Lang&#39;, $module);
        }
      // load the submodule&#39;s database migrations
        if (is_dir(__DIR__ . &#39;/&#39; . $module . &#39;/Migrations&#39;)) {
            $this-&amp;gt;loadMigrationsFrom(__DIR__ . &#39;/&#39; . $module . &#39;/Migrations&#39;, $module);
        }
    }
}
&lt;/code&gt;&lt;/pre&gt;

&lt;h5 id=&#34;detecting-and-loading-submodules&#34;&gt;Detecting and Loading Submodules&lt;/h5&gt;

&lt;p&gt;Then we can walk through the folder &lt;code&gt;module&lt;/code&gt; and load all submodules using the method &lt;code&gt;loadModule()&lt;/code&gt; created above.&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-php&#34;&gt;&amp;lt;?php
protected function findAndLoadModules()
{
    $modules = config(&amp;quot;module.modules&amp;quot;);
    if (!$modules) {
        $modules = $this-&amp;gt;getModuleNamesFromCurrentPath();
    }
    if ($modules) {
        array_walk($modules, function ($module) {
            $this-&amp;gt;loadModule($module);
        });
    }
}
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;Note that in this conventional approach, &lt;code&gt;findAndLoadModules()&lt;/code&gt; will look for submodule configurations either (1) explicitly in the file &lt;code&gt;/config/module.php&lt;/code&gt; with the following syntax or (2) implicitly as subfolders of &lt;code&gt;/modules&lt;/code&gt; (in case &lt;code&gt;/config/module.php&lt;/code&gt; does not exist).&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-php&#34;&gt;// module.php
&amp;lt;?php
return  [
    &#39;modules&#39; =&amp;gt; [
        &#39;Core&#39;,
        &#39;Login&#39;,
        &#39;Dashboard&#39;,
        &#39;Home&#39;,
        &#39;User&#39;,
    ]
];
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;Finally we invoke &lt;code&gt;findAndLoadModules()&lt;/code&gt; within &lt;code&gt;boot()&lt;/code&gt;.&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-php&#34;&gt;&amp;lt;?php
namespace Laramod;
class ModulesServiceProvider extends \Illuminate\Support\ServiceProvider
{
    public function boot()
    {
        $this-&amp;gt;findAndLoadModules();
    }
    public function register()
    {
    }
}
&lt;/code&gt;&lt;/pre&gt;

&lt;h4 id=&#34;registering-the-service-provider&#34;&gt;Registering the Service Provider&lt;/h4&gt;

&lt;p&gt;The &lt;code&gt;ModulesServiceProvider&lt;/code&gt; must be registered in &lt;code&gt;/config/app.php&lt;/code&gt; in order to be loaded by Laravel.&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-php&#34;&gt;&amp;lt;?php
return [
    ...
    &#39;providers&#39; =&amp;gt; [
        ...
        \Laramod\ModulesServiceProvider::class,
     ],
    ...
];
&lt;/code&gt;&lt;/pre&gt;

&lt;h4 id=&#34;autoloading-submodules-classes&#34;&gt;Autoloading Submodules&amp;rsquo; Classes&lt;/h4&gt;

&lt;p&gt;Apart from resources like views, i18n, database migration loaded in the previous steps, a submodule can also contain other PHP classes such as database ORM models and controllers.&lt;/p&gt;

&lt;p&gt;One natural approach would be to leverage the &lt;a href=&#34;http://www.php-fig.org/psr/psr-4&#34;&gt;PSR-4 autoloader&lt;/a&gt; autoloading supported by Laravel 5.5. This approach also nicely fits when we want to define separate namespaces for each submodule and especially submodule&amp;rsquo;s components.&lt;/p&gt;

&lt;p&gt;For this, we can define the submodule&amp;rsquo;s namespace and manually specify the submodule&amp;rsquo;s classpaths to be loaded in &lt;code&gt;composer.json&lt;/code&gt; as following.&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-json&#34;&gt;{
  &amp;quot;psr-4&amp;quot;: {
    &amp;quot;App\\&amp;quot;: &amp;quot;app/&amp;quot;,
    &amp;quot;Core\\&amp;quot;: &amp;quot;modules/Core/&amp;quot;,
    &amp;quot;Dashboard\\&amp;quot;: &amp;quot;modules/Dashboard/&amp;quot;,
    &amp;quot;Login\\&amp;quot;: &amp;quot;modules/Login/&amp;quot;,
    &amp;quot;User\\&amp;quot;: &amp;quot;modules/User/&amp;quot;
  }
}
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;Another technique for autoloading classes in Laravel 5 is to dynamically add PSR4 classpaths in &lt;code&gt;ModulesServiceProvider.php&lt;/code&gt;.&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-php&#34;&gt;// ModulesServiceProvider.php
&amp;lt;?php
...
$loader = require base_path() . &#39;/vendor/autoload.php&#39;;
$loader-&amp;gt;setPsr4(&amp;quot;Core\\&amp;quot;, __DIR__ . &amp;quot;./Core/&amp;quot;);
$loader-&amp;gt;setPsr4(&amp;quot;Dashboard\\&amp;quot;, __DIR__ . &amp;quot;./Dashboard/&amp;quot;);
$loader-&amp;gt;setPsr4(&amp;quot;Login\\&amp;quot;, __DIR__ . &amp;quot;./Login/&amp;quot;);
$loader-&amp;gt;setPsr4(&amp;quot;User\\&amp;quot;, __DIR__ . &amp;quot;./User/&amp;quot;);
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;One problem, though, is that LaraMod must be able to detect or guess the namespace classpaths. To do this, we can either use the configuration file &lt;code&gt;config/module.php&lt;/code&gt; or, even nicer and smarter, scan the submodule&amp;rsquo;s folders to extract the necessary information. However, loading time then will be really significant when the project grows because Laravel loaders willl do the scanning and loading whenever any classes are referenced.&lt;/p&gt;

&lt;h3 id=&#34;accessing-submodule-resources&#34;&gt;Accessing Submodule Resources&lt;/h3&gt;

&lt;p&gt;Given a submodule, for instance &lt;code&gt;SubmoduleA&lt;/code&gt;, most of its classes such as controllers and database mapping models, if configuring properly using PSR-4, will be automatically loaded and used straightforwardly. Nonetheless, acessing to resources such as views and i18n (languages) requires a slightly different syntax, for instance, &lt;code&gt;SubmoduleA::blade_view_name&lt;/code&gt; or &lt;code&gt;SubmoduleA::messages.error&lt;/code&gt;. If the &lt;code&gt;SubmoduleA::&lt;/code&gt; is missing, Laravel will look for views and language files in the default places.&lt;/p&gt;

&lt;h2 id=&#34;finale&#34;&gt;Finale&lt;/h2&gt;

&lt;p&gt;The outcome of my very first PHP project, LaraMod, would be a reasonable skeleton for modularising software projects based on Laravel 5. That is, you can just easily create a new submodule with the predefined conventional structure and add the PSR-4 namespaces and classpaths, then good you go. Each submodule should then be developed independently. Sure there are some areas that need improvement. For example, all testing stuffs are still under &lt;code&gt;/tests&lt;/code&gt; and database seeders are still in &lt;code&gt;database/seeds&lt;/code&gt;. The first one requires intervention with PHPUnit/&lt;code&gt;phpunit.xml&lt;/code&gt; whilst the later asks for further changes in built-in Laravel &lt;code&gt;artisan&lt;/code&gt; commands.&lt;/p&gt;

&lt;p&gt;For me&amp;mdash;a new bie, it was not quite an all-pleasant journey to experience several Laravel aspects. Nevertheless, developing and customising LaraMod are extremely valuable as I could learn a lot about not only Laravel in particular but also PHP in general. Achieving reasonable modularisation for a complex software development project requires a lot of thoughtful design and hard work and even sometimes trade-offs and compromises. In sharing this, I hope LaraMod might become handy and helpful start so that your journeys with Laravel can be more pleasant and joyful. I look forward to hearing and learning from your experience, too.&lt;/p&gt;
</description>
      </item>
    
      <item>
        <title>Ngá»¥y biá»‡n / Fallacies (st)</title>
        <link>https://htr3n.github.io/2018/01/nguy-bien-fallacies/</link>
        <pubDate>Mon, 01 Jan 2018 00:00:00 +0000</pubDate>
        
        <guid>b6e4a8e01a40d97f703267ec2458f802</guid>
        <description>

&lt;p&gt;BÃ i viáº¿t sÆ°u táº§m trÃªn Internet vá» cÃ¡c hÃ¬nh thá»©c ngá»¥y biá»‡n khÃ¡c nhau.&lt;/p&gt;

&lt;h2 id=&#34;thay-Ä‘á»•i-chá»§-Ä‘á»&#34;&gt;Thay Ä‘á»•i chá»§ Ä‘á»&lt;/h2&gt;

&lt;ol&gt;
&lt;li&gt;CÃ´ng kÃ­ch cÃ¡ nhÃ¢n (ad hominem). ÄÃ¢y lÃ  má»™t loáº¡i ngá»¥y biá»‡n phá»• biáº¿n nháº¥t, nguy hiá»ƒm nháº¥t, vÃ  cÃ³ â€œcÃ´ng hiá»‡uâ€ nháº¥t, vÃ¬ nÃ³ táº¥n cÃ´ng vÃ o cÃ¡ nhÃ¢n cá»§a ngÆ°á»i tranh luáº­n, vÃ  tÃ¬m cÃ¡ch trá»‘n trÃ¡nh luáº­n Ä‘iá»ƒm cá»§a cÃ¡ nhÃ¢n Ä‘Ã³. HÃ¬nh thá»©c ngá»¥y biá»‡n nÃ y thÆ°á»ng xuáº¥t hiá»‡n dÆ°á»›i dáº¡ng: Ã”ng A phÃ¡t biá»ƒu vá» má»™t váº¥n Ä‘á»; Ã´ng B táº¥n cÃ´ng vÃ o cÃ¡ nhÃ¢n Ã´ng A, vÃ  lÃ m cho ngÆ°á»i ta nghi ngá» luáº­n Ä‘iá»ƒm cá»§a Ã´ng A. Tuy nhiÃªn, cÃ³ thá»ƒ khÃ´ng cÃ³ má»‘i liÃªn há»‡ nÃ o giá»¯a cÃ¡ nhÃ¢n vÃ  luáº­n Ä‘iá»ƒm cá»§a Ã´ng A.&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;CÃ³ hai hÃ¬nh thá»©c thuá»™c loáº¡i ngá»¥y biá»‡n nÃ y. Thá»© nháº¥t lÃ  dÆ°á»›i hÃ¬nh thá»©c sá»‰ nhá»¥c, hay chá»­i rá»§a. Khi báº¥t Ä‘á»“ng Ã½ kiáº¿n, ngÆ°á»i ngá»¥y biá»‡n chá»‰ viá»‡c cÃ´ng kÃ­ch vÃ o cÃ¡ nhÃ¢n cá»§a ngÆ°á»i phÃ¡t biá»ƒu.&lt;/p&gt;

&lt;p&gt;HÃ¬nh thá»©c ngá»¥y biá»‡n thá»© hai trong loáº¡i nÃ y lÃ  ngÆ°á»i ngá»¥y biá»‡n cá»‘ gáº¯ng thuyáº¿t phá»¥c ngÆ°á»i Ä‘á»‘i thoáº¡i cháº¥p nháº­n luáº­n Ä‘iá»ƒm cá»§a há» báº±ng cÃ¡ch Ä‘á» cáº­p Ä‘áº¿n hoÃ n cáº£nh cá»§a cÃ¡ nhÃ¢n Ä‘Ã³. VÃ­ dá»¥: â€œAnh nÃ³i lÃ  khÃ´ng nÃªn uá»‘ng rÆ°á»£u, váº­y mÃ  anh Ä‘Ã£ tá»«ng ngáº¥t ngÆ°á»Ÿng cáº£ nÄƒm qua.â€&lt;/p&gt;

&lt;ol&gt;
&lt;li&gt;&lt;p&gt;Lá»£i dá»¥ng quyá»n lá»±c (ad verecundiam). ÄÃ¢y lÃ  loáº¡i ngá»¥y biá»‡n dÃ¹ng nhá»¯ng nhÃ¢n váº­t ná»•i tiáº¿ng hay Ä‘Æ°á»£c nhiá»u ngÆ°á»i Ã¡i má»™ Ä‘á»ƒ tÃ¬m sá»± á»§ng há»™ cho luáº­n Ä‘iá»ƒm cá»§a mÃ¬nh.&lt;/p&gt;&lt;/li&gt;

&lt;li&gt;&lt;p&gt;Lá»£i dá»¥ng quyá»n lá»±c náº·c danh. Trong trÆ°á»ng há»£p nÃ y, ngÆ°á»i ngá»¥y biá»‡n khÃ´ng nÃªu danh tÃ­nh ngÆ°á»i cÃ³ tháº©m quyá»n, vÃ  vÃ¬ khÃ´ng ai biáº¿t tÃªn ngÆ°á»i cÃ³ tháº©m quyá»n nÃªn khÃ´ng ai cÃ³ thá»ƒ kiá»ƒm chá»©ng sá»± chÃ­nh xÃ¡c cá»§a lá»i phÃ¡t biá»ƒu. Má»™t loáº¡i ngá»¥y biá»‡n khÃ¡c cÃ³ quan há»‡ vá»›i loáº¡i nÃ y lÃ  dÃ¹ng lá»i Ä‘á»“n Ä‘áº¡i Ä‘á»ƒ lÃ m cÆ¡ sá»Ÿ láº­p luáº­n.&lt;/p&gt;&lt;/li&gt;

&lt;li&gt;&lt;p&gt;Lá»£i dá»¥ng tÃ¡c phong. Loáº¡i ngá»¥y biá»‡n nÃ y dÃ¹ng tÃ¡c phong hay cÃ¡ch lÃ m viá»‡c hay má»™t Ä‘áº·c tÃ­nh nÃ o Ä‘Ã³ cá»§a Ä‘á»‘i tÆ°á»£ng Ä‘á»ƒ cá»‘ thuyáº¿t phá»¥c vá» sá»± há»£p lÃ­ cá»§a phÃ¡t biá»ƒu.&lt;/p&gt;&lt;/li&gt;

&lt;li&gt;&lt;p&gt;Luáº­n Ä‘iá»‡u cÃ¡ trÃ­ch. Loáº¡i ngá»¥y biá»‡n nÃ y thÆ°á»ng hay Ä‘Æ°á»£c á»©ng dá»¥ng khi má»™t ngÆ°á»i nÃ o Ä‘Ã³ Ä‘Æ°a vÃ o nhá»¯ng phÃ¡t biá»ƒu khÃ´ng dÃ­nh dÃ¡ng gÃ¬ Ä‘áº¿n váº¥n Ä‘á» Ä‘ang tranh luáº­n, nháº±m má»¥c Ä‘Ã­ch Ä‘Ã¡nh láº¡c hÆ°á»›ng váº¥n Ä‘á».&lt;/p&gt;&lt;/li&gt;

&lt;li&gt;&lt;p&gt;Luáº­n Ä‘iá»‡u ngÆ°á»£c ngáº¡o (Burden of Proof). Báº±ng chá»©ng luÃ´n luÃ´n lÃ  gÃ¡nh náº·ng cá»§a ngÆ°á»i phÃ¡t biá»ƒu. Do Ä‘Ã³, tÃ¬m cÃ¡ch di chuyá»ƒn gÃ¡nh náº·ng Ä‘Ã³ cho má»™t ngÆ°á»i khÃ¡c lÃ  má»™t thá»§ thuáº­t giá»›i ngá»¥y biá»‡n hay dÃ¹ng. VÃ­ dá»¥: &amp;ldquo;Anh khÃ´ng tin lÃ  cÃ³ UFO, váº­y anh cÃ³ thá»ƒ chá»©ng minh khÃ´ng?&amp;rdquo;, Ä‘Ã¡ng láº½ ngÆ°á»i phÃ¡t biá»ƒu pháº£i chá»©ng minh lÃ  cÃ³ UFO, nhÆ°ng cÃ´ng viá»‡c Ä‘Ã³ Ä‘Ã£ Ä‘Æ°á»£c chuyá»ƒn cho ngÆ°á»i Ä‘á»‘i thoáº¡i.&lt;/p&gt;&lt;/li&gt;
&lt;/ol&gt;

&lt;h2 id=&#34;lá»£i-dá»¥ng-cáº£m-tÃ­nh-vÃ -Ä‘Ã¡m-Ä‘Ã´ng&#34;&gt;Lá»£i dá»¥ng cáº£m tÃ­nh vÃ  Ä‘Ã¡m Ä‘Ã´ng&lt;/h2&gt;

&lt;ol&gt;
&lt;li&gt;&lt;p&gt;Dá»±a vÃ o báº¡o lá»±c (ad baculum). Ngá»¥y biá»‡n dá»±a vÃ o báº¡o lá»±c thá»±c cháº¥t lÃ  má»™t sá»± Ä‘e dá»a, nháº±m má»¥c Ä‘Ã­ch gÃ¢y Ã¡p lá»±c cho ngÆ°á»i Ä‘á»‘i thoáº¡i pháº£i cháº¥p nháº­n má»™t káº¿t luáº­n nÃ o Ä‘Ã³. VÃ­ dá»¥: &amp;ldquo;KhÃ´ng Ä‘á»“ng Ã½ vá»›i tÃ´i thÃ¬ vÃ o game sáº½ bá»‹ kill red&amp;rdquo;&lt;/p&gt;&lt;/li&gt;

&lt;li&gt;&lt;p&gt;Lá»£i dá»¥ng lÃ²ng thÆ°Æ¡ng háº¡i (ad misericordiam). ÄÃ¢y lÃ  má»™t loáº¡i ngá»¥y biá»‡n dá»±a vÃ o lÃ²ng tráº¯c áº©n cá»§a ngÆ°á»i Ä‘á»‘i thoáº¡i Ä‘á»ƒ ngÆ°á»i Ä‘á»‘i thoáº¡i cháº¥p nháº­n lÃ­ láº½ cá»§a mÃ¬nh. â€œTÃ´i hi vá»ng anh sáº½ cháº¥p nháº­n Ä‘á» nghá»‹ nÃ y, chÃºng ta Ä‘Ã£ tiÃªu ra ba thÃ¡ng nay rá»“i Ä‘áº¥y.â€&lt;/p&gt;&lt;/li&gt;

&lt;li&gt;&lt;p&gt;Lá»£i dá»¥ng háº­u quáº£ (ad consequentiam). Ngá»¥y biá»‡n loáº¡i nÃ y thÆ°á»ng Ä‘Æ°á»£c biá»ƒu hiá»‡n qua cÃ¡ch phÃ¡t biá»ƒu â€œA hÃ m Ã½ B, B lÃ  sá»± tháº­t, do Ä‘Ã³ A lÃ  sá»± tháº­tâ€.&lt;/p&gt;&lt;/li&gt;

&lt;li&gt;&lt;p&gt;Láº¡m dá»¥ng chá»¯ nghÄ©a. ÄÃ¢y lÃ  má»™t loáº¡i ngá»¥y biá»‡n dá»±a vÃ o dÃ¹ng nhá»¯ng chá»¯ mang cáº£m tÃ­nh cao Ä‘á»ƒ gáº¯n má»™t giÃ¡ trá»‹ Ä‘áº¡o Ä‘á»©c vÃ o má»™t Ä‘á» nghá»‹ hay má»™t cÃ¢u phÃ¡t biá»ƒu.&lt;/p&gt;&lt;/li&gt;

&lt;li&gt;&lt;p&gt;Dá»±a vÃ o quáº§n chÃºng (ad numerum). Loáº¡i ngá»¥y biá»‡n nÃ y tin ráº±ng náº¿u cÃ³ nhiá»u ngÆ°á»i á»§ng há»™ má»™t Ä‘á» nghá»‹ nÃ o Ä‘Ã³, thÃ¬ Ä‘á» nghá»‹ Ä‘Ã³ pháº£i Ä‘Ãºng. VÃ­ dá»¥ nhÆ° â€œÄáº¡i Ä‘a sá»‘ thÃ nh viÃªn cÅ© cá»§a [Clan Spammer TM] á»§ng há»™ Phantom, háº³n anh áº¥y pháº£i luÃ´n luÃ´n Ä‘Ãºng.â€ LiÃªn há»‡ vá»›i loáº¡i ngá»¥y biá»‡n nÃ y lÃ  hÃ¬nh thá»©c tranh thá»§ sá»± á»§ng há»™ cá»§a Ä‘Ã¡m Ä‘Ã´ng Ä‘á»ƒ cá»‘ gáº¯ng cho tháº¥y luáº­n Ä‘iá»ƒm cá»§a mÃ¬nh lÃ  Ä‘Ãºng.&lt;/p&gt;&lt;/li&gt;
&lt;/ol&gt;

&lt;h2 id=&#34;lÃ m-láº¡c-hÆ°á»›ng-váº¥n-Ä‘á»&#34;&gt;LÃ m láº¡c hÆ°á»›ng váº¥n Ä‘á»&lt;/h2&gt;

&lt;ol&gt;
&lt;li&gt;&lt;p&gt;LÃ­ láº½ cháº» Ä‘Ã´i. Loáº¡i ngá»¥y biá»‡n nÃ y thÆ°á»ng phÃ¢n Ä‘á»‹nh má»™t váº¥n Ä‘á» thÃ nh hai giÃ¡ trá»‹: tráº¯ng vÃ  Ä‘en, báº¡n vÃ  thÃ¹, cÃ³ vÃ  khÃ´ng, v.v.. dÃ¹ trong thá»±c táº¿, cÃ³ hÆ¡n hai lá»±a chá»n. VÃ­ dá»¥ nÃ³i: &amp;ldquo;Báº¡n chá»n Ä‘i, hoáº·c bÃ¡n cÃ¢y Peril cho tui giÃ¡ 10m adena, hoáº·c Ä‘Æ°a tui 5m adena ngay láº­p tá»©c!&amp;rdquo;&lt;/p&gt;&lt;/li&gt;

&lt;li&gt;&lt;p&gt;LÃ­ láº½ ngá» nghá»‡ch (ad ignorantiam). Loáº¡i ngá»¥y biá»‡n nÃ y, nhÆ° tÃªn gá»i Ã¡m chá»‰, xuáº¥t phÃ¡t tá»« sá»± ngá» nghá»‡ch. Má»™t trong nhá»¯ng cÃ¡ch nÃ³i thÃ´ng thÆ°á»ng nháº¥t trong loáº¡i ngá»¥y biá»‡n nÃ y mÃ  giá»›i ngá»¥y biá»‡n dÃ¹ng lÃ  náº¿u má»™t Ä‘iá»u gÃ¬ Ä‘Ã³ chÆ°a Ä‘Æ°á»£c chá»©ng minh lÃ  sai (hay giáº£) thÃ¬ Ä‘iá»u Ä‘Ã³ lÃ  Ä‘Ãºng (hay tháº­t).&lt;/p&gt;&lt;/li&gt;

&lt;li&gt;&lt;p&gt;LÃ­ luáº­n lÆ°Æ¡n tráº¡ch. Loáº¡i ngá»¥y biá»‡n nÃ y cho ráº±ng náº¿u má»™t sá»± kiá»‡n xáº£y ra, cÃ¡c sá»± kiá»‡n cÃ³ háº¡i khÃ¡c sáº½ xáº£y ra.&lt;/p&gt;&lt;/li&gt;

&lt;li&gt;&lt;p&gt;Má»‡nh Ä‘á» rá»i ráº¡c. ÄÃ¢y lÃ  loáº¡i ngá»¥y biá»‡n dÃ¹ng hai (hay nhiá»u hÆ¡n hai) má»‡nh Ä‘á» cháº³ng dÃ­nh dÃ¡ng gÃ¬ vá»›i nhau Ä‘á»ƒ lÃ m thÃ nh má»™t phÃ¡t biá»ƒu hay káº¿t luáº­n. VÃ­ dá»¥ &amp;ldquo;MÃ y ngÆ°ng lá»«a Ä‘áº£o giÃ¡ bÃ¡n SS chÆ°a&amp;rdquo;. CÃ¢u há»i thá»±c ra há»i Ä‘áº¿n 2 váº¥n Ä‘á» &amp;ldquo;MÃ y lá»«a Ä‘áº£o giÃ¡ bÃ¡n SS&amp;rdquo; vÃ  &amp;ldquo;MÃ y Ä‘Ã£ ngÆ°ng viá»‡c lá»«a Ä‘áº£o Ä‘Ã³ chÆ°a&amp;rdquo; trong khi sá»± tháº­t lÃ  ngÆ°á»i Ä‘Æ°á»£c há»i chÆ°a há» lá»«a Ä‘áº£o.&lt;/p&gt;&lt;/li&gt;

&lt;li&gt;&lt;p&gt;ÄÆ¡n giáº£n hÃ³a. ÄÃ¢y lÃ  má»™t loáº¡i ngá»¥y biá»‡n mÃ  ngÆ°á»i phÃ¡t biá»ƒu cá»‘ tÃ¬nh biáº¿n má»™t quan niá»‡m trá»«u tÆ°á»£ng thÃ nh má»™t Ä‘iá»u cá»¥ thá»ƒ Ä‘á»ƒ báº¯t láº¥y tháº¿ thÆ°á»£ng phong trong Ä‘á»‘i thoáº¡i (nhÆ°ng lÃ  ngá»¥y biá»‡n). VÃ­ dá»¥: â€œTÃ´i Ä‘á»ƒ Ã½ tháº¥y anh mÃ´ táº£ Phantom lÃ  má»™t ngÆ°á»i lÃ¡o xÆ°á»£c. Váº­y tÃ´i há»i anh cÃ¡i â€œlÃ¡o xÆ°á»£câ€ Ä‘Ã³ nÃ³ náº±m á»Ÿ Ä‘Ã¢u trong bá»™ nÃ£o? Anh khÃ´ng chá»‰ ra Ä‘Æ°á»£c cho tÃ´i; do Ä‘Ã³, tÃ´i cÃ³ thá»ƒ nÃ³i cÃ¡i lÃ¡o xÆ°á»£c khÃ´ng cÃ³ thá»±c.â€&lt;/p&gt;&lt;/li&gt;
&lt;/ol&gt;

&lt;h2 id=&#34;qui-náº¡p-sai&#34;&gt;Qui náº¡p sai&lt;/h2&gt;

&lt;ol&gt;
&lt;li&gt;&lt;p&gt;KhÃ¡i quÃ¡t hÃ³a vá»™i vÃ£. Loáº¡i ngá»¥y biá»‡n nÃ y cÅ©ng khÃ¡ phá»• biáº¿n. NÃ³ dÃ¹ng má»™t vÃ­ dá»¥ hay trÆ°á»ng há»£p nhá» vÃ  tá»« Ä‘Ã³ khÃ¡i quÃ¡t hÃ³a cho má»™t cá»™ng Ä‘á»“ng. Cháº³ng háº¡n nhÆ° â€œPhuongDoan nhÃ¬n ráº¥t Ã­u Ä‘Ãºi, bá»Ÿi váº­y tá»¥i [Clan Spammer TM] cÅ©ng Ã­u Ä‘Ãºi rá»‘tâ€&lt;/p&gt;&lt;/li&gt;

&lt;li&gt;&lt;p&gt;KhÃ¡i quÃ¡t hÃ³a khÃ´ng Ä‘Ãºng chá»—. ÄÃ¢y lÃ  loáº¡i ngá»¥y biá»‡n mÃ  ngÆ°á»i sá»­ dá»¥ng chÃºng thÆ°á»ng Ã¡p dá»¥ng má»™t qui luáº­t chung cho má»™t tÃ¬nh huá»‘ng hay má»™t cÃ¡ nhÃ¢n. Cháº³ng háº¡n nhÆ° &amp;ldquo;Clan FMW khÃ´ng ngáº¡i kill red ngÆ°á»i khÃ¡c. BÃ© LeQuyen1987 cÅ©ng thuá»™c FMW, váº­y bÃ© áº¥y háº³n lÃ  thÆ°á»ng xuyÃªn kill red ngÆ°á»i khÃ¡c.â€&lt;/p&gt;&lt;/li&gt;

&lt;li&gt;&lt;p&gt;KÃ©o dÃ i tÃ­nh tÆ°Æ¡ng Ä‘á»“ng. Trong loáº¡i ngá»¥y biá»‡n nÃ y, ngÆ°á»i dÃ¹ng nÃ³ Ä‘á» nghá»‹ má»™t Ä‘iá»u lá»‡ chung chung, rá»“i á»©ng dá»¥ng nÃ³ cho má»i trÆ°á»ng há»£p vÃ  cÃ¡ nhÃ¢n. VÃ­ dá»¥: â€œTÃ´i tin ráº±ng chá»‘ng luáº­t cáº¥m spam báº±ng cÃ¡ch cá»‘ Ã½ spam lÃ  má»™t Ä‘iá»u sai trÃ¡iâ€&lt;/p&gt;&lt;/li&gt;

&lt;li&gt;&lt;p&gt;LÃ­ láº½ quanh co. Loáº¡i ngá»¥y biá»‡n nÃ y thÆ°á»ng láº©n quáº©n trong vÃ i giáº£ Ä‘á»‹nh vÃ  káº¿t luáº­n. Cháº³ng háº¡n nhÆ° â€œProphet nháº¥t Ä‘á»‹nh khÃ´ng thá»ƒ lÃ m clan leader Ä‘Æ°á»£c. Do Ä‘Ã³ khÃ´ng thá»ƒ Ä‘á»ƒ Prophet lÃ m clan leader. VÃ­ thá»ƒ, cÃ¡c Prophet sáº½ khÃ´ng cáº§n pháº£i Ä‘i Ä‘Äƒng kÃ½ Ä‘Ã¡nh thÃ nh. Do váº­y, Prophet khÃ´ng thá»ƒ nÃ o lÃ m leader Ä‘Æ°á»£c.&amp;rdquo; Tá»©c lÃ  trong má»™t lÃ­ giáº£i nhÆ° tháº¿, cáº£ hai giáº£ thuyáº¿t vÃ  káº¿t luáº­n Ä‘á»u giá»‘ng nhau.&lt;/p&gt;&lt;/li&gt;

&lt;li&gt;&lt;p&gt;Äáº£o ngÆ°á»£c Ä‘iá»u kiá»‡n. Loáº¡i ngá»¥y biá»‡n nÃ y thÆ°á»ng Ä‘Æ°á»£c biá»ƒu hiá»‡n qua hÃ¬nh thá»©c â€œNáº¿u A xáº£y ra thÃ¬ B sáº½ xáº£y ra, do Ä‘Ã³, náº¿u B xáº£y ra thÃ¬ A sáº½ xáº£y ra.â€&lt;/p&gt;&lt;/li&gt;

&lt;li&gt;&lt;p&gt;Lá»£i dá»¥ng rá»§i ro. Ngá»¥y biá»‡n nÃ y thÆ°á»ng dÃ¹ng má»™t qui luáº­t chung vÃ  Ã¡p dá»¥ng nÃ³ cho má»™t trÆ°á»ng há»£p cÃ¡ biá»‡t. VÃ­ dá»¥: â€œLuáº­t giao thÃ´ng khÃ´ng cho anh cháº¡y quÃ¡ 50 km/h. Cho dÃ¹ cha anh sáº¯p cháº¿t anh cÅ©ng khÃ´ng Ä‘Æ°á»£c cháº¡y quÃ¡ tá»‘c Ä‘á»™ Ä‘Ã³.â€&lt;/p&gt;&lt;/li&gt;

&lt;li&gt;&lt;p&gt;Lá»£i dá»¥ng trÆ°á»ng há»£p cÃ¡ biá»‡t. Ngá»¥y biá»‡n nÃ y thÆ°á»ng dÃ¹ng má»™t trÆ°á»ng há»£p cÃ¡ biá»‡t Ä‘á»ƒ Ä‘em ra á»©ng dá»¥ng cho má»™t Ä‘Ã¡m Ä‘Ã´ng. VÃ­ dá»¥: â€œA báº­n Ã´n thi nÃªn khÃ´ng Ä‘á»ƒ Ä‘i kiáº¿m tiá»n Ä‘á»ƒ ná»™p quá»¹ clan, vÃ¬ tháº¿ A Ä‘Æ°á»£c miá»…n ná»™p quá»¹ clan tuáº§n nÃ y. MÃ  tháº¿ lÃ  khÃ´ng cÃ´ng báº±ng, nÃªn leader pháº£i miá»…n quá»¹ clan tuáº§n nÃ y cho táº¥t cáº£ thÃ nh viÃªn.â€&lt;/p&gt;&lt;/li&gt;

&lt;li&gt;&lt;p&gt;Káº¿t luáº­n láº¡c Ä‘á». Loáº¡i ngá»¥y biá»‡n nÃ y thÆ°á»ng xuáº¥t hiá»‡n khi má»™t káº¿t luáº­n cháº³ng dÃ­nh dÃ¡ng gÃ¬ Ä‘áº¿n lÃ­ láº½ mÃ  ngÆ°á»i biá»‡n luáº­n trÃ¬nh bÃ y. Má»™t vÃ­ dá»¥ tiÃªu biá»ƒu cho trÆ°á»ng há»£p ngá»¥y biá»‡n nÃ y lÃ : â€œÄá»™ nhiá»…m sáº¯t trong nÆ°á»›c á»Ÿ Viá»‡t Nam chÆ°a cao vÃ  cÃ²n trong má»©c Ä‘á»™ cho phÃ©p. Dá»¯ kiá»‡n cá»§a Bangladesh cho tháº¥y tÃ¬nh tráº¡ng nhiá»…m sáº¯t á»Ÿ Viá»‡t Nam ráº¥t tráº§m trá»ng.â€&lt;/p&gt;&lt;/li&gt;

&lt;li&gt;&lt;p&gt;Ngá»¥y biá»‡n rÆ¡m. Loáº¡i ngá»¥y biá»‡n nÃ y cá»‘ tÃ¬nh xuyÃªn táº¡c, bÃ³p mÃ©o quan Ä‘iá»ƒm hay phÃ¡t biá»ƒu cá»§a ngÆ°á»i khÃ¡c, Ä‘á»ƒ lÃ m luáº­n Ä‘iá»ƒm táº¥n cÃ´ng. ÄÃ¢y lÃ  má»™t ngá»¥y biá»‡n, vÃ¬ nÃ³ khÃ´ng Ä‘Æ°Æ¡ng Ä‘áº§u vá»›i cÃ¡i lÃ­ láº½ Ä‘ang bÃ n. Cháº³ng háº¡n nhÆ°: â€œKhi khÃ´ng cÃ³ party thÃ¬ má»i ngÆ°á»i nÃªn Ä‘i solo vÃ o lair. Nhiá»u ngÆ°á»i tá»« chá»‘i solo vÃ o lair, nhÆ°ng há» nÃªn tháº¥y ráº±ng vÃ o lair train hiá»‡u quáº£ hÆ¡n lÃ  lÃª láº¿t buÃ´n dÆ°a á»Ÿ Giran.&amp;rdquo; Trong Ä‘Ã¢y, Ã½ tranh luáº­n cá»§a ngÆ°á»i trÆ°á»›c lÃ  khÃ´ng nÃªn solo vÃ o lair nhÆ°ng ngÆ°á»i pháº£n biá»‡n láº¡i nÃ³i Ä‘áº¿n tÃ­nh hiá»‡u quáº£ khi train á»Ÿ lair - Ä‘iá»u mÃ  ai cÅ©ng biáº¿t.&lt;/p&gt;&lt;/li&gt;
&lt;/ol&gt;

&lt;h2 id=&#34;nguyÃªn-nhÃ¢n-giáº£&#34;&gt;NguyÃªn nhÃ¢n giáº£&lt;/h2&gt;

&lt;ol&gt;
&lt;li&gt;&lt;p&gt;â€œPostologyâ€. Loáº¡i ngá»¥y biá»‡n nÃ y phÃ¡t biá»ƒu ráº±ng hai sá»± kiá»‡n xáº£y ra, má»™t trÆ°á»›c vÃ  má»™t sau, cÃ³ quan há»‡ vá»›i nhau nhÆ° nguyÃªn nhÃ¢n vÃ  háº­u quáº£. VÃ­ dá»¥: &amp;ldquo;VÃ i nick bá»‹ ban khi spam, váº­y chÃºng ta khÃ´ng nÃªn spam.&amp;rdquo; Thá»±c táº¿ lÃ  báº¡n cÃ³ thá»ƒ spam mÃ  váº«n khÃ´ng bá»‹ ban náº¿u spam Ä‘Ãºng chá»—.&lt;/p&gt;&lt;/li&gt;

&lt;li&gt;&lt;p&gt;áº¢nh hÆ°á»Ÿng liÃªn Ä‘á»›i. Má»™t sá»± kiá»‡n Ä‘Æ°á»£c cho lÃ  cÃ³ áº£nh hÆ°á»Ÿng Ä‘áº¿n má»™t sá»± kiá»‡n khÃ¡c, nhÆ°ng thá»±c cháº¥t thÃ¬ cáº£ hai sá»± kiá»‡n Ä‘á»u cÃ³ cÃ¹ng má»™t nguyÃªn nhÃ¢n. ÄÃ¢y cÅ©ng chÃ­nh lÃ  má»™t trÆ°á»ng há»£p ngá»¥y biá»‡n dÆ°á»›i dáº¡ng â€œpostologyâ€. VÃ­ dá»¥: â€œChÃºng ta Ä‘ang chá»©ng kiáº¿n tÃ¬nh tráº¡ng Summoner khÃ´ng kiáº¿m Ä‘Æ°á»£c clan ráº¥t cao, vÃ¬ khÃ´ng clan nÃ o muá»‘n chá»©a Summonerâ€ (NhÆ°ng cÃ³ thá»ƒ cáº£ hai sá»± kiá»‡n cÃ³ nguyÃªn nhÃ¢n lÃ  má»™t summoner cá»¥ thá»ƒ nÃ o Ä‘Ã³ hay chÆ¡i báº©n nÃªn khÃ´ng clan nÃ o nháº­n.)&lt;/p&gt;&lt;/li&gt;

&lt;li&gt;&lt;p&gt;áº¢nh hÆ°á»Ÿng khÃ´ng Ä‘Ã¡ng ká»ƒ. ÄÃ¢y lÃ  má»™t loáº¡i ngá»¥y biá»‡n mang tÃ­nh phÃ³ng Ä‘áº¡i tá»« má»™t áº£nh hÆ°á»Ÿng ráº¥t nhá». Cháº³ng háº¡n nhÆ° â€œHÃºt thuá»‘c gÃ¢y ra Ã´ nhiá»…m mÃ´i trÆ°á»ngâ€ lÃ  má»™t phÃ¡t biá»ƒu Ä‘Ãºng, nhÆ°ng áº£nh hÆ°á»Ÿng cá»§a thuá»‘c lÃ¡ Ä‘áº¿n mÃ´i trÆ°á»ng ráº¥t khiÃªm tá»‘n khi so vá»›i áº£nh hÆ°á»Ÿng cá»§a khÃ³i xe, cháº¥t tháº£i cÃ´ng nghiá»‡p tá»« cÃ¡c nhÃ  mÃ¡y&lt;/p&gt;&lt;/li&gt;

&lt;li&gt;&lt;p&gt;áº¢nh hÆ°á»Ÿng ngÆ°á»£c chiá»u. Má»‘i quan há»‡ giá»¯a nguyÃªn nhÃ¢n vÃ  háº­u quáº£ bá»‹ Ä‘áº£o ngÆ°á»£c chiá»u Ä‘á»ƒ tÃ¬m Ä‘áº¿n má»™t káº¿t luáº­n mang tÃ­nh ngá»¥y biá»‡n. VÃ­ dá»¥: â€œUng thÆ° gÃ¢y ra thÃ³i quen hÃºt thuá»‘c lÃ¡â€.&lt;/p&gt;&lt;/li&gt;

&lt;li&gt;&lt;p&gt;NguyÃªn nhÃ¢n phá»©c táº¡p. Má»™t sá»± kiá»‡n xáº£y ra cÃ³ thá»ƒ do nhiá»u nguyÃªn nhÃ¢n khÃ¡c nhau, nhÆ°ng ngÆ°á»i ngá»¥y biá»‡n cÃ³ thá»ƒ Ä‘Æ¡n giáº£n hÃ³a thÃ nh má»™t liÃªn há»‡ Ä‘Æ¡n giáº£n. Cháº³ng háº¡n nhÆ° â€œTai náº¡n xe cá»™ lÃ  do Ä‘Æ°á»ng xÃ¡ xáº¥uâ€ cÃ³ thá»ƒ Ä‘Ãºng, nhÆ°ng tai náº¡n cÅ©ng cÃ³ thá»ƒ do ngÆ°á»i lÃ¡i xe áº©u trong má»™t Ä‘iá»u kiá»‡n xáº¥u.&lt;/p&gt;&lt;/li&gt;

&lt;li&gt;&lt;p&gt;NguyÃªn nhÃ¢n sai (Non causa pro causa). Loáº¡i ngá»¥y biá»‡n nÃ y xáº£y ra khi má»™t Ä‘iá»u nÃ o Ä‘Ã³ Ä‘Æ°á»£c cho lÃ  nguyÃªn nhÃ¢n cá»§a má»™t sá»± kiá»‡n, nhÆ°ng nÃ³ chÆ°a thá»±c sá»± Ä‘Æ°á»£c chá»©ng minh lÃ  nguyÃªn nhÃ¢n. VÃ­ dá»¥: â€œTÃ´i uá»‘ng má»™t viÃªn aspirin vÃ  nhá»› Ä‘áº¿n Lineage, vÃ  tÃ´i khÃ´ng cÃ²n bá»‹ nhá»©c Ä‘áº§u. NhÆ° váº­y Lineage Ä‘Ã£ chá»¯a trá»‹ tÃ´i khá»i nhá»©c Ä‘áº§u.â€&lt;/p&gt;&lt;/li&gt;
&lt;/ol&gt;

&lt;h2 id=&#34;nháº­p-nháº±ng&#34;&gt;Nháº­p nháº±ng&lt;/h2&gt;

&lt;ol&gt;
&lt;li&gt;&lt;p&gt;LÃ­ láº½ mÆ¡ há»“. DÃ¹ng nhá»¯ng chá»¯ vÃ  lÃ­ láº½ mÆ¡ há»“, tá»‘i nghÄ©a lÃ  má»™t hÃ¬nh thá»©c ngá»¥y biá»‡n, nháº¥t lÃ  khi má»™t chá»¯ hay cÃ¢u phÃ¡t biá»ƒu Ä‘Æ°á»£c dÃ¹ng vá»›i hai (hay nhiá»u hÆ¡n hai) Ã½ nghÄ©a khÃ¡c nhau. VÃ­ dá»¥: &amp;ldquo;Giáº¿t ngÆ°á»i lÃ  xáº¥u, vÃ¬ tháº¿ nhá»¯ng ngÆ°á»i Ä‘i giáº¿t nhá»¯ng ngÆ°á»i Ä‘ang red cÅ©ng lÃ  xáº¥u&amp;rdquo;&lt;/p&gt;&lt;/li&gt;

&lt;li&gt;&lt;p&gt;ChÆ¡i chá»¯ (Amphiboly). Ngá»¥y biá»‡n báº±ng chÆ¡i chá»¯ dá»±a vÃ o nhá»¯ng giáº£ thuyáº¿t mÆ¡ há»“, nháº­p nháº±ng, do báº¥t cáº©n tháº­n hay cÃ¡ch phÃ¡t biá»ƒu sai vÄƒn pháº¡m.&lt;/p&gt;&lt;/li&gt;

&lt;li&gt;&lt;p&gt;Trá»ng Ã¢m (accent). ÄÃ¢y lÃ  má»™t hÃ¬nh thá»©c ngá»¥y biá»‡n báº±ng cÃ¡ch dÃ¹ng thay Ä‘á»•i Ã½ nghÄ©a cá»§a má»™t cÃ¢u vÄƒn qua nháº¥n máº¡nh.&lt;/p&gt;&lt;/li&gt;
&lt;/ol&gt;

&lt;h2 id=&#34;pháº¡m-trÃ¹-sai&#34;&gt;Pháº¡m trÃ¹ sai&lt;/h2&gt;

&lt;ol&gt;
&lt;li&gt;&lt;p&gt;Há»—n há»£p. Loáº¡i ngá»¥y biá»‡n nÃ y thÆ°á»ng dÃ¹ng nhá»¯ng Ä‘áº·c tÃ­nh bá» ngoÃ i Ä‘á»ƒ suy luáº­n cho má»™t Ä‘iá»u gÃ¬ cÃ¡ biá»‡t. VÃ­ dá»¥: â€œXe Ä‘áº¡p Ä‘Æ°á»£c lÃ m báº±ng nhá»¯ng dá»¥ng cá»¥ nháº¹ kÃ­, do Ä‘Ã³, xe Ä‘áº¡p ráº¥t nháº¹â€, hay â€œXe hÆ¡i dÃ¹ng Ã­t xÄƒng dáº§u vÃ  khÃ´ng gÃ¢y ra Ã´ nhiá»…m mÃ´i trÆ°á»ng báº±ng xe bus. Do Ä‘Ã³, xe hÆ¡i khÃ´ng gÃ¢y háº¡i cho mÃ´i trÆ°á»ng báº±ng tÃ¡c háº¡i cá»§a xe bus.â€&lt;/p&gt;&lt;/li&gt;

&lt;li&gt;&lt;p&gt;Phi thá»ƒ thá»©c (ad hoc). Giáº£i thÃ­ch vÃ  lÃ­ láº½ lÃ  hai Ä‘iá»u khÃ¡c nhau. Náº¿u muá»‘n xÃ¡c minh A, vÃ  dÃ¹ng B lÃ m báº±ng cá»›, thÃ¬ cÃ¢u phÃ¡t biá»ƒu â€œA xáº£y ra bá»Ÿi vÃ¬ B xáº£y ra&amp;rdquo; lÃ  má»™t lÃ­ láº½. Tuy nhiÃªn, náº¿u muá»‘n xÃ¡c minh má»™t sá»± tháº­t vá» B, thÃ¬ cÃ¢u phÃ¡t biá»ƒu &amp;ldquo;A xáº£y ra bá»Ÿi vÃ¬ B xáº£y ra&amp;rdquo; khÃ´ng pháº£i lÃ  má»™t lÃ­ láº½ mÃ  lÃ  má»™t lá»i giáº£i thÃ­ch. Ngá»¥y biá»‡n theo kiá»ƒu phi thá»ƒ thá»©c lÃ  hÃ¬nh thá»©c dÃ¹ng giáº£i thÃ­ch sau khi Ä‘Ã£ cÃ³ sá»± tháº­t mÃ  sá»± tháº­t khÃ´ng á»©ng dá»¥ng vÃ o má»™t bá»‘i cáº£nh khÃ¡c. ThÃ´ng thÆ°á»ng ngá»¥y biá»‡n phi thá»ƒ thá»©c Ä‘Æ°á»£c khoÃ¡c vÃ o chiáº¿c Ã¡o lÃ­ láº½. Cháº³ng háº¡n nhÆ° náº¿u chÃºng ta giáº£ Ä‘á»‹nh ráº±ng clan leader Ä‘á»‘i xá»­ cÃ´ng báº±ng vá»›i má»i member trong clan, thÃ¬ nhá»¯ng phÃ¡t biá»ƒu sau Ä‘Ã¢y lÃ  nhá»¯ng lá»i giáº£i thÃ­ch phi thá»ƒ thá»©c: â€œTÃ´i má»›i Ä‘Æ°á»£c leader cho mÆ°á»£n tiá»nâ€, â€œNÃ³i clan leader Ä‘i, áº£nh nhiá»u tiá»n láº¯mâ€, â€œNhÆ°ng áº£nh cÃ³ cho nhá»¯ng ngÆ°á»i khÃ¡c mÆ°á»£n tiá»n khÃ´ngâ€, â€œÃ€, leader ráº¥t khÃ³ hiá»ƒu.â€&lt;/p&gt;&lt;/li&gt;
&lt;/ol&gt;

&lt;h2 id=&#34;phi-logic-non-sequitur-vÃ -nháº§m-láº«n-trong-tam-Ä‘oáº¡n-luáº­n&#34;&gt;Phi logic (non sequitur) vÃ  nháº§m láº«n trong tam Ä‘oáº¡n luáº­n&lt;/h2&gt;

&lt;ol&gt;
&lt;li&gt;&lt;p&gt;Phi logic. Ngá»¥y biá»‡n phi logic thÆ°á»ng xáº£y ra trong trÆ°á»ng há»£p má»™t lÃ­ láº½ mÃ  káº¿t luáº­n Ä‘Æ°á»£c rÃºt ra tá»« nhá»¯ng tiÃªu Ä‘á» khÃ´ng dÃ­nh dÃ¡ng gÃ¬ vá»›i nhau. Cháº³ng háº¡n nhÆ° â€œNgÆ°á»i Ai Cáº­p Ä‘Ã£ tá»«ng lÃ m nhiá»u khai quáº­t Ä‘á»ƒ xÃ¢y dá»±ng nhá»¯ng kim tá»± thÃ¡p, há» cháº¯c cháº¯n pháº£i ráº¥t tháº¡o vá» cá»• sinh váº­t há»c.â€&lt;/p&gt;&lt;/li&gt;

&lt;li&gt;&lt;p&gt;Loáº¡i bá» tiá»n Ä‘á». Ngá»¥y biá»‡n loáº¡i nÃ y thÆ°á»ng xáº£y ra dÆ°á»›i hÃ¬nh thá»©c â€œnáº¿u A thÃ¬ B, khÃ´ng pháº£i A thÃ¬ khÃ´ng pháº£i B.â€ VÃ­ dá»¥: â€œNáº¿u tÃ´i á»Ÿ TPHCM thÃ¬ tÃ´i Ä‘ang á»Ÿ Vietnam. TÃ´i hiá»‡n khÃ´ng á»Ÿ TPHCM, do Ä‘Ã³, tÃ´i khÃ´ng á»Ÿ Vietnamâ€.&lt;/p&gt;&lt;/li&gt;

&lt;li&gt;&lt;p&gt;Giáº£ Ä‘á»‹nh hÆ°. ÄÃ¢y lÃ  má»™t loáº¡i ngá»¥y biá»‡n báº±ng cÃ¡ch dÃ¹ng ká»¹ thuáº­t phá»ng váº¥n. Má»™t trÆ°á»ng há»£p cá»• Ä‘iá»ƒn lÃ  â€œÃ”ng Ä‘Ã£ ngÆ°ng Ä‘Ã¡nh vá»£ chÆ°a?â€ Tá»©c lÃ  má»™t cÃ¢u há»i vá»›i má»™t giáº£ Ä‘á»‹nh ráº±ng ngÆ°á»i Ä‘Æ°á»£c há»i tá»«ng hÃ nh hung vá»£.&lt;/p&gt;&lt;/li&gt;

&lt;li&gt;&lt;p&gt;Ngá»¥y biá»‡n bá»‘n ngá»¯. ( Má»™t tiÃªu chuáº©n cá»§a tam Ä‘oáº¡n luáº­n gá»“m cÃ³ 3 chá»¯). VÃ­ dá»¥ nhÆ° trong cÃ¢u phÃ¡t biá»ƒu â€œTáº¥t cáº£ chÃ³ lÃ  thÃº váº­t, vÃ  táº¥t cáº£ mÃ¨o lÃ  loÃ i Ä‘á»™ng váº­t cÃ³ vÃº, do Ä‘Ã³ táº¥t cáº£ chÃ³ lÃ  loÃ i Ä‘á»™ng váº­t cÃ³ vÃº,â€ cÃ³ bá»‘n chá»¯: chÃ³, mÃ¨o, Ä‘á»™ng váº­t, vÃ  Ä‘á»™ng váº­t cÃ³ vÃº.&lt;/p&gt;&lt;/li&gt;

&lt;li&gt;&lt;p&gt;Äá»©t Ä‘oáº¡n. Hai sá»± váº­t riÃªng biá»‡t Ä‘Æ°á»£c xem lÃ  cÃ³ liÃªn há»‡ nhau náº¿u chÃºng cÃ³ chung Ä‘áº·c tÃ­nh. NgÆ°á»i ngá»¥y biá»‡n lá»£i dá»¥ng chá»¯ giá»¯a cá»§a má»™t phÃ¡t biá»ƒu Ä‘á»ƒ Ä‘Æ°a Ä‘áº¿n má»™t káº¿t luáº­n sai.&lt;/p&gt;&lt;/li&gt;
&lt;/ol&gt;

&lt;h2 id=&#34;cÃ¡c-nháº§m-láº«n-khÃ¡c&#34;&gt;CÃ¡c nháº§m láº«n khÃ¡c&lt;/h2&gt;

&lt;ol&gt;
&lt;li&gt;&lt;p&gt;Dáº«n chá»©ng báº±ng giai thoáº¡i. Má»™t trong nhá»¯ng ngá»¥y biá»‡n phá»• biáº¿n nháº¥t vÃ  Ä‘Æ¡n giáº£n nháº¥t lÃ  dá»±a vÃ o nhá»¯ng cÃ¢u chuyá»‡n cÃ³ tÃ­nh vá»¥n váº·t, hay giai thoáº¡i.&lt;/p&gt;&lt;/li&gt;

&lt;li&gt;&lt;p&gt;Lá»£i dá»¥ng cá»• tÃ­ch. ÄÃ¢y lÃ  má»™t loáº¡i ngá»¥y biá»‡n cho ráº±ng nhá»¯ng gÃ¬ Ä‘Ãºng hay tá»‘t chá»‰ Ä‘Æ¡n giáº£n vÃ¬ chÃºng lÃ  cá»• xÆ°a, vÃ  nhá»¯ng ngÆ°á»i theo cÃ¡ch ngá»¥y biá»‡n nÃ y thÆ°á»ng nÃ³i â€œhá»“i nÃ o Ä‘áº¿n giá» ai cÅ©ng váº­y.â€&lt;/p&gt;&lt;/li&gt;

&lt;li&gt;&lt;p&gt;Dá»±a vÃ o cÃ¡i má»›i (ad novitatem). NgÆ°á»£c láº¡i vá»›i loáº¡i ngá»¥y biá»‡n dá»±a vÃ o cÃ¡i cÅ©, ngá»¥y biá»‡n dá»±a vÃ o cÃ¡i má»›i cho ráº±ng má»™t Ä‘iá»u gÃ¬ Ä‘Ã³ tá»‘t hÆ¡n vÃ  Ä‘Ãºng hÆ¡n Ä‘Æ¡n giáº£n chá»‰ vÃ¬ nÃ³ má»›i hÆ¡n cÃ¡i khÃ¡c. â€œWindows XP pháº£i tá»‘t hÆ¡n Windows 2000.â€&lt;/p&gt;&lt;/li&gt;

&lt;li&gt;&lt;p&gt;LÃ­ láº½ cá»§a Ä‘á»“ng tiá»n. Loáº¡i ngá»¥y biá»‡n nÃ y thÆ°á»ng dá»±a vÃ o má»™t niá»m tin duy nháº¥t ráº±ng Ä‘á»“ng tiá»n lÃ  má»™t tiÃªu chuáº©n cá»§a sá»± Ä‘Ãºng Ä‘áº¯n. Nhá»¯ng ngÆ°á»i cÃ³ nhiá»u tiáº¿n cÃ³ kháº£ nÄƒng Ä‘Ãºng hÆ¡n nhá»¯ng ngÆ°á»i Ã­t tiá»n.&lt;/p&gt;&lt;/li&gt;

&lt;li&gt;&lt;p&gt;Dá»±a vÃ o cÃ¡i nghÃ¨o. NgÆ°á»£c láº¡i vá»›i ngá»¥y biá»‡n dá»±a vÃ o sá»± giÃ u cÃ³, cÃ³ má»™t loáº¡i ngá»¥y biá»‡n khÃ¡c dá»±a vÃ o sá»± nghÃ¨o khá»•.&lt;/p&gt;&lt;/li&gt;

&lt;li&gt;&lt;p&gt;Äiá»‡p khÃºc (ad nauseam). Loáº¡i ngá»¥y biá»‡n nÃ y cho ráº±ng má»™t lÃ­ láº½ cÃ ng Ä‘Æ°á»£c láº·p Ä‘i láº·p láº¡i nhiá»u chá»«ng nÃ o thÃ¬ nÃ³ sáº½ Ä‘Æ°á»£c ngÆ°á»i ta cháº¥p nháº­n lÃ  Ä‘Ãºng. Do Ä‘Ã³, ngÆ°á»i ngá»¥y biá»‡n thÆ°á»ng chá»‰ láº·p Ä‘i láº·p láº¡i nhá»¯ng phÃ¡t biá»ƒu, báº¥t ká»ƒ lÃ  quÃ¡i dá»Ÿ tháº¿ nÃ o, cho Ä‘áº¿n khi ngÆ°á»i Ä‘á»‘i thoáº¡i má»‡t má»i khÃ´ng cÃ²n muá»‘n nghe ná»¯a.&lt;/p&gt;&lt;/li&gt;

&lt;li&gt;&lt;p&gt;Láº¡m dá»¥ng thiÃªn nhiÃªn. TÃ¬m cÃ¡i tÆ°Æ¡ng Ä‘á»“ng giá»¯a má»™t káº¿t luáº­n nÃ o Ä‘Ã³ vÃ  má»™t khÃ­a cáº¡nh cá»§a tháº¿ giá»›i tá»± nhiÃªn, rá»“i tá»« Ä‘Ã³ phÃ¡t biá»ƒu ráº±ng káº¿t luáº­n Ä‘Ã³ lÃ  khÃ´ng thá»ƒ trÃ¡nh khá»i.&lt;/p&gt;&lt;/li&gt;

&lt;li&gt;&lt;p&gt;Ngá»¥y biá»‡n â€œTu quoqueâ€. ÄÃ¢y lÃ  má»™t trong nhá»¯ng ngá»¥y biá»‡n ráº¥t phá»• biáº¿n. NÃ³ dá»±a vÃ o lÃ­ láº½ ráº±ng má»™t hÃ nh Ä‘á»™ng cÃ³ thá»ƒ cháº¥p nháº­n Ä‘Æ°á»£c bá»Ÿi vÃ¬ ngÆ°á»i Ä‘á»‘i nghá»‹ch Ä‘Ã£ lÃ m. Cháº³ng háº¡n nhÆ° â€œAnh lÃ  má»™t ngÆ°á»i lá»«a dá»‘i.â€ â€œRá»“i sao? Anh cÅ©ng lÃ  má»™t tay lá»«a dá»‘i váº­y.â€&lt;/p&gt;&lt;/li&gt;

&lt;li&gt;&lt;p&gt;Láº¡m dá»¥ng thá»‘ng kÃª. Thá»‘ng kÃª thÆ°á»ng Ä‘Æ°á»£c giá»›i ngá»¥y biá»‡n sá»­ dá»¥ng tá»‘i Ä‘a, vÃ¬ theo há» thá»‘ng kÃª cÃ³ thá»ƒ dÃ¹ng Ä‘á»ƒ â€œchá»©ng minhâ€ báº¥t cá»© Ä‘iá»u gÃ¬. NgÆ°á»i ta cÃ³ thá»ƒ váº·n váº¹o hai con sá»‘ 1 vÃ  3 Ä‘iá»ƒm Ä‘á»ƒ sáº£n xuáº¥t nhá»¯ng phÃ¡t biá»ƒu nhÆ° â€œkhÃ¡c nhau 2 Ä‘iá»ƒmâ€, â€œcao gáº¥p 3 láº§nâ€, hay â€œtÄƒng 200%â€; ngÆ°á»i ta cÃ³ thá»ƒ dá»±a vÃ o Ã½ kiáº¿n Ä‘á»“ng tÃ¬nh cá»§a 4 ngÆ°á»i trong 5 ngÆ°á»i Ä‘á»ƒ cho lÃ  â€œ80% ngÆ°á»i Ä‘Æ°á»£c thÄƒm dÃ²â€, hay tháº­m chÃ­ â€œÄ‘a sá»‘ cá»™ng Ä‘á»“ngâ€ Ä‘á»“ng Ã½ vá»›i má»™t luáº­n Ä‘iá»ƒm nÃ o Ä‘Ã³. Tá»©c lÃ  nhá»¯ng khÃ¡i quÃ¡t hoÃ¡ má»™t cÃ¡ch vá»™i vÃ£, hay dá»±a vÃ o má»™t máº«u sá»‘ cá»±c ká»³ tháº¥p, tháº¥p Ä‘áº¿n Ä‘á»™ nÃ³ khÃ´ng cÃ³ nghÄ©a lÃ­ gÃ¬. Thá»±c ra, thá»‘ng kÃª khÃ´ng chá»©ng minh Ä‘iá»u gÃ¬ cáº£. Thá»‘ng kÃª chá»‰ lÃ  má»™t phÆ°Æ¡ng tiá»‡n hay thuáº­t toÃ¡n dÃ¹ng Ä‘á»ƒ loáº¡i bá» nhá»¯ng trÆ°á»ng há»£p kháº£ dÄ© hay khÃ´ng kháº£ dÄ©. VÃ¬ cÃ³ quÃ¡ nhiá»u ngá»¥y biá»‡n thá»‘ng kÃª, nÃªn váº¥n Ä‘á» nÃ y sáº½ Ä‘Æ°á»£c bÃ n tiáº¿p trong má»™t dá»‹p khÃ¡c. Tuy nhiÃªn, nhá»¯ng ai thÃ­ch tÃ¬m hiá»ƒu váº¥n Ä‘á» ngá»¥y biá»‡n thá»‘ng kÃª cÃ³ thá»ƒ tÃ¬m Ä‘á»c cuá»‘n sÃ¡ch ráº¥t ná»•i tiáº¿ng cá»§a Darrell. Huff, cÃ³ tá»±a Ä‘á» lÃ  â€œHow to lie with statisticsâ€ (táº¡m dá»‹ch: â€œLÃ m tháº¿ nÃ o Ä‘á»ƒ lá»«a dá»‘i báº±ng thá»‘ng kÃªâ€).&lt;/p&gt;&lt;/li&gt;
&lt;/ol&gt;

&lt;h2 id=&#34;máº·c-Ä‘á»‹nh-Ã°á»-cÃ¡c-hÃ¬nh-thá»©c-ngá»¥y-biá»‡n-khi-tranh-luáº­n&#34;&gt;Máº·c Ä‘á»‹nh Ãá»: CÃ¡c hÃ¬nh thá»©c ngá»¥y biá»‡n khi tranh luáº­n&lt;/h2&gt;

&lt;p&gt;CÃ³ thá»ƒ nÃ³i nhá»¯ng loáº¡i ngá»¥y biá»‡n trÃªn Ä‘Ã¢y cÃ³ nhá»¯ng Ä‘áº·c Ä‘iá»ƒm chung lÃ  (a) phÃ¡t biá»ƒu khÃ´ng dá»±a vÃ o lÃ­ láº½ logic; (b) cÃ¡c Ä‘á»‹nh Ä‘á» khÃ´ng vá»¯ng Ä‘á»ƒ Ä‘i Ä‘áº¿n má»™t káº¿t luáº­n; vÃ  &amp;copy; Ä‘Æ°a ra giáº£ Ä‘á»‹nh khÃ´ng Ä‘Ãºng. Ngá»¥y biá»‡n, do Ä‘Ã³, nÃ³i cho cÃ¹ng, lÃ  má»™t sáº£n pháº©m cá»§a sá»± lÆ°á»i suy nghÄ©. VÃ  háº§u nhÆ° trong chÃºng ta, ai cÅ©ng cÃ³ Ã­t nháº¥t lÃ  má»™t láº§n lÆ°á»i suy nghÄ©. Do Ä‘Ã³, náº¿u Ä‘iá»ƒm qua nhá»¯ng loáº¡i ngá»¥y biá»‡n trÃªn Ä‘Ã¢y, chÃºng ta tá»± cáº£m nháº­n ráº±ng trong quÃ¡ khá»© mÃ¬nh cháº¯c cÅ©ng cÃ³ láº§n pháº¡m vÃ o lá»—i láº§m cá»§a ngá»¥y biá»‡n. Äiá»u nÃ y cÃ³ thá»ƒ Ä‘Ãºng, vÃ  khÃ´ng nÃªn láº¥y lÃ m ngáº¡c nhiÃªn.&lt;/p&gt;

&lt;p&gt;NhÆ°ng táº¡i sao nhá»¯ng ngá»¥y biá»‡n váº«n cÃ²n cÃ³ máº·t? Theo tÃ´i, bá»Ÿi vÃ¬ chÃºng váº«n cÃ³ khÃ¡ch hÃ ng. Váº«n cÃ³ ngÆ°á»i, dÃ¹ Ã­t hay nhiá»u, tin tÆ°á»Ÿng vÃ o ngá»¥y biá»‡n, vÃ¬ nÃ³ thuáº­n nhÄ©, trÆ¡n tru, vÃ  nháº¥t lÃ  khÃ´ng thÃ¡ch thá»©c. Sá» má»™t hÃ²n Ä‘Ã¡ trÆ¡n tru Ä‘em láº¡i cho chÃºng ta má»™t cáº£m giÃ¡c khoan khoÃ¡i dá»… chá»‹u hÆ¡n lÃ  sá» má»™t hÃ²n Ä‘Ã¡ lá»Ÿm chá»Ÿm, hay ngá»“i trÃªn má»™t cÃ¡i gháº¿ ghá»“ ghá». NgÆ°á»i ta thÃ­ch sá»± trÆ¡n tru, bá»Ÿi vÃ¬ trÆ¡n tru lÃ  dáº¥u hiá»‡u cá»§a sá»± khoan khoÃ¡i, dá»… chá»‹u, lÃ  cÃ¡i khoáº£ng thá»i gian giáº£i lao, khÃ´ng cáº§n sá»± thÃ¡ch thá»©c.&lt;/p&gt;

&lt;p&gt;CÃ³ láº½, á»Ÿ má»™t khÃ­a cáº¡nh nÃ o Ä‘Ã³, Ä‘iá»u nÃ y cÅ©ng khÃ´ng Ä‘áº¿n ná»—i tá»‡, bá»Ÿi vÃ¬ nhá»¯ng ngá»¥y biá»‡n pháº£n Ã¡nh sá»± thÃ nh cÃ´ng [hay cÃ³ ngÆ°á»i nÃ³i sá»± phong phÃº] cá»§a ngÃ´n ngá»¯ trong viá»‡c tÃ¡ch rá»i giá»¯a nhá»¯ng gÃ¬ thÃ´ thiá»ƒn, gá»“ ghá» vá»›i nhá»¯ng gÃ¬ hoÃ n thiá»‡n, má»¹ miá»u. NhÆ°ng sá»± trÆ¡n tru cá»§a cÃ¡c váº­t thá»ƒ vÃ  ngÃ´n ngá»¯ ngÃ y nay Ä‘em láº¡i cho chÃºng ta má»™t cáº£m giÃ¡c giáº£ táº¡o vá» tháº¿ giá»›i thá»±c cá»§a cÃ¡c váº­t thá»ƒ. Nhá»¯ng ká»³ káº¹t xe trÃªn Ä‘Æ°á»ng xÃ¡ má»›i Ä‘á»ƒ lá»™ trÃ¡i tim phá»©c táº¡p cá»§a má»™t thÃ nh phá»‘. TÆ°Æ¡ng tá»±, má»™t sá»± cá»‘ cá»§a internet sáº½ nháº¯c nhá»Ÿ chÃºng ta vá» tÃ¬nh tráº¡ng há»—n mang vÃ  phá»©c táº¡p cá»§a há»‡ thá»‘ng thÃ´ng tin Ä‘iá»‡n tá»­. Sá»± há»—n mang vÃ  phá»©c táº¡p lÃ  thá»±c. TrÆ¡n tru, trÃ²n trÄ©nh cÃ³ thá»ƒ lÃ  giáº£ táº¡o. Nhá»¯ng cÃ¢u vÄƒn ngá»¥y biá»‡n cÃ³ thá»ƒ chá»‰ lÃ  nhá»¯ng lá»i phÃ¡t biá»ƒu lÃ©m lá»‰nh thay vÃ¬ lá»‹ch thiá»‡p, hÃ m chá»©a mÃ¡nh khÃ³e thay vÃ¬ thÃ¢n thiá»‡n. CÃ³ thá»ƒ nÃ³i, ngá»¥y biá»‡n lÃ  nhá»¯ng lá»‘i sÃ¡o ngá»¯ liáº¿n thoáº¯ng nháº±m vÃ o má»¥c Ä‘Ã­ch lÃ´i cuá»‘n ngÆ°á»i nghe/Ä‘á»c, thay vÃ¬ cung cáº¥p cho há» má»™t sá»± thá»±c.&lt;/p&gt;

&lt;p&gt;Bá»Ÿi vÃ¬ ngá»¥y biá»‡n lÃ  nhá»¯ng lÃ­ láº½ mÃ  bá» ngoÃ i cÃ³ váº» logic, nÃªn chÃºng cÃ³ kháº£ nÄƒng thuyáº¿t phá»¥c nhá»¯ng ngÆ°á»i khÃ´ng chá»‹u khÃ³ suy nghÄ©, nháº¥t lÃ  nhá»¯ng ngÆ°á»i cÃ²n mang náº·ng cáº£m tÃ­nh. Äiá»u nÃ y giáº£i thÃ­ch táº¡i sao nhiá»u ngÆ°á»i trong chÃºng ta tiáº¿p nháº­n má»™t cÃ¡ch thá»¥ Ä‘á»™ng quÃ¡ nhiá»u nhá»¯ng Ä‘iá»u cÃ n rá»¡ vá» tháº¿ giá»›i chung quanh, ká»ƒ cáº£ nhá»¯ng niá»m tin tÃ´n giÃ¡o, nhá»¯ng mÃª tÃ­n dá»‹ Ä‘oan, nhá»¯ng triáº¿t lÃ­ quÃ¡i Ä‘áº£ng, nhá»¯ng thÃ´ng tin sai láº¡c, v.v.. CÃ¡i tÃ¡c háº¡i cá»§a viá»‡c tiáº¿p nháº­n thá»¥ Ä‘á»™ng nÃ y lÃ  nÃ³ lÃ m cho chÃºng ta trá»Ÿ nÃªn nÃ´ lá»‡ vá»›i cáº£m tÃ­nh, vÃ  dá»… dÃ ng trá»Ÿ thÃ nh nhá»¯ng ngÆ°á»i cuá»“ng tÃ­n.&lt;/p&gt;

&lt;p&gt;Äá»ƒ khÃ´ng trá»Ÿ thÃ nh nhá»¯ng nÃ´ lá»‡, chÃºng ta cáº§n pháº£i suy nghÄ© nghiÃªm tÃºc. Suy nghÄ© nghiÃªm tÃºc lÃ  má»™t quÃ¡ trÃ¬nh hoáº¡t Ä‘á»™ng tri thá»©c nháº±m Ã½ niá»‡m hÃ³a, á»©ng dá»¥ng, phÃ¢n tÃ­ch, tá»•ng há»£p, vÃ  (hay) Ä‘Ã¡nh giÃ¡ nhá»¯ng thÃ´ng tin Ä‘Æ°á»£c thu tháº­p tá»« quan sÃ¡t, kinh nghiá»‡m, pháº£n Ã¡nh, lÃ­ luáº­n, hay liÃªn láº¡c, nhÆ° lÃ  má»™t niá»m tin cho hÃ nh Ä‘á»™ng. ChÃºng ta cáº§n pháº£i dá»±a vÃ o nhá»¯ng giÃ¡ trá»‹ tri thá»©c vá»›i nhá»¯ng Ä‘áº·c Ä‘iá»ƒm nhÆ° trong sÃ¡ng, chÃ­nh xÃ¡c, nháº¥t quÃ¡n, cÃ³ liÃªn há»‡, báº±ng chá»©ng tá»‘t, lÃ­ láº½ há»£p lÃ­, cÃ³ chiá»u sÃ¢u, vÃ  cÃ´ng bÃ¬nh. Tá»©c lÃ , trÆ°á»›c má»™t cÃ¢u phÃ¡t biá»ƒu hay má»™t Ä‘á» nghá»‹, chÃºng ta pháº£i tháº©m Ä‘á»‹nh láº¡i káº¿t cáº¥u vÃ  nguyÃªn tá»‘ cá»§a phÃ¡t biá»ƒu hay Ä‘á» nghá»‹ Ä‘Ã³. Nhá»¯ng káº¿t cáº¥u vÃ  nguyÃªn tá»‘ nÃ y lÃ : má»¥c Ä‘Ã­ch, váº¥n Ä‘á», giáº£ Ä‘á»‹nh, quan niá»‡m, bá»‘i cáº£nh, káº¿t luáº­n, ngá»¥ Ã½, háº­u quáº£, pháº¡m vi tham kháº£o, vÃ  quan Ä‘iá»ƒm khÃ¡c.&lt;/p&gt;

&lt;p&gt;Theo dÃµi nhá»¯ng tranh luáº­n trÃªn cÃ¡c forum, chÃºng ta tháº¥y nhá»¯ng hÃ¬nh thá»©c táº¥n cÃ´ng cÃ¡ nhÃ¢n (thay vÃ¬ táº¥n cÃ´ng vÃ o luáº­n Ä‘iá»ƒm), xuyÃªn táº¡c Ã½ tÆ°á»Ÿng, chá»¥p mÅ©, suy luáº­n theo cáº£m tÃ­nh, má»‰a mai, Ä‘Æ¡n giáº£n hÃ³a váº¥n Ä‘á», v.vâ€¦ xuáº¥t hiá»‡n háº§u nhÆ° hÃ ng ngÃ y, cÃ³ khi hÃ ng giá». VÃ¬ nhá»¯ng táº§n sá»‘ cá»§a nhá»¯ng loáº¡i ngá»¥y biá»‡n xuáº¥t hiá»‡n quÃ¡ nhiá»u nhÆ° tháº¿, nÃ³ thÃ nh má»™t sá»± ráº­p khuÃ´n. Theo thá»i gian, ráº­p khuÃ´n trá»Ÿ thÃ nh â€œtruyá»n thá»‘ngâ€. Háº­u quáº£ cá»§a cÃ¡i truyá»n thá»‘ng nÃ y lÃ  nhá»¯ng ai ra ngoÃ i cÃ¡i khuÃ´n sÃ¡o cá»§a ngá»¥y biá»‡n Ä‘á»u cÃ³ thá»ƒ bá»‹ xem lÃ  phi chÃ­nh thá»‘ng, dáº«n Ä‘áº¿n má»™t lá»‘i suy nghÄ© vÃ  phÃ¡n xÃ©t ká»³ quáº·c&lt;/p&gt;

&lt;p&gt;Trong cÃ¡i sá»± thá»±c phá»©c táº¡p, má» má» áº£o áº£o cá»§a váº¥n Ä‘á», cÃ³ cÃ¡i Ä‘áº¹p riÃªng. KhÃ´ng pháº£i cÃ¡i Ä‘áº¹p trÆ¡n tru, trÃ²n trÄ©nh, nhÆ°ng lÃ  cÃ¡i Ä‘áº¹p kháº¯t khe cá»§a sá»± tháº­t. TÆ°Æ¡ng tá»±, má»™t lá»i phÃ¡t biá»ƒu nghá»‹ch lÃ½ cÃ³ cÃ¡i Ä‘áº¹p cá»§a nÃ³, vÃ¬ nÃ³ cÃ³ thá»ƒ Ä‘Ã¡nh thá»©c chÃºng ta vá» má»™t tháº¿ giá»›i phá»©c táº¡p, má»™t tháº¿ giá»›i khÃ´ng náº±m gá»n trong Ä‘Ãºng/sai, tá»‘t/xáº¥u, báº¡n/thÃ¹. CÃ³ láº½ Ä‘Ã£ Ä‘áº¿n lÃºc chÃºng ta nÃªn vÆ°á»£t qua chÃ­nh mÃ¬nh.&lt;/p&gt;
</description>
      </item>
    
      <item>
        <title>Apache httpd 2.4 and PHP 7 in macOS</title>
        <link>https://htr3n.github.io/2017/09/apache-httpd-php-macos/</link>
        <pubDate>Mon, 25 Sep 2017 00:00:00 +0000</pubDate>
        
        <guid>5d72c5d5a136e4653a08a44402bf2a36</guid>
        <description>

&lt;p&gt;Together, &lt;a href=&#34;https://httpd.apache.org&#34;&gt;Apache HTTP&lt;/a&gt; server, &lt;a href=&#34;https://php.net&#34;&gt;PHP&lt;/a&gt;, and &lt;a href=&#34;https://www.mysql.com&#34;&gt;MySQL&lt;/a&gt; form a powerful and popular combination for Web development. MacOS are often shipped with pre-installed versions of Apache HTTP server and PHP but these are often outdated and merely customised for macOS. The well-known bundles &lt;em&gt;*AMP&lt;/em&gt; (e.g. WAMP for Windows, LAMP for Linux, MAMP for Mac) are commonly used but also considered a tad bloated for the beginners like me ;).&lt;/p&gt;

&lt;p&gt;After few years of Java development, I turned myself into Web development, and in particular, PHP programming. As usual, I would start with pure PHP aspects that really help me to understand the fundamental concepts and techniques instead of being drown with everyone-known frameworks and their complexity and hard-to-understand magics. As a result, I first looked for a simple setup of Apache and PHP that best suits the beginning of my initial learning path. In this note, I write down what I learn from many sources on the Internet tweaked to suit my needs.&lt;/p&gt;

&lt;h2 id=&#34;goal&#34;&gt;Goal&lt;/h2&gt;

&lt;blockquote&gt;
&lt;p&gt;Let&amp;rsquo;s assume that we want to set up an exemplary  Web development environment including Apache HTTP 2.4 server and PHP 7.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;h2 id=&#34;strategies&#34;&gt;Strategies&lt;/h2&gt;

&lt;p&gt;A typical and well-documented approach is to load PHP processor as a module under Apache httpd using the directive &lt;code&gt;LoadModule&lt;/code&gt;. It is so-called &lt;a href=&#34;http://www.php.net/manual/en/install.unix.apache2.php&#34;&gt;&lt;em&gt;mod_php&lt;/em&gt;&lt;/a&gt; approach. However, this is now gradually out of favor of Web developers and hosting providers because the tight combination of PHP and Apache makes things difficult for monitoring, debugging, and scaling. One of the recent favorite strategies is to set up PHP as Fast-CGI using &lt;a href=&#34;http://php.net/manual/en/install.fpm.php&#34;&gt;PHP-FPM&lt;/a&gt; (FastCGI Process Manager). This method also brings several advantages including good support for nginx integration and &lt;a href=&#34;https://wiki.apache.org/httpd/PHP-FPM&#34;&gt;performance&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;Based on the aforementioned analysis of strategies, I consider the following installation activities to fulfill that goal.&lt;/p&gt;

&lt;ol&gt;
&lt;li&gt;Installing &lt;a href=&#34;https://brew.sh&#34;&gt;Homebrew&lt;/a&gt; (a sane package manager for macOS)&lt;/li&gt;
&lt;li&gt;Installing Apache HTTP server 2.4&lt;/li&gt;
&lt;li&gt;Installing PHP 7 and &lt;em&gt;PHP-FPM&lt;/em&gt;&lt;/li&gt;
&lt;li&gt;Putting all together&lt;/li&gt;
&lt;li&gt;Installing &lt;a href=&#34;http://www.thekelleys.org.uk/dnsmasq/doc.html&#34;&gt;DNSMasq&lt;/a&gt; (optional)&lt;/li&gt;
&lt;/ol&gt;

&lt;h2 id=&#34;installation-and-configuration&#34;&gt;Installation and Configuration&lt;/h2&gt;

&lt;h3 id=&#34;homebrew-https-brew-sh&#34;&gt;&lt;a href=&#34;https://brew.sh&#34;&gt;Homebrew&lt;/a&gt;&lt;/h3&gt;

&lt;p&gt;Homebrew is currently a prominent and well-supported package managing solution for macOS. Installing Homebrew is rather straightforward. Nevertheless, you should be familiar with using the command line in order to easily get thing done. All you need is to launch the Terminal app (&lt;code&gt;/Applications/Utilities/Terminal.app&lt;/code&gt;) or even the better &lt;a href=&#34;https://www.iterm2.com&#34;&gt;iTerm 2&lt;/a&gt; and start executing terminal commands.&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;Note: From now on, the sign &lt;code&gt;$&lt;/code&gt; (if exists) will denote the user&amp;rsquo;s command line prompt where you will execute the terminal commands, except that you must not type &lt;code&gt;$&lt;/code&gt;.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;Homebrew requires Xcode&amp;rsquo;s command line tooling so we must install it first.&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-bash&#34;&gt;# Install Xcode command line tooling
$ xcode-select --install
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;Next we start installing Homebrew using a one-line command.&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-bash&#34;&gt;/usr/bin/ruby -e &amp;quot;$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/master/install)&amp;quot;
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;By default, Homebrew will be installed into &lt;code&gt;/usr/local/Cellar&lt;/code&gt; and use &lt;code&gt;/usr/local&lt;/code&gt; and its sub-folders for the its installed binary and configuration files. For more advanced settings and manual configurations, please refer &lt;a href=&#34;https://docs.brew.sh/Installation.html&#34;&gt;here&lt;/a&gt;. To ensure that Homebrew is properly installed, we can simply check.&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-bash&#34;&gt;$ brew --version
Homebrew 1.3.8
Homebrew/homebrew-core (git revision 22ac3; last commit 2017-12-02)
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;The command &lt;code&gt;brew config&lt;/code&gt; shows more information about the installed Homebrew.&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-bash&#34;&gt;brew config
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;Now we should add some extra &lt;em&gt;taps&lt;/em&gt; (i.e. package repositories in Homebrew&amp;rsquo;s world) that contain packages we need, for instance, Apache HTTP server, PHP, and MySQL along with tools for running them as macOS services.&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-bash&#34;&gt;brew tap homebrew/apache
brew tap homebrew/php
brew tap homebrew/services
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;Last but not least, always make sure Homebrew is up-to-date.&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-bash&#34;&gt;brew update
brew doctor
&lt;/code&gt;&lt;/pre&gt;

&lt;h3 id=&#34;apache-http-server-https-httpd-apache-org&#34;&gt;&lt;a href=&#34;https://httpd.apache.org&#34;&gt;Apache HTTP server&lt;/a&gt;&lt;/h3&gt;

&lt;h4 id=&#34;installing-apache-http-server-2-4&#34;&gt;Installing Apache HTTP server 2.4&lt;/h4&gt;

&lt;p&gt;We can also use the pre-installed Apache HTTP server (from now on, Apache &lt;code&gt;httpd&lt;/code&gt;, Apache, &lt;code&gt;httpd&lt;/code&gt; will be used interchangeably) shipped with macOS. Nevertheless, I want to play around with the newer version. Apart from the Homebrew-based installation commands, the steps for setting up Apache are the same in either way.&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-bash&#34;&gt;brew install httpd
&lt;/code&gt;&lt;/pre&gt;

&lt;blockquote&gt;
&lt;p&gt;&lt;strong&gt;NOTE 1&lt;/strong&gt;: Since Sep 30th, 2017 the Apache HTTP server package in Homebrew has been renamed from &lt;code&gt;httpd24&lt;/code&gt; to &lt;code&gt;httpd&lt;/code&gt; and the corresponding folders are also changed from &lt;code&gt;apache2&lt;/code&gt; to &lt;code&gt;httpd&lt;/code&gt;. This note has been updated with the newer versions. Apart from the aforementioned updates, the configuration steps remain the same though.&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;NOTE 2&lt;/strong&gt;: When we use &lt;code&gt;brew install &amp;lt;package_name&lt;/code&gt; without any further options, Homebrew often accomplishes the installation faster by downloading a &lt;em&gt;bottled version&lt;/em&gt; (i.e. a &lt;em&gt;pre-compiled package&lt;/em&gt;) from &lt;a href=&#34;https://homebrew.bintray.com&#34;&gt;homebrew.bintray.com&lt;/a&gt;. If there are any extra compling options, Homebrew can download the package&amp;rsquo;s source code and compile the source. The compilation of a source package usually takes a a bit longer. For a simple and quick start, I mostly opt for the bottled versions of Apache server and PHP as the configured and compiled options are rather sufficient. After learning the fundamental aspects, I can turn to a more complex approach with lots of tweaks for further needs or experiments.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;By default, the Homebrew-based Apache server will use the ports &lt;code&gt;http/8080&lt;/code&gt; and &lt;code&gt;https/8443&lt;/code&gt; that do not need system administrator privileges. In my setup, I will go with this option as I simply want to run Apache with my user account. Nonetheless, you can tell Homebrew to install a version that use ports &lt;code&gt;80&lt;/code&gt; and &lt;code&gt;443&lt;/code&gt; by the option &lt;code&gt;--with-privileged-ports&lt;/code&gt;.&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-bash&#34;&gt;brew install httpd --with-privileged-ports
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;In case you want to experiment with the bleeding edge Apache server pulled from its development repository, use the option &lt;code&gt;--HEAD&lt;/code&gt; along with other options. For example,&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-bash&#34;&gt;brew install httpd --HEAD --with-privileged-ports
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;Let&amp;rsquo;s assume the bottled &lt;code&gt;httpd&lt;/code&gt; is installed. The Apache server will be installed in the following folder &lt;code&gt;/usr/local/Cellar/httpd/2.4.29&lt;/code&gt;  (which might be different in your computer). You can check the Homebrew&amp;rsquo;s &lt;em&gt;Cellar&lt;/em&gt;, i.e. where Homebrew puts installed packages, with &lt;code&gt;brew --cellar&lt;/code&gt;. The precise location of &lt;code&gt;httpd&lt;/code&gt; in a bit complex nerdy form is &lt;code&gt;$(brew --cellar)/httpd/$(brew list --versions httpd | cut -d &#39; &#39; -f 2)&lt;/code&gt;.&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-bash&#34;&gt;cd $(brew --cellar)/httpd/$(brew list --versions httpd | cut -d &#39; &#39; -f 2)
&lt;/code&gt;&lt;/pre&gt;

&lt;h4 id=&#34;configuring-apache-server&#34;&gt;Configuring Apache server&lt;/h4&gt;

&lt;p&gt;The main configuration file &lt;code&gt;httpd.conf&lt;/code&gt; can be located at &lt;code&gt;/usr/local/etc/httpd&lt;/code&gt;. There are some directives and options that you may want to notice or change ( &lt;code&gt;#&lt;/code&gt;  starts a comment).&lt;/p&gt;

&lt;p&gt;There is a default directive &lt;code&gt;Listen 8080&lt;/code&gt; denoting the port where Apache server will be listening. You can change it to your favourite one or the one that suits your projects. Note that if you change to a port in the range from &lt;code&gt;1-1023&lt;/code&gt; (so-called privileged ports), you need an administrator role to run the &lt;code&gt;httpd&lt;/code&gt; process. Because I need to create virtual hosts for various projects, I have to configure &lt;code&gt;httpd&lt;/code&gt; to listen at a particular address and port, which is &lt;code&gt;127.0.0.1:8080&lt;/code&gt; in my setting.&lt;/p&gt;

&lt;p&gt;The directives &lt;code&gt;LoadModule&lt;/code&gt; will enable some Apache HTTP modules we need for configuring PHP-FPM such as &lt;code&gt;mod_proxy&lt;/code&gt;and &lt;code&gt;mod_proxy_fcgi&lt;/code&gt; (disabled by default).&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-apacheconf&#34;&gt;Listen 127.0.0.1:8080
...
# LoadModule proxy_module libexec/mod_proxy.so
...
# LoadModule proxy_fcgi_module libexec/mod_proxy_fcgi.so
...
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;Apache server can be started by using either &lt;code&gt;apachectl start&lt;/code&gt; or &lt;code&gt;brew services start httpd&lt;/code&gt;. Note that the latter also installs a snippet to run Apache &lt;code&gt;httpd&lt;/code&gt; as a startup service.&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-bash&#34;&gt;brew services start httpd
brew services list
&lt;/code&gt;&lt;/pre&gt;

&lt;h4 id=&#34;running-and-testing&#34;&gt;Running and Testing&lt;/h4&gt;

&lt;p&gt;We use the following commands to start, stop, or restart &lt;code&gt;httpd&lt;/code&gt;, respectively.&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-bash&#34;&gt;brew services start httpd
brew services stop httpd
brew services restart httpd
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;To see whether Apache &lt;code&gt;httpd&lt;/code&gt; is up and running, you just start your Web browser and point to the URL &lt;a href=&#34;http://localhost:8080&#34;&gt;&lt;code&gt;http://localhost:8080&lt;/code&gt;&lt;/a&gt; and should see a simple Web page saying &lt;em&gt;&amp;ldquo;It works&amp;rdquo;&lt;/em&gt;. We can also check from the command line as well.&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-bash&#34;&gt;$ launchctl list | grep httpd
91962	0	homebrew.mxcl.httpd

$ ps -ef | grep httpd
  501 91962     1   0  8:51AM ??         0:00.07 /usr/local/opt/httpd/bin/httpd -D FOREGROUND
  501 91968 91962   0  8:51AM ??         0:00.04 /usr/local/opt/httpd/bin/httpd -D FOREGROUND
  501 91969 91962   0  8:51AM ??         0:00.04 /usr/local/opt/httpd/bin/httpd -D FOREGROUND
  501 91970 91962   0  8:51AM ??         0:00.04 /usr/local/opt/httpd/bin/httpd -D FOREGROUND
  
$ lsof -Pni4 | grep httpd
httpd     91962 huytran    5u  IPv4 0xd51255ae3385c3d7      0t0  TCP *:* (CLOSED)
httpd     91968 huytran    5u  IPv4 0xd51255ae3385c3d7      0t0  TCP *:* (CLOSED)
httpd     91969 huytran    5u  IPv4 0xd51255ae3385c3d7      0t0  TCP *:* (CLOSED)
httpd     91970 huytran    5u  IPv4 0xd51255ae3385c3d7      0t0  TCP *:* (CLOSED)
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;We can also examine whether Apache server configuration file is correct:&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-bash&#34;&gt;$ apachectl configtest
Syntax OK
$ httpd -t
Syntax OK
&lt;/code&gt;&lt;/pre&gt;

&lt;h3 id=&#34;php-7-http-php-net&#34;&gt;&lt;a href=&#34;http://php.net&#34;&gt;PHP 7&lt;/a&gt;&lt;/h3&gt;

&lt;h4 id=&#34;install-php-and-php-fpm&#34;&gt;Install PHP and PHP-FPM&lt;/h4&gt;

&lt;p&gt;Likewise, I just use Homebrew to install newer/older versions of PHP ranging from 5.x to 7.x. I opt for the stable release of PHP 7.&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-bash&#34;&gt;brew install php72
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;The  default installation of PHP 7 almost covers several useful aspects including a PHP module &lt;code&gt;libphp7.so&lt;/code&gt; that can be integrated with Apache HTTP server via the directive &lt;code&gt;LoadModule&lt;/code&gt; and PHP-FPM that can be used as FastCGI.&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-bash&#34;&gt;$ php -version
PHP 7.2.0 (cli) (built: Dec  2 2017 11:27:08) ( NTS )
Copyright (c) 1997-2017 The PHP Group
Zend Engine v3.2.0, Copyright (c) 1998-2017 Zend Technologies
&lt;/code&gt;&lt;/pre&gt;

&lt;h4 id=&#34;php-configurations&#34;&gt;PHP configurations&lt;/h4&gt;

&lt;p&gt;The main configuration file of PHP is &lt;code&gt;php.ini&lt;/code&gt; as shown below.&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-bash&#34;&gt;Configuration File (php.ini) Path: /usr/local/etc/php/7.2
Loaded Configuration File:         /usr/local/etc/php/7.2/php.ini
Scan for additional .ini files in: /usr/local/etc/php/7.2/conf.d
Additional .ini files parsed:      (none)
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;The default setting in &lt;code&gt;/usr/local/etc/php/7.2/php.ini&lt;/code&gt; is quite sufficient for simple development purposes. We may tweak later if necessary but can leave it for now.&lt;/p&gt;

&lt;h4 id=&#34;starting-php-fpm&#34;&gt;Starting PHP-FPM&lt;/h4&gt;

&lt;p&gt;The configuration for PHP-FPM is &lt;code&gt;/usr/local/etc/php/7.2/php-fpm.conf&lt;/code&gt;. Note the last lines in this file&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-ini&#34;&gt;;include=/usr/local/etc/php/7.1/php-fpm.d/*.conf
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;You can remove the semi-colon to enable the inclusion of other configurations and/or might also change the path to whether it fits your development environment. In the folder &lt;code&gt;/usr/local/etc/php/7.1/php-fpm.d/*&lt;/code&gt;, there is a file &lt;code&gt;www.conf&lt;/code&gt; that can be used as a starting point for setting up your own PHP-FPM.&lt;/p&gt;

&lt;p&gt;Now we can start PHP-FPM to see whether everything is fine before doing some extra configuration steps.&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-bash&#34;&gt;$ brew services start php72
==&amp;gt; Successfully started `php72` (label: homebrew.mxcl.php72)
$ brew services stopÂ php72
Stopping `php72`... (might take a while)
==&amp;gt; Successfully stopped `php72` (label: homebrew.mxcl.php72)
$ brew services restart php72
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;The command &lt;code&gt;brew services start php72&lt;/code&gt; can create the file &lt;code&gt;homebrew.mxcl.php72.plist&lt;/code&gt; in &lt;code&gt;~/Library/LaunchAgents&lt;/code&gt; for starting up.&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-bash&#34;&gt;$ launchctl list | grep php
47728	0	homebrew.mxcl.php72
$ ps -ef | grep php-fpm
...
&lt;/code&gt;&lt;/pre&gt;

&lt;h3 id=&#34;putting-all-together&#34;&gt;Putting all together&lt;/h3&gt;

&lt;p&gt;After basically finishing the installation of Apache, PHP 7 and PHP-FPM, we start putting these pieces together.&lt;/p&gt;

&lt;h4 id=&#34;configurating-a-php-fpm-pool&#34;&gt;Configurating a &amp;lsquo;PHP-FPM&amp;rsquo; pool&lt;/h4&gt;

&lt;p&gt;PHP-FPM supports multiple resource &lt;strong&gt;&lt;em&gt;pools&lt;/em&gt;&lt;/strong&gt;. Each pool defines how PHP-FPM will create and manage processes. Let&amp;rsquo;s start with enabling the inclusion and handling of pools in &lt;code&gt;/usr/local/etc/php/7.2/php-fpm.conf&lt;/code&gt; by changing the following line&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-ini&#34;&gt;;include=/usr/local/etc/php/7.2/php-fpm.d/*.conf
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;to (i.e. uncommenting it)&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-ini&#34;&gt;include=/usr/local/etc/php/7.2/php-fpm.d/*.conf
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;Then we can leverage the stock configuration in &lt;code&gt;/usr/local/etc/php/7.2/php-fpm.d/www.conf&lt;/code&gt;. In my case, I have cleaned up &lt;code&gt;www.conf&lt;/code&gt; and kept a simple configuration as following for the sake of readability. The configuration explains for itself.&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-ini&#34;&gt;[www]
user = _www
group = _www
listen = 127.0.0.1:9072
pm = dynamic
pm.max_children = 5
pm.start_servers = 2
pm.min_spare_servers = 1
pm.max_spare_servers = 3
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;The most important setting of each pool is the &lt;em&gt;TCP socket&lt;/em&gt; (including &lt;em&gt;IP address&lt;/em&gt; and &lt;em&gt;port&lt;/em&gt;) or Unix domain socket (UDS) that PHP-FPM will be receiving FastCGI requests. This will be set using the directive &lt;code&gt;listen&lt;/code&gt; . A typical setting of PHP-FPM is &lt;code&gt;listen = 127.0.0.1:9000&lt;/code&gt;. As I might want to install multiple PHP versions for testing, I will change the port to &lt;code&gt;9072&lt;/code&gt; that corresponds to the PHP version 7.2.&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;Note that we can also configure PHP-FPM to serve at a &lt;a href=&#34;https://en.wikipedia.org/wiki/Unix_domain_socket&#34;&gt;Unix domain socket&lt;/a&gt; (UDS) because PHP-FPM and &lt;code&gt;httpd&lt;/code&gt; processes are running in the same host. To do that, the directive &lt;code&gt;listen&lt;/code&gt; must be changed, for example, &lt;code&gt;listen = /usr/local/var/run/php72-fpm.sock&lt;/code&gt;. This approach would need extra effort to configure Apache to use PHP-FPM via UDS that we will visit later near the end of this guide.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;Now as I want to check whether PHP-FPM will be up and running with the above changes, I restart PHP-FPM and check the open ports &lt;code&gt;9072&lt;/code&gt;.&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-bash&#34;&gt;$ brew services restart php72
$ ps -ef | grep php-fpm
...
$ lsof -Pni4 | grep php-fpm
php-fpm   53180 huytran    6u  IPv4 0xd51255ae2d4097b7      0t0  TCP 127.0.0.1:9072 (LISTEN)
php-fpm   53187 huytran    0u  IPv4 0xd51255ae2d4097b7      0t0  TCP 127.0.0.1:9072 (LISTEN)
php-fpm   53188 huytran    0u  IPv4 0xd51255ae2d4097b7      0t0  TCP 127.0.0.1:9072 (LISTEN)
&lt;/code&gt;&lt;/pre&gt;

&lt;h4 id=&#34;php-fpm-delegation&#34;&gt;PHP-FPM Delegation&lt;/h4&gt;

&lt;p&gt;I can define virtual hosts in Apache that suit my needs for separating different development projects. Instead of creating one large &lt;code&gt;httpd.conf&lt;/code&gt;, I will create separate virtual host configurations. Again, I will start with the exemplary virtual host configuration provided in &lt;code&gt;/usr/local/etc/httpd/extra/httpd-vhosts.conf&lt;/code&gt;.&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;Enabling &amp;lsquo;mod_proxy&amp;rsquo; and &amp;lsquo;mod_proxy_fcgi&amp;rsquo;&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;Change the following lines in &lt;code&gt;/usr/local/etc/httpd/httpd.conf&lt;/code&gt;&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-apacheconf&#34;&gt;# LoadModule proxy_module libexec/mod_proxy.so
...
# LoadModule proxy_fcgi_module libexec/mod_proxy_fcgi.so
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;to&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-apacheconf&#34;&gt;LoadModule proxy_module libexec/mod_proxy.so
...
LoadModule proxy_fcgi_module libexec/mod_proxy_fcgi.so
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;&lt;strong&gt;Defining Virtual Hosts&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;I want to define a PHP development project residing in &lt;code&gt;/Users/huytran/working/dev/dev-web/php&lt;/code&gt;. Therefore, I change &lt;code&gt;/usr/local/etc/httpd/httpd.conf&lt;/code&gt;&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-apacheconf&#34;&gt;#Include /usr/local/etc/httpd/extra/httpd-vhosts.conf
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;to&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-apacheconf&#34;&gt;Include /usr/local/etc/httpd/extra/httpd-vhosts.conf
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;and then create a file &lt;code&gt;/usr/local/etc/httpd/extra/httpd-vhosts.conf&lt;/code&gt;&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-apacheconf&#34;&gt;&amp;lt;VirtualHost *:8080&amp;gt;
    ServerName php7.test
    DocumentRoot &amp;quot;/Users/huytran/working/dev/dev-web/php&amp;quot;
    ProxyPassMatch ^/(.*\.php(/.*)?)$ fcgi://127.0.0.1:9072/Users/huytran/working/dev/dev-web/php/$1
    DirectoryIndex index.php index.html
	&amp;lt;Directory &amp;quot;/Users/huytran/working/dev/dev-web/php&amp;quot;&amp;gt;
		Require all granted
	&amp;lt;/Directory&amp;gt;
&amp;lt;/VirtualHost&amp;gt;
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;Further information on Apache virtual hosts can be found &lt;a href=&#34;https://httpd.apache.org/docs/current/vhosts&#34;&gt;here&lt;/a&gt; or &lt;a href=&#34;https://httpd.apache.org/docs/current/vhosts/examples.html&#34;&gt;here&lt;/a&gt;. I can briefly explain some relevant directives used in my virtual host configuration:&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;&lt;p&gt;&lt;em&gt;&amp;lt;VirtualHost&amp;gt;&lt;/em&gt;&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;https://httpd.apache.org/docs/current/mod/core.html#virtualhost&#34;&gt;&lt;VirtualHost&gt;&lt;/a&gt; is used to define a new virtual host with respect to a specific hostname or IP address.&lt;/li&gt;
&lt;li&gt;Syntax: &lt;code&gt;&amp;lt;VirtualHost addr[:port] [addr[:port]] ...&amp;gt; ... &amp;lt;/VirtualHost&amp;gt;&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;Here I use the wildcard &lt;code&gt;*:*&lt;/code&gt; to match any IP addresses and ports. Note that the port specified in a &lt;code&gt;&amp;lt;VirtualHost&amp;gt;&lt;/code&gt; does not affect the real port Apache     &lt;code&gt;httpd&lt;/code&gt; is listening.&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;

&lt;li&gt;&lt;p&gt;&lt;em&gt;ServerName&lt;/em&gt;&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;https://httpd.apache.org/docs/current/mod/core.html#servername&#34;&gt;ServerName&lt;/a&gt; is recommended in each &lt;code&gt;&amp;lt;VirtualHost&amp;gt;&lt;/code&gt; for resolution and matching. If absent, Apache will use the global &lt;code&gt;ServerName&lt;/code&gt; stated in &lt;code&gt;httpd.conf&lt;/code&gt;.&lt;/li&gt;
&lt;li&gt;In my case, I assign different &lt;code&gt;ServerName&lt;/code&gt;, &lt;code&gt;php7.test&lt;/code&gt; and &lt;code&gt;htmljs.test&lt;/code&gt;, respectively, for each project to distinguish them. As Apache mainly matches virtual hosts via IP addresses and it will resolve host names based on DNS servers, I will configure corresponding hostname resolution for &lt;code&gt;php7.test&lt;/code&gt; and &lt;code&gt;htmljs.test&lt;/code&gt; using &lt;code&gt;/etc/hosts&lt;/code&gt; or &lt;em&gt;DNSMasq&lt;/em&gt;.&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;

&lt;li&gt;&lt;p&gt;&lt;em&gt;DocumentRoot&lt;/em&gt;&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;https://httpd.apache.org/docs/current/mod/core.html&#34;&gt;DocumentRoot&lt;/a&gt; specifies the place where Apache &lt;code&gt;httpd&lt;/code&gt; will look for files to serve relevant incoming request. In each case, &lt;code&gt;DocumentRoot&lt;/code&gt; will be the absolute path of my development project.&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;

&lt;li&gt;&lt;p&gt;&lt;em&gt;ProxyPassMatch&lt;/em&gt;&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;https://httpd.apache.org/docs/current/mod/mod_proxy.html#proxypassmatch&#34;&gt;ProxyPassMatch&lt;/a&gt; is part of &lt;code&gt;mod_proxy&lt;/code&gt; that can map remote servers into local URLs using regular expressions.&lt;/li&gt;
&lt;li&gt;Syntax: &lt;code&gt;ProxyPassMatch [regex] !|url [key=value [key=value ...]]&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;When Apache &lt;code&gt;httpd&lt;/code&gt; receives a request for a certain PHP file (e.g. &lt;code&gt;test.php&lt;/code&gt;) then it needs PHP to handle that request. The regular expression &lt;code&gt;^/(.*\.php(/.*)?)$&lt;/code&gt; is used to check whether the incoming request is for a &lt;code&gt;.php&lt;/code&gt; file.&lt;/li&gt;
&lt;li&gt;&lt;code&gt;$1&lt;/code&gt; is called back-reference, as it refers to the matched part of the regular expression corresponding to the outermost pair of parentheses. In case the expression matches the incoming request URI (i.e. the request corresponds to a file &lt;code&gt;.php&lt;/code&gt;, for instance, &lt;code&gt;/test.php&lt;/code&gt;) &lt;code&gt;$1&lt;/code&gt; will represent the request URI. As a request is often treated as relative path from the &lt;code&gt;DocumentRoot&lt;/code&gt;, we must add &lt;code&gt;DocumentRoot&lt;/code&gt; path before &lt;code&gt;$1&lt;/code&gt; to form an exact absolute path and hand it over to PHP-FPM by adding the prefix &lt;code&gt;fcgi://127.0.0.1:9072&lt;/code&gt;. Note that PHP-FPM is serving at &lt;a href=&#34;#configuring&#34;&gt;&lt;code&gt;127.0.0.1:9072&lt;/code&gt;&lt;/a&gt; and &lt;code&gt;fcgi://&lt;/code&gt; denotes the scheme FastCGI provided by &lt;code&gt;mod_proxy_fcgi&lt;/code&gt;.&lt;/li&gt;
&lt;li&gt;The project &lt;strong&gt;&lt;em&gt;htmljs.test&lt;/em&gt;&lt;/strong&gt; does not need PHP processing, therefore I do not set the directive &lt;code&gt;ProxyPassMatch&lt;/code&gt; there.&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;

&lt;li&gt;&lt;p&gt;&lt;em&gt;DirectoryIndex&lt;/em&gt;&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;https://httpd.apache.org/docs/current/mod/mod_dir.html#directoryindex&#34;&gt;DirectoryIndex&lt;/a&gt; sets the list of resources for an indexing request. As I want to use PHP, I set &lt;code&gt;index.php&lt;/code&gt; as index resource backed up by the default &lt;code&gt;index.html&lt;/code&gt;. Note that &lt;code&gt;DirectoryIndex&lt;/code&gt; can also be set globally in &lt;code&gt;httpd.conf&lt;/code&gt; that affects the main server and can be inherited in all virtual hosts.&lt;/li&gt;
&lt;/ul&gt;

&lt;pre&gt;&lt;code class=&#34;language-apacheconf&#34;&gt;&amp;lt;IfModule dir_module&amp;gt;
    DirectoryIndex index.php index.html
&amp;lt;/IfModule&amp;gt;
&lt;/code&gt;&lt;/pre&gt;

&lt;ul&gt;
&lt;li&gt;&lt;p&gt;Note that &lt;code&gt;DirectoryIndex index.html&lt;/code&gt; is the default global option defined in &lt;code&gt;httpd.conf&lt;/code&gt;.&lt;/p&gt;&lt;/li&gt;

&lt;li&gt;&lt;p&gt;&lt;em&gt;&amp;lt;Directory&amp;gt;&lt;/em&gt;&lt;/p&gt;&lt;/li&gt;

&lt;li&gt;&lt;p&gt;&lt;a href=&#34;https://httpd.apache.org/docs/current/mod/core.html#directory&#34;&gt;&lt;Directory&gt;&lt;/a&gt; encloses the settings for folders, subfolders, and their contents.&lt;/p&gt;&lt;/li&gt;

&lt;li&gt;&lt;p&gt;&lt;a href=&#34;https://httpd.apache.org/docs/current/mod/mod_authz_core.html#require&#34;&gt;&lt;code&gt;Require all granted&lt;/code&gt;&lt;/a&gt; : access is allowed unconditionally (authorization &lt;code&gt;mod_authz_core&lt;/code&gt;). We need this, otherwise Apache will return an error &lt;code&gt;403 Forbidden&lt;/code&gt;.&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;h4 id=&#34;hostname-resolution&#34;&gt;Hostname Resolution&lt;/h4&gt;

&lt;p&gt;As mentioned before, I will use the virtual host &lt;code&gt;php7.test&lt;/code&gt; in my macOS to refer to my corresponding Web development projects. The hostname is not known by Apache. Thus, I must tell it how to resolve this hostname. In my setting, all virtual hosts are sharing in the same local computer with the address &lt;code&gt;127.0.0.1&lt;/code&gt;. A simple  solution is to change the file &lt;code&gt;/etc/hosts&lt;/code&gt; where macOS will look for when resolving hostnames. This solution requires sufficient administration privilege.&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-bash&#34;&gt;$ sudo open -e /etc/hosts
Password: (enter your password here)
&lt;/code&gt;&lt;/pre&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;After entering the administrator password, I will add two following lines to &lt;code&gt;/etc/hosts&lt;/code&gt;.&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;127.0.0.1    php7.test
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;In case either you do not want to mess up system files like &lt;code&gt;/etc/hosts&lt;/code&gt; or you have several development projects, you can leverage &lt;code&gt;dnsmasq&lt;/code&gt; for automatically resolving hostnames with very simple configurations. Note that this is also the reason I chose the &lt;code&gt;.test&lt;/code&gt; for all of my development projects such that I can use &lt;code&gt;dnsmasq&lt;/code&gt; and only &lt;strong&gt;one line directive&lt;/strong&gt; to resolve the TLD (Top-Level Domain) &lt;code&gt;test&lt;/code&gt;. You can surely pick any TLD other than &lt;code&gt;test&lt;/code&gt; .&lt;/p&gt;

&lt;h4 id=&#34;testing-apache-and-php&#34;&gt;Testing Apache and PHP&lt;/h4&gt;

&lt;p&gt;Apart from the aforementioned tests, we need to check whether the integration of Apache and PHP-FPM is working. Let&amp;rsquo;s create a file &lt;code&gt;index.php&lt;/code&gt; in &lt;code&gt;/Users/huytran/working/dev/dev-web/php&lt;/code&gt;&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-php&#34;&gt;&amp;lt;?php
  echo &#39;PHP Development Project&#39;;
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;Restart &lt;code&gt;httpd&lt;/code&gt; and PHP-FPM to apply these changes.&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-bash&#34;&gt;$ brew services restart httpd
$ brew services restart php72
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;Given no problems, the servers should be restarted smoothly. Then open your Web browser to the following URLs &lt;a href=&#34;http://php7.test:8080&#34;&gt;&lt;code&gt;http://php7.test:8080&lt;/code&gt;&lt;/a&gt;. If you see the content created above, our configuration is working.&lt;/p&gt;

&lt;h3 id=&#34;dnsmasq-http-www-thekelleys-org-uk-dnsmasq-doc-html&#34;&gt;&lt;a href=&#34;http://www.thekelleys.org.uk/dnsmasq/doc.html&#34;&gt;DNSMasq&lt;/a&gt;&lt;/h3&gt;

&lt;p&gt;Instead of altering system hosts &lt;code&gt;/etc/hosts&lt;/code&gt;, I can make use of &lt;code&gt;dnsmasq&lt;/code&gt; to conveniently resolve many hostnames used in my virtual hosts.&lt;/p&gt;

&lt;h4 id=&#34;installing-dnsmasq&#34;&gt;Installing DNSMasq&lt;/h4&gt;

&lt;pre&gt;&lt;code class=&#34;language-bash&#34;&gt;# update homebrew and install dnsmasq
$ brew update &amp;amp;&amp;amp; brew install dnsmasq
# Copy the dnsmasq daemon configuration file to be loaded at system startup time
$ sudo cp $(brew list dnsmasq | grep /homebrew.mxcl.dnsmasq.plist$) /Library/LaunchDaemons/
# start dnsmasq
$ sudo launchctl load -w /Library/LaunchDaemons/homebrew.mxcl.dnsmasq.plist
&lt;/code&gt;&lt;/pre&gt;

&lt;h4 id=&#34;configuring-dnsmasq&#34;&gt;Configuring DNSMasq&lt;/h4&gt;

&lt;p&gt;After installing DNSMasq, let&amp;rsquo;s open the configuration file&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-bash&#34;&gt;$ open -e /usr/local/etc/dnsmasq.conf
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;and add the following line at the end.&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;address=/app/127.0.0.1
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;The above configuration line tells DNSMasq to resolve the TLD &lt;code&gt;dev&lt;/code&gt; to the local IP address &lt;code&gt;127.0.0.1&lt;/code&gt;. You can now use any hostnames like &lt;code&gt;this.is.a.development.project.test&lt;/code&gt; in Apache virtual hosts.&lt;/p&gt;

&lt;h4 id=&#34;configuring-macos-to-use-dnsmasq&#34;&gt;Configuring macOS to use DNSMasq&lt;/h4&gt;

&lt;p&gt;We have to tell macOS that DNSMasq is now a nameserver running at the local host. The configuration file is &lt;code&gt;/etc/resolv.conf&lt;/code&gt; specifies the nameservers for looking up hostnames. On the one hand, we should not mess up the system setting. Moreover, macOS might overwrite &lt;code&gt;/etc/resolv.conf&lt;/code&gt; when there are changes in Network setting. An elegant solution is to create a file in the folder &lt;code&gt;/etc/resolver/&lt;/code&gt;with the exact TLD managed by DNSMasq.&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-bash&#34;&gt;$ sudo mkdir -p /etc/resolver/
$ sudo sh -c &#39;echo &amp;quot;nameserver 127.0.0.1&amp;quot; &amp;gt; /etc/resolver/test&#39;
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;The aforementioned commands needs administrator privileges and will create a file &lt;code&gt;test&lt;/code&gt; with the content &lt;code&gt;nameserver 127.0.0.1&lt;/code&gt; in the folder &lt;code&gt;/etc/resolver/&lt;/code&gt;.&lt;/p&gt;

&lt;h4 id=&#34;testing-dnsmasq&#34;&gt;Testing DNSMasq&lt;/h4&gt;

&lt;p&gt;Now we can delete the lines added before in &lt;code&gt;/etc/hosts&lt;/code&gt; and start &lt;code&gt;dnsmasq&lt;/code&gt; (as &lt;code&gt;root&lt;/code&gt;) and test the resolving of hostnames.&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-bash&#34;&gt;# start dnsmasq
$ sudo brew services start dnsmasq

# ping the hostnames
$ ping -c 1 php7.test
PING php7.test (127.0.0.1): 56 data bytes
64 bytes from 127.0.0.1: icmp_seq=0 ttl=64 time=0.040 ms

# query hostname using dnsmasq running at 127.0.0.1
$ dig php7.test @127.0.0.1
...
;; ANSWER SECTION:
php7.test.		0	IN	A	127.0.0.1

# test arbitrary hostnames ending with .test
$ dig an.arbitrary.host.test @127.0.0.1
&lt;/code&gt;&lt;/pre&gt;

&lt;h3 id=&#34;using-proxy-fastcgi-via-handler&#34;&gt;Using Proxy FastCGI via Handler&lt;/h3&gt;

&lt;p&gt;Instead of configuring &lt;code&gt;ProxyPassMatch&lt;/code&gt; for each individual virtual host to handle &lt;code&gt;.php&lt;/code&gt; files, we can also set up directives in Apache &lt;code&gt;httpd.conf&lt;/code&gt; (global scope) or at the beginning of the virtual host configuration &lt;code&gt;localhost.conf&lt;/code&gt; (virtual host scope) via handlers.&lt;/p&gt;

&lt;p&gt;1) First comment out or delete the line &lt;code&gt;ProxyPassMatch ...&lt;/code&gt; in the virtual host configuration &lt;code&gt;/usr/local/etc/httpd/extra/httpd-vhosts.conf&lt;/code&gt;.&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-apacheconf&#34;&gt;# ProxyPassMatch ^/(.*\.php(/.*)?)$ fcgi://127.0.0.1:9072/Users/huytran/working/dev/dev-web/php/$1
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;2) Then, add the following lines to either the end of  &lt;code&gt;/usr/local/etc/httpd/httpd.conf&lt;/code&gt; or the beginning of &lt;code&gt;/usr/local/etc/httpd/extra/httpd-vhosts.conf&lt;/code&gt;.&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-apacheconf&#34;&gt;&amp;lt;Proxy &amp;quot;fcgi://localhost:9072/&amp;quot; enablereuse=on max=10&amp;gt;
&amp;lt;/Proxy&amp;gt;
&amp;lt;FilesMatch &amp;quot;\.php$&amp;quot;&amp;gt;
    &amp;lt;If &amp;quot;-f %{REQUEST_FILENAME}&amp;quot;&amp;gt;
        SetHandler &amp;quot;proxy:fcgi://127.0.0.1:9072/&amp;quot;
    &amp;lt;/If&amp;gt;
&amp;lt;/FilesMatch&amp;gt;
&lt;/code&gt;&lt;/pre&gt;

&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;https://httpd.apache.org/docs/current/mod/core.html#filesmatch&#34;&gt;&amp;lt;FilesMatch&amp;gt;&lt;/a&gt; : defines the scope of the enclosed directives by filenames that match the regular expression.

&lt;ul&gt;
&lt;li&gt;&lt;em&gt;Syntax&lt;/em&gt;: &lt;code&gt;&amp;lt;FilesMatch regex&amp;gt; ... &amp;lt;/FilesMatch&amp;gt;&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://httpd.apache.org/docs/current/mod/core.html#sethandler&#34;&gt;SetHandler&lt;/a&gt;: forces matching files to be processed by a handler.

&lt;ul&gt;
&lt;li&gt;&lt;em&gt;Syntax&lt;/em&gt;: &lt;code&gt;SetHandler handler-name|none|expression&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;3) Restart &lt;code&gt;httpd&lt;/code&gt;&lt;/p&gt;

&lt;h3 id=&#34;handling-php-via-unix-domain-sockets&#34;&gt;Handling PHP via Unix Domain Sockets&lt;/h3&gt;

&lt;p&gt;As mentioned before, PHP-FPM can serve on &lt;em&gt;Unix domain sockets (UDS)&lt;/em&gt;, too. UDS is widely used in the Unix/Linux world for inter-process communication. To enable PHP-FPM listening on UDS, open file &lt;code&gt;/usr/local/etc/php/7.1/php-fpm.d/www.conf&lt;/code&gt; and change the directive  &lt;code&gt;listen&lt;/code&gt; .&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-ini&#34;&gt;[www]
...
listen = /usr/local/var/run/php72-fpm.sock
...
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;Now we must change the Apache configuration to adapt to UDS as well. In case we use &lt;code&gt;ProxyPassMatch&lt;/code&gt; directive, change it like this:&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-apacheconf&#34;&gt;ProxyPassMatch ^/(.*\.php(/.*)?)$ unix:/usr/local/var/run/php72-fpm.sock|fcgi://127.0.0.1:9072/Users/huytran/working/dev/dev-web/php
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;The change is to add &lt;code&gt;unix:/usr/local/var/run/php72-fpm.sock|&lt;/code&gt; before &lt;code&gt;fcgi://...&lt;/code&gt; and remove the captured request URI &lt;code&gt;/$1&lt;/code&gt; at the end.&lt;/p&gt;

&lt;p&gt;Similarly, if we switch to Apache handler as above, we update the Apache configuration accordingly.&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-apacheconf&#34;&gt;&amp;lt;Proxy &amp;quot;unix:/usr/local/var/run/php72-fpm.sock|fcgi://localhost:9072/&amp;quot; enablereuse=on max=10&amp;gt;
&amp;lt;/Proxy&amp;gt;
&amp;lt;FilesMatch &amp;quot;\.php$&amp;quot;&amp;gt;
    &amp;lt;If &amp;quot;-f %{REQUEST_FILENAME}&amp;quot;&amp;gt;
        SetHandler &amp;quot;proxy:unix:/usr/local/var/run/php72-fpm.sock|fcgi://127.0.0.1:9072/&amp;quot;
    &amp;lt;/If&amp;gt;
&amp;lt;/FilesMatch&amp;gt;
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;We should ensure the configurations are good and then restart the servers afterwards.&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-bash&#34;&gt;# check Apache config
$ apachectl -t
Syntax OK
# check php-fpm config
$ php-fpm -t
[30-Sep-2017 19:39:46] NOTICE: configuration file /usr/local/etc/php/7.2/php-fpm.conf test is successful
# restart servers
$ brew services restart httpd
$ brew services restart php72
&lt;/code&gt;&lt;/pre&gt;
</description>
      </item>
    
      <item>
        <title>CÃ¡ch xÆ°ng hÃ´ há» hÃ ng (st)</title>
        <link>https://htr3n.github.io/2016/08/cach-xung-ho/</link>
        <pubDate>Sun, 07 Aug 2016 00:00:00 +0000</pubDate>
        
        <guid>ea6fd974f85bfad39608b10181e73ad4</guid>
        <description>

&lt;p&gt;BÃ i sÆ°u táº§m vá» cÃ¡ch xÆ°ng hÃ´ vá»›i há» hÃ ng ná»™i ngoáº¡i lÆ°u láº¡i Ä‘Ã¢y thá»ƒ tham kháº£o vá» sau.&lt;/p&gt;

&lt;h2 id=&#34;vá»›i-há»-ná»™i-tá»©c-lÃ -há»-hÃ ng-bÃªn-cha&#34;&gt;Vá»›i há» ná»™i (tá»©c lÃ  há» hÃ ng bÃªn cha)&lt;/h2&gt;

&lt;ul&gt;
&lt;li&gt;CÃ¡c anh cá»§a ba vÃ  vá»£ cá»§a há» = bÃ¡c&lt;/li&gt;
&lt;li&gt;CÃ¡c em trai cá»§a ba = chÃº.&lt;/li&gt;
&lt;li&gt;Vá»£ cá»§a em trai cá»§a ba = thÃ­m.&lt;/li&gt;
&lt;li&gt;CÃ¡c em gÃ¡i, chá»‹ gÃ¡i cá»§a = cÃ´.&lt;/li&gt;
&lt;li&gt;Chá»“ng cá»§a em gÃ¡i, chá»‹ gÃ¡i cá»§a ba = dÆ°á»£ng.&lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&#34;vá»›i-há»-ngoáº¡i-tá»©c-há»-hÃ ng-bÃªn-máº¹&#34;&gt;Vá»›i há» ngoáº¡i (tá»©c há» hÃ ng bÃªn máº¹)&lt;/h2&gt;

&lt;ul&gt;
&lt;li&gt;CÃ¡c anh, em trai cá»§a máº¹ = cáº­u.&lt;/li&gt;
&lt;li&gt;Vá»£ cá»§a anh trai, em trai cá»§a máº¹ = má»£&lt;/li&gt;
&lt;li&gt;CÃ¡c chá»‹, em gÃ¡i cá»§a máº¹ = dÃ¬.&lt;/li&gt;
&lt;li&gt;Chá»“ng cÃ¡c chá»‹, em gÃ¡i cá»§a máº¹ = dÆ°á»£ng.&lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&#34;cÃ²n-cÃ¡ch-xÆ°ng-hÃ´-bÃªn-gia-Ä‘Ã¬nh-sui-gia&#34;&gt;CÃ²n cÃ¡ch xÆ°ng hÃ´ bÃªn gia Ä‘Ã¬nh sui gia&lt;/h2&gt;

&lt;ul&gt;
&lt;li&gt;Vá»£ cá»§a em trai = em dÃ¢u.&lt;/li&gt;
&lt;li&gt;Chá»“ng cá»§a em gÃ¡i = em rá»ƒ.&lt;/li&gt;
&lt;li&gt;Vá»£ cá»§a anh trai = chá»‹ dÃ¢u.&lt;/li&gt;
&lt;li&gt;Chá»“ng cá»§a chá»‹ gÃ¡i = anh rá»ƒ.&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;Äáº·c biá»‡t báº¡n cÃ³ tá»›i 8 cá»‘ gá»“m 4 cá»‘ lÃ  Ã´ng bÃ  ná»™i ba, Ã´ng bÃ  ngoáº¡i ba vÃ  4 cá»‘ ná»¯a lÃ  Ã´ng bÃ  ná»™i máº¹, Ã´ng bÃ  ngoáº¡i máº¹.&lt;/p&gt;

&lt;p&gt;NgÆ°á»i miá»n Nam gá»™p chung cÃ¡c cá»‘ Ã´ng, cá»‘ bÃ  (cÃ¡c cáº·p) thÃ nh má»™t gá»i cho dá»… nhÆ°ng nÃªn nhá»› báº¡n chá»‰ cÃ³ duy nháº¥t 1 cá»‘ ná»™i lÃ  Ã´ng bÃ  ná»™i cá»§a ba cÃ²n 3 cáº·p Ã´ng bÃ  cá»‘ kia lÃ  cá»‘ ngoáº¡i háº¿t theo quy Ä‘á»‹nh.&lt;/p&gt;
</description>
      </item>
    
      <item>
        <title>Khen con (st)</title>
        <link>https://htr3n.github.io/2015/07/khen-con-st/</link>
        <pubDate>Wed, 01 Jul 2015 00:00:00 +0000</pubDate>
        
        <guid>5101faee12a6a170cceac095e50f7d80</guid>
        <description>

&lt;h2 id=&#34;thÃ³i-quen-khen-ngá»£i-con-giá»i-hay-kháº£-nÄƒng-sáºµn-cÃ³-cá»§a-con&#34;&gt;ThÃ³i quen khen ngá»£i con giá»i hay kháº£ nÄƒng sáºµn cÃ³ cá»§a con&lt;/h2&gt;

&lt;p&gt;MÃ¬nh Ä‘á»ƒ tháº¥y khÃ´ng chá»‰ cha máº¹ Viá»‡t mÃ  cáº£ cha máº¹ ngÆ°á»i nÆ°á»›c ngoÃ i ná»¯a thÆ°á»ng hay con &amp;ldquo;giá»i quÃ¡&amp;rdquo; &amp;ldquo;thÃ´ng minh quÃ¡&amp;rdquo; &amp;ldquo;sao con lÃ m nhanh váº­y&amp;rdquo;. Má»›i hÃ´m qua thÃ´i, mÃ¬nh Ä‘á»ƒ Ã½ cÃ³ má»™t bÃ  máº¹ Ä‘á»‘ Ä‘á»©a con hÆ¡n 2 tuá»•i cá»§a mÃ¬nh &amp;ldquo;con chÃ³ kÃªu nhÆ° tháº¿ nÃ o&amp;rdquo;, Ä‘á»©a bÃ© tráº£ lá»i &amp;ldquo;gÃ¢u,gÃ¢u&amp;rdquo;, tháº¿ lÃ  bÃ  máº¹ khen luÃ´n &amp;ldquo;giá»i quÃ¡&amp;rdquo;. NgÃ y trÆ°á»›c cÃ³ dá»‹p Ä‘i nhÃ  thá», mÃ¬nh Ä‘á»ƒ Ã½ tháº¥y nhá»¯ng ngÆ°á»i á»Ÿ trong Nam, cá»© tráº» con lÃ m gÃ¬ tá»‘t hay ngoan cÅ©ng quen miá»‡ng khen &amp;ldquo;giá»i quÃ¡&amp;rdquo; &amp;ldquo;ngoan quÃ¡&amp;rdquo;.&lt;/p&gt;

&lt;p&gt;Nhá»¯ng khen ngá»£i nhÆ° tháº¿ nÃ y cÃ³ áº£nh hÆ°á»Ÿng tá»›i sá»± phÃ¡t triá»ƒn tÃ­nh cÃ¡ch, cÃ¡ch nhÃ¬n nháº­n váº¥n Ä‘á» cá»§a tráº» nhÆ° tháº¿ nÃ o?&lt;/p&gt;

&lt;h2 id=&#34;khen-ngá»£i-con-giá»i-thÃ´ng-minh-lÃ -khÃ´ng-tá»‘t&#34;&gt;Khen ngá»£i con giá»i, thÃ´ng minh lÃ  khÃ´ng tá»‘t&lt;/h2&gt;

&lt;p&gt;Khen ngá»£i con cÃ¡i lÃ  má»™t viá»‡c bá»‘ máº¹ nÃªn lÃ m vÃ¬ lá»i khen giÃºp tráº» Ä‘Æ°á»£c khÃ­ch lá»‡ vÃ  tá»± tin hÆ¡n. NhÆ°ng khÃ´ng pháº£i lá»i khen nÃ o cÅ©ng cÃ³ tÃ¡c dá»¥ng nhÆ° váº­y. NghiÃªn cá»©u chá»‰ ra ráº±ng, khen ngá»£i con cÃ¡i lÃ  &amp;ldquo;giá»i vÃ  thÃ´ng minh&amp;rdquo; má»™t cÃ¡ch chung chung tháº­m chÃ­ sáº½ cÃ³ tÃ¡c dá»¥ng ngÆ°á»£c láº¡i. CÃ¡ch cha máº¹ khen ngá»£i con cÃ¡i cÅ©ng áº£nh hÆ°á»Ÿng ráº¥t lá»›n Ä‘áº¿n kháº£ nÄƒng Ä‘á»‘i máº·t vá»›i tháº¥t báº¡i, sáºµn sÃ ng cháº¥p nháº­n thá»­ thÃ¡ch vÃ  kiÃªn trÃ¬ trÆ°á»›c nhá»¯ng váº¥n Ä‘á» khÃ³.&lt;/p&gt;

&lt;p&gt;Theo nghiÃªn cá»©u cá»§a Carol Dwreck, Khi Ä‘á»‘i máº·t vá»›i nhá»¯ng váº¥n Ä‘á» khÃ³ (hÆ¡n kháº£ nÄƒng hiá»‡n táº¡i cá»§a mÃ¬nh), nhá»¯ng Ä‘á»©a tráº» quen Ä‘Æ°á»£c khen lÃ  thÃ´ng minh cÃ³ xu hÆ°á»›ng rá»¥t rÃ¨, khÃ´ng muá»‘n giáº£i quyáº¿t, do Ä‘Ã³ chÃºng tá»± háº¡n cháº¿ cÆ¡ há»™i há»c há»i, nÃ¢ng cao kiáº¿n thá»©c, kÄ© nÄƒng cá»§a mÃ¬nh. NgÆ°á»£c láº¡i nhá»¯ng Ä‘á»©a tráº» thÆ°á»ng Ä‘Æ°á»£c khen ngá»£i bá»Ÿi sá»± ná»— lá»±c cá»§a mÃ¬nh thÃ¬ vui váº», tháº­m chÃ­ ráº¥t yÃªu thÃ­ch nhá»¯ng váº¥n Ä‘á» khÃ³. TrÆ°á»›c váº¥n Ä‘á» khÃ³, nhá»¯ng Ä‘á»©a tráº» nÃ y tháº­m chÃ­ cÃ²n reo lÃªn &amp;ldquo;Tháº­t lÃ  thÃº vá»‹, chÃ¡u thÃ­ch nhá»¯ng bÃ i toÃ¡n hÃ³c bÃºa kiá»ƒu nÃ y&amp;rdquo;. VÃ  khi chÃºng tháº¥t báº¡i, nhá»¯ng Ä‘á»©a tráº» Ä‘Æ°á»£c khen lÃ  thÃ´ng minh thÆ°á»ng cáº£m tháº¥y máº¥t Ä‘i tá»± tin, trong khi nhá»¯ng Ä‘á»©a tráº» Ä‘Æ°á»£c khen Ä‘Ã£ ná»— lá»±c nÃ³i &amp;ldquo;cÃ³ thá»ƒ chÃ¡u Ä‘Ã£ chÆ°a cá»‘ gáº¯ng háº¿t sá»©c mÃ¬nh&amp;rdquo;.&lt;/p&gt;

&lt;p&gt;Dr. Dweck nÃ³i &amp;ldquo;Khen ngá»£i trÃ­ thÃ´ng minh cá»§a tráº» khÃ´ng nhá»¯ng khÃ´ng nÃ¢ng cao sá»± tá»± tin cá»§a tráº» mÃ  cÃ²n khuyáº¿n khÃ­ch chÃºng quen vá»›i viá»‡c lo láº¯ng sá»£ tháº¥t báº¡i vÃ  sáº½ láº£ng trÃ¡nh khÃ´ng cháº¥p nháº­n thá»­ thÃ¡ch&amp;rdquo; &amp;ldquo;Tuy nhiÃªn khi tráº» Ä‘Æ°á»£c dáº¡y vá» gia trá»‹ cá»§a viá»‡c táº­p trung, tÃ¬m chiáº¿n lÆ°á»£c vÃ  chÄƒm chá»‰ háº¿t sá»©c mÃ¬nh khi Ä‘á»‘i máº¯t vá»›i nhá»¯ng váº¥n Ä‘á» khÃ³ trong há»c táº­p, chÃºng sáº½ Ä‘Æ°á»£c khuyáº¿n khÃ­ch giá»¯ vá»¯ng Ä‘á»™ng lá»±c, sá»± tá»± tin vÃ  thÃ nh thÃ­ch cá»§a mÃ¬nh&amp;rdquo;&lt;/p&gt;

&lt;p&gt;&amp;ldquo;Nhá»¯ng Ä‘á»©a tráº» Ä‘Æ°á»£c khen ngá»£i lÃ  thÃ´ng minh thÆ°á»ng quan tÃ¢m Ä‘áº¿n viá»‡c xem nhá»¯ng báº¡n khÃ¡c lÃ m nhÆ° tháº¿ nÃ o hÆ¡n lÃ  quan tÃ¢m Ä‘áº¿n viá»‡c tÃ¬m tÃ²i chiáº¿n lÆ°á»£c má»›i Ä‘á»ƒ giáº£i quyáº¿t váº¥n Ä‘á»&amp;rdquo;&lt;/p&gt;

&lt;h2 id=&#34;khen-con-nhÆ°-tháº¿-nÃ o&#34;&gt;Khen Con NhÆ° Tháº¿ NÃ o&lt;/h2&gt;

&lt;h3 id=&#34;khen-ngá»£i-sá»±-cáº©n-tháº­n&#34;&gt;Khen ngá»£i sá»± cáº©n tháº­n&lt;/h3&gt;

&lt;ul&gt;
&lt;li&gt;&amp;ldquo;Con lÃ m ráº¥t lÃ  tá»‰ má»‰, cáº©n tháº­n. Tháº£o nÃ o mÃ  máº¹ tháº¥y khÃ´ng váº¿t má»±c nÃ o rÃ¢y ra ngoÃ i cáº£&amp;rdquo;&lt;/li&gt;
&lt;li&gt;&amp;ldquo;Sá»± tá»‰ má»‰ cáº©n tháº­n cá»§a con Ä‘Ã£ Ä‘em láº¡i káº¿t quáº£ tá»‘t rá»“i, con tháº¥y ko?&amp;rdquo;&lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&#34;khen-ngá»£i-sá»±-bÃ¬nh-tÄ©nh&#34;&gt;Khen ngá»£i sá»± bÃ¬nh tÄ©nh&lt;/h3&gt;

&lt;ul&gt;
&lt;li&gt;Máº¹ ráº¥t vui vÃ¬ con Ä‘Ã£ giá»¯ Ä‘Æ°á»£c bÃ¬nh tÄ©nh máº·c dÃ¹ khá»‘i gá»— xÃ¢y dá»±ng cá»§a con cá»© Ä‘á»• xuá»‘ng.&lt;/li&gt;
&lt;li&gt;HÃ´m nay con Ä‘Ã£ dáº¡y máº¹ má»™t bÃ i há»c vá» sá»± cáº§n thiáº¿t cá»§a viá»‡c giá»¯ bÃ¬nh tÄ©nh Ä‘Ã³.&lt;/li&gt;
&lt;li&gt;BÃ¬nh tÄ©nh luÃ´n luÃ´n giÃºp con Ä‘áº¡t Ä‘Æ°á»£c má»¥c Ä‘Ã­ch Ä‘Ãºng ko?&lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&#34;khen-ngá»£i-sá»±-ná»—-lá»±c-kiÃªn-trÃ¬-cá»‘-gáº¯ng&#34;&gt;Khen ngá»£i sá»± ná»— lá»±c, kiÃªn trÃ¬, cá»‘ gáº¯ng&lt;/h3&gt;

&lt;ul&gt;
&lt;li&gt;&amp;ldquo;cuá»‘i cÃ¹ng thÃ¬ con cÅ©ng lÃ m Ä‘Æ°á»£c rá»“i&amp;rdquo;&lt;/li&gt;
&lt;li&gt;&amp;ldquo;Máº¹ ráº¥t háº¡nh phÃºc khi con biáº¿t ná»— lá»±c nhÆ° váº­y&amp;rdquo;&lt;/li&gt;
&lt;li&gt;&amp;ldquo;Con Ä‘Ã£ ráº¥t cá»‘ gáº¯ng kiÃªn trÃ¬ vÃ  con Ä‘Ã£ thÃ nh cÃ´ng rá»“i&amp;rdquo;&lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&#34;khen-ngá»£i-sá»±-chÄƒm-chá»‰&#34;&gt;Khen ngá»£i sá»± chÄƒm chá»‰&lt;/h3&gt;

&lt;ul&gt;
&lt;li&gt;&amp;ldquo;Con Ä‘Ã£ ráº¥t chÄƒm chá»‰ Ã´n bÃ i. Máº¹ nghÄ© con hoÃ n toÃ n xá»©ng Ä‘Ã¡ng vá»›i Ä‘iá»ƒm 10 nÃ y&amp;rdquo;&lt;/li&gt;
&lt;li&gt;&amp;ldquo;UI, hÃ´m nay con máº¹ chÄƒm chá»‰, hang say quÃ¡. Con thá»±c sá»± lÃ m máº¹ tá»± hÃ o vá» con.&lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&#34;khen-ngá»£i-sá»±-táº­p-trung&#34;&gt;Khen ngá»£i sá»± táº­p trung&lt;/h3&gt;

&lt;ul&gt;
&lt;li&gt;&amp;ldquo;Máº¹ Ä‘á»ƒ Ã½ tháº¥y con ráº¥t say sÆ°a, táº­p trung xáº¿p hÃ¬nh&amp;rdquo;. CÃ³ láº½ vÃ¬ tháº¿ mÃ  hÃ´m nay con xáº¿p tiáº¿n bá»™ hÆ¡n háº³n&amp;rdquo;&lt;/li&gt;
&lt;li&gt;&amp;ldquo;Máº¹ Ä‘á»ƒ Ã½ tháº¥y con Ä‘Ã£ ráº¥t táº­p trung Ä‘á»c sÃ¡ch. Cháº¯c con Ä‘Ã£ tháº¥y ráº¥t nhiá»u Ä‘iá»u thÃº vá»‹ trong cÃ¢u chuyá»‡n Ä‘Ã³&amp;rdquo;&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;Má»—i láº§n tráº» thÃ nh cÃ´ng trong báº¥t cá»© viá»‡c gÃ¬, Ä‘áº·c biá»‡t nhá»¯ng viá»‡c Ä‘Ã²i há»i sá»± cá»‘ gáº¯ng, ná»— lá»±c, cha máº¹ hÃ£y Ã¡p dá»¥ng nhá»¯ng cÃ¢u khen ngá»£i nÃ y. Sau má»™t thá»i gian, hÃ£y Ä‘á»ƒ Ã½ sá»± thay Ä‘á»•i trong cÃ¡ch á»©ng xá»­ cá»§a con trÆ°á»›c tháº¥t báº¡i hay nhá»¯ng váº¥n Ä‘á» khÃ³ vÃ  chá» Ä‘á»£i cáº£m giÃ¡c háº¡nh phÃºc khi nghe con hÃ o há»©ng khoe thÃ nh quáº£ cá»§a mÃ¬nh vÃ  nÃ³i &amp;ldquo;Máº¹ Æ¡i, con lÃ m Ä‘i lÃ m láº¡i, lÃ m mÃ£i cÅ©ng Ä‘Æ°á»£c, con Ä‘Ã£ ráº¥t kiÃªn trÃ¬ máº¹ áº¡&amp;rdquo;.&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;Má»—i lá»i nÃ³i cá»§a cha máº¹ Ä‘á»u cÃ³ áº£nh hÆ°á»Ÿng Ä‘áº¿n sá»± phÃ¡t triá»ƒn tÃ­nh cÃ¡ch cá»§a con, tÆ°Æ¡ng lai cá»§a con&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;(BÃ i viáº¿t sÆ°u táº§m Ä‘Ã¢u Ä‘Ã³ trÃªn máº¡ng)&lt;/p&gt;
</description>
      </item>
    
      <item>
        <title>Transitional words (st)</title>
        <link>https://htr3n.github.io/2013/08/transitional-words-st/</link>
        <pubDate>Tue, 20 Aug 2013 00:00:00 +0000</pubDate>
        
        <guid>9bd01877c62dbdc67bb70c5ea65a260a</guid>
        <description>

&lt;p&gt;Má»™t sá»‘ transitional words ráº¥t há»¯u dá»¥ng trong viá»‡c ná»‘i hoáº·c liÃªn káº¿t cÃ¢u hoáº·c Ä‘oáº¡n vÄƒn trong tiáº¿ng Anh. Äá»ƒ trÃ¡nh sá»± láº·p láº¡i gÃ¢y nhÃ m chÃ¡n, cÃ¡c transitional words tÆ°Æ¡ng Ä‘Æ°Æ¡ng nÃªn Ä‘Æ°á»£c dÃ¹ng xen káº½.&lt;/p&gt;

&lt;h3 id=&#34;addition&#34;&gt;Addition&lt;/h3&gt;

&lt;p&gt;also, besides, furthermore, in addition, moreover, again&lt;/p&gt;

&lt;h3 id=&#34;consequence&#34;&gt;Consequence&lt;/h3&gt;

&lt;p&gt;accordingly, as a result, consequently, hence, otherwise, so then, therefore, thus, there upon&lt;/p&gt;

&lt;h3 id=&#34;summarizing&#34;&gt;Summarizing&lt;/h3&gt;

&lt;p&gt;after all, all in all, all things considered, briefly, by and large, in any case, in any event, in brief, in conclusion, on the whole, in short, in summary, in the final analysis, in the long run, on balance, to sum up, to summarize, finally&lt;/p&gt;

&lt;h3 id=&#34;generalizing&#34;&gt;Generalizing&lt;/h3&gt;

&lt;p&gt;as a rule, as usual, for the most part, generally, generally speaking, ordinarily, usually&lt;/p&gt;

&lt;h3 id=&#34;restatement&#34;&gt;Restatement&lt;/h3&gt;

&lt;p&gt;in essence, in other words, namely, that is, that is to say, in short, in brief, to put it differently&lt;/p&gt;

&lt;h3 id=&#34;contrast-and-comparison&#34;&gt;Contrast and Comparison&lt;/h3&gt;

&lt;p&gt;contrast, by the same token, conversely, instead, likewise, on one hand, on the other hand, on the contrary, rather, similarly, yet, but, however, still, nevertheless, in contrast&lt;/p&gt;

&lt;h3 id=&#34;sequence&#34;&gt;Sequence&lt;/h3&gt;

&lt;p&gt;at first, first of all, to begin with, in the first place, at the same time, for now, for the time being, the next step, in time, in turn, later on, meanwhile, next, then, soon, the meantime, later, while, earlier, simultaneously, afterward, in conclusion&lt;/p&gt;

&lt;h3 id=&#34;diversion&#34;&gt;Diversion&lt;/h3&gt;

&lt;p&gt;by the way, incidentally&lt;/p&gt;

&lt;h3 id=&#34;illustration&#34;&gt;Illustration&lt;/h3&gt;

&lt;p&gt;for example, for instance, for one thing&lt;/p&gt;

&lt;h3 id=&#34;similarity&#34;&gt;Similarity&lt;/h3&gt;

&lt;p&gt;likewise, similar, moreover&lt;/p&gt;

&lt;h3 id=&#34;direction&#34;&gt;Direction&lt;/h3&gt;

&lt;p&gt;here, there, over there, beyond, nearly, opposite, under, above, to the left, to the right, in the distance&lt;/p&gt;
</description>
      </item>
    
      <item>
        <title>Sáº¯p xáº¿p trÃ­ch dáº«n (citations) trong (La)TeX</title>
        <link>https://htr3n.github.io/2009/01/sap-xep-trich-dan-latex/</link>
        <pubDate>Thu, 15 Jan 2009 00:00:00 +0000</pubDate>
        
        <guid>481c3a6c849b3c62c04fc32d65fccc32</guid>
        <description>&lt;p&gt;LaTeX cho phÃ©p táº¡o cÃ¡c trÃ­ch dáº«n (citations) Ä‘á»ƒ tham chiáº¿u Ä‘áº¿n cÃ¡c tÃ i liá»‡u tham kháº£o tÆ°Æ¡ng á»©ng. CÃ¡c trÃ­ch dáº«n, tÃ¹y theo Ä‘á»‹nh dáº¡ng (format/style) cá»§a tÃ i liá»‡u, cÃ³ thá»ƒ dáº¡ng sá»‘ nhÆ° &lt;code&gt;[1, 2]&lt;/code&gt; hoáº·c dáº¡ng chá»¯ nhÆ° &lt;code&gt;[Lamport94]&lt;/code&gt;.&lt;/p&gt;

&lt;p&gt;Má»™t vÃ­ dá»¥ Ä‘Æ¡n giáº£n nhÆ° sau&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-tex&#34;&gt;\LaTeX{} \cite{latex} is a document preparation system for the \TeX{} \cite{tex} typesetting program.
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;sáº½ táº¡o ra káº¿t quáº£&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-tex&#34;&gt;LaTeX [1] is a document preparation system for the TeX [2] typesetting program.
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;Trong vÃ­ dá»¥ trÃªn, &lt;code&gt;[1]&lt;/code&gt; vÃ  &lt;code&gt;[2]&lt;/code&gt; lÃ  cÃ¡c trÃ­ch dáº«n. TÃ i liá»‡u tham kháº£o tÆ°Æ¡ng á»©ng sáº½ Ä‘Æ°á»£c Ä‘á»ƒ trong pháº§n &lt;code&gt;\bibliography{}&lt;/code&gt;. Nhiá»u trÃ­ch dáº«n liÃªn káº¿ cÃ³ thá»ƒ Ä‘Æ°á»£c gom láº¡i vÃ  liá»‡t kÃª chung trong má»™t cáº·p dáº¥u ngoáº·c vuÃ´ng nhÆ° sau &lt;code&gt;[6, 4, 5, 22, 27, 29]&lt;/code&gt;.&lt;/p&gt;

&lt;p&gt;Máº·c Ä‘á»‹nh trong trÆ°á»ng há»£p nhiá»u trÃ­ch dáº«n, LaTeX khÃ´ng xáº¿p thá»© tá»± vÃ  khÃ´ng thu gá»n cho dá»… nhÃ¬n. Náº¿u muá»‘n thu gá»n, vÃ­ dá»¥ nhÆ° &lt;code&gt;[4â€“6, 22, 27, 29]&lt;/code&gt; thÃ¬ cÃ³ thá»ƒ dÃ¹ng &lt;a href=&#34;http://www.ctan.org/tex-archive/help/Catalogue/entries/natbib.html&#34;&gt;natbib&lt;/a&gt; hoáº·c &lt;a href=&#34;http://www.ctan.org/tex-archive/macros/latex/contrib/cite&#34;&gt;cite&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;HÃ£y Ä‘áº·t nhá»¯ng dÃ²ng sau á»Ÿ pháº§n Ä‘áº§u file &lt;code&gt;.tex&lt;/code&gt;, trÆ°á»›c &lt;code&gt;\begin{document}&lt;/code&gt;.&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-tex&#34;&gt;\usepackage{cite}
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;hoáº·c&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-tex&#34;&gt;\usepackage[sort&amp;amp;compress]{natbib}
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;Sau Ä‘Ã³, cháº¡y latex/pdflatex vÃ  bibtex nhÆ° bÃ¬nh thÆ°á»ng. Dáº¡ng trÃ­ch dáº«n trong bÃ i sáº½ Ä‘Æ°á»£c sáº¯p xáº¿p vÃ  nhÃ³m láº¡i há»£p lÃ½ vÃ  dá»… nhÃ¬n hÆ¡n. GÃ³i &lt;code&gt;natbib&lt;/code&gt; cÃ³ má»™t Ä‘áº·c Ä‘iá»ƒm lÃ  tÆ°Æ¡ng thÃ­ch tá»‘t vá»›i gÃ³i &lt;code&gt;hyperref&lt;/code&gt; (dÃ¹ng Ä‘á»ƒ táº¡o cÃ¡c liÃªn káº¿t trong tÃ i liá»‡u pdf). Do Ä‘Ã³, náº¿u cáº§n dÃ¹ng &lt;a href=&#34;http://tug.ctan.org/pkg/hyperref&#34;&gt;hyperref&lt;/a&gt; thÃ¬ báº¡n nÃªn sá»­ dá»¥ng &lt;a href=&#34;http://www.ctan.org/tex-archive/help/Catalogue/entries/natbib.html&#34;&gt;natbib&lt;/a&gt;.&lt;/p&gt;
</description>
      </item>
    
      <item>
        <title>TÃ­nh cháº¥t hai máº·t cá»§a má»™t váº¥n Ä‘á»</title>
        <link>https://htr3n.github.io/2009/01/hai-mat-cua-mot-van-de/</link>
        <pubDate>Thu, 15 Jan 2009 00:00:00 +0000</pubDate>
        
        <guid>340930720d54b391b2e2e104a9ee70a2</guid>
        <description>

&lt;p&gt;NgÆ°á»i ta thÆ°á»ng dÃ¹ng cÃ¢u nÃ³i &lt;a href=&#34;http://proverbhunter.com/proverb/every-medal-has-two-sides&#34;&gt;&amp;ldquo;&lt;em&gt;má»i cÃ¡i huÃ¢n chÆ°Æ¡ng luÃ´n cÃ³ hai máº·t&lt;/em&gt;&amp;ldquo;&lt;/a&gt; Ä‘á»ƒ Ã¡m chá»‰ ráº±ng sá»± viá»‡c nÃ o cÅ©ng cÃ³ nhá»¯ng máº·t Ä‘á»‘i láº­p nhau. Do Ä‘Ã³, Ä‘á»©ng trÆ°á»›c má»™t sá»± kiá»‡n (fact) hoáº·c má»™t luáº­n Ä‘iá»ƒm (argument), viá»‡c láº­t tá»›i láº­t lui háº§u phÃ¡t hiá»‡n cÃ¡c ngÃ³c ngÃ¡ch (cÃ¡c máº·t Ä‘á»‘i láº­p) nhiá»u khi mang Ä‘áº¿n nhá»¯ng Ã½ ráº¥t thÃº vá»‹.&lt;/p&gt;

&lt;p&gt;HÃ´m trÆ°á»›c, nhÃ¢n Ä‘á»c máº¥y bÃ i bÃ¡o vá» cÃ¡i báº¯t tay giá»¯a vn vÃ  Microsoft, cÃ¹ng vá»›i nhá»¯ng nháº­n Ä‘á»‹nh cá»§a máº¥y nhÃ¢n váº­t chÃ³p bu Microsoft nhÆ° S.Balmer, B.Gates vá» xu hÆ°á»›ng mÃ£ nguá»“n má»Ÿ, vá» sao chÃ©p báº¥t há»£p phÃ¡p,v.v&amp;hellip; mÃ¬nh chá»£t cÃ³ Ã½ vui vui, phÃ¢n tÃ­ch xem cÃ¡c máº·t trÃ¡i cá»§a nhá»¯ng Ä‘iá»u mÃ  Microsoft nghÄ©/cho ráº±ng xÃ¢m háº¡i Ä‘áº¿n lá»£i Ã­ch cá»§a há».&lt;/p&gt;

&lt;h3 id=&#34;windows-Ä‘Æ°á»£c-bá»‹-sao-chÃ©p-láº­u-báº¥t-há»£p-phÃ¡p-háº§u-nhÆ°-kháº¯p-tháº¿-giá»›i&#34;&gt;Windows &amp;ldquo;Ä‘Æ°á»£c/bá»‹&amp;rdquo; sao chÃ©p láº­u (báº¥t há»£p phÃ¡p) háº§u nhÆ° kháº¯p tháº¿ giá»›i&lt;/h3&gt;

&lt;p&gt;Äá»©ng vá» cÃ¡i nhÃ¬n kinh doanh thÃ¬ ai cÅ©ng dá»… dÃ ng Ä‘á»“ng tÃ¬nh vá»›i Microsoft lÃ  há» bá»‹ tá»•n tháº¥t nhiá»u $$$ do sao chÃ©p trao Ä‘á»•i báº¥t há»£p phÃ¡p. CÃ³ Ä‘iá»u ráº±ng, nhá»¯ng chá»— nÃ o xiáº¿t Ä‘Æ°á»£c thÃ¬ Microsoft Ä‘Ã¢u cÃ³ tá»«, cÃ²n nhá»¯ng chá»— váº«n tá»“n táº¡i viá»‡c sao chÃ©p báº¥t há»£p phÃ¡p thÃ¬ cÃ³ nghÄ©a lÃ  Microsoft khÃ´ng thá»ƒ nÃ o xiáº¿t, khÃ´ng thá»ƒ nÃ o váº¯t cho ra $$$ Ä‘Æ°á»£c (vÃ­ dá»¥ nhÆ° á»Ÿ vn, lÃ¢u lÃ¢u khi cÃ³ phÃ¡i Ä‘oÃ n qua thÃ¬ cÃ¡c bÃ¡c quáº£n lÃ½ thá»‹ trÆ°á»ng láº¡i cháº¡y Ä‘áº¿n BÃ¹i thá»‹ XuÃ¢n, TÃ´n tháº¥t TÃ¹ng mÃ  thu Ä‘Ä©a, thu mÃ¡y, pháº¡t hÃ nh chÃ­nh.. cho xÃ´m tá»¥, chá»© cÃ³ Ä‘á»“ng nÃ o cho Microsoft Ä‘Ã¢u). NhÆ°ng, vá» máº·t marketing thÃ¬ Microsoft lá»i to, tháº­m chÃ­ khÃ´ng tá»‘n má»™t cáº¯c báº¡c mÃ  láº¡i Ä‘Æ°á»£c nhiá»‡t tÃ¬nh truyá»n bÃ¡ rá»™ng rÃ£i. NhÆ° váº­y, á»Ÿ má»™t nÆ¡i mÃ  anh khÃ´ng tÃ i nÃ o dÃ¹ng luáº­t Ä‘á»ƒ báº¯t buá»™c ngÆ°á»i ta sá»­ dá»¥ng pháº§n má»m báº£n quyá»n, nhÆ°ng bÃ¹ láº¡i thÃ¬ ngÆ°á»i ta quáº£ng cÃ¡o miá»…n phÃ­, Ä‘á»¡ tá»‘n bao nhiÃªu lÃ  chi phÃ­ PR, marketing, tháº¿ mÃ  anh cÃ²n kÃªu ca ná»—i giá»&amp;hellip;(mÃ  thá»±c ra thÃ¬ Microsoft cÅ©ng cháº³ng kÃªu ca gÃ¬ vÃ¬ biáº¿t cÃ³ kÃªu cÅ©ng khÃ´ng Äƒn thua, há» cÅ©ng Ä‘Æ°á»£c lá»£i pháº§n nÃ o tá»« viá»‡c sao chÃ©p láº­u mÃ , thÃ´i thÃ¬ &amp;hellip;)&lt;/p&gt;

&lt;h3 id=&#34;windows-cÃ³-nhiá»u-váº¥n-Ä‘á»-nhiá»u-sá»±-cá»‘-nhiá»u-virus-worm&#34;&gt;Windows cÃ³ nhiá»u váº¥n Ä‘á», nhiá»u sá»± cá»‘, nhiá»u virus/worm&lt;/h3&gt;

&lt;p&gt;ÄÃºng lÃ  vá» má»™t máº·t nÃ o Ä‘Ã³, nÃ³ lÃ m tá»•n háº¡i hÃ¬nh áº£nh cá»§a Windows vÃ  Microsoft. BÃ¡o chÃ­ offline, online &amp;hellip; nhan nháº£n tin tá»©c vá» váº¥n Ä‘á», virus, worm,&amp;hellip; trÃªn WINDOWS. Search engine cÅ©ng thÆ°á»ng cho káº¿t quáº£ tÃ¬m kiáº¿m hÃ ng Ä‘áº§u khi cáº§n tÃ¬m cÃ¡c thÃ´ng tin nhÆ° váº­y vÃ  luÃ´n hiá»‡n ra á»Ÿ nhá»¯ng trang Ä‘áº§u lÃ  WINDOWS. ..Rá»“i nhá»¯ng cÃ¢u chuyá»‡n táº¿u Ä‘Ã¢m thá»c nhá»¯ng váº¥n Ä‘á» cá»§a WINDOWS &amp;hellip;. WINDOWS &amp;hellip;. WINDOWS &amp;hellip;NhÆ°ng máº·t trÃ¡i cá»§a nhá»¯ng sá»± kiá»‡n trÃªn, vÃ´ hÃ¬nh chung láº¡i giÃºp cho cÃ´ng tÃ¡c tiáº¿p thá»‹ hÃ¬nh áº£nh WINDOWS thÃªm pháº§n Ä‘áº¯c lá»£i. NgÃ y nÃ y qua ngÃ y khÃ¡c, ai ai cÅ©ng nghe WINDOWS, nÃ³i vá» WINDOWS riáº¿t rá»“i cá»© tÆ°á»Ÿng lÃ  trÃªn tháº¿ giá»›i nÃ y hÃ¬nh nhÆ° chá»‰ cÃ³ WINDOWS !?! Má»¥c tiÃªu tá»‘i háº­u cá»§a viá»‡c tiáº¿p thá»‹ lÃ  cá»‘ gáº¯ng nhá»“i nhÃ©t vÃ o Ä‘áº§u, vÃ o suy nghÄ© cá»§a má»i ngÆ°á»i nhá»¯ng hÃ¬nh áº£nh, Ã¢m thanh, logo cá»§a sáº£n pháº©m&amp;hellip;chá»© cÃ²n gÃ¬ ná»¯a !!! (nÃ³i tháº¿ thÃ´i, chá»© Windows mÃ  cÃ ng ngÃ y cÃ ng nhiá»u sá»± cá»‘ thÃ¬ ngÆ°á»i ta bá» cháº¡y háº¿t Ã¡)&lt;/p&gt;

&lt;h3 id=&#34;windows-bá»‹-linux-cáº¡nh-tranh-khá»‘c-liá»‡t-lÃ m-cho-thu-háº¹p-thá»‹-pháº§n&#34;&gt;Windows bá»‹ Linux cáº¡nh tranh khá»‘c liá»‡t lÃ m cho thu háº¹p thá»‹ pháº§n&lt;/h3&gt;

&lt;p&gt;ÄÃºng lÃ  thá»‹ pháº§n Windows cÃ³ giáº£m Ä‘i rÃµ rá»‡t vÃ  thá»‹ pháº§n Linux tÄƒng. ÄÃºng lÃ  cá»™ng Ä‘á»“ng Linux vÃ  mÃ£ nguá»“n má»Ÿ Ä‘Ã£ trá»Ÿ thÃ nh Ä‘á»‘i trá»ng Ä‘Ã¡ng gá»m cá»§a Windows. NhÆ°ng máº·t trÃ¡i cá»§a viá»‡c nÃ y lÃ  gÃ¬? Sá»± cáº¡nh tranh máº·c dÃ¹ lÃ m giáº£m thá»‹ pháº§n cá»§a Windows, nhÆ°ng láº¡i cÃ³ tÃ¡c dá»¥ng báº¥t ngá» lÃ  thÃºc Ä‘áº©y, táº¡o sá»©c Ã©p lá»›n hÆ¡n cho Ä‘á»™i ngÅ© phÃ¡t triá»ƒn cá»§a Microsoft. Trong má»™t khoáº£ng thá»i gian dÃ i thá»‘ng trá»‹ thá»‹ trÆ°á»ng desktop OS, háº§u nhÆ° cÃ¡c sáº£n pháº©m cá»§a Microsoft cÃ ng ngÃ y cÃ ng Ä‘i xuá»‘ng, cÃ ng kÃ©m sÃ¡ng táº¡o Ä‘i. Má»™t trong cÃ¡c nguyÃªn nhÃ¢n tiá»m áº©n, báº¥t thÃ nh vÄƒn cÃ³ láº½ lÃ  sá»± chá»§ quan, giá»‘ng nhÆ° ngá»§ quÃªn trÃªn chiáº¿n tháº¯ng (vÃ¬ há» nghÄ© lÃ  khÃ´ng cÃ³ &amp;ldquo;Ä‘á»‘i thá»§ xá»©ng táº§m&amp;rdquo;). Y nhÆ° kiá»ƒu máº¥y Ä‘á»™i bÃ³ng, Barca, MU, Brazil.. sau khi vÃ´ Ä‘á»‹ch lÃ  cáº§u thá»§ Ä‘Ã¡ lÆ¡ mÆ¡, Ä‘i bá»™, rá»“i cÃ³ khi thua cáº£ máº¥y Ä‘á»™i háº¡ng gÃ  ná»¯a. Äáº¿n khi cÃ³ Ä‘á»‘i thá»§ xuáº¥t hiá»‡n, cÃ³ sá»± Ä‘e dá»a thÃ¬ há» má»›i &amp;ldquo;bá»«ng tá»‰nh&amp;rdquo;. Chá»© náº¿u Linux khÃ´ng cáº¡nh tranh khá»‘c liá»‡t thÃ¬ khÃ´ng biáº¿t máº¥y OS vá» sau cá»§a Microsoft sáº½ ra sao ná»¯a. Cáº¡nh tranh sáº½ lÃ  Ä‘Ã²n báº©y cho sá»± phÃ¡t triá»ƒn.&lt;/p&gt;
</description>
      </item>
    
      <item>
        <title>NgÆ°á»i lá»›n hÃ£y tá»­ táº¿ hÆ¡n vá»›i tÆ°Æ¡ng lai Ä‘áº¥t nÆ°á»›c</title>
        <link>https://htr3n.github.io/2008/12/nguoi-lon-hay-tu-te-hon/</link>
        <pubDate>Sun, 28 Dec 2008 00:00:00 +0000</pubDate>
        
        <guid>efb0c6ecc984ccf2256605d963c3f273</guid>
        <description>&lt;p&gt;Thá»‰nh thoáº£ng lÃªn bÃ¡o Ä‘á»ƒ dÃµi theo tÃ¬nh hÃ¬nh trong nÆ°á»›c, cÅ©ng cÃ³ nhiá»u tin vui vá» sá»± Ä‘á»•i má»›i, phÃ¡t triá»ƒn, vá» sá»± nÄƒng Ä‘á»™ng cá»§a nhá»¯ng báº¡n cÃ¹ng tháº¿ há»‡ hoáº·c tráº» hÆ¡n, cÅ©ng cÃ³ nhiá»u háº¡t sáº¡n lÃ m Ãª rÄƒng. á»ª, thÃ¬ cÅ©ng tá»± nhá»§ ráº±ng trÃªn Ä‘á»i khÃ´ng cÃ³ má»™t cÃ¡i gÃ¬ thá»±c sá»± hoÃ n háº£o vÃ  má»Ÿ lÃ²ng ra Ä‘Ã³n nháº­n vá»›i má»™t niá»m tin ráº±ng nhá»¯ng gÃ¬ tiáº¿n bá»™, tá»‘t Ä‘áº¹p rá»“i sáº½ ngÃ y má»™t nhiá»u hÆ¡n, nhiá»u hÆ¡n, sáº½ láº¥n Ã¡t vÃ  triá»‡t tiÃªu nhá»¯ng gÃ¬ chÆ°a hay. Cuá»‘i tuáº§n Ä‘á»c Ä‘Æ°á»£c tin &lt;a href=&#34;http://www.tuoitre.com.vn/Tianyon/Index.aspx?ArticleID=229540&amp;amp;ChannelID=3&#34;&gt;nÃ y tá»« Tuá»•i tráº»&lt;/a&gt; mÃ  khÃ´ng vui quÃ¡ chá»«ng.&lt;/p&gt;

&lt;p&gt;Thá»­ Ä‘iá»ƒm láº¡i má»™t vÃ i vá»¥ tÆ°Æ¡ng tá»± gáº§n nháº¥t: &lt;a href=&#34;http://www.tuoitre.com.vn/Tianyon/Index.aspx?ArticleID=197574&amp;amp;ChannelID=3&#34;&gt;vá»¥ bÃ© TrÃ¢m á»Ÿ Äá»“ng ThÃ¡p&lt;/a&gt;, vá»¥ &lt;a href=&#34;http://www.tuoitre.com.vn/Tianyon/Index.aspx?ArticleID=197104&amp;amp;ChannelID=13&#34;&gt;nÃ y&lt;/a&gt;, vá»¥ &lt;a href=&#34;http://www.tuoitre.com.vn/Tianyon/Index.aspx?ArticleID=229076&amp;amp;ChannelID=89&#34;&gt;em Hiá»n á»Ÿ buÃ´n ÄÃ´n&lt;/a&gt;. Ráº¥t nhiá»u Ã½ kiáº¿n bá»©c xÃºc, ráº¥t nhiá»u sá»± &amp;ldquo;bá»©c xÃºc&amp;rdquo; cá»§a quan chá»©c cÃ¡c ngÃ nh, bá»™, tháº­m chÃ­ cáº£ nhá»¯ng Ä‘au lÃ²ng vÃ  bÄƒn khoÄƒn cá»§a nhá»¯ng ngÆ°á»i cÃ³ chá»©c cÃ³ quyá»n (khÃ´ng thá»ƒ loáº¡i trá»« kiá»ƒu Ä‘au lÃ²ng &amp;ldquo;chÃ­nh trá»‹&amp;rdquo;). NhÆ°ng nhá»¯ng sá»± viá»‡c nhÆ° tháº¿ nÃ y khÃ´ng cÃ³ dáº¥u hiá»‡u Ä‘Æ°á»£c cáº£i thiá»‡n mÃ  cÃ³ xu hÆ°á»›ng ngÃ y cÃ ng tá»‡ Ä‘i. Nhá»¯ng nguyÃªn nhÃ¢n nhÆ° cÃ¡ch xá»­ lÃ½ Ä‘á»‘i tÆ°á»£ng vi pháº¡m (vÃ­ dá»¥ nhÆ° &amp;ldquo;táº¡m Ä‘Ã¬nh chá»‰ cÃ¡c dÃ¢n quÃ¢n&amp;rdquo; á»Ÿ vá»¥ Ä‘Ã¡nh há»c sinh lá»›p 9 á»Ÿ Saigon)&amp;hellip; cÅ©ng chá»‰ lÃ  cÃ¡i ngá»n, cÅ©ng giá»‘ng nhÆ° kiá»ƒu giáº£m tai náº¡n giao thÃ´ng báº±ng chiáº¿n dá»‹ch mÅ© báº£o hiá»ƒm hoáº·c lÃ  báº¯t buá»™c cÃ³ kÃ­nh chiáº¿u háº­u.&lt;/p&gt;

&lt;p&gt;CÃ¡i cÃ¡ch Ä‘á»‘i xá»­ khÃ´ng hay (hoáº·c nÃ³i náº·ng lÃ  kiá»ƒu lÃ­nh táº©y, kiá»ƒu quan nha) nhÆ° tháº¿ nÃ y vá»›i tháº¿ há»‡ tÆ°Æ¡ng lai cá»§a Ä‘áº¥t nÆ°á»›c váº«n cÃ²n, thÃ¬ &amp;ldquo;ngÆ°á»i lá»›n&amp;rdquo; cÅ©ng nÃªn tá»± xáº¥u há»• vÃ  thÃ´i Ä‘á»«ng phiá»n trÃ¡ch vÃ¬ sao tháº¿ há»‡ tráº» ngÃ y nay tháº¿ nÃ y tháº¿ khÃ¡c. NgÆ°á»i lá»›n Ä‘á»‘i xá»­ hiá»n hÃ²a, Ä‘á»™ lÆ°á»£ng vÃ  tá»­ táº¿ vá»›i tháº¿ há»‡ tráº» thÃ¬ cÃ³ láº½ tháº¿ há»‡ tráº» sáº½ tá»­ táº¿ hÆ¡n, Ä‘Ã ng hoÃ ng hÆ¡n vÃ  sáº½ táº¡o ra má»™t tháº¿ há»‡ con cÃ¡i cá»§a há» cÅ©ng tá»­ táº¿ nhÆ° tháº¿.&lt;/p&gt;

&lt;p&gt;NgÆ°á»i lá»›n vÆ°á»£t Ä‘Ã¨n Ä‘á» &amp;ldquo;lÃ m gÆ°Æ¡ng&amp;rdquo; thÃ¬ khÃ³ mÃ  báº£o con cÃ¡i há» chá» Ä‘Ã¨n xanh, ngÆ°á»i lá»›n Ä‘á»¥ng chuyá»‡n lÃ  hÃ¹ng hÃ¹ng há»• há»• Ä‘Ã²i Äƒn tÆ°Æ¡i nuá»‘t sá»‘ng ngÆ°á»i ta thÃ¬ khÃ³ mÃ  dáº¡y con cÃ¡i chá»‹u lÃ©p khi gáº·p chuyá»‡n tÆ°Æ¡ng tá»±? ngÆ°á»i lá»›n tháº£n nhiÃªn Äƒn há»‘i lá»™, nháº­n phong bÃ¬, vÆ¡ vÃ©t cá»§a cÃ´ng thÃ¬ lÃ m sao dáº¡y con cÃ¡i thanh liÃªm, liÃªm khiáº¿t (tá»‡ hÆ¡n ná»¯a, cÃ³ khi cÃ²n dáº¡y con cÃ¡i lÃ  náº¿u mÃ¬nh khÃ´ng Äƒn ngÆ°á»i khÃ¡c Äƒn, Ä‘áº¡i loáº¡i tháº¿)? ngÆ°á»i lá»›n váº«n muá»‘n lÃ m Äƒn má»™t cÃ¡ch Ä‘áº£o Ä‘iÃªn, Ä‘iÃªu ngoa, gian dá»‘i, hÃ ng giáº£, hÃ ng nhÃ¡i thÃ¬ lÃ m sao dáº¡y con cÃ¡i thiá»‡n tÃ¢m, trung thá»±c? ngÆ°á»i lá»›n vÃ¬ lá»£i riÃªng mÃ  báº¥t cháº¥p, Ä‘ang tay Ä‘áº§u Ä‘á»™c nÆ°á»›c, Ä‘áº§u Ä‘á»™c Ä‘áº¥t, Ä‘áº§u Ä‘á»™c khÃ´ng khÃ­,&amp;hellip; thÃ¬ lÃ m sao dáº¡y con cÃ¡i báº£o vá»‡ rá»«ng, báº£o vá»‡ Ä‘áº¥t, báº£o vá»‡ mÃ u xanh? NgÆ°á»i lá»›n Ä‘i ra nÆ°á»›c ngoÃ i Äƒn cáº¯p á»Ÿ siÃªu thá»‹, Ä‘i tÃ u trá»‘n vÃ©, sá»‘ng báº¥t há»£p phÃ¡p, lÃ m Äƒn phi phÃ¡p, rÆ°á»›c láº¥y quá»‘c nhá»¥c,&amp;hellip; thÃ¬ thá»­ há»i lÃ m sao dáº¡y con cÃ¡i giá»¯ danh dá»±, thá»ƒ diá»‡n quá»‘c gia, quá»‘c thá»ƒ, quá»‘c thá»‘ng?&lt;/p&gt;

&lt;p&gt;TÆ°Æ¡ng lai Ä‘áº¥t nÆ°á»›c lÃ  cá»§a nhá»¯ng tháº¿ há»‡ tráº» tiáº¿p ná»‘i cha anh. Äáº§u tÆ° cho tháº¿ há»‡ tráº» lÃ  Ä‘áº§u tÆ° cho thá»‹nh vÆ°á»£ng vÃ  phÃ¡t triá»ƒn lÃ¢u dÃ i. NgÆ°á»i lá»›n, hÃ£y Ä‘á»«ng nÃ³i ngoÃ i miá»‡ng lÃ  yÃªu nÆ°á»›c, lÃ  thÆ°Æ¡ng nÃ²i, lÃ  mong muá»‘n Ä‘Æ°a nÆ°á»›c ta ngang hÃ ng vá»›i nÄƒm chÃ¢u bá»‘n bá»ƒ, mÃ  hÃ nh Ä‘á»™ng thÃ¬ láº¡i Ä‘ang gÃ³p pháº§n nÃ o lÃ m suy hao, hÆ° há»ng tháº¿ há»‡ tráº». HÃ£y Ä‘á»‘i xá»­ tá»­ táº¿ hÆ¡n vá»›i tháº¿ há»‡ tráº» thÃ¬ tÆ°Æ¡ng lai Ä‘áº¥t nÆ°á»›c má»›i mong Ä‘Æ°á»£c sÃ¡ng sá»§a.&lt;/p&gt;
</description>
      </item>
    
  </channel>
</rss>
