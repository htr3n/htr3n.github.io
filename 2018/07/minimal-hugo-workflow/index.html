<!DOCTYPE html><html lang="en"><head><link href="http://gmpg.org/xfn/11" rel="profile"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta http-equiv="Cache-Control" content="public"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1"><meta name="generator" content="Hugo 0.46"><title>A mininal Hugo blogging workflow ‚Ä¢ htr3n&#39;s</title><meta name="description" content="htr3n&#39;s blog :: technology, thoughts, opinions, and rants"><meta name="keywords" content="blog,java,php,python,golang,javascript,shell,thoughts,macos,apple,ti·∫øng vi·ªát,parental,family,apache,httpd,laravel,politics,critical thinking,ch√≠nh tr·ªã,lu·∫≠t,hi·∫øn ph√°p,x√£ h·ªôi,gia ƒë√¨nh"><meta name="twitter:card" content="summary"><meta name="twitter:title" content="A mininal Hugo blogging workflow"><meta name="twitter:description" content="Hugo is a blazingly fast static site generator based on Go. My first experience with Hugo was truly pleasant. I appreciate the separation of contents, presentations, and site generation logics in Hugo that leads to less effort for maintenance or switching themes.

"><meta property="og:title" content="A mininal Hugo blogging workflow"><meta property="og:description" content="Hugo is a blazingly fast static site generator based on Go. My first experience with Hugo was truly pleasant. I appreciate the separation of contents, presentations, and site generation logics in Hugo that leads to less effort for maintenance or switching themes.

"><meta property="og:type" content="article"><meta property="og:url" content="https://htr3n.github.io/2018/07/minimal-hugo-workflow/"><meta property="og:image" content="https://htr3n.github.io/2018/07/minimal-hugo-workflow/project-structure.png"><meta property="og:image" content="https://htr3n.github.io/2018/07/minimal-hugo-workflow/side-by-side.png"><meta property="article:published_time" content="2018-07-14T00:00:00&#43;00:00"><meta property="article:modified_time" content="2018-07-30T00:00:00&#43;00:00"><link rel="stylesheet" href="https://htr3n.github.io//css/hyde-hyde.css"><link rel="stylesheet" href="https://htr3n.github.io//css/print.min.css" media="print"><!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries --><!--[if lt IE 9]>
    <script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
    <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]--><!-- Icons --><link rel="apple-touch-icon-precomposed" sizes="144x144" href="/apple-touch-icon-144-precomposed.png"><link rel="shortcut icon" href="/favicon.png"></head><body><div class="sidebar"><div class="container"><div class="sidebar-about"><span class="site__title"><a href="https://htr3n.github.io/">htr3n&#39;s</a></span><div class="author-image"><img src="https://htr3n.github.io/img/avatar.png" alt="Author Image" class="img--circle img--headshot element--center"></div><p class="site__description">technology, thoughts, opinions, rants</p></div><div><ul class="sidebar-nav"><li><a href="/posts/"><span>Posts</span></a></li><li><a href="/portfolio/"><span>Portfolio</span></a></li><li><a href="/vn/"><span>Ti·∫øng Vi·ªát</span></a></li><li><a href="/about/"><span>About</span></a></li></ul></div><p><section class="social"><a href="https://twitter.com/htr3n"><i class="fab fa-twitter fa-lg" aria-hidden="true"></i></a> &nbsp;<a href="https://github.com/htr3n"><i class="fab fa-github fa-lg" aria-hidden="true"></i></a> &nbsp;<a href="https://linkedin.com/in/htr3n"><i class="fab fa-linkedin fa-lg" aria-hidden="true"></i></a> &nbsp;<a href="https://stackoverflow.com/users/339302"><i class="fab fa-stack-overflow fa-lg" aria-hidden="true"></i></a> &nbsp;<a href="https://keybase.io/htr3n"><i class="fab fa-keybase fa-lg" aria-hidden="true"></i></a> &nbsp;<a href="mailto:hoang.huy.tran&#43;blog@gmail.com"><i class="fas fa-at fa-lg" aria-hidden="true"></i></a></section></p><p class="copyright">&copy; 2018 htr3n. <a href="https://creativecommons.org/licenses/by-sa/4.0">Some Rights Reserved</a>.<br>Built with <a href="https://gohugo.io">Hugo</a> ‚ù§Ô∏è <a href="https://github.com/htr3n/hyde-hyde">hyde-hyde</a>.</p></div><div></div></div><div class="content container"><article><header><h1 class="post__title">A mininal Hugo blogging workflow</h1><div class="post__meta"><i class="fas fa-calendar-alt"></i> Jul 14, 2018 in <a class="badge badge-category" href="/categories/dev">DEV</a><br><i class="fas fa-tags"></i> <a class="badge badge-tag" href="/tags/hugo">hugo</a> <a class="badge badge-tag" href="/tags/markdown">markdown</a> <a class="badge badge-tag" href="/tags/css">css</a> <a class="badge badge-tag" href="/tags/sass">sass</a> <a class="badge badge-tag" href="/tags/minification">minification</a> <a class="badge badge-tag" href="/tags/gulp">gulp</a> <a class="badge badge-tag" href="/tags/npm">npm</a><br><i class="fas fa-clock"></i> 11 min read</div></header><div class="post"><p><a href="https://gohugo.io">Hugo</a> is a blazingly fast static site generator based on <a href="https://golang.org">Go</a>. My <a href="https://htr3n.github.io/2018/01/first-experience-with-hugo/">first experience with Hugo</a> was truly pleasant. I appreciate the separation of contents, presentations, and site generation logics in Hugo that leads to less effort for maintenance or switching themes.</p><p></p><p>On the run-time side, it&rsquo;s also nice that Hugo is often delivered as a reasonably fat executable binary (about 30~50 MB). We almost do not have to install anything else to make it work (although this is not entirely true since Hugo 0.43+).</p><p>Using Hugo to <a href="https://github.com/htr3n/htr3n-blog">build</a> this blog, I have learned a lot of things and tried to set up a simple blogging workflow to automate as much as possible the process from writing articles and altering themes to generating sites and watching for changes. My Hugo based blogging workflow comprises three aspects:</p><ul><li><em>Content</em> (mainly Markdown)</li><li><em>Presentation</em> (theming)</li><li><em>Site generation</em> (Hugo)</li></ul><p>I will take <a href="https://github.com/htr3n/htr3n-blog">my own Hugo blogging project</a> as an illustrative example. An overview of the project structure is shown in the picture below.</p><figure><img src="https://htr3n.github.io/2018/07/minimal-hugo-workflow/project-structure.png" alt="A simple Hugo project structure" style="max-width: 100%;"><figcaption><span class="img--caption">Figure 1. A simple Hugo project structure</span></figcaption></figure><p><strong>Some relevant project resources:</strong></p><ul><li><code>assets</code>: my pre-processing resources (e.g. SASS, LESS, images, JavaScript).</li><li><code>content</code>: Markdown contents</li><li><code>public</code>: the Web sites generated by Hugo</li><li><code>static</code>: resources (e.g. CSS, images, JavaScript) to be copied directly to <code>public</code> by Hugo.</li><li><code>themes</code>: Hugo themes (here I use my own theme <a href="https://github.com/htr3n/hyde-hyde"><em>hyde-hyde</em></a>)</li><li><code>package.json</code>: Node.js / NPM main configuration</li><li><code>gulpfile.js</code>: Gulp configuration</li></ul><h2 id="content">Content</h2><p>Among many nice features, Hugo supports Markdown contents out-of-the-box. Thus I can keep writing blog posts with my favourite Markdown editors. I have tried a number of editors in macOS, ranging from simple plain text with preview add-ons like <a href="https://www.sublimetext.com">Sublime Text</a>, <a href="https://macromates.com">TextMate</a>, <a href="https://atom.io">Atom</a>, <a href="https://code.visualstudio.com">Visual Studio Code</a>, <a href="https://www.vim.org">Vim</a> to some built-in ones like <a href="http://www.bear-writer.com">Bear</a>, <a href="https://bywordapp.com">Byword</a>, <a href="http://macdown.uranusjr.com">MacDown</a>, <a href="http://mouapp.com">Mou</a>, <a href="http://www.texts.io">Texts</a>, <a href="https://ia.net/writer">IA Writer</a>, <a href="http://marked2app.com">Marked</a> (only preview), <a href="https://typora.io">Typora</a>, to name but by no means completed. You can see <a href="https://github.com/mundimark/awesome-markdown-editors">here</a> a list including most of Markdown editors available and <a href="https://www.sitepoint.com/the-best-markdown-editors-for-mac">here</a> are some for macOS.</p><p>My first editor was Mou, due to its simplicity and highly customisable themes and rendering styles. Later on Mou&rsquo;s developer decided to sell its ownership, then resumed working on its beta making the software status a bit unclear and frustrated. <a href="https://uranusjr.com">Tzu-ping Chung</a> (@<a href="https://github.com/uranusjr">uranusjr</a>) has created a similar editor, namely, <a href="http://macdown.uranusjr.com">MacDown</a>, and <a href="https://github.com/MacDownApp/macdown">open-sourced it</a>. Then I started using MacDown with the existing Mou&rsquo;s themes and styles.</p><p>I could not remember exactly when and how I found <a href="https://typora.io">Typora</a> but it never ceases to amaze me. With Typora, I can enjoy seamless editing and rendering in the same window, i.e., I can write Markdown normally and directly see the content rendered. Typora is still free in its beta phase and will become paid software when released. It has become my Markdown editor of choice and will be in future should its price tag is reasonable. For quick fixes, I use any editors at hand, for instance Visual Studio Code when working on a Hugo project.</p><h2 id="presentation">Presentation</h2><p>The nice thing is that a Hugo theme is a standalone component for decorating Hugo generated sites. Nevertheless, I can override a theme&rsquo;s settings (e.g. layouts, styles) with my own versions with respect to <a href="https://gohugo.io/templates/lookup-order">Hugo lookup order</a>. A theme contains resources for templating, layouting, and styling. Hugo&rsquo;s templating and layouting have been discussed a lot around. Styling resources in a typical Hugo project can be found inside its theme&rsquo;s <code>static</code> or the project root&rsquo;s <code>static</code> and <code>assets</code>.</p><p>I used to work with CSS styles. After learning more about CSS preprocessors and attracted by the abstraction levels and tooling they provide, I decide to give a try and refactored my existing codebase to SCSS. Hence, my workflow should include support for SCSS (you might opt for LESS or Stylus but still can leverage a similar workflow with just right processing components).</p><h2 id="site-generation">Site Generation</h2><p>Hugo will be main element that generates the final Web site taking input resources from content and presentation components. Until version 0.43, Hugo has not provided support for SASS. Hence, many have to develop their own <a href="https://blog.carlmjohnson.net/post/2017/hugo-asset-pipeline">&lsquo;<em>asset pipeline</em>&lsquo;</a>, i.e., incorporating preprocessors and post-processors with Hugo generation process.</p><h3 id="endogenous-pipeline">Endogenous Pipeline</h3><p>This approach, also called <em>in-line pipeline</em>, only works since Hugo <a href="https://gohugo.io/news/0.43-relnotes">v0.43/extended</a> and later that supports processing SASS/CSS with consideration for <a href="https://en.wikipedia.org/wiki/Minification_%28programming%29">minification</a>, post-processing, and <a href="https://www.keycdn.com/support/what-is-cache-busting">cache busting</a>.</p><p>In Hugo templates, I can refer to SCSS files via <a href="https://gohugo.io/content-management/page-resources"><em>page resources</em></a>.</p><pre><code class="language-html">{{ $styles := resources.Get &quot;scss/hyde-hyde.scss&quot; | toCSS | postCSS (dict &quot;use&quot; &quot;autoprefixer&quot;) | minify | fingerprint }}
&lt;link rel=&quot;stylesheet&quot; href=&quot;{{ $styles.Permalink }}&quot; integrity=&quot;{{ $styles.Data.Integrity }}&quot;&gt;
</code></pre><p>Note that Hugo will look for <code>scss/hyde-hyde.scss</code> in the project&rsquo;s root and then the theme&rsquo;s root, in that order.</p><p>Hugo retrieves the resource <code>hyde-hyde.scss</code> using <code>Resources.Get</code>, then <a href="https://gohugo.io/hugo-pipes/scss-sass">transforms it</a> into <code>hyde-hyde.css</code> and passes it to <a href="https://gohugo.io/hugo-pipes/postcss">PostCSS</a> for <a href="https://github.com/postcss/autoprefixer">autoprefixing</a>. After that, it <a href="https://gohugo.io/hugo-pipes/minification/">minifies</a> the CSS and generates a <em>fingerprinted version</em>. The second line simply links the resulting <code>hyde-hyde.css</code> with HTML via the variable <code>$style</code>. The result in the generated HTML will be like this (note that the code can be different to yours).</p><pre><code class="language-html">&lt;link rel=&quot;stylesheet&quot; href=&quot;http://localhost:1313/scss/hyde-hyde.4ff234ab46aa5302c7e0d2f35b9c76a8bba9fe42a9e8a6c7c47df7f85b8de122.css&quot; integrity=&quot;sha256-T/I0q0aqUwLH4NLzW5x2qLup/kKp6KbHxH33&amp;#43;FuN4SI=&quot;&gt;
</code></pre><p>The fingerprint code is for <em>cache busting</em> and only changed when the source file is altered.</p><p>The biggest advantage of <em>in-line pipeline</em> is that Hugo already provides a certain level of built-in support. Hugo&rsquo;s <em>live reload</em>, i.e. serving the resulting sites live and automatically refreshing whenever there are changes of contents or themes, also works superbly for this case.</p><p>For many scenarios, we can use this approach instead of configuring complex tools like Gulp, Grunt, or Webpack. To be precise, I do need to install extra tools, which are <code>postcss-cli</code> and <code>autoprefixer</code>, for the aforementioned example to work and Hugo 0.43 extended version <a href="https://github.com/Homebrew/homebrew-core/issues/29898">partially depends on Cgo/libc++</a>.</p><pre><code class="language-sh">$ npm i -g postcss-cli autoprefixer
</code></pre><p>Another downside to consider is that, in this way, external tools like <code>postcss</code> will slow down Hugo.</p><blockquote><p><strong>Note</strong></p><p>As I checked out <a href="https://discourse.gohugo.io/t/how-to-use-source-maps-with-hugo-0-43/12826">this thread</a> and <a href="https://discourse.gohugo.io/t/how-to-use-source-maps-with-hugo-0-43/12826/9">tried on my project</a>, Hugo&rsquo;s extensions like <code>postCSS</code>, <code>minify</code>, and <code>fingerprint</code> could mess up CSS sourcemaps. If you need sourcemaps for developing and debugging, please ignore them and consider the <em>exogenous pipeline</em>.</p></blockquote><h3 id="exogenous-pipeline">Exogenous Pipeline</h3><p>When working on more complex asset pipelining, we have to involve external tools to build an <em>exogenous asset pipeline</em>. This is also my blogging workflow before Hugo v0.43. Now, I can mostly get rid of this <em>exogenous pipeline</em>. Here we will walk through this approach merely for the sake of completeness.</p><p>There are several ways to handle Web resources. For instance, Netlify provides a boilerplate project, namely, <a href="https://github.com/netlify/victor-hugo"><em>victor-hugo</em></a> for starting a new Hugo project and preparing to deploy to its hosting. This boilerplate employs <a href="https://gulpjs.com">Gulp</a>, <a href="https://webpack.js.org">Webpack</a>, <a href="https://github.com/postcss/postcss">PostCSS</a>, and <a href="https://browsersync.io">Browsersync</a> around Hugo. There are many developers rooting for Gulp <a href="(#references)">[1, 2, 3, 4, 5]</a> whilst some others go for Grunt <a href="(#references)">[6]</a> or Webpack <a href="#references">[7, 8]</a>. And even few brave ones use <a href="http://thecodestead.com/post/how-to-use-npm-as-a-build-tool-with-hugo">pure NPM</a> <a href="#references">[9, 10]</a>.</p><p>For starter projects with Hugo, you might want to consider some useful projects such as <a href="https://github.com/jbrodriguez/hugulp">hugulp</a>, <a href="http://ktmud.github.io/huggle/en/intro">Huggle</a>, <a href="https://github.com/vseventer/hugo-webpack-boilerplate">hugo-webpack-boilerplate</a>. In my project, I combine Gulp with NPM and leverage some Gulp&rsquo;s components for the asset pipeline.</p><ul><li><em>SASS/SCSS to CSS</em>: a sensible choice is <a href="https://www.npmjs.com/package/gulp-sass"><em>gulp-sass</em></a>.</li><li><em>Sourcemaps</em> (optional): this is not mandatory but very handy for developing and debugging phase. I pick <a href="https://www.npmjs.com/package/gulp-sourcemaps"><em>gulp-sourcemaps</em></a>.</li><li><em>Autoprefixing</em>: it helps adding vendor-specific prefixes to CSS rules. We can use <a href="https://www.npmjs.com/package/gulp-autoprefixer"><em>gulp-autoprefixer</em></a> but be careful to combine with <em>gulp-sourcemaps</em> as it is <a href="https://github.com/gulp-sourcemaps/gulp-sourcemaps/wiki/Plugins-with-gulp-sourcemaps-support#css">currently broken</a>. I decide to use¬†<a href="https://www.npmjs.org/package/gulp-postcss"><em>gulp-postcss</em></a> along with <a href="https://www.npmjs.com/package/autoprefixer"><em>postcss-autoprefixer</em></a> instead.</li><li><em>Minification</em>: <a href="https://github.com/postcss/postcss">PostCSS</a> provides many plugins for CSS post-processing alongside <em>autoprefixer</em>. I choose <a href="http://cssnano.co"><em>cssnano</em></a> to minify the CSSs.</li></ul><pre><code class="language-sh">$ npm i -D gulp@next gulp-sass gulp-postcss autoprefixer gulp-sourcemaps cssnano
</code></pre><p>In the same way, you can add more components to the list. Here I rather keep it short and simple for illustrative purpose. Now I start configuring Gulp to use them in my project.</p><script src="//gist.github.com/htr3n/eb8dde0659b066367d438879d6650e54.js"></script><p>Note that the syntax is Gulp v4.0.</p><p>Now I just simply invoke Gulp to trigger its chaining pipeline.</p><pre><code class="language-sh">$ gulp
[10:23:40] Using gulpfile ~/working/dev/htr3n-blog/gulpfile.js
[10:23:40] Starting 'default'...
[10:23:40] Starting 'watch'...
[10:23:40] Starting 'scss'...
[10:23:40] Finished 'scss' after 58 ms
[10:23:40] Starting '&lt;anonymous&gt;'...
</code></pre><p>Gulp will transform <code>hyde-hyde.scss</code> into <code>hyde-hyde.css</code> which is autoprefixed and saved in <code>static/css</code> along with its sourcemaps. In the Hugo templates, I refer to <code>hyde-hyde.css</code> normally.</p><pre><code class="language-html">&lt;link rel=&quot;stylesheet&quot; href=&quot;{{ .Site.BaseURL }}/css/hyde-hyde.css&quot;&gt;
</code></pre><p>I can combine <a href="https://github.com/gulpjs/gulp/blob/master/docs/API.md#gulpwatchglobs-opts-fn">Gulp.watch()</a> with Hugo&rsquo;s <em>live reload</em> feature so that both will continuously monitors for changes and serve them instantly. This way, whenever I made any changes in a post in Typora, a SCSS/CSS file, or Go+HTML layout, I will instantly see the generated HTMLs.</p><pre><code class="language-sh">$ hugo server -w --cleanDestinationDir
                   | EN
+------------------+-----+
  Pages            | 320
  Paginator pages  |   0
  Non-page files   |  14
  Static files     |  14
  Processed images |   0
  Aliases          |   0
  Sitemaps         |   1
  Cleaned          |   0

Total in 193 ms
Watching for changes in /Users/htr3n/working/dev/htr3n-blog/{assets,content,data,layouts,static,themes}
Watching for config changes in /Users/htr3n/working/dev/htr3n-blog/config.toml
Serving pages from memory
Running in Fast Render Mode. For full rebuilds on change: hugo server --disableFastRender
Web Server is available at http://localhost:1313/ (bind address 127.0.0.1)
Press Ctrl+C to stop
</code></pre><p>Please note that, by default, Hugo will only keep watching the following folders <code>{assets, content, data, layouts, static, themes}</code>. Hence, our SCSS files might not be in one of these folders but we must ensure the resources generated from Gulp are. As I illustrated <em>endogenous pipeline</em> above, my SCSSs are kept in <code>assets</code> such that Hugo <code>Resources.Get</code> can find them. If you opt for <em>exogenous pipeline</em>, you should put the preprocessing resources elsewhere.</p><p>After all, we can open the browser to <a href="http://localhost:1313">http://localhost:1313</a> and enjoy the experience of live editing side-by-side.</p><figure><img src="https://htr3n.github.io/2018/07/minimal-hugo-workflow/side-by-side.png" alt="Typora (left) and the generated HTML pages (right)" width="99%" style="max-width: 100%;"><figcaption><span class="img--caption">Figure 2. Typora (left) and the generated HTML pages (right)</span></figcaption></figure><p>At this point, we seem to miss <em>cache busting</em> which is provided in the <em>endogenous pipeline</em> with Hugo. That is also the biggest advantage of using external tools as we need to establish the connections between Hugo generated resources and Gulp&rsquo;s manipulated resources on our own.</p><p>It is a tad complicated as you can find <a href="https://byteplumbing.net/2017/08/static-asset-cache-busting-for-hugo">here</a>, <a href="https://blog.carlmjohnson.net/post/2017/hugo-asset-pipeline/">here</a> and <a href="http://danbahrami.io/articles/building-a-production-website-with-hugo-and-gulp-js">here</a>. In summary, the idea is to generate <a href="https://en.wikipedia.org/wiki/Hash_function"><em>hash signatures</em></a> for your CSSs, for instance, using <a href="https://en.wikipedia.org/wiki/MD5">MD5</a> or <a href="https://en.wikipedia.org/wiki/Secure_Hash_Algorithms">SHA</a>, store the relevant data as dictionary <a href="https://en.wikipedia.org/wiki/Key-value_database">key-value</a> pairs, e.g. <code>'hyde-hyde.css' =&gt; 'hyde-hyde.the-latest-hash-number.css'</code>, then use Hugo‚Äôs¬†<a href="https://gohugo.io/templates/data-templates/">data templates</a>¬†feature to refer to those pairs. This approach has actually been implemented in the aforementioned Hugo&rsquo;s extensions.</p><p>In case you really need <em>cache busting</em>, we can utilise Hugo v0.43 extensions to complement Gulp on this matter (üêµ). We just modify the Gulp configuration a bit so that the output folder is no longer <code>static</code> but <code>assets/css</code> as Hugo&rsquo;s <code>Resources.Get</code> rather strictly looks for resources in <code>assets</code>.</p><pre><code class="language-javascript">var outputFolder = 'assets/css';
</code></pre><p>And in the HTML, we use similar templates without <code>toCSS</code> and <code>postCSS</code> that are done with Gulp.</p><pre><code class="language-html">{{ $styles := resources.Get &quot;css/hyde-hyde.css&quot; | minify | fingerprint }}
&lt;link rel=&quot;stylesheet&quot; href=&quot;{{ $styles.Permalink }}&quot; integrity=&quot;{{ $styles.Data.Integrity }}&quot;&gt;
</code></pre><p>It seems Gulp becomes redundant here as Hugo can perform <code>toCSS</code>, <code>postCSS</code>, and <code>minify</code> just fine. Nonetheless, in case you need other functionalities that are not yet provided by Hugo, Gulp will be what you should ask for. Besides, as per <strong>Note</strong> above, there are still some issues with Hugo&rsquo;s extension regarding sourcemaps whilst Gulp&rsquo;s asset pipeline above works flawlessly.</p><h4 id="more-automation-please">More automation, please!!!</h4><p>There are still two manual tasks for the <em>exogenous pipeline</em>, one for invoking Gulp and another one to start Hugo. Aiming to automate the workflow as much as possible, we can merge two tasks using one execution script, via NPM.</p><p>There are a number of options for running tasks concurrently in NPM including <a href="https://www.npmjs.com/package/npm-run-all">npm-run-all</a>, <a href="https://www.npmjs.com/package/npm-run-parallel">npm-run-parallel</a>, <a href="https://www.npmjs.com/package/concurrently">concurrently</a>, or using <a href="https://en.wikipedia.org/wiki/Background_process">background process</a> if you are using Linux/macOS alike. Even Gulp also has some helper plugins like <a href="https://www.npmjs.com/package/gulp-exec">gulp-exec</a> to execute child processes, <a href="https://www.npmjs.com/package/gulp-nodemon">gulp-nodemon</a> to run in <a href="https://en.wikipedia.org/wiki/Daemon_%28computing%29">daemon mode</a>, and Gulp 4.0+ has <a href="https://github.com/gulpjs/gulp/blob/4.0/docs/API.md#gulpparalleltasks">Gulp.parallel()</a>.</p><p>Let&rsquo;s consider a simple example with <a href="https://www.npmjs.com/package/npm-run-all">npm-run-all</a>. Other tools can be used similarly.</p><pre><code class="language-sh">$ npm i -D npm-run-all
</code></pre><p>Then define some simple scripts in <code>package.json</code> for executing Gulp and Hugo.</p><script src="//gist.github.com/htr3n/cbfb959546392ef5e948c86c0c05af9d.js"></script><p>Given no issues, we should execute <code>npm run dev</code> and see both Hugo and Gulp running in parallel.</p><h2 id="further-optimisations">Further Optimisations</h2><p>As you might have noticed, the Web resources (e.g. HTML, CSS) generated by Hugo may contain a lot of whitespace and/or line-breaks. You can easily see this when viewing the source code of the generated Web pages.</p><p>During the developing phase in my local machines, I always keep the generated resources untouched so that I can read the code for debugging or analysing. When deploying to hosting servers, we don&rsquo;t often preserve the readability of the source code as the end-users mainly see and interact with the beautiful pages rendered by Web browsers.</p><p>Therefore, I configure a simple Gulp task to optimise the generated Web resources before pushing them to the servers. What I need is <a href="https://www.npmjs.com/package/gulp-htmlmin"><code>gulp-htmlmin</code></a>&mdash;a Gulp front-end of <a href="https://github.com/kangax/html-minifier"><em>html-minifier</em></a>. Please refer to <em>html-minifier</em>&rsquo;s <a href="https://github.com/kangax/html-minifier">documentations</a> should you need to learn further about its options.</p><pre><code class="language-sh">$ npm i -D gulp-htmlmin
</code></pre><p>And I create a simple Gulp task for minifying Web resources that can be invoked at command line as <code>gulp minify-html</code>. This task should be performed after calling Hugo to generate the Web pages.</p><script src="//gist.github.com/htr3n/d91b6937e88050c4e7e820d82be2c2e1.js"></script><p>The main idea is to use <code>gulp-htmlmin</code> to minify HTMLs, JavaScripts, and CSSs whilst leaving others intact. Note that the place of the optimised resources is the folder <code>dist</code> inside Hugo project.</p><h2 id="references">References</h2><ol><li><a href="https://markus.oberlehner.net/blog/using-gulp-and-uncss-in-combination-with-sass-based-hugo-themes">https://markus.oberlehner.net/blog/using-gulp-and-uncss-in-combination-with-sass-based-hugo-themes</a></li><li><a href="http://danbahrami.io/articles/building-a-production-website-with-hugo-and-gulp-js">http://danbahrami.io/articles/building-a-production-website-with-hugo-and-gulp-js</a></li><li><a href="https://devotter.com/blog/using-gulp-with-hugo">https://devotter.com/blog/using-gulp-with-hugo</a></li><li><a href="https://adamwills.io/blog/discovering-hugo-2-workflow">https://adamwills.io/blog/discovering-hugo-2-workflow</a></li><li><a href="http://www.sagarganatra.com/2016/12/building-your-static-site-with-hugo.html">http://www.sagarganatra.com/2016/12/building-your-static-site-with-hugo.html</a></li><li><a href="http://tjm.io/grunt-hugo">http://tjm.io/grunt-hugo</a></li><li><a href="https://byteplumbing.net/2017/08/static-asset-cache-busting-for-hugo">https://byteplumbing.net/2017/08/static-asset-cache-busting-for-hugo</a></li><li><a href="https://tomodwyer.com/post/2017-10-22-hugo---webpack--%EF%B8%8F/">https://tomodwyer.com/post/2017-10-22-hugo---webpack--%EF%B8%8F/</a></li><li><a href="http://thecodestead.com/post/how-to-use-npm-as-a-build-tool-with-hugo">http://thecodestead.com/post/how-to-use-npm-as-a-build-tool-with-hugo</a></li><li><a href="https://www.henriksommerfeld.se/build-steps-using-npm-scripts-for-my-hugo-blog">https://www.henriksommerfeld.se/build-steps-using-npm-scripts-for-my-hugo-blog</a></li></ol></div><div class="post--navigation post--navigation-single"><a href="/2018/06/bootstrapping-macos-workspace/" class="post--navigation-prev"><i aria-hidden="true" class="fa fa-chevron-left"></i> <span class="navigation-tittle">Bootstrapping macOS workspace</span> </a><a href="/2018/07/faster-zsh/" class="post--navigation-next"><span class="navigation-tittle">Faster and enjoyable ZSH (maybe)</span> <i aria-hidden="true" class="fa fa-chevron-right"></i></a></div><div class="post__related"><h2>Related Articles</h2><ul class="related-posts"><li><span class="list__title--small"><a href="/2018/05/integration-laravel-gentelella/">Integration Laravel 5 and Gentelella admin theme</a> <time class="pull-right hidden-tablet">May 09 &#39;18</time></span></li><li><span class="list__title--small"><a href="/2018/04/node.js-package-managers-npm-and-yarn/">Node.js package managers: NPM and Yarn</a> <time class="pull-right hidden-tablet">Apr 23 &#39;18</time></span></li><li><span class="list__title--small"><a href="/2018/03/confusing-hugo-issues-datetime-and-isset/">Confusing Hugo issues: datetime and &#39;isset&#39;</a> <time class="pull-right hidden-tablet">Mar 31 &#39;18</time></span></li><li><span class="list__title--small"><a href="/2018/01/first-experience-with-hugo/">First experience with Hugo</a> <time class="pull-right hidden-tablet">Jan 23 &#39;18</time></span></li></ul></div><div id="disqus_thread"></div><script type="text/javascript">(function () {
    if (location.hostname === "localhost" ||
      location.hostname === "127.0.0.1" ||
      location.hostname === "") {
      return;
    }
    var dsq = document.createElement('script');
    dsq.type = 'text/javascript';
    dsq.async = true;
    var disqus_shortname = 'https-htr3n-github-io';
    dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
    (document.getElementsByTagName('head')[0] || 
      document.getElementsByTagName('body')[0]).appendChild(dsq);
  })();</script><noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript><a href="http://disqus.com/" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a></article></div><script>var doNotTrack = false;
if (!doNotTrack) {
	window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;
	ga('create', 'UA-112764962-1', 'auto');
	
	ga('send', 'pageview');
}</script><script async src="https://www.google-analytics.com/analytics.js"></script><script defer="defer" src="https://use.fontawesome.com/releases/v5.2.0/js/all.js" integrity="sha384-4oV5EgaV02iISL2ban6c/RmotsABqE4yZxZLcYMAdG7FAPsyHYAPpywE9PJo+Khy" crossorigin="anonymous"></script><noscript id="deferred-styles"><link rel="stylesheet" type="text/css" href="https://htr3n.github.io/css/atom-one-light.min.css"></noscript><script>var loadDeferredStyles = function () {
    var addStylesNode = document.getElementById("deferred-styles");
    if (addStylesNode) {
      var replacement = document.createElement("div");
      replacement.innerHTML = addStylesNode.textContent;
      document.body.appendChild(replacement);
      addStylesNode.parentElement.removeChild(addStylesNode);
    }
  };
  var raf = window.requestAnimationFrame || window.mozRequestAnimationFrame ||
    window.webkitRequestAnimationFrame || window.msRequestAnimationFrame;
  if (raf) raf(function () {
    window.setTimeout(loadDeferredStyles, 0);
  });
  else
    window.addEventListener('load', loadDeferredStyles);</script><script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js"></script><script type="text/javascript">hljs.initHighlightingOnLoad();</script></body></html>